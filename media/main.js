/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={997(e){var t;globalThis,t=()=>(()=>{"use strict";var e={949:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CronParser=void 0;var r=n(515),o=function(){function e(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1),this.expression=e,this.dayOfWeekStartIndexZero=t,this.monthStartIndexZero=n}return e.prototype.parse=function(){var e,t;if((null!==(e=this.expression)&&void 0!==e?e:"").startsWith("@")){var n=this.parseSpecial(this.expression);t=this.extractParts(n)}else t=this.extractParts(this.expression);return this.normalize(t),this.validate(t),t},e.prototype.parseSpecial=function(e){var t={"@yearly":"0 0 1 1 *","@annually":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@midnight":"0 0 * * *","@hourly":"0 * * * *"}[e];if(!t)throw new Error("Unknown special expression.");return t},e.prototype.extractParts=function(e){if(!this.expression)throw new Error("cron expression is empty");for(var t=e.trim().split(/[ ]+/),n=0;n<t.length;n++)if(t[n].includes(",")){var r=t[n].split(",").map(function(e){return e.trim()}).filter(function(e){return""!==e}).map(function(e){return isNaN(Number(e))?e:Number(e)}).filter(function(e){return null!==e&&""!==e});0===r.length&&r.push("*"),r.sort(function(e,t){return null!==e&&null!==t?e-t:0}),t[n]=r.map(function(e){return null!==e?e.toString():""}).join(",")}if(t.length<5)throw new Error("Expression has only ".concat(t.length," part").concat(1==t.length?"":"s",". At least 5 parts are required."));if(5==t.length)t.unshift(""),t.push("");else if(6==t.length)/\d{4}$/.test(t[5])||"?"==t[4]||"?"==t[2]?t.unshift(""):t.push("");else if(t.length>7)throw new Error("Expression has ".concat(t.length," parts; too many!"));return t},e.prototype.normalize=function(e){var t=this;if(e[3]=e[3].replace("?","*"),e[5]=e[5].replace("?","*"),e[2]=e[2].replace("?","*"),0==e[0].indexOf("0/")&&(e[0]=e[0].replace("0/","*/")),0==e[1].indexOf("0/")&&(e[1]=e[1].replace("0/","*/")),0==e[2].indexOf("0/")&&(e[2]=e[2].replace("0/","*/")),0==e[3].indexOf("1/")&&(e[3]=e[3].replace("1/","*/")),0==e[4].indexOf("1/")&&(e[4]=e[4].replace("1/","*/")),0==e[6].indexOf("1/")&&(e[6]=e[6].replace("1/","*/")),e[5]=e[5].replace(/(^\d)|([^#/\s]\d)/g,function(e){var n=e.replace(/\D/,""),r=n;return t.dayOfWeekStartIndexZero?"7"==n&&(r="0"):r=(parseInt(n)-1).toString(),e.replace(n,r)}),"L"==e[5]&&(e[5]="6"),"?"==e[3]&&(e[3]="*"),e[3].indexOf("W")>-1&&(e[3].indexOf(",")>-1||e[3].indexOf("-")>-1))throw new Error("The 'W' character can be specified only when the day-of-month is a single day, not a range or list of days.");var n={SUN:0,MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6};for(var r in n)e[5]=e[5].replace(new RegExp(r,"gi"),n[r].toString());e[4]=e[4].replace(/(^\d{1,2})|([^#/\s]\d{1,2})/g,function(e){var n=e.replace(/\D/,""),r=n;return t.monthStartIndexZero&&(r=(parseInt(n)+1).toString()),e.replace(n,r)});var o={JAN:1,FEB:2,MAR:3,APR:4,MAY:5,JUN:6,JUL:7,AUG:8,SEP:9,OCT:10,NOV:11,DEC:12};for(var i in o)e[4]=e[4].replace(new RegExp(i,"gi"),o[i].toString());"0"==e[0]&&(e[0]=""),/\*|\-|\,|\//.test(e[2])||!/\*|\//.test(e[1])&&!/\*|\//.test(e[0])||(e[2]+="-".concat(e[2]));for(var s=0;s<e.length;s++)if(-1!=e[s].indexOf(",")&&(e[s]=e[s].split(",").filter(function(e){return""!==e}).join(",")||"*"),"*/1"==e[s]&&(e[s]="*"),e[s].indexOf("/")>-1&&!/^\*|\-|\,/.test(e[s])){var a=null;switch(s){case 4:a="12";break;case 5:a="6";break;case 6:a="9999";break;default:a=null}if(null!==a){var l=e[s].split("/");e[s]="".concat(l[0],"-").concat(a,"/").concat(l[1])}}},e.prototype.validate=function(e){var t="0-9,\\-*/";this.validateOnlyExpectedCharactersFound(e[0],t),this.validateOnlyExpectedCharactersFound(e[1],t),this.validateOnlyExpectedCharactersFound(e[2],t),this.validateOnlyExpectedCharactersFound(e[3],"0-9,\\-*/LW"),this.validateOnlyExpectedCharactersFound(e[4],t),this.validateOnlyExpectedCharactersFound(e[5],"0-9,\\-*/L#"),this.validateOnlyExpectedCharactersFound(e[6],t),this.validateAnyRanges(e)},e.prototype.validateAnyRanges=function(e){r.default.secondRange(e[0]),r.default.minuteRange(e[1]),r.default.hourRange(e[2]),r.default.dayOfMonthRange(e[3]),r.default.monthRange(e[4],this.monthStartIndexZero),r.default.dayOfWeekRange(e[5],this.dayOfWeekStartIndexZero)},e.prototype.validateOnlyExpectedCharactersFound=function(e,t){var n=e.match(new RegExp("[^".concat(t,"]+"),"gi"));if(n&&n.length)throw new Error("Expression contains invalid values: '".concat(n.toString(),"'"))},e}();t.CronParser=o},333:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionDescriptor=void 0;var r=n(823),o=n(949),i=function(){function e(t,n){if(this.expression=t,this.options=n,this.expressionParts=new Array(5),!this.options.locale&&e.defaultLocale&&(this.options.locale=e.defaultLocale),!e.locales[this.options.locale]){var r=Object.keys(e.locales)[0];console.warn("Locale '".concat(this.options.locale,"' could not be found; falling back to '").concat(r,"'.")),this.options.locale=r}this.i18n=e.locales[this.options.locale],void 0===n.use24HourTimeFormat&&(n.use24HourTimeFormat=this.i18n.use24HourTimeFormatByDefault())}return e.toString=function(t,n){var r=void 0===n?{}:n,o=r.throwExceptionOnParseError,i=void 0===o||o,s=r.verbose,a=void 0!==s&&s,l=r.dayOfWeekStartIndexZero,c=void 0===l||l,u=r.monthStartIndexZero,d=void 0!==u&&u,h=r.use24HourTimeFormat,f=r.locale,p=void 0===f?null:f,g=r.tzOffset,m={throwExceptionOnParseError:i,verbose:a,dayOfWeekStartIndexZero:c,monthStartIndexZero:d,use24HourTimeFormat:h,locale:p,tzOffset:void 0===g?0:g};return m.tzOffset&&console.warn("'tzOffset' option has been deprecated and will be removed in a future release."),new e(t,m).getFullDescription()},e.initialize=function(t,n){void 0===n&&(n="en"),e.specialCharacters=["/","-",",","*"],e.defaultLocale=n,t.load(e.locales)},e.prototype.getFullDescription=function(){var e="";try{var t=new o.CronParser(this.expression,this.options.dayOfWeekStartIndexZero,this.options.monthStartIndexZero);this.expressionParts=t.parse();var n=this.getTimeOfDayDescription(),r=this.getDayOfMonthDescription(),i=this.getMonthDescription();e+=n+r+this.getDayOfWeekDescription()+i+this.getYearDescription(),e=(e=this.transformVerbosity(e,!!this.options.verbose)).charAt(0).toLocaleUpperCase()+e.substr(1)}catch(t){if(this.options.throwExceptionOnParseError)throw"".concat(t);e=this.i18n.anErrorOccuredWhenGeneratingTheExpressionD()}return e},e.prototype.getTimeOfDayDescription=function(){var t=this.expressionParts[0],n=this.expressionParts[1],o=this.expressionParts[2],i="";if(r.StringUtilities.containsAny(n,e.specialCharacters)||r.StringUtilities.containsAny(o,e.specialCharacters)||r.StringUtilities.containsAny(t,e.specialCharacters))if(t||!(n.indexOf("-")>-1)||n.indexOf(",")>-1||n.indexOf("/")>-1||r.StringUtilities.containsAny(o,e.specialCharacters))if(!t&&o.indexOf(",")>-1&&-1==o.indexOf("-")&&-1==o.indexOf("/")&&!r.StringUtilities.containsAny(n,e.specialCharacters)){var s=o.split(",");i+=this.i18n.at();for(var a=0;a<s.length;a++)i+=" ",i+=this.formatTime(s[a],n,""),a<s.length-2&&(i+=","),a==s.length-2&&(i+=this.i18n.spaceAnd())}else{var l=this.getSecondsDescription(),c=this.getMinutesDescription(),u=this.getHoursDescription();if((i+=l)&&c&&(i+=", "),i+=c,c===u)return i;i&&u&&(i+=", "),i+=u}else{var d=n.split("-");i+=r.StringUtilities.format(this.i18n.everyMinuteBetweenX0AndX1(),this.formatTime(o,d[0],""),this.formatTime(o,d[1],""))}else i+=this.i18n.atSpace()+this.formatTime(o,n,t);return i},e.prototype.getSecondsDescription=function(){var e=this;return this.getSegmentDescription(this.expressionParts[0],this.i18n.everySecond(),function(e){return e},function(t){return r.StringUtilities.format(e.i18n.everyX0Seconds(t),t)},function(t){return e.i18n.secondsX0ThroughX1PastTheMinute()},function(t){return"0"==t?"":parseInt(t)<20?e.i18n.atX0SecondsPastTheMinute(t):e.i18n.atX0SecondsPastTheMinuteGt20()||e.i18n.atX0SecondsPastTheMinute(t)})},e.prototype.getMinutesDescription=function(){var e=this,t=this.expressionParts[0],n=this.expressionParts[2];return this.getSegmentDescription(this.expressionParts[1],this.i18n.everyMinute(),function(e){return e},function(t){return r.StringUtilities.format(e.i18n.everyX0Minutes(t),t)},function(t){return e.i18n.minutesX0ThroughX1PastTheHour()},function(r){try{return"0"==r&&-1==n.indexOf("/")&&""==t?e.i18n.everyHour():parseInt(r)<20?e.i18n.atX0MinutesPastTheHour(r):e.i18n.atX0MinutesPastTheHourGt20()||e.i18n.atX0MinutesPastTheHour(r)}catch(t){return e.i18n.atX0MinutesPastTheHour(r)}})},e.prototype.getHoursDescription=function(){var e=this,t=this.expressionParts[2],n=0,o=[];t.split("/")[0].split(",").forEach(function(e){var t=e.split("-");2===t.length&&o.push({value:t[1],index:n+1}),n+=t.length});var i=0;return this.getSegmentDescription(t,this.i18n.everyHour(),function(t){var n=o.find(function(e){return e.value===t&&e.index===i})&&"0"!==e.expressionParts[1];return i++,n?e.formatTime(t,"59",""):e.formatTime(t,"0","")},function(t){return r.StringUtilities.format(e.i18n.everyX0Hours(t),t)},function(t){return e.i18n.betweenX0AndX1()},function(t){return e.i18n.atX0()})},e.prototype.getDayOfWeekDescription=function(){var e=this,t=this.i18n.daysOfTheWeek();return"*"==this.expressionParts[5]?"":this.getSegmentDescription(this.expressionParts[5],this.i18n.commaEveryDay(),function(n,r){var o=n;n.indexOf("#")>-1?o=n.substring(0,n.indexOf("#")):n.indexOf("L")>-1&&(o=o.replace("L",""));var i=parseInt(o);if(e.options.tzOffset){var s=e.expressionParts[2],a=parseInt(s)+(e.options.tzOffset?e.options.tzOffset:0);a>=24?i++:a<0&&i--,i>6?i=0:i<0&&(i=6)}var l=e.i18n.daysOfTheWeekInCase?e.i18n.daysOfTheWeekInCase(r)[i]:t[i];if(n.indexOf("#")>-1){var c=null,u=n.substring(n.indexOf("#")+1),d=n.substring(0,n.indexOf("#"));switch(u){case"1":c=e.i18n.first(d);break;case"2":c=e.i18n.second(d);break;case"3":c=e.i18n.third(d);break;case"4":c=e.i18n.fourth(d);break;case"5":c=e.i18n.fifth(d)}l=c+" "+l}return l},function(t){return 1==parseInt(t)?"":r.StringUtilities.format(e.i18n.commaEveryX0DaysOfTheWeek(t),t)},function(t){var n=t.substring(0,t.indexOf("-"));return"*"!=e.expressionParts[3]?e.i18n.commaAndX0ThroughX1(n):e.i18n.commaX0ThroughX1(n)},function(t){var n=null;if(t.indexOf("#")>-1){var r=t.substring(t.indexOf("#")+1),o=t.substring(0,t.indexOf("#"));n=e.i18n.commaOnThe(r,o).trim()+e.i18n.spaceX0OfTheMonth()}else n=t.indexOf("L")>-1?e.i18n.commaOnTheLastX0OfTheMonth(t.replace("L","")):"*"!=e.expressionParts[3]?e.i18n.commaAndOnX0():e.i18n.commaOnlyOnX0(t);return n})},e.prototype.getMonthDescription=function(){var e=this,t=this.i18n.monthsOfTheYear();return this.getSegmentDescription(this.expressionParts[4],"",function(n,r){return r&&e.i18n.monthsOfTheYearInCase?e.i18n.monthsOfTheYearInCase(r)[parseInt(n)-1]:t[parseInt(n)-1]},function(t){return 1==parseInt(t)?"":r.StringUtilities.format(e.i18n.commaEveryX0Months(t),t)},function(t){return e.i18n.commaMonthX0ThroughMonthX1()||e.i18n.commaX0ThroughX1()},function(t){return e.i18n.commaOnlyInMonthX0?e.i18n.commaOnlyInMonthX0():e.i18n.commaOnlyInX0()})},e.prototype.getDayOfMonthDescription=function(){var e=this,t=null,n=this.expressionParts[3];switch(n){case"L":t=this.i18n.commaOnTheLastDayOfTheMonth();break;case"WL":case"LW":t=this.i18n.commaOnTheLastWeekdayOfTheMonth();break;default:var o=n.match(/(\d{1,2}W)|(W\d{1,2})/);if(o){var i=parseInt(o[0].replace("W","")),s=1==i?this.i18n.firstWeekday():r.StringUtilities.format(this.i18n.weekdayNearestDayX0(),i.toString());t=r.StringUtilities.format(this.i18n.commaOnTheX0OfTheMonth(),s);break}var a=n.match(/L-(\d{1,2})/);if(a){var l=a[1];t=r.StringUtilities.format(this.i18n.commaDaysBeforeTheLastDayOfTheMonth(l),l);break}if("*"==n&&"*"!=this.expressionParts[5])return"";t=this.getSegmentDescription(n,this.i18n.commaEveryDay(),function(t){return"L"==t?e.i18n.lastDay():e.i18n.dayX0?r.StringUtilities.format(e.i18n.dayX0(),t):t},function(t){return"1"==t?e.i18n.commaEveryDay():e.i18n.commaEveryX0Days(t)},function(t){return e.i18n.commaBetweenDayX0AndX1OfTheMonth(t)},function(t){return e.i18n.commaOnDayX0OfTheMonth(t)})}return t},e.prototype.getYearDescription=function(){var e=this;return this.getSegmentDescription(this.expressionParts[6],"",function(e){return/^\d+$/.test(e)?new Date(parseInt(e),1).getFullYear().toString():e},function(t){return r.StringUtilities.format(e.i18n.commaEveryX0Years(t),t)},function(t){return e.i18n.commaYearX0ThroughYearX1()||e.i18n.commaX0ThroughX1()},function(t){return e.i18n.commaOnlyInYearX0?e.i18n.commaOnlyInYearX0():e.i18n.commaOnlyInX0()})},e.prototype.getSegmentDescription=function(e,t,n,o,i,s){var a=null,l=e.indexOf("/")>-1,c=e.indexOf("-")>-1,u=e.indexOf(",")>-1;if(e)if("*"===e)a=t;else if(l||c||u)if(u){for(var d=e.split(","),h="",f=0;f<d.length;f++)if(f>0&&d.length>2&&(h+=",",f<d.length-1&&(h+=" ")),f>0&&d.length>1&&(f==d.length-1||2==d.length)&&(h+="".concat(this.i18n.spaceAnd()," ")),d[f].indexOf("/")>-1||d[f].indexOf("-")>-1){var p=d[f].indexOf("-")>-1&&-1==d[f].indexOf("/"),g=this.getSegmentDescription(d[f],t,n,o,p?this.i18n.commaX0ThroughX1:i,s);p&&(g=g.replace(", ","")),h+=g}else h+=l?this.getSegmentDescription(d[f],t,n,o,i,s):n(d[f]);a=l?h:r.StringUtilities.format(s(e),h)}else if(l){if(d=e.split("/"),a=r.StringUtilities.format(o(d[1]),d[1]),d[0].indexOf("-")>-1){var m=this.generateRangeSegmentDescription(d[0],i,n);0!=m.indexOf(", ")&&(a+=", "),a+=m}else if(-1==d[0].indexOf("*")){var y=r.StringUtilities.format(s(d[0]),n(d[0]));y=y.replace(", ",""),a+=r.StringUtilities.format(this.i18n.commaStartingX0(),y)}}else c&&(a=this.generateRangeSegmentDescription(e,i,n));else a=r.StringUtilities.format(s(e),n(e));else a="";return a},e.prototype.generateRangeSegmentDescription=function(e,t,n){var o="",i=e.split("-"),s=n(i[0],1),a=n(i[1],2),l=t(e);return o+r.StringUtilities.format(l,s,a)},e.prototype.formatTime=function(e,t,n){var r=0,o=0;this.options.tzOffset&&(r=this.options.tzOffset>0?Math.floor(this.options.tzOffset):Math.ceil(this.options.tzOffset),0!=(o=parseFloat((this.options.tzOffset%1).toFixed(2)))&&(o*=60));var i=parseInt(e)+r,s=parseInt(t)+o;s>=60?(s-=60,i+=1):s<0&&(s+=60,i-=1),i>=24?i-=24:i<0&&(i=24+i);var a="",l=!1;this.options.use24HourTimeFormat||(a=(l=!(!this.i18n.setPeriodBeforeTime||!this.i18n.setPeriodBeforeTime()))?"".concat(this.getPeriod(i)," "):" ".concat(this.getPeriod(i)),i>12&&(i-=12),0===i&&(i=12));var c="";return n&&(c=":".concat(("00"+n).substring(n.length))),"".concat(l?a:"").concat(("00"+i.toString()).substring(i.toString().length),":").concat(("00"+s.toString()).substring(s.toString().length)).concat(c).concat(l?"":a)},e.prototype.transformVerbosity=function(e,t){if(!t&&(e=(e=(e=(e=e.replace(new RegExp(", ".concat(this.i18n.everyMinute()),"g"),"")).replace(new RegExp(", ".concat(this.i18n.everyHour()),"g"),"")).replace(new RegExp(this.i18n.commaEveryDay(),"g"),"")).replace(/\, ?$/,""),this.i18n.conciseVerbosityReplacements))for(var n=0,r=Object.entries(this.i18n.conciseVerbosityReplacements());n<r.length;n++){var o=r[n],i=o[0],s=o[1];e=e.replace(new RegExp(i,"g"),s)}return e},e.prototype.getPeriod=function(e){return e>=12?this.i18n.pm&&this.i18n.pm()||"PM":this.i18n.am&&this.i18n.am()||"AM"},e.locales={},e}();t.ExpressionDescriptor=i},747:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enLocaleLoader=void 0;var r=n(486),o=function(){function e(){}return e.prototype.load=function(e){e.en=new r.en},e}();t.enLocaleLoader=o},486:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.en=void 0;var n=function(){function e(){}return e.prototype.atX0SecondsPastTheMinuteGt20=function(){return null},e.prototype.atX0MinutesPastTheHourGt20=function(){return null},e.prototype.commaMonthX0ThroughMonthX1=function(){return null},e.prototype.commaYearX0ThroughYearX1=function(){return null},e.prototype.use24HourTimeFormatByDefault=function(){return!1},e.prototype.anErrorOccuredWhenGeneratingTheExpressionD=function(){return"An error occurred when generating the expression description. Check the cron expression syntax."},e.prototype.everyMinute=function(){return"every minute"},e.prototype.everyHour=function(){return"every hour"},e.prototype.atSpace=function(){return"At "},e.prototype.everyMinuteBetweenX0AndX1=function(){return"Every minute between %s and %s"},e.prototype.at=function(){return"At"},e.prototype.spaceAnd=function(){return" and"},e.prototype.everySecond=function(){return"every second"},e.prototype.everyX0Seconds=function(){return"every %s seconds"},e.prototype.secondsX0ThroughX1PastTheMinute=function(){return"seconds %s through %s past the minute"},e.prototype.atX0SecondsPastTheMinute=function(){return"at %s seconds past the minute"},e.prototype.everyX0Minutes=function(){return"every %s minutes"},e.prototype.minutesX0ThroughX1PastTheHour=function(){return"minutes %s through %s past the hour"},e.prototype.atX0MinutesPastTheHour=function(){return"at %s minutes past the hour"},e.prototype.everyX0Hours=function(){return"every %s hours"},e.prototype.betweenX0AndX1=function(){return"between %s and %s"},e.prototype.atX0=function(){return"at %s"},e.prototype.commaEveryDay=function(){return", every day"},e.prototype.commaEveryX0DaysOfTheWeek=function(){return", every %s days of the week"},e.prototype.commaX0ThroughX1=function(){return", %s through %s"},e.prototype.commaAndX0ThroughX1=function(){return", %s through %s"},e.prototype.first=function(){return"first"},e.prototype.second=function(){return"second"},e.prototype.third=function(){return"third"},e.prototype.fourth=function(){return"fourth"},e.prototype.fifth=function(){return"fifth"},e.prototype.commaOnThe=function(){return", on the "},e.prototype.spaceX0OfTheMonth=function(){return" %s of the month"},e.prototype.lastDay=function(){return"the last day"},e.prototype.commaOnTheLastX0OfTheMonth=function(){return", on the last %s of the month"},e.prototype.commaOnlyOnX0=function(){return", only on %s"},e.prototype.commaAndOnX0=function(){return", and on %s"},e.prototype.commaEveryX0Months=function(){return", every %s months"},e.prototype.commaOnlyInX0=function(){return", only in %s"},e.prototype.commaOnTheLastDayOfTheMonth=function(){return", on the last day of the month"},e.prototype.commaOnTheLastWeekdayOfTheMonth=function(){return", on the last weekday of the month"},e.prototype.commaDaysBeforeTheLastDayOfTheMonth=function(){return", %s days before the last day of the month"},e.prototype.firstWeekday=function(){return"first weekday"},e.prototype.weekdayNearestDayX0=function(){return"weekday nearest day %s"},e.prototype.commaOnTheX0OfTheMonth=function(){return", on the %s of the month"},e.prototype.commaEveryX0Days=function(){return", every %s days"},e.prototype.commaBetweenDayX0AndX1OfTheMonth=function(){return", between day %s and %s of the month"},e.prototype.commaOnDayX0OfTheMonth=function(){return", on day %s of the month"},e.prototype.commaEveryHour=function(){return", every hour"},e.prototype.commaEveryX0Years=function(){return", every %s years"},e.prototype.commaStartingX0=function(){return", starting %s"},e.prototype.daysOfTheWeek=function(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},e.prototype.monthsOfTheYear=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]},e}();t.en=n},515:(e,t)=>{function n(e,t){if(!e)throw new Error(t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.secondRange=function(e){for(var t=e.split(","),r=0;r<t.length;r++)if(!isNaN(parseInt(t[r],10))){var o=parseInt(t[r],10);n(o>=0&&o<=59,"seconds part must be >= 0 and <= 59")}},e.minuteRange=function(e){for(var t=e.split(","),r=0;r<t.length;r++)if(!isNaN(parseInt(t[r],10))){var o=parseInt(t[r],10);n(o>=0&&o<=59,"minutes part must be >= 0 and <= 59")}},e.hourRange=function(e){for(var t=e.split(","),r=0;r<t.length;r++)if(!isNaN(parseInt(t[r],10))){var o=parseInt(t[r],10);n(o>=0&&o<=23,"hours part must be >= 0 and <= 23")}},e.dayOfMonthRange=function(e){for(var t=e.split(","),r=0;r<t.length;r++)if(!isNaN(parseInt(t[r],10))){var o=parseInt(t[r],10);n(o>=1&&o<=31,"DOM part must be >= 1 and <= 31")}},e.monthRange=function(e,t){for(var r=e.split(","),o=0;o<r.length;o++)if(!isNaN(parseInt(r[o],10))){var i=parseInt(r[o],10);n(i>=1&&i<=12,t?"month part must be >= 0 and <= 11":"month part must be >= 1 and <= 12")}},e.dayOfWeekRange=function(e,t){for(var r=e.split(","),o=0;o<r.length;o++)if(!isNaN(parseInt(r[o],10))){var i=parseInt(r[o],10);n(i>=0&&i<=6,t?"DOW part must be >= 0 and <= 6":"DOW part must be >= 1 and <= 7")}},e}();t.default=r},823:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtilities=void 0;var n=function(){function e(){}return e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.replace(/%s/g,function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return t.shift()})},e.containsAny=function(e,t){return t.some(function(t){return e.indexOf(t)>-1})},e}();t.StringUtilities=n}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}var r={};return(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.toString=void 0;var t=n(333),o=n(747);t.ExpressionDescriptor.initialize(new o.enLocaleLoader),e.default=t.ExpressionDescriptor;var i=t.ExpressionDescriptor.toString;e.toString=i})(),r})(),e.exports=t()},481(e,t,n){"use strict";var r=n(758),o=n(896);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,o,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),A=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function D(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=I&&e[I]||e["@@iterator"])?e:null}var L,R=Object.assign;function B(e){if(void 0===L)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var $=!1;function z(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var o=t.stack.split("\n"),i=r.stack.split("\n"),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(1!==s||1!==a)do{if(s--,0>--a||o[s]!==i[a]){var l="\n"+o[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{$=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function q(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return z(e.type,!1);case 11:return z(e.type.render,!1);case 1:return z(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case C:return"Profiler";case E:return"StrictMode";case M:return"Suspense";case T:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return V(e(t))}catch(e){}}return null}function F(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function U(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){Z(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Ee=null;function Ce(e){if(e=wo(e)){if("function"!=typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=ko(t),ke(e.stateNode,e.type,t))}}function Ne(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Ae(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function _e(e,t){return e(t)}function Me(){}var Te=!1;function Oe(e,t,n){if(Te)return e(t,n);Te=!0;try{return _e(e,t,n)}finally{Te=!1,(null!==Se||null!==Ee)&&(Me(),Ae())}}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=ko(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(i(231,t,typeof n));return n}var Pe=!1;if(u)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ue){Pe=!1}function De(e,t,n,r,o,i,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var Le=!1,Re=null,Be=!1,$e=null,ze={onError:function(e){Le=!0,Re=e}};function qe(e,t,n,r,o,i,s,a,l){Le=!1,Re=null,De.apply(ze,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Fe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(i(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var s=o.alternate;if(null===s){if(null!==(r=o.return)){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return He(o),e;if(s===r)return He(o),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=s;else{for(var a=!1,l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ue(e):null}function Ue(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ue(e);if(null!==t)return t;e=e.sibling}return null}var Ke=o.unstable_scheduleCallback,Xe=o.unstable_cancelCallback,Ye=o.unstable_shouldYield,Ge=o.unstable_requestPaint,Ze=o.unstable_now,Qe=o.unstable_getCurrentPriorityLevel,Je=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null,st=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2,ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~o;0!==a?r=dt(a):0!==(i&=s)&&(r=dt(i))}else 0!==(s=n&~o)?r=dt(s):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&4194240&i))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-st(t)),r|=e[n],t&=~o;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return!(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var xt,kt,St,Et,Ct,Nt=!1,At=[],_t=null,Mt=null,Tt=null,Ot=new Map,jt=new Map,Pt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(t.pointerId)}}function Lt(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&null!==(t=wo(t))&&kt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Rt(e){var t=bo(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Fe(n)))return e.blockedOn=t,void Ct(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wo(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function $t(e,t,n){Bt(e)&&n.delete(t)}function zt(){Nt=!1,null!==_t&&Bt(_t)&&(_t=null),null!==Mt&&Bt(Mt)&&(Mt=null),null!==Tt&&Bt(Tt)&&(Tt=null),Ot.forEach($t),jt.forEach($t)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,zt)))}function Vt(e){function t(t){return qt(t,e)}if(0<At.length){qt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&qt(_t,e),null!==Mt&&qt(Mt,e),null!==Tt&&qt(Tt,e),Ot.forEach(t),jt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Rt(n),null===n.blockedOn&&Pt.shift()}var Ft=w.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var o=bt,i=Ft.transition;Ft.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=o,Ft.transition=i}}function Ut(e,t,n,r){var o=bt,i=Ft.transition;Ft.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=o,Ft.transition=i}}function Kt(e,t,n,r){if(Ht){var o=Yt(e,t,n,r);if(null===o)Hr(e,t,r,Xt,n),Dt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return _t=Lt(_t,e,t,n,r,o),!0;case"dragenter":return Mt=Lt(Mt,e,t,n,r,o),!0;case"mouseover":return Tt=Lt(Tt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Ot.set(i,Lt(Ot.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,jt.set(i,Lt(jt.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<It.indexOf(e)){for(;null!==o;){var i=wo(o);if(null!==i&&xt(i),null===(i=Yt(e,t,n,r))&&Hr(e,t,r,Xt,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Xt=null;function Yt(e,t,n,r){if(Xt=null,null!==(e=bo(e=xe(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Fe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Qt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Qt,r=n.length,o="value"in Zt?Zt.value:Zt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===o[i-t];t++);return Jt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(o):o[s]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=R({},cn,{view:0,detail:0}),hn=on(dn),fn=R({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),gn=on(R({},fn,{dataTransfer:0})),mn=on(R({},dn,{relatedTarget:0})),yn=on(R({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=R({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),wn=on(R({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return En}var Nn=R({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=on(Nn),_n=on(R({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=on(R({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Tn=on(R({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=R({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=on(On),Pn=[9,13,27,32],In=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Dn,Rn=u&&(!In||Dn&&8<Dn&&11>=Dn),Bn=String.fromCharCode(32),$n=!1;function zn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1,Fn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Fn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ne(r),0<(t=Ur(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Un=null,Kn=null;function Xn(e){Br(e,0)}function Yn(e){if(K(xo(e)))return e}function Gn(e,t){if("change"===e)return t}var Zn=!1;if(u){var Qn;if(u){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"==typeof er.oninput}Qn=Jn}else Qn=!1;Zn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Un&&(Un.detachEvent("onpropertychange",nr),Kn=Un=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Wn(t,Kn,e,xe(e)),Oe(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Un=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function ir(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(ar(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!ar(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=ur(n,i);var s=ur(n,r);o&&s&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==X(r)||(r="selectionStart"in(r=mr)&&fr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Ur(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},Er={};function Cr(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Nr=Cr("animationend"),Ar=Cr("animationiteration"),_r=Cr("animationstart"),Mr=Cr("transitionend"),Tr=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){Tr.set(e,t),l(t,[e])}for(var Pr=0;Pr<Or.length;Pr++){var Ir=Or[Pr];jr(Ir.toLowerCase(),"on"+(Ir[0].toUpperCase()+Ir.slice(1)))}jr(Nr,"onAnimationEnd"),jr(Ar,"onAnimationIteration"),jr(_r,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(Mr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Rr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,s,a,l,c){if(qe.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=Re;Le=!1,Re=null,Be||(Be=!0,$e=u)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&o.isPropagationStopped())break e;Rr(o,a,c),i=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==i&&o.isPropagationStopped())break e;Rr(o,a,c),i=l}}}if(Be)throw e=$e,Be=!1,$e=null,e}function $r(e,t){var n=t[mo];void 0===n&&(n=t[mo]=new Set);var r=e+"__bubble";n.has(r)||(Fr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Fr(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[qr]){e[qr]=!0,s.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,zr("selectionchange",!1,t))}}function Fr(e,t,n,r){switch(Gt(t)){case 1:var o=Wt;break;case 4:o=Ut;break;default:o=Kt}n=o.bind(null,t,n,e),o=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,o){var i=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===o||8===a.nodeType&&a.parentNode===o)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;s=s.return}for(;null!==a;){if(null===(s=bo(a)))return;if(5===(l=s.tag)||6===l){r=i=s;continue e}a=a.parentNode}}r=r.return}Oe(function(){var r=i,o=xe(n),s=[];e:{var a=Tr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mn;break;case Nr:case Ar:case _r:l=yn;break;case Mr:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=jn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_n}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&null!=(g=je(p,h))&&u.push(Wr(p,g,f))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,o),s.push({event:a,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!bo(c)&&!c[go])&&(l||a)&&(a=o.window===o?o:(a=o.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bo(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=_n,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:xo(l),f=null==c?a:xo(c),(a=new u(g,p+"leave",l,n,o)).target=d,a.relatedTarget=f,g=null,bo(o)===r&&((u=new u(h,p+"enter",c,n,o)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,g=h;g;g=Kr(g))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)h=Kr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Xr(s,a,l,u,!1),null!==c&&null!==d&&Xr(s,d,c,u,!0)}if("select"===(l=(a=r?xo(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Gn;else if(Hn(a))if(Zn)m=sr;else{m=or;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=ir);switch(m&&(m=m(e,r))?Wn(s,m,n,o):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?xo(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(s,n,o);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(s,n,o)}var v;if(In)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Rn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(v=en()):(Qt="value"in(Zt=o)?Zt.value:Zt.textContent,Vn=!0)),0<(y=Ur(r,b)).length&&(b=new wn(b,e,null,n,o),s.push({event:b,listeners:y}),(v||null!==(v=qn(n)))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:($n=!0,Bn);case"textInput":return(e=t.data)===Bn&&$n?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!In&&zn(e,t)?(e=en(),Jt=Qt=Zt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Ur(r,"onBeforeInput")).length&&(o=new wn("onBeforeInput","beforeinput",null,n,o),s.push({event:o,listeners:r}),o.data=v)}Br(s,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ur(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=je(e,n))&&r.unshift(Wr(e,i,o)),null!=(i=je(e,t))&&r.push(Wr(e,i,o))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,o){for(var i=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,o?null!=(l=je(n,i))&&s.unshift(Wr(n,l,a)):o||null!=(l=je(n,i))&&s.push(Wr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Zr(e){return("string"==typeof e?e:""+e).replace(Yr,"\n").replace(Gr,"")}function Qr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(i(425))}function Jr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"==typeof setTimeout?setTimeout:void 0,oo="function"==typeof clearTimeout?clearTimeout:void 0,io="function"==typeof Promise?Promise:void 0,so="function"==typeof queueMicrotask?queueMicrotask:void 0!==io?function(e){return io.resolve(null).then(e).catch(ao)}:ro;function ao(e){setTimeout(function(){throw e})}function lo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Vt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),fo="__reactFiber$"+ho,po="__reactProps$"+ho,go="__reactContainer$"+ho,mo="__reactEvents$"+ho,yo="__reactListeners$"+ho,vo="__reactHandles$"+ho;function bo(e){var t=e[fo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[go]||n[fo]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[fo])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function wo(e){return!(e=e[fo]||e[go])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ko(e){return e[po]||null}var So=[],Eo=-1;function Co(e){return{current:e}}function No(e){0>Eo||(e.current=So[Eo],So[Eo]=null,Eo--)}function Ao(e,t){Eo++,So[Eo]=e.current,e.current=t}var _o={},Mo=Co(_o),To=Co(!1),Oo=_o;function jo(e,t){var n=e.type.contextTypes;if(!n)return _o;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Po(e){return null!=e.childContextTypes}function Io(){No(To),No(Mo)}function Do(e,t,n){if(Mo.current!==_o)throw Error(i(168));Ao(Mo,t),Ao(To,n)}function Lo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,F(e)||"Unknown",o));return R({},n,r)}function Ro(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_o,Oo=Mo.current,Ao(Mo,e),Ao(To,To.current),!0}function Bo(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Lo(e,t,Oo),r.__reactInternalMemoizedMergedChildContext=e,No(To),No(Mo),Ao(Mo,e)):No(To),Ao(To,n)}var $o=null,zo=!1,qo=!1;function Vo(e){null===$o?$o=[e]:$o.push(e)}function Fo(){if(!qo&&null!==$o){qo=!0;var e=0,t=bt;try{var n=$o;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}$o=null,zo=!1}catch(t){throw null!==$o&&($o=$o.slice(e+1)),Ke(Je,Fo),t}finally{bt=t,qo=!1}}return null}var Ho=[],Wo=0,Uo=null,Ko=0,Xo=[],Yo=0,Go=null,Zo=1,Qo="";function Jo(e,t){Ho[Wo++]=Ko,Ho[Wo++]=Uo,Uo=e,Ko=t}function ei(e,t,n){Xo[Yo++]=Zo,Xo[Yo++]=Qo,Xo[Yo++]=Go,Go=e;var r=Zo;e=Qo;var o=32-st(r)-1;r&=~(1<<o),n+=1;var i=32-st(t)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Zo=1<<32-st(t)+o|n<<o|r,Qo=i+e}else Zo=1<<i|n<<o|r,Qo=e}function ti(e){null!==e.return&&(Jo(e,1),ei(e,1,0))}function ni(e){for(;e===Uo;)Uo=Ho[--Wo],Ho[Wo]=null,Ko=Ho[--Wo],Ho[Wo]=null;for(;e===Go;)Go=Xo[--Yo],Xo[Yo]=null,Qo=Xo[--Yo],Xo[Yo]=null,Zo=Xo[--Yo],Xo[Yo]=null}var ri=null,oi=null,ii=!1,si=null;function ai(e,t){var n=Tc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function li(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,oi=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Go?{id:Zo,overflow:Qo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,oi=null,!0);default:return!1}}function ci(e){return!(!(1&e.mode)||128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var n=t;if(!li(e,t)){if(ci(e))throw Error(i(418));t=co(n.nextSibling);var r=ri;t&&li(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function hi(e){if(e!==ri)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(ci(e))throw fi(),Error(i(418));for(;t;)ai(e,t),t=co(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=ri?co(e.stateNode.nextSibling):null;return!0}function fi(){for(var e=oi;e;)e=co(e.nextSibling)}function pi(){oi=ri=null,ii=!1}function gi(e){null===si?si=[e]:si.push(e)}var mi=w.ReactCurrentBatchConfig;function yi(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=o.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!=typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function vi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bi(e){return(0,e._init)(e._payload)}function wi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=jc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===j&&bi(i)===t.type)?((r=o(t,n.props)).ref=yi(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=yi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Rc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Ic(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=yi(e,null,t),n.return=e,n;case k:return(t=Rc(t,e.mode,n)).return=e,t;case j:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Ic(t,e.mode,n,null)).return=e,t;vi(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==o?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===o?c(e,t,n,r):null;case k:return n.key===o?u(e,t,n,r):null;case j:return f(e,t,(o=n._init)(n._payload),r)}if(te(n)||D(n))return null!==o?null:d(e,t,n,r,null);vi(e,n)}return null}function p(e,t,n,r,o){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case j:return p(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,o,null);vi(t,r)}return null}function g(o,i,a,l){for(var c=null,u=null,d=i,g=i=0,m=null;null!==d&&g<a.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=f(o,d,a[g],l);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(o,d),i=s(y,i,g),null===u?c=y:u.sibling=y,u=y,d=m}if(g===a.length)return n(o,d),ii&&Jo(o,g),c;if(null===d){for(;g<a.length;g++)null!==(d=h(o,a[g],l))&&(i=s(d,i,g),null===u?c=d:u.sibling=d,u=d);return ii&&Jo(o,g),c}for(d=r(o,d);g<a.length;g++)null!==(m=p(d,o,g,a[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),i=s(m,i,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(o,e)}),ii&&Jo(o,g),c}function m(o,a,l,c){var u=D(l);if("function"!=typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(o,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(o,g),a=s(b,a,m),null===d?u=b:d.sibling=b,d=b,g=y}if(v.done)return n(o,g),ii&&Jo(o,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=h(o,v.value,c))&&(a=s(v,a,m),null===d?u=v:d.sibling=v,d=v);return ii&&Jo(o,m),u}for(g=r(o,g);!v.done;m++,v=l.next())null!==(v=p(g,o,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=s(v,a,m),null===d?u=v:d.sibling=v,d=v);return e&&g.forEach(function(e){return t(o,e)}),ii&&Jo(o,m),u}return function e(r,i,s,l){if("object"==typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"==typeof s&&null!==s){switch(s.$$typeof){case x:e:{for(var c=s.key,u=i;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(r,u.sibling),(i=o(u,s.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===j&&bi(c)===u.type){n(r,u.sibling),(i=o(u,s.props)).ref=yi(r,u,s),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===S?((i=Ic(s.props.children,r.mode,l,s.key)).return=r,r=i):((l=Pc(s.type,s.key,s.props,null,r.mode,l)).ref=yi(r,i,s),l.return=r,r=l)}return a(r);case k:e:{for(u=s.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===s.containerInfo&&i.stateNode.implementation===s.implementation){n(r,i.sibling),(i=o(i,s.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Rc(s,r.mode,l)).return=r,r=i}return a(r);case j:return e(r,i,(u=s._init)(s._payload),l)}if(te(s))return g(r,i,s,l);if(D(s))return m(r,i,s,l);vi(r,s)}return"string"==typeof s&&""!==s||"number"==typeof s?(s=""+s,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,s)).return=r,r=i):(n(r,i),(i=Lc(s,r.mode,l)).return=r,r=i),a(r)):n(r,i)}}var xi=wi(!0),ki=wi(!1),Si=Co(null),Ei=null,Ci=null,Ni=null;function Ai(){Ni=Ci=Ei=null}function _i(e){var t=Si.current;No(Si),e._currentValue=t}function Mi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ti(e,t){Ei=e,Ni=Ci=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Oi(e){var t=e._currentValue;if(Ni!==e)if(e={context:e,memoizedValue:t,next:null},null===Ci){if(null===Ei)throw Error(i(308));Ci=e,Ei.dependencies={lanes:0,firstContext:e}}else Ci=Ci.next=e;return t}var ji=null;function Pi(e){null===ji?ji=[e]:ji.push(e)}function Ii(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Pi(t)):(n.next=o.next,o.next=n),t.interleaved=n,Di(e,r)}function Di(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Li=!1;function Ri(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $i(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Al){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Di(e,n)}return null===(o=r.interleaved)?(t.next=t,Pi(r)):(t.next=o.next,o.next=t),r.interleaved=t,Di(e,n)}function qi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Vi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fi(e,t,n,r){var o=e.updateQueue;Li=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(null!==a){o.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?i=c:s.next=c,s=l;var u=e.alternate;null!==u&&(a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l)}if(null!==i){var d=o.baseState;for(s=0,u=c=l=null,a=i;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(h=t,f=n,g.tag){case 1:if("function"==typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=g.payload)?p.call(f,d,h):p))break e;d=R({},d,h);break e;case 2:Li=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=o.shared.pending))break;a=(h=a).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===u&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{s|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Dl|=s,e.lanes=s,e.memoizedState=d}}function Hi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!=typeof o)throw Error(i(191,o));o.call(r)}}}var Wi={},Ui=Co(Wi),Ki=Co(Wi),Xi=Co(Wi);function Yi(e){if(e===Wi)throw Error(i(174));return e}function Gi(e,t){switch(Ao(Xi,t),Ao(Ki,e),Ao(Ui,Wi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}No(Ui),Ao(Ui,t)}function Zi(){No(Ui),No(Ki),No(Xi)}function Qi(e){Yi(Xi.current);var t=Yi(Ui.current),n=le(t,e.type);t!==n&&(Ao(Ki,e),Ao(Ui,n))}function Ji(e){Ki.current===e&&(No(Ui),No(Ki))}var es=Co(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function rs(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var os=w.ReactCurrentDispatcher,is=w.ReactCurrentBatchConfig,ss=0,as=null,ls=null,cs=null,us=!1,ds=!1,hs=0,fs=0;function ps(){throw Error(i(321))}function gs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function ms(e,t,n,r,o,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,os.current=null===e||null===e.memoizedState?Js:ea,e=n(r,o),ds){s=0;do{if(ds=!1,hs=0,25<=s)throw Error(i(301));s+=1,cs=ls=null,t.updateQueue=null,os.current=ta,e=n(r,o)}while(ds)}if(os.current=Qs,t=null!==ls&&null!==ls.next,ss=0,cs=ls=as=null,us=!1,t)throw Error(i(300));return e}function ys(){var e=0!==hs;return hs=0,e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?as.memoizedState=cs=e:cs=cs.next=e,cs}function bs(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?as.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?as.memoizedState=cs=e:cs=cs.next=e}return cs}function ws(e,t){return"function"==typeof t?t(e):t}function xs(e){var t=bs(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ls,o=r.baseQueue,s=n.pending;if(null!==s){if(null!==o){var a=o.next;o.next=s.next,s.next=a}r.baseQueue=o=s,n.pending=null}if(null!==o){s=o.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ss&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,as.lanes|=d,Dl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{s=o.lane,as.lanes|=s,Dl|=s,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ks(e){var t=bs(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(null!==o){n.pending=null;var a=o=o.next;do{s=e(s,a.action),a=a.next}while(a!==o);ar(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ss(){}function Es(e,t){var n=as,r=bs(),o=t(),s=!ar(r.memoizedState,o);if(s&&(r.memoizedState=o,ba=!0),r=r.queue,Ls(As.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(n.flags|=2048,Os(9,Ns.bind(null,n,r,o,t),void 0,null),null===_l)throw Error(i(349));30&ss||Cs(n,t,o)}return o}function Cs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ns(e,t,n,r){t.value=n,t.getSnapshot=r,_s(t)&&Ms(e)}function As(e,t,n){return n(function(){_s(t)&&Ms(e)})}function _s(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(e){return!0}}function Ms(e){var t=Di(e,1);null!==t&&tc(t,e,1,-1)}function Ts(e){var t=vs();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:e},t.queue=e,e=e.dispatch=Xs.bind(null,as,e),[t.memoizedState,e]}function Os(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function js(){return bs().memoizedState}function Ps(e,t,n,r){var o=vs();as.flags|=e,o.memoizedState=Os(1|t,n,void 0,void 0===r?null:r)}function Is(e,t,n,r){var o=bs();r=void 0===r?null:r;var i=void 0;if(null!==ls){var s=ls.memoizedState;if(i=s.destroy,null!==r&&gs(r,s.deps))return void(o.memoizedState=Os(t,n,i,r))}as.flags|=e,o.memoizedState=Os(1|t,n,i,r)}function Ds(e,t){return Ps(8390656,8,e,t)}function Ls(e,t){return Is(2048,8,e,t)}function Rs(e,t){return Is(4,2,e,t)}function Bs(e,t){return Is(4,4,e,t)}function $s(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zs(e,t,n){return n=null!=n?n.concat([e]):null,Is(4,4,$s.bind(null,t,e),n)}function qs(){}function Vs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Fs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hs(e,t,n){return 21&ss?(ar(n,t)||(n=gt(),as.lanes|=n,Dl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n)}function Ws(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=is.transition;is.transition={};try{e(!1),t()}finally{bt=n,is.transition=r}}function Us(){return bs().memoizedState}function Ks(e,t,n){var r=ec(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ys(e)?Gs(t,n):null!==(n=Ii(e,t,n,r))&&(tc(n,e,r,Jl()),Zs(n,t,r))}function Xs(e,t,n){var r=ec(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ys(e))Gs(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=i(s,n);if(o.hasEagerState=!0,o.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(o.next=o,Pi(t)):(o.next=l.next,l.next=o),void(t.interleaved=o)}}catch(e){}null!==(n=Ii(e,t,o,r))&&(tc(n,e,r,o=Jl()),Zs(n,t,r))}}function Ys(e){var t=e.alternate;return e===as||null!==t&&t===as}function Gs(e,t){ds=us=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zs(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Qs={readContext:Oi,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Js={readContext:Oi,useCallback:function(e,t){return vs().memoizedState=[e,void 0===t?null:t],e},useContext:Oi,useEffect:Ds,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ps(4194308,4,$s.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ps(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ps(4,2,e,t)},useMemo:function(e,t){var n=vs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ks.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vs().memoizedState=e},useState:Ts,useDebugValue:qs,useDeferredValue:function(e){return vs().memoizedState=e},useTransition:function(){var e=Ts(!1),t=e[0];return e=Ws.bind(null,e[1]),vs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,o=vs();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===_l)throw Error(i(349));30&ss||Cs(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,Ds(As.bind(null,r,s,e),[e]),r.flags|=2048,Os(9,Ns.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=vs(),t=_l.identifierPrefix;if(ii){var n=Qo;t=":"+t+"R"+(n=(Zo&~(1<<32-st(Zo)-1)).toString(32)+n),0<(n=hs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Oi,useCallback:Vs,useContext:Oi,useEffect:Ls,useImperativeHandle:zs,useInsertionEffect:Rs,useLayoutEffect:Bs,useMemo:Fs,useReducer:xs,useRef:js,useState:function(){return xs(ws)},useDebugValue:qs,useDeferredValue:function(e){return Hs(bs(),ls.memoizedState,e)},useTransition:function(){return[xs(ws)[0],bs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:Es,useId:Us,unstable_isNewReconciler:!1},ta={readContext:Oi,useCallback:Vs,useContext:Oi,useEffect:Ls,useImperativeHandle:zs,useInsertionEffect:Rs,useLayoutEffect:Bs,useMemo:Fs,useReducer:ks,useRef:js,useState:function(){return ks(ws)},useDebugValue:qs,useDeferredValue:function(e){var t=bs();return null===ls?t.memoizedState=e:Hs(t,ls.memoizedState,e)},useTransition:function(){return[ks(ws)[0],bs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:Es,useId:Us,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=R({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:R({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var oa={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Jl(),o=ec(e),i=$i(r,o);i.payload=t,null!=n&&(i.callback=n),null!==(t=zi(e,i,o))&&(tc(t,e,o,r),qi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Jl(),o=ec(e),i=$i(r,o);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=zi(e,i,o))&&(tc(t,e,o,r),qi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Jl(),r=ec(e),o=$i(n,r);o.tag=2,null!=t&&(o.callback=t),null!==(t=zi(e,o,r))&&(tc(t,e,r,n),qi(t,e,r))}};function ia(e,t,n,r,o,i,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!(t.prototype&&t.prototype.isPureReactComponent&&lr(n,r)&&lr(o,i))}function sa(e,t,n){var r=!1,o=_o,i=t.contextType;return"object"==typeof i&&null!==i?i=Oi(i):(o=Po(t)?Oo:Mo.current,i=(r=null!=(r=t.contextTypes))?jo(e,o):_o),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=oa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function aa(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oa.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ri(e);var i=t.contextType;"object"==typeof i&&null!==i?o.context=Oi(i):(i=Po(t)?Oo:Mo.current,o.context=jo(e,i)),o.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(ra(e,t,i,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&oa.enqueueReplaceState(o,o.state,null),Fi(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var o=n}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var ha="function"==typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=$i(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Fl||(Fl=!0,Hl=r),da(0,t)},n}function pa(e,t,n){(n=$i(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){da(0,t)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){da(0,t),"function"!=typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,o){return 1&e.mode?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=$i(-1,1)).tag=2,zi(n,t,1))),n.lanes|=1),e)}var va=w.ReactCurrentOwner,ba=!1;function wa(e,t,n,r){t.child=null===e?ki(t,null,n,r):xi(t,e.child,n,r)}function xa(e,t,n,r,o){n=n.render;var i=t.ref;return Ti(t,o),r=ms(e,t,n,r,i,o),n=ys(),null===e||ba?(ii&&n&&ti(t),t.flags|=1,wa(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Fa(e,t,o))}function ka(e,t,n,r,o){if(null===e){var i=n.type;return"function"!=typeof i||Oc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Sa(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var s=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Fa(e,t,o)}return t.flags|=1,(e=jc(i,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,Fa(e,t,o);131072&e.flags&&(ba=!0)}}return Na(e,t,n,r,o)}function Ea(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ao(jl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ao(jl,Ol),Ol|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ao(jl,Ol),Ol|=n;else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ao(jl,Ol),Ol|=r;return wa(e,t,o,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Na(e,t,n,r,o){var i=Po(n)?Oo:Mo.current;return i=jo(t,i),Ti(t,o),n=ms(e,t,n,r,i,o),r=ys(),null===e||ba?(ii&&r&&ti(t),t.flags|=1,wa(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Fa(e,t,o))}function Aa(e,t,n,r,o){if(Po(n)){var i=!0;Ro(t)}else i=!1;if(Ti(t,o),null===t.stateNode)Va(e,t),sa(t,n,r),la(t,n,r,o),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;c="object"==typeof c&&null!==c?Oi(c):jo(t,c=Po(n)?Oo:Mo.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;d||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,s,r,c),Li=!1;var h=t.memoizedState;s.state=h,Fi(t,r,s,o),l=t.memoizedState,a!==r||h!==l||To.current||Li?("function"==typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Li||ia(t,n,a,r,h,l,c))?(d||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Bi(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),s.props=c,d=t.pendingProps,h=s.context,l="object"==typeof(l=n.contextType)&&null!==l?Oi(l):jo(t,l=Po(n)?Oo:Mo.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,s,r,l),Li=!1,h=t.memoizedState,s.state=h,Fi(t,r,s,o);var p=t.memoizedState;a!==d||h!==p||To.current||Li?("function"==typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Li||ia(t,n,c,r,h,p,l)||!1)?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return _a(e,t,n,r,i,o)}function _a(e,t,n,r,o,i){Ca(e,t);var s=!!(128&t.flags);if(!r&&!s)return o&&Bo(t,n,!1),Fa(e,t,i);r=t.stateNode,va.current=t;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=xi(t,e.child,null,i),t.child=xi(t,null,a,i)):wa(e,t,a,i),t.memoizedState=r.state,o&&Bo(t,n,!0),t.child}function Ma(e){var t=e.stateNode;t.pendingContext?Do(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Do(0,t.context,!1),Gi(e,t.containerInfo)}function Ta(e,t,n,r,o){return pi(),gi(o),t.flags|=256,wa(e,t,n,r),t.child}var Oa,ja,Pa,Ia={dehydrated:null,treeContext:null,retryLane:0};function Da(e){return{baseLanes:e,cachePool:null,transitions:null}}function La(e,t,n){var r,o=t.pendingProps,s=es.current,a=!1,l=!!(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ao(es,1&s),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=o.children,e=o.fallback,a?(o=t.mode,a=t.child,l={mode:"hidden",children:l},1&o||null===a?a=Dc(l,o,0,null):(a.childLanes=0,a.pendingProps=l),e=Ic(e,o,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Da(n),t.memoizedState=Ia,e):Ra(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,o,s,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,r=ua(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=Dc({mode:"visible",children:r.children},o,0,null),(s=Ic(s,o,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,1&t.mode&&xi(t,e.child,null,a),t.child.memoizedState=Da(a),t.memoizedState=Ia,s);if(!(1&t.mode))return Ba(e,t,a,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var l=r.dgst;return r=l,Ba(e,t,a,r=ua(s=Error(i(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=_l)){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|a))?0:o)&&o!==s.retryLane&&(s.retryLane=o,Di(e,o),tc(r,e,o,-1))}return pc(),Ba(e,t,a,r=ua(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,oi=co(o.nextSibling),ri=t,ii=!0,si=null,null!==e&&(Xo[Yo++]=Zo,Xo[Yo++]=Qo,Xo[Yo++]=Go,Zo=e.id,Qo=e.overflow,Go=t),(t=Ra(t,r.children)).flags|=4096,t)}(e,t,l,o,r,s,n);if(a){a=o.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:o.children};return 1&l||t.child===s?(o=jc(s,c)).subtreeFlags=14680064&s.subtreeFlags:((o=t.child).childLanes=0,o.pendingProps=c,t.deletions=null),null!==r?a=jc(r,a):(a=Ic(a,l,n,null)).flags|=2,a.return=t,o.return=t,o.sibling=a,t.child=o,o=a,a=t.child,l=null===(l=e.child.memoizedState)?Da(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ia,o}return e=(a=e.child).sibling,o=jc(a,{mode:"visible",children:o.children}),!(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Ra(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){return null!==r&&gi(r),xi(t,e.child,null,n),(e=Ra(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $a(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Mi(e.return,t,n)}function za(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function qa(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(wa(e,t,r.children,n),2&(r=es.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$a(e,n,t);else if(19===e.tag)$a(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ao(es,r),1&t.mode)switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),za(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ts(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}za(t,!0,n,null,i);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Va(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Fa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=jc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ua(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Po(t.type)&&Io(),Wa(t),null;case 3:return r=t.stateNode,Zi(),No(To),No(Mo),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==si&&(ic(si),si=null))),Wa(t),null;case 5:Ji(t);var o=Yi(Xi.current);if(n=t.type,null!==e&&null!=t.stateNode)ja(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Wa(t),null}if(e=Yi(Ui.current),hi(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[fo]=t,r[po]=s,e=!!(1&t.mode),n){case"dialog":$r("cancel",r),$r("close",r);break;case"iframe":case"object":case"embed":$r("load",r);break;case"video":case"audio":for(o=0;o<Dr.length;o++)$r(Dr[o],r);break;case"source":$r("error",r);break;case"img":case"image":case"link":$r("error",r),$r("load",r);break;case"details":$r("toggle",r);break;case"input":G(r,s),$r("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$r("invalid",r);break;case"textarea":oe(r,s),$r("invalid",r)}for(var l in ve(n,s),o=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"==typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,c,e),o=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,c,e),o=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&$r("scroll",r)}switch(n){case"input":U(r),J(r,s,!0);break;case"textarea":U(r),se(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Jr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fo]=t,e[po]=r,Oa(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":$r("cancel",e),$r("close",e),o=r;break;case"iframe":case"object":case"embed":$r("load",e),o=r;break;case"video":case"audio":for(o=0;o<Dr.length;o++)$r(Dr[o],e);o=r;break;case"source":$r("error",e),o=r;break;case"img":case"image":case"link":$r("error",e),$r("load",e),o=r;break;case"details":$r("toggle",e),o=r;break;case"input":G(e,r),o=Y(e,r),$r("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=R({},r,{value:void 0}),$r("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),$r("invalid",e)}for(s in ve(n,o),c=o)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?me(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"==typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"==typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&$r("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":U(e),J(e,r,!1);break;case"textarea":U(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)Pa(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));if(n=Yi(Xi.current),Yi(Ui.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[fo]=t,(s=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:Qr(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,!!(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fo]=t,t.stateNode=r}return Wa(t),null;case 13:if(No(es),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&1&t.mode&&!(128&t.flags))fi(),pi(),t.flags|=98560,s=!1;else if(s=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[fo]=t}else pi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),s=!1}else null!==si&&(ic(si),si=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&es.current?0===Pl&&(Pl=3):pc())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return Zi(),null===e&&Vr(t.stateNode.containerInfo),Wa(t),null;case 10:return _i(t.type._context),Wa(t),null;case 19:if(No(es),null===(s=t.memoizedState))return Wa(t),null;if(r=!!(128&t.flags),null===(l=s.rendering))if(r)Ha(s,!1);else{if(0!==Pl||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,Ha(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ao(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Ze()>ql&&(t.flags|=128,r=!0,Ha(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ts(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ii)return Wa(t),null}else 2*Ze()-s.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ha(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ze(),t.sibling=null,n=es.current,Ao(es,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Ol)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ka(e,t){switch(ni(t),t.tag){case 1:return Po(t.type)&&Io(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zi(),No(To),No(Mo),rs(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ji(t),null;case 13:if(No(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return No(es),null;case 4:return Zi(),null;case 10:return _i(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Oa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ja=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Yi(Ui.current);var i,s=null;switch(n){case"input":o=Y(e,o),r=Y(e,r),s=[];break;case"select":o=R({},o,{value:void 0}),r=R({},r,{value:void 0}),s=[];break;case"textarea":o=re(e,o),r=re(e,r),s=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=Jr)}for(u in ve(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var l=o[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&$r("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Pa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xa=!1,Ya=!1,Ga="function"==typeof WeakSet?WeakSet:Set,Za=null;function Qa(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Sc(e,t,n)}else n.current=null}function Ja(e,t,n){try{n()}catch(n){Sc(e,t,n)}}var el=!1;function tl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&Ja(t,n,i)}o=o.next}while(o!==r)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[fo],delete t[po],delete t[mo],delete t[yo],delete t[vo]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function al(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(al(e,t,n),e=e.sibling;null!==e;)al(e,t,n),e=e.sibling}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}var cl=null,ul=!1;function dl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(it&&"function"==typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(e){}switch(n.tag){case 5:Ya||Qa(n,t);case 6:var r=cl,o=ul;cl=null,dl(e,t,n),ul=o,null!==(cl=r)&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?lo(e.parentNode,n):1===e.nodeType&&lo(e,n),Vt(e)):lo(cl,n.stateNode));break;case 4:r=cl,o=ul,cl=n.stateNode.containerInfo,ul=!0,dl(e,t,n),cl=r,ul=o;break;case 0:case 11:case 14:case 15:if(!Ya&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,void 0!==s&&(2&i||4&i)&&Ja(n,t,s),o=o.next}while(o!==r)}dl(e,t,n);break;case 1:if(!Ya&&(Qa(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Sc(n,t,e)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,dl(e,t,n),Ya=r):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ga),t.forEach(function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,ul=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===cl)throw Error(i(160));hl(s,a,o),cl=null,ul=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(e){Sc(o,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),ml(e),4&r){try{tl(3,e,e.return),nl(3,e)}catch(t){Sc(e,e.return,t)}try{tl(5,e,e.return)}catch(t){Sc(e,e.return,t)}}break;case 1:pl(t,e),ml(e),512&r&&null!==n&&Qa(n,n.return);break;case 5:if(pl(t,e),ml(e),512&r&&null!==n&&Qa(n,n.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(t){Sc(e,e.return,t)}}if(4&r&&null!=(o=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Z(o,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?me(o,h):"dangerouslySetInnerHTML"===d?de(o,h):"children"===d?he(o,h):b(o,d,h,u)}switch(l){case"input":Q(o,s);break;case"textarea":ie(o,s);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(o,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(o,!!s.multiple,s.defaultValue,!0):ne(o,!!s.multiple,s.multiple?[]:"",!1))}o[po]=s}catch(t){Sc(e,e.return,t)}}break;case 6:if(pl(t,e),ml(e),4&r){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(t){Sc(e,e.return,t)}}break;case 3:if(pl(t,e),ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(t){Sc(e,e.return,t)}break;case 4:default:pl(t,e),ml(e);break;case 13:pl(t,e),ml(e),8192&(o=e.child).flags&&(s=null!==o.memoizedState,o.stateNode.isHidden=s,!s||null!==o.alternate&&null!==o.alternate.memoizedState||(zl=Ze())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(u=Ya)||d,pl(t,e),Ya=u):pl(t,e),ml(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&1&e.mode)for(Za=e,d=e.child;null!==d;){for(h=Za=d;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:tl(4,f,f.return);break;case 1:Qa(f,f.return);var g=f.stateNode;if("function"==typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(e){Sc(r,n,e)}}break;case 5:Qa(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,Za=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,u?"function"==typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=null!=(c=h.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(t){Sc(e,e.return,t)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(t){Sc(e,e.return,t)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),ml(e),4&r&&fl(e);case 21:}}function ml(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(he(o,""),r.flags&=-33),ll(e,sl(e),o);break;case 3:case 4:var s=r.stateNode.containerInfo;al(e,sl(e),s);break;default:throw Error(i(161))}}catch(t){Sc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Za=e,vl(e,t,n)}function vl(e,t,n){for(var r=!!(1&e.mode);null!==Za;){var o=Za,i=o.child;if(22===o.tag&&r){var s=null!==o.memoizedState||Xa;if(!s){var a=o.alternate,l=null!==a&&null!==a.memoizedState||Ya;a=Xa;var c=Ya;if(Xa=s,(Ya=l)&&!c)for(Za=o;null!==Za;)l=(s=Za).child,22===s.tag&&null!==s.memoizedState?xl(o):null!==l?(l.return=s,Za=l):xl(o);for(;null!==i;)Za=i,vl(i,t,n),i=i.sibling;Za=o,Xa=a,Ya=c}bl(e)}else 8772&o.subtreeFlags&&null!==i?(i.return=o,Za=i):bl(e)}}function bl(e){for(;null!==Za;){var t=Za;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Ya||nl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Hi(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hi(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(i(163))}Ya||512&t.flags&&rl(t)}catch(e){Sc(t,t.return,e)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function wl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function xl(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nl(4,t)}catch(e){Sc(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(e){Sc(t,o,e)}}var i=t.return;try{rl(t)}catch(e){Sc(t,i,e)}break;case 5:var s=t.return;try{rl(t)}catch(e){Sc(t,s,e)}}}catch(e){Sc(t,t.return,e)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var kl,Sl=Math.ceil,El=w.ReactCurrentDispatcher,Cl=w.ReactCurrentOwner,Nl=w.ReactCurrentBatchConfig,Al=0,_l=null,Ml=null,Tl=0,Ol=0,jl=Co(0),Pl=0,Il=null,Dl=0,Ll=0,Rl=0,Bl=null,$l=null,zl=0,ql=1/0,Vl=null,Fl=!1,Hl=null,Wl=null,Ul=!1,Kl=null,Xl=0,Yl=0,Gl=null,Zl=-1,Ql=0;function Jl(){return 6&Al?Ze():-1!==Zl?Zl:Zl=Ze()}function ec(e){return 1&e.mode?2&Al&&0!==Tl?Tl&-Tl:null!==mi.transition?(0===Ql&&(Ql=gt()),Ql):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Gt(e.type):1}function tc(e,t,n,r){if(50<Yl)throw Yl=0,Gl=null,Error(i(185));yt(e,n,r),2&Al&&e===_l||(e===_l&&(!(2&Al)&&(Ll|=n),4===Pl&&sc(e,Tl)),nc(e,r),1===n&&0===Al&&!(1&t.mode)&&(ql=Ze()+500,zo&&Fo()))}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-st(i),a=1<<s,l=o[s];-1===l?0!==(a&n)&&0===(a&r)||(o[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}(e,t);var r=ht(e,e===_l?Tl:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){zo=!0,Vo(e)}(ac.bind(null,e)):Vo(ac.bind(null,e)),so(function(){!(6&Al)&&Fo()}),n=null;else{switch(wt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=_c(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Zl=-1,Ql=0,6&Al)throw Error(i(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===_l?Tl:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var o=Al;Al|=2;var s=fc();for(_l===e&&Tl===t||(Vl=null,ql=Ze()+500,dc(e,t));;)try{yc();break}catch(t){hc(e,t)}Ai(),El.current=s,Al=o,null!==Ml?t=0:(_l=null,Tl=0,t=Pl)}if(0!==t){if(2===t&&0!==(o=pt(e))&&(r=o,t=oc(e,o)),1===t)throw n=Il,dc(e,0),sc(e,r),nc(e,Ze()),n;if(6===t)sc(e,r);else{if(o=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!ar(i(),o))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)||(t=gc(e,r),2===t&&(s=pt(e),0!==s&&(r=s,t=oc(e,s))),1!==t)))throw n=Il,dc(e,0),sc(e,r),nc(e,Ze()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,$l,Vl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zl+500-Ze())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&r)!==r){Jl(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(wc.bind(null,e,$l,Vl),t);break}wc(e,$l,Vl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>o&&(o=a),r&=~s}if(r=o,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ro(wc.bind(null,e,$l,Vl),r);break}wc(e,$l,Vl);break;default:throw Error(i(329))}}}return nc(e,Ze()),e.callbackNode===n?rc.bind(null,e):null}function oc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=$l,$l=n,null!==t&&ic(t)),e}function ic(e){null===$l?$l=e:$l.push.apply($l,e)}function sc(e,t){for(t&=~Rl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function ac(e){if(6&Al)throw Error(i(327));xc();var t=ht(e,0);if(!(1&t))return nc(e,Ze()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Il,dc(e,0),sc(e,t),nc(e,Ze()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,$l,Vl),nc(e,Ze()),null}function lc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(ql=Ze()+500,zo&&Fo())}}function cc(e){null!==Kl&&0===Kl.tag&&!(6&Al)&&xc();var t=Al;Al|=1;var n=Nl.transition,r=bt;try{if(Nl.transition=null,bt=1,e)return e()}finally{bt=r,Nl.transition=n,!(6&(Al=t))&&Fo()}}function uc(){Ol=jl.current,No(jl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Ml)for(n=Ml.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Io();break;case 3:Zi(),No(To),No(Mo),rs();break;case 5:Ji(r);break;case 4:Zi();break;case 13:case 19:No(es);break;case 10:_i(r.type._context);break;case 22:case 23:uc()}n=n.return}if(_l=e,Ml=e=jc(e.current,null),Tl=Ol=t,Pl=0,Il=null,Rl=Ll=Dl=0,$l=Bl=null,null!==ji){for(t=0;t<ji.length;t++)if(null!==(r=(n=ji[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var s=i.next;i.next=o,r.next=s}n.pending=r}ji=null}return e}function hc(e,t){for(;;){var n=Ml;try{if(Ai(),os.current=Qs,us){for(var r=as.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}us=!1}if(ss=0,cs=ls=as=null,ds=!1,hs=0,Cl.current=null,null===n||null===n.return){Pl=1,Il=t,Ml=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,h=d.tag;if(!(1&d.mode||0!==h&&11!==h&&15!==h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ma(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ga(s,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(!(1&t)){ga(s,u,t),pc();break e}c=Error(i(426))}else if(ii&&1&l.mode){var y=ma(a);if(null!==y){!(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),gi(ca(c,l));break e}}s=c=ca(c,l),4!==Pl&&(Pl=2),null===Bl?Bl=[s]:Bl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Vi(s,fa(0,c,t));break e;case 1:l=c;var v=s.type,b=s.stateNode;if(!(128&s.flags||"function"!=typeof v.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==Wl&&Wl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Vi(s,pa(s,l,t));break e}}s=s.return}while(null!==s)}bc(n)}catch(e){t=e,Ml===n&&null!==n&&(Ml=n=n.return);continue}break}}function fc(){var e=El.current;return El.current=Qs,null===e?Qs:e}function pc(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===_l||!(268435455&Dl)&&!(268435455&Ll)||sc(_l,Tl)}function gc(e,t){var n=Al;Al|=2;var r=fc();for(_l===e&&Tl===t||(Vl=null,dc(e,t));;)try{mc();break}catch(t){hc(e,t)}if(Ai(),Al=n,El.current=r,null!==Ml)throw Error(i(261));return _l=null,Tl=0,Pl}function mc(){for(;null!==Ml;)vc(Ml)}function yc(){for(;null!==Ml&&!Ye();)vc(Ml)}function vc(e){var t=kl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?bc(e):Ml=t,Cl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Ka(n,t)))return n.flags&=32767,void(Ml=n);if(null===e)return Pl=6,void(Ml=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Ua(n,t,Ol)))return void(Ml=n);if(null!==(t=t.sibling))return void(Ml=t);Ml=t=e}while(null!==t);0===Pl&&(Pl=5)}function wc(e,t,n){var r=bt,o=Nl.transition;try{Nl.transition=null,bt=1,function(e,t,n,r){do{xc()}while(null!==Kl);if(6&Al)throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-st(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,s),e===_l&&(Ml=_l=null,Tl=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Ul||(Ul=!0,_c(tt,function(){return xc(),null})),s=!!(15990&n.flags),15990&n.subtreeFlags||s){s=Nl.transition,Nl.transition=null;var a=bt;bt=1;var l=Al;Al|=4,Cl.current=null,function(e,t){if(eo=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(e){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==o&&3!==h.nodeType||(l=a+o),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===o&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Ht=!1,Za=t;null!==Za;)if(e=(t=Za).child,1028&t.subtreeFlags&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var g=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:na(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(e){Sc(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}g=el,el=!1}(e,n),gl(n,e),pr(to),Ht=!!eo,to=eo=null,e.current=n,yl(n,e,o),Ge(),Al=l,bt=a,Nl.transition=s}else e.current=n;if(Ul&&(Ul=!1,Kl=e,Xl=o),0===(s=e.pendingLanes)&&(Wl=null),function(e){if(it&&"function"==typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,!(128&~e.current.flags))}catch(e){}}(n.stateNode),nc(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((o=t[n]).value,{componentStack:o.stack,digest:o.digest});if(Fl)throw Fl=!1,e=Hl,Hl=null,e;!!(1&Xl)&&0!==e.tag&&xc(),1&(s=e.pendingLanes)?e===Gl?Yl++:(Yl=0,Gl=e):Yl=0,Fo()}(e,t,n,r)}finally{Nl.transition=o,bt=r}return null}function xc(){if(null!==Kl){var e=wt(Xl),t=Nl.transition,n=bt;try{if(Nl.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Xl=0,6&Al)throw Error(i(331));var o=Al;for(Al|=4,Za=e.current;null!==Za;){var s=Za,a=s.child;if(16&Za.flags){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var d=Za;switch(d.tag){case 0:case 11:case 15:tl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Za=h;else for(;null!==Za;){var f=(d=Za).sibling,p=d.return;if(ol(d),d===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Za=s}}if(2064&s.subtreeFlags&&null!==a)a.return=s,Za=a;else e:for(;null!==Za;){if(2048&(s=Za).flags)switch(s.tag){case 0:case 11:case 15:tl(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Za=v;break e}Za=s.return}}var b=e.current;for(Za=b;null!==Za;){var w=(a=Za).child;if(2064&a.subtreeFlags&&null!==w)w.return=a,Za=w;else e:for(a=b;null!==Za;){if(2048&(l=Za).flags)try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(e){Sc(l,l.return,e)}if(l===a){Za=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Za=x;break e}Za=l.return}}if(Al=o,Fo(),it&&"function"==typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(e){}r=!0}return r}finally{bt=n,Nl.transition=t}}return!1}function kc(e,t,n){e=zi(e,t=fa(0,t=ca(n,t),1),1),t=Jl(),null!==e&&(yt(e,1,t),nc(e,t))}function Sc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=zi(t,e=pa(t,e=ca(n,e),1),1),e=Jl(),null!==t&&(yt(t,1,e),nc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Jl(),e.pingedLanes|=e.suspendedLanes&n,_l===e&&(Tl&n)===n&&(4===Pl||3===Pl&&(130023424&Tl)===Tl&&500>Ze()-zl?dc(e,0):Rl|=n),nc(e,t)}function Cc(e,t){0===t&&(1&e.mode?(t=ut,!(130023424&(ut<<=1))&&(ut=4194304)):t=1);var n=Jl();null!==(e=Di(e,t))&&(yt(e,t,n),nc(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Cc(e,n)}function _c(e,t){return Ke(e,t)}function Mc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,n,r){return new Mc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jc(e,t){var n=e.alternate;return null===n?((n=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,o,s){var a=2;if(r=e,"function"==typeof e)Oc(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case S:return Ic(n.children,o,s,t);case E:a=8,o|=8;break;case C:return(e=Tc(12,n,t,2|o)).elementType=C,e.lanes=s,e;case M:return(e=Tc(13,n,t,o)).elementType=M,e.lanes=s,e;case T:return(e=Tc(19,n,t,o)).elementType=T,e.lanes=s,e;case P:return Dc(n,o,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case N:a=10;break e;case A:a=9;break e;case _:a=11;break e;case O:a=14;break e;case j:a=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Tc(a,n,t,o)).elementType=e,t.type=r,t.lanes=s,t}function Ic(e,t,n,r){return(e=Tc(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=Tc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Tc(6,e,null,t)).lanes=n,e}function Rc(e,t,n){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function $c(e,t,n,r,o,i,s,a,l){return e=new Bc(e,t,n,a,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Tc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ri(i),e}function zc(e){if(!e)return _o;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Po(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Po(n))return Lo(e,n,t)}return t}function qc(e,t,n,r,o,i,s,a,l){return(e=$c(n,r,!0,e,0,i,0,a,l)).context=zc(null),n=e.current,(i=$i(r=Jl(),o=ec(n))).callback=null!=t?t:null,zi(n,i,o),e.current.lanes=o,yt(e,o,r),nc(e,r),e}function Vc(e,t,n,r){var o=t.current,i=Jl(),s=ec(o);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=$i(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zi(o,t,s))&&(tc(e,o,s,i),qi(e,o,s)),s}function Fc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||To.current)ba=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Ma(t),pi();break;case 5:Qi(t);break;case 1:Po(t.type)&&Ro(t);break;case 4:Gi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ao(Si,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ao(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?La(e,t,n):(Ao(es,1&es.current),null!==(e=Fa(e,t,n))?e.sibling:null);Ao(es,1&es.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return qa(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ao(es,es.current),r)break;return null;case 22:case 23:return t.lanes=0,Ea(e,t,n)}return Fa(e,t,n)}(e,t,n);ba=!!(131072&e.flags)}else ba=!1,ii&&1048576&t.flags&&ei(t,Ko,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Va(e,t),e=t.pendingProps;var o=jo(t,Mo.current);Ti(t,n),o=ms(null,t,r,e,o,n);var s=ys();return t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Po(r)?(s=!0,Ro(t)):s=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ri(t),o.updater=oa,t.stateNode=o,o._reactInternals=t,la(t,r,e,n),t=_a(null,t,r,!0,s,n)):(t.tag=0,ii&&s&&ti(t),wa(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Va(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"==typeof e)return Oc(e)?1:0;if(null!=e){if((e=e.$$typeof)===_)return 11;if(e===O)return 14}return 2}(r),e=na(r,e),o){case 0:t=Na(null,t,r,e,n);break e;case 1:t=Aa(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=ka(null,t,r,na(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Na(e,t,r,o=t.elementType===r?o:na(r,o),n);case 1:return r=t.type,o=t.pendingProps,Aa(e,t,r,o=t.elementType===r?o:na(r,o),n);case 3:e:{if(Ma(t),null===e)throw Error(i(387));r=t.pendingProps,o=(s=t.memoizedState).element,Bi(e,t),Fi(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ta(e,t,r,n,o=ca(Error(i(423)),t));break e}if(r!==o){t=Ta(e,t,r,n,o=ca(Error(i(424)),t));break e}for(oi=co(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,si=null,n=ki(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===o){t=Fa(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return Qi(t),null===e&&ui(t),r=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,a=o.children,no(r,o)?a=null:null!==s&&no(r,s)&&(t.flags|=32),Ca(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&ui(t),null;case 13:return La(e,t,n);case 4:return Gi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xi(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,xa(e,t,r,o=t.elementType===r?o:na(r,o),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,a=o.value,Ao(Si,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===o.children&&!To.current){t=Fa(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=$i(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Mi(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(i(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Mi(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}wa(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ti(t,n),r=r(o=Oi(o)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return o=na(r=t.type,t.pendingProps),ka(e,t,r,o=na(r.type,o),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:na(r,o),Va(e,t),t.tag=1,Po(r)?(e=!0,Ro(t)):e=!1,Ti(t,n),sa(t,r,o),la(t,r,o,n),_a(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ea(e,t,n)}throw Error(i(156,t.tag))};var Uc="function"==typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function Qc(e,t,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if("function"==typeof o){var a=o;o=function(){var e=Fc(s);a.call(e)}}Vc(t,s,e,o)}else s=function(e,t,n,r,o){if(o){if("function"==typeof r){var i=r;r=function(){var e=Fc(s);i.call(e)}}var s=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=s,e[go]=s.current,Vr(8===e.nodeType?e.parentNode:e),cc(),s}for(;o=e.lastChild;)e.removeChild(o);if("function"==typeof r){var a=r;r=function(){var e=Fc(l);a.call(e)}}var l=$c(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[go]=l.current,Vr(8===e.nodeType?e.parentNode:e),cc(function(){Vc(t,l,n,r)}),l}(n,t,e,o,r);return Fc(s)}Xc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Vc(e,t,null,null)},Xc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc(function(){Vc(null,e,null,null)}),t[go]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Rt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),nc(t,Ze()),!(6&Al)&&(ql=Ze()+500,Fo()))}break;case 13:cc(function(){var t=Di(e,1);if(null!==t){var n=Jl();tc(t,e,1,n)}}),Wc(e,1)}},kt=function(e){if(13===e.tag){var t=Di(e,134217728);null!==t&&tc(t,e,134217728,Jl()),Wc(e,134217728)}},St=function(e){if(13===e.tag){var t=ec(e),n=Di(e,t);null!==n&&tc(n,e,t,Jl()),Wc(e,t)}},Et=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ko(r);if(!o)throw Error(i(90));K(r),Q(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},_e=lc,Me=cc;var Jc={usingClientEntryPoint:!1,Events:[wo,xo,ko,Ne,Ae,lc]},eu={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{ot=nu.inject(tu),it=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(i(299));var n=!1,r="",o=Uc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=$c(e,1,!1,null,0,n,0,r,o),e[go]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Gc(t))throw Error(i(200));return Qc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,s="",a=Uc;if(null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,o,0,s,a),e[go]=t.current,Vr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Xc(t)},t.render=function(e,t,n){if(!Gc(t))throw Error(i(200));return Qc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Gc(e))throw Error(i(40));return!!e._reactRootContainer&&(cc(function(){Qc(null,null,e,!1,function(){e._reactRootContainer=null,e[go]=null})}),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Gc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Qc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},576(e,t,n){"use strict";var r=n(143);t.H=r.createRoot,r.hydrateRoot},143(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(481)},462(e,t,n){"use strict";var r=n(758),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:u,props:i,_owner:a.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},713(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var o,i={},s=null,a=null;if(null!=t)for(o in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)k.call(t,o)&&!E.hasOwnProperty(o)&&(i[o]=t[o]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(o in l=e.defaultProps)void 0===i[o]&&(i[o]=l[o]);return{$$typeof:n,type:e,key:s,ref:a,props:i,_owner:S.current}}function N(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function _(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function M(e,t,o,i,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===i?"."+_(l,0):i,x(s)?(o="",null!=e&&(o=e.replace(A,"$&/")+"/"),M(s,t,o,"",function(e){return e})):null!=s&&(N(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,o+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(A,"$&/")+"/")+e)),t.push(s)),1;if(l=0,i=""===i?".":i+":",x(e))for(var c=0;c<e.length;c++){var u=i+_(a=e[c],c);l+=M(a,t,o,u,s)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=M(a=a.value,t,o,u=i+_(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],o=0;return M(e,r,"","",function(e){return t.call(n,e,o++)}),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j={current:null},P={transition:null},I={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=s,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=D,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=g({},e.props),i=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!E.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];o.children=l}return{$$typeof:n,type:e.type,key:i,ref:s,props:o,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return j.current.useCallback(e,t)},t.useContext=function(e){return j.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return j.current.useDeferredValue(e)},t.useEffect=function(e,t){return j.current.useEffect(e,t)},t.useId=function(){return j.current.useId()},t.useImperativeHandle=function(e,t,n){return j.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.current.useMemo(e,t)},t.useReducer=function(e,t,n){return j.current.useReducer(e,t,n)},t.useRef=function(e){return j.current.useRef(e)},t.useState=function(e){return j.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.current.useTransition()},t.version="18.3.1"},758(e,t,n){"use strict";e.exports=n(713)},70(e,t,n){"use strict";e.exports=n(462)},733(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,s=o>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<o&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<o&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,P(k);else{var t=r(u);null!==t&&I(x,t.startTime-e)}}function k(e,n){g=!1,m&&(m=!1,v(N),N=-1),p=!0;var i=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!M());){var s=h.callback;if("function"==typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?h.callback=a:h===r(c)&&o(c),w(n)}else o(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&I(x,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,C=null,N=-1,A=5,_=-1;function M(){return!(t.unstable_now()-_<A)}function T(){if(null!==C){var e=t.unstable_now();_=e;var n=!0;try{n=C(!0,e)}finally{n?S():(E=!1,C=null)}}else E=!1}if("function"==typeof b)S=function(){b(T)};else if("undefined"!=typeof MessageChannel){var O=new MessageChannel,j=O.port2;O.port1.onmessage=T,S=function(){j.postMessage(null)}}else S=function(){y(T,0)};function P(e){C=e,E||(E=!0,S())}function I(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,P(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,i){var s=t.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?s+i:s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>s?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(m?(v(N),N=-1):m=!0,I(x,i-s))):(e.sortIndex=a,n(c,e),g||p||(g=!0,P(k))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},896(e,t,n){"use strict";e.exports=n(733)},278(e,t,n){"use strict";var r=n(758),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,s=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,u=r[1];return a(function(){o.value=n,o.getSnapshot=t,c(o)&&u({inst:o})},[e,n,t]),s(function(){return c(o)&&u({inst:o}),e(function(){c(o)&&u({inst:o})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},49(e,t,n){"use strict";var r=n(758),o=n(809),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=o.useSyncExternalStore,a=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var d=a(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c(function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==o&&h.hasValue){var t=h.value;if(o(t,e))return a=t}return a=e}if(t=a,i(s,e))return t;var n=r(e);return void 0!==o&&o(t,n)?(s=e,t):(s=e,a=n)}var s,a,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,o]);var f=s(e,d[0],d[1]);return l(function(){h.hasValue=!0,h.value=f},[f]),u(f),f}},809(e,t,n){"use strict";e.exports=n(278)},7(e,t,n){"use strict";e.exports=n(49)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{BOM:()=>ok,DOCUMENT:()=>ik,FLOW_END:()=>sk,SCALAR:()=>ak,createScalarToken:()=>Ux,isCollection:()=>lk,isScalar:()=>ck,prettyToken:()=>uk,resolveAsScalar:()=>Wx,setScalarValue:()=>Kx,stringify:()=>Gx,tokenType:()=>dk,visit:()=>nk});var t={};n.r(t),n.d(t,{Alias:()=>Mb,CST:()=>e,Composer:()=>Hx,Document:()=>mx,Lexer:()=>vk,LineCounter:()=>bk,Pair:()=>lw,Parser:()=>Nk,Scalar:()=>jb,Schema:()=>gx,YAMLError:()=>vx,YAMLMap:()=>pw,YAMLParseError:()=>bx,YAMLSeq:()=>mw,YAMLWarning:()=>wx,isAlias:()=>tb,isCollection:()=>ab,isDocument:()=>nb,isMap:()=>rb,isNode:()=>lb,isPair:()=>ob,isScalar:()=>ib,isSeq:()=>sb,parse:()=>Tk,parseAllDocuments:()=>_k,parseDocument:()=>Mk,stringify:()=>Ok,visit:()=>fb,visitAsync:()=>gb});var r=n(70),o=n(758),i=n(576);function s(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=s(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var a={value:()=>{}};function l(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new c(r)}function c(e){this._=e}function u(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function d(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=a,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}c.prototype=l.prototype={constructor:c,on:function(e,t){var n,r=this._,o=function(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}(e+"",r),i=-1,s=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++i<s;)if(n=(e=o[i]).type)r[n]=d(r[n],e.name,t);else if(null==t)for(n in r)r[n]=d(r[n],e.name,null);return this}for(;++i<s;)if((n=(e=o[i]).type)&&(n=u(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new c(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};const h=l;function f(){}function p(e){return null==e?f:function(){return this.querySelector(e)}}function g(){return[]}function m(e){return null==e?g:function(){return this.querySelectorAll(e)}}function y(e){return function(){return this.matches(e)}}function v(e){return function(t){return t.matches(e)}}var b=Array.prototype.find;function w(){return this.firstElementChild}var x=Array.prototype.filter;function k(){return Array.from(this.children)}function S(e){return new Array(e.length)}function E(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function C(e,t,n,r,o,i){for(var s,a=0,l=t.length,c=i.length;a<c;++a)(s=t[a])?(s.__data__=i[a],r[a]=s):n[a]=new E(e,i[a]);for(;a<l;++a)(s=t[a])&&(o[a]=s)}function N(e,t,n,r,o,i,s){var a,l,c,u=new Map,d=t.length,h=i.length,f=new Array(d);for(a=0;a<d;++a)(l=t[a])&&(f[a]=c=s.call(l,l.__data__,a,t)+"",u.has(c)?o[a]=l:u.set(c,l));for(a=0;a<h;++a)c=s.call(e,i[a],a,i)+"",(l=u.get(c))?(r[a]=l,l.__data__=i[a],u.delete(c)):n[a]=new E(e,i[a]);for(a=0;a<d;++a)(l=t[a])&&u.get(f[a])===l&&(o[a]=l)}function A(e){return e.__data__}function _(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function M(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}E.prototype={constructor:E,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var T="http://www.w3.org/1999/xhtml";const O={svg:"http://www.w3.org/2000/svg",xhtml:T,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function j(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),O.hasOwnProperty(t)?{space:O[t],local:e}:e}function P(e){return function(){this.removeAttribute(e)}}function I(e){return function(){this.removeAttributeNS(e.space,e.local)}}function D(e,t){return function(){this.setAttribute(e,t)}}function L(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function R(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function B(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function $(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function z(e){return function(){this.style.removeProperty(e)}}function q(e,t,n){return function(){this.style.setProperty(e,t,n)}}function V(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function F(e,t){return e.style.getPropertyValue(t)||$(e).getComputedStyle(e,null).getPropertyValue(t)}function H(e){return function(){delete this[e]}}function W(e,t){return function(){this[e]=t}}function U(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function K(e){return e.trim().split(/^|\s+/)}function X(e){return e.classList||new Y(e)}function Y(e){this._node=e,this._names=K(e.getAttribute("class")||"")}function G(e,t){for(var n=X(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Z(e,t){for(var n=X(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Q(e){return function(){G(this,e)}}function J(e){return function(){Z(this,e)}}function ee(e,t){return function(){(t.apply(this,arguments)?G:Z)(this,e)}}function te(){this.textContent=""}function ne(e){return function(){this.textContent=e}}function re(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function oe(){this.innerHTML=""}function ie(e){return function(){this.innerHTML=e}}function se(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function ae(){this.nextSibling&&this.parentNode.appendChild(this)}function le(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ce(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===T&&t.documentElement.namespaceURI===T?t.createElement(e):t.createElementNS(n,e)}}function ue(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function de(e){var t=j(e);return(t.local?ue:ce)(t)}function he(){return null}function fe(){var e=this.parentNode;e&&e.removeChild(this)}function pe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ge(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function me(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function ye(e,t,n){return function(){var r,o=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=t);this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function ve(e,t,n){var r=$(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function be(e,t){return function(){return ve(this,e,t)}}function we(e,t){return function(){return ve(this,e,t.apply(this,arguments))}}Y.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var xe=[null];function ke(e,t){this._groups=e,this._parents=t}function Se(){return new ke([[document.documentElement]],xe)}ke.prototype=Se.prototype={constructor:ke,select:function(e){"function"!=typeof e&&(e=p(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,s,a=t[o],l=a.length,c=r[o]=new Array(l),u=0;u<l;++u)(i=a[u])&&(s=e.call(i,i.__data__,u,a))&&("__data__"in i&&(s.__data__=i.__data__),c[u]=s);return new ke(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}(e):m(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s,a=t[i],l=a.length,c=0;c<l;++c)(s=a[c])&&(r.push(e.call(s,s.__data__,c,a)),o.push(s));return new ke(r,o)},selectChild:function(e){return this.select(null==e?w:function(e){return function(){return b.call(this.children,e)}}("function"==typeof e?e:v(e)))},selectChildren:function(e){return this.selectAll(null==e?k:function(e){return function(){return x.call(this.children,e)}}("function"==typeof e?e:v(e)))},filter:function(e){"function"!=typeof e&&(e=y(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,s=t[o],a=s.length,l=r[o]=[],c=0;c<a;++c)(i=s[c])&&e.call(i,i.__data__,c,s)&&l.push(i);return new ke(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,A);var n,r=t?N:C,o=this._parents,i=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var s=i.length,a=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=o[u],h=i[u],f=h.length,p=_(e.call(d,d&&d.__data__,u,o)),g=p.length,m=l[u]=new Array(g),y=a[u]=new Array(g);r(d,h,m,y,c[u]=new Array(f),p,t);for(var v,b,w=0,x=0;w<g;++w)if(v=m[w]){for(w>=x&&(x=w+1);!(b=y[x])&&++x<g;);v._next=b||null}}return(a=new ke(a,o))._enter=l,a._exit=c,a},enter:function(){return new ke(this._enter||this._groups.map(S),this._parents)},exit:function(){return new ke(this._exit||this._groups.map(S),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),a=new Array(o),l=0;l<s;++l)for(var c,u=n[l],d=r[l],h=u.length,f=a[l]=new Array(h),p=0;p<h;++p)(c=u[p]||d[p])&&(f[p]=c);for(;l<o;++l)a[l]=n[l];return new ke(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,s=o[i];--i>=0;)(r=o[i])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=M);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s,a=n[i],l=a.length,c=o[i]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(t)}return new ke(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],s=0,a=i.length;s<a;++s)(o=i[s])&&e.call(o,o.__data__,s,i);return this},attr:function(e,t){var n=j(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?I:P:"function"==typeof t?n.local?B:R:n.local?L:D)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?z:"function"==typeof t?V:q)(e,t,null==n?"":n)):F(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?H:"function"==typeof t?U:W)(e,t)):this.node()[e]},classed:function(e,t){var n=K(e+"");if(arguments.length<2){for(var r=X(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?ee:t?Q:J)(n,t))},text:function(e){return arguments.length?this.each(null==e?te:("function"==typeof e?re:ne)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?oe:("function"==typeof e?se:ie)(e)):this.node().innerHTML},raise:function(){return this.each(ae)},lower:function(){return this.each(le)},append:function(e){var t="function"==typeof e?e:de(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:de(e),r=null==t?he:"function"==typeof t?t:p(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(fe)},clone:function(e){return this.select(e?ge:pe)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),s=i.length;if(!(arguments.length<2)){for(a=t?ye:me,r=0;r<s;++r)this.each(a(i[r],t,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(r=0,l=a[c];r<s;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?we:be)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],i=0,s=o.length;i<s;++i)(r=o[i])&&(yield r)}};const Ee=Se;function Ce(e){return"string"==typeof e?new ke([[document.querySelector(e)]],[document.documentElement]):new ke([[e]],xe)}function Ne(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ae={passive:!1},_e={capture:!0,passive:!1};function Me(e){e.stopImmediatePropagation()}function Te(e){e.preventDefault(),e.stopImmediatePropagation()}function Oe(e){var t=e.document.documentElement,n=Ce(e).on("dragstart.drag",Te,_e);"onselectstart"in t?n.on("selectstart.drag",Te,_e):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function je(e,t){var n=e.document.documentElement,r=Ce(e).on("dragstart.drag",null);t&&(r.on("click.drag",Te,_e),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Pe=e=>()=>e;function Ie(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:a,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}function De(e){return!e.ctrlKey&&!e.button}function Le(){return this.parentNode}function Re(e,t){return null==t?{x:e.x,y:e.y}:t}function Be(){return navigator.maxTouchPoints||"ontouchstart"in this}function $e(){var e,t,n,r,o=De,i=Le,s=Re,a=Be,l={},c=h("start","drag","end"),u=0,d=0;function f(e){e.on("mousedown.drag",p).filter(a).on("touchstart.drag",y).on("touchmove.drag",v,Ae).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(s,a){if(!r&&o.call(this,s,a)){var l=w(this,i.call(this,s,a),s,a,"mouse");l&&(Ce(s.view).on("mousemove.drag",g,_e).on("mouseup.drag",m,_e),Oe(s.view),Me(s),n=!1,e=s.clientX,t=s.clientY,l("start",s))}}function g(r){if(Te(r),!n){var o=r.clientX-e,i=r.clientY-t;n=o*o+i*i>d}l.mouse("drag",r)}function m(e){Ce(e.view).on("mousemove.drag mouseup.drag",null),je(e.view,n),Te(e),l.mouse("end",e)}function y(e,t){if(o.call(this,e,t)){var n,r,s=e.changedTouches,a=i.call(this,e,t),l=s.length;for(n=0;n<l;++n)(r=w(this,a,e,t,s[n].identifier,s[n]))&&(Me(e),r("start",e,s[n]))}}function v(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=l[r[t].identifier])&&(Te(e),n("drag",e,r[t]))}function b(e){var t,n,o=e.changedTouches,i=o.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<i;++t)(n=l[o[t].identifier])&&(Me(e),n("end",e,o[t]))}function w(e,t,n,r,o,i){var a,d,h,p=c.copy(),g=Ne(i||n,t);if(null!=(h=s.call(e,new Ie("beforestart",{sourceEvent:n,target:f,identifier:o,active:u,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),r)))return a=h.x-g[0]||0,d=h.y-g[1]||0,function n(i,s,c){var m,y=g;switch(i){case"start":l[o]=n,m=u++;break;case"end":delete l[o],--u;case"drag":g=Ne(c||s,t),m=u}p.call(i,e,new Ie(i,{sourceEvent:s,subject:h,target:f,identifier:o,active:m,x:g[0]+a,y:g[1]+d,dx:g[0]-y[0],dy:g[1]-y[1],dispatch:p}),r)}}return f.filter=function(e){return arguments.length?(o="function"==typeof e?e:Pe(!!e),f):o},f.container=function(e){return arguments.length?(i="function"==typeof e?e:Pe(e),f):i},f.subject=function(e){return arguments.length?(s="function"==typeof e?e:Pe(e),f):s},f.touchable=function(e){return arguments.length?(a="function"==typeof e?e:Pe(!!e),f):a},f.on=function(){var e=c.on.apply(c,arguments);return e===c?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}function ze(e){return((e=Math.exp(e))+1/e)/2}Ie.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};const qe=function e(t,n,r){function o(e,o){var i,s,a=e[0],l=e[1],c=e[2],u=o[0],d=o[1],h=o[2],f=u-a,p=d-l,g=f*f+p*p;if(g<1e-12)s=Math.log(h/c)/t,i=function(e){return[a+e*f,l+e*p,c*Math.exp(t*e*s)]};else{var m=Math.sqrt(g),y=(h*h-c*c+r*g)/(2*c*n*m),v=(h*h-c*c-r*g)/(2*h*n*m),b=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(v*v+1)-v);s=(w-b)/t,i=function(e){var r,o=e*s,i=ze(b),u=c/(n*m)*(i*(r=t*o+b,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[a+u*f,l+u*p,c*i/ze(t*o+b)]}}return i.duration=1e3*s*t/Math.SQRT2,i}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4);var Ve,Fe,He=0,We=0,Ue=0,Ke=0,Xe=0,Ye=0,Ge="object"==typeof performance&&performance.now?performance:Date,Ze="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qe(){return Xe||(Ze(Je),Xe=Ge.now()+Ye)}function Je(){Xe=0}function et(){this._call=this._time=this._next=null}function tt(e,t,n){var r=new et;return r.restart(e,t,n),r}function nt(){Xe=(Ke=Ge.now())+Ye,He=We=0;try{!function(){Qe(),++He;for(var e,t=Ve;t;)(e=Xe-t._time)>=0&&t._call.call(void 0,e),t=t._next;--He}()}finally{He=0,function(){for(var e,t,n=Ve,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Ve=t);Fe=e,ot(r)}(),Xe=0}}function rt(){var e=Ge.now(),t=e-Ke;t>1e3&&(Ye-=t,Ke=e)}function ot(e){He||(We&&(We=clearTimeout(We)),e-Xe>24?(e<1/0&&(We=setTimeout(nt,e-Ge.now()-Ye)),Ue&&(Ue=clearInterval(Ue))):(Ue||(Ke=Ge.now(),Ue=setInterval(rt,1e3)),He=1,Ze(nt)))}function it(e,t,n){var r=new et;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}et.prototype=tt.prototype={constructor:et,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Qe():+n)+(null==t?0:+t),this._next||Fe===this||(Fe?Fe._next=this:Ve=this,Fe=this),this._call=e,this._time=n,ot()},stop:function(){this._call&&(this._call=null,this._time=1/0,ot())}};var st=h("start","end","cancel","interrupt"),at=[];function lt(e,t,n,r,o,i){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(l){var c,u,d,h;if(1!==n.state)return a();for(c in o)if((h=o[c]).name===n.name){if(3===h.state)return it(i);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(it(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=h);r.length=u+1}}function s(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(a),n.state=5,1),i=-1,s=r.length;++i<s;)r[i].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=tt(function(e){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:o,on:st,tween:at,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function ct(e,t){var n=dt(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function ut(e,t){var n=dt(e,t);if(n.state>3)throw new Error("too late; already running");return n}function dt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ht(e,t){var n,r,o,i=e.__transition,s=!0;if(i){for(o in t=null==t?null:t+"",i)(n=i[o]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]):s=!1;s&&delete e.__transition}}function ft(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var pt,gt=180/Math.PI,mt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yt(e,t,n,r,o,i){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*gt,skewX:Math.atan(l)*gt,scaleX:s,scaleY:a}}function vt(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(i,s){var a=[],l=[];return i=e(i),s=e(s),function(e,r,o,i,s,a){if(e!==o||r!==i){var l=s.push("translate(",null,t,null,n);a.push({i:l-4,x:ft(e,o)},{i:l-2,x:ft(r,i)})}else(o||i)&&s.push("translate("+o+t+i+n)}(i.translateX,i.translateY,s.translateX,s.translateY,a,l),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(o(n)+"rotate(",null,r)-2,x:ft(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(i.rotate,s.rotate,a,l),function(e,t,n,i){e!==t?i.push({i:n.push(o(n)+"skewX(",null,r)-2,x:ft(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(i.skewX,s.skewX,a,l),function(e,t,n,r,i,s){if(e!==n||t!==r){var a=i.push(o(i)+"scale(",null,",",null,")");s.push({i:a-4,x:ft(e,n)},{i:a-2,x:ft(t,r)})}else 1===n&&1===r||i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,s.scaleX,s.scaleY,a,l),i=s=null,function(e){for(var t,n=-1,r=l.length;++n<r;)a[(t=l[n]).i]=t.x(e);return a.join("")}}}var bt=vt(function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?mt:yt(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),wt=vt(function(e){return null==e?mt:(pt||(pt=document.createElementNS("http://www.w3.org/2000/svg","g")),pt.setAttribute("transform",e),(e=pt.transform.baseVal.consolidate())?yt((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):mt)},", ",")",")");function xt(e,t){var n,r;return function(){var o=ut(this,e),i=o.tween;if(i!==n)for(var s=0,a=(r=n=i).length;s<a;++s)if(r[s].name===t){(r=r.slice()).splice(s,1);break}o.tween=r}}function kt(e,t,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var i=ut(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var a={name:t,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===t){o[l]=a;break}l===c&&o.push(a)}i.tween=o}}function St(e,t,n){var r=e._id;return e.each(function(){var e=ut(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return dt(e,r).value[t]}}function Et(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ct(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Nt(){}var At=.7,_t=1/At,Mt="\\s*([+-]?\\d+)\\s*",Tt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jt=/^#([0-9a-f]{3,8})$/,Pt=new RegExp(`^rgb\\(${Mt},${Mt},${Mt}\\)$`),It=new RegExp(`^rgb\\(${Ot},${Ot},${Ot}\\)$`),Dt=new RegExp(`^rgba\\(${Mt},${Mt},${Mt},${Tt}\\)$`),Lt=new RegExp(`^rgba\\(${Ot},${Ot},${Ot},${Tt}\\)$`),Rt=new RegExp(`^hsl\\(${Tt},${Ot},${Ot}\\)$`),Bt=new RegExp(`^hsla\\(${Tt},${Ot},${Ot},${Tt}\\)$`),$t={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function zt(){return this.rgb().formatHex()}function qt(){return this.rgb().formatRgb()}function Vt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Ft(t):3===n?new Ut(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Ht(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Ht(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Pt.exec(e))?new Ut(t[1],t[2],t[3],1):(t=It.exec(e))?new Ut(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Dt.exec(e))?Ht(t[1],t[2],t[3],t[4]):(t=Lt.exec(e))?Ht(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Rt.exec(e))?Qt(t[1],t[2]/100,t[3]/100,1):(t=Bt.exec(e))?Qt(t[1],t[2]/100,t[3]/100,t[4]):$t.hasOwnProperty(e)?Ft($t[e]):"transparent"===e?new Ut(NaN,NaN,NaN,0):null}function Ft(e){return new Ut(e>>16&255,e>>8&255,255&e,1)}function Ht(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ut(e,t,n,r)}function Wt(e,t,n,r){return 1===arguments.length?((o=e)instanceof Nt||(o=Vt(o)),o?new Ut((o=o.rgb()).r,o.g,o.b,o.opacity):new Ut):new Ut(e,t,n,null==r?1:r);var o}function Ut(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Kt(){return`#${Zt(this.r)}${Zt(this.g)}${Zt(this.b)}`}function Xt(){const e=Yt(this.opacity);return`${1===e?"rgb(":"rgba("}${Gt(this.r)}, ${Gt(this.g)}, ${Gt(this.b)}${1===e?")":`, ${e})`}`}function Yt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zt(e){return((e=Gt(e))<16?"0":"")+e.toString(16)}function Qt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new en(e,t,n,r)}function Jt(e){if(e instanceof en)return new en(e.h,e.s,e.l,e.opacity);if(e instanceof Nt||(e=Vt(e)),!e)return new en;if(e instanceof en)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,a=i-o,l=(i+o)/2;return a?(s=t===i?(n-r)/a+6*(n<r):n===i?(r-t)/a+2:(t-n)/a+4,a/=l<.5?i+o:2-i-o,s*=60):a=l>0&&l<1?0:s,new en(s,a,l,e.opacity)}function en(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function tn(e){return(e=(e||0)%360)<0?e+360:e}function nn(e){return Math.max(0,Math.min(1,e||0))}function rn(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function on(e,t,n,r,o){var i=e*e,s=i*e;return((1-3*e+3*i-s)*t+(4-6*i+3*s)*n+(1+3*e+3*i-3*s)*r+s*o)/6}Et(Nt,Vt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zt,formatHex:zt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Jt(this).formatHsl()},formatRgb:qt,toString:qt}),Et(Ut,Wt,Ct(Nt,{brighter(e){return e=null==e?_t:Math.pow(_t,e),new Ut(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?At:Math.pow(At,e),new Ut(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ut(Gt(this.r),Gt(this.g),Gt(this.b),Yt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Kt,formatHex:Kt,formatHex8:function(){return`#${Zt(this.r)}${Zt(this.g)}${Zt(this.b)}${Zt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Xt,toString:Xt})),Et(en,function(e,t,n,r){return 1===arguments.length?Jt(e):new en(e,t,n,null==r?1:r)},Ct(Nt,{brighter(e){return e=null==e?_t:Math.pow(_t,e),new en(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?At:Math.pow(At,e),new en(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Ut(rn(e>=240?e-240:e+120,o,r),rn(e,o,r),rn(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new en(tn(this.h),nn(this.s),nn(this.l),Yt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Yt(this.opacity);return`${1===e?"hsl(":"hsla("}${tn(this.h)}, ${100*nn(this.s)}%, ${100*nn(this.l)}%${1===e?")":`, ${e})`}`}}));const sn=e=>()=>e;function an(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):sn(isNaN(e)?t:e)}const ln=function e(t){var n=function(e){return 1===(e=+e)?an:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):sn(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=Wt(e)).r,(t=Wt(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),s=an(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=i(t),e.opacity=s(t),e+""}}return r.gamma=e,r}(1);function cn(e){return function(t){var n,r,o=t.length,i=new Array(o),s=new Array(o),a=new Array(o);for(n=0;n<o;++n)r=Wt(t[n]),i[n]=r.r||0,s[n]=r.g||0,a[n]=r.b||0;return i=e(i),s=e(s),a=e(a),r.opacity=1,function(e){return r.r=i(e),r.g=s(e),r.b=a(e),r+""}}}cn(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],i=e[r+1],s=r>0?e[r-1]:2*o-i,a=r<t-1?e[r+2]:2*i-o;return on((n-r/t)*t,s,o,i,a)}}),cn(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],i=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return on((n-r/t)*t,o,i,s,a)}});var un=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dn=new RegExp(un.source,"g");function hn(e,t){var n,r,o,i=un.lastIndex=dn.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(n=un.exec(e))&&(r=dn.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:ft(n,r)})),i=dn.lastIndex;return i<t.length&&(o=t.slice(i),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)a[(n=l[r]).i]=n.x(e);return a.join("")})}function fn(e,t){var n;return("number"==typeof t?ft:t instanceof Vt?ln:(n=Vt(t))?(t=n,ln):hn)(e,t)}function pn(e){return function(){this.removeAttribute(e)}}function gn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mn(e,t,n){var r,o,i=n+"";return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function yn(e,t,n){var r,o,i=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function vn(e,t,n){var r,o,i;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(e))===(a=l+"")?null:s===r&&a===o?i:(o=a,i=t(r=s,l));this.removeAttribute(e)}}function bn(e,t,n){var r,o,i;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(e.space,e.local))===(a=l+"")?null:s===r&&a===o?i:(o=a,i=t(r=s,l));this.removeAttributeNS(e.space,e.local)}}function wn(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return o._value=t,o}function xn(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return o._value=t,o}function kn(e,t){return function(){ct(this,e).delay=+t.apply(this,arguments)}}function Sn(e,t){return t=+t,function(){ct(this,e).delay=t}}function En(e,t){return function(){ut(this,e).duration=+t.apply(this,arguments)}}function Cn(e,t){return t=+t,function(){ut(this,e).duration=t}}var Nn=Ee.prototype.constructor;function An(e){return function(){this.style.removeProperty(e)}}var _n=0;function Mn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Tn(){return++_n}var On=Ee.prototype;Mn.prototype=function(e){return Ee().transition(e)}.prototype={constructor:Mn,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=p(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var a,l,c=r[s],u=c.length,d=i[s]=new Array(u),h=0;h<u;++h)(a=c[h])&&(l=e.call(a,a.__data__,h,c))&&("__data__"in a&&(l.__data__=a.__data__),d[h]=l,lt(d[h],t,n,h,d,dt(a,n)));return new Mn(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=m(e));for(var r=this._groups,o=r.length,i=[],s=[],a=0;a<o;++a)for(var l,c=r[a],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,f=e.call(l,l.__data__,d,c),p=dt(l,n),g=0,y=f.length;g<y;++g)(h=f[g])&&lt(h,t,n,g,f,p);i.push(f),s.push(l)}return new Mn(i,s,t,n)},selectChild:On.selectChild,selectChildren:On.selectChildren,filter:function(e){"function"!=typeof e&&(e=y(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,s=t[o],a=s.length,l=r[o]=[],c=0;c<a;++c)(i=s[c])&&e.call(i,i.__data__,c,s)&&l.push(i);return new Mn(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),a=0;a<i;++a)for(var l,c=t[a],u=n[a],d=c.length,h=s[a]=new Array(d),f=0;f<d;++f)(l=c[f]||u[f])&&(h[f]=l);for(;a<r;++a)s[a]=t[a];return new Mn(s,this._parents,this._name,this._id)},selection:function(){return new Nn(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Tn(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s,a=r[i],l=a.length,c=0;c<l;++c)if(s=a[c]){var u=dt(s,t);lt(s,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Mn(r,this._parents,e,n)},call:On.call,nodes:On.nodes,node:On.node,size:On.size,empty:On.empty,each:On.each,on:function(e,t){var n=this._id;return arguments.length<2?dt(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,i=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?ct:ut;return function(){var s=i(this,e),a=s.on;a!==r&&(o=(r=a).copy()).on(t,n),s.on=o}}(n,e,t))},attr:function(e,t){var n=j(e),r="transform"===n?wt:fn;return this.attrTween(e,"function"==typeof t?(n.local?bn:vn)(n,r,St(this,"attr."+e,t)):null==t?(n.local?gn:pn)(n):(n.local?yn:mn)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=j(e);return this.tween(n,(r.local?wn:xn)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?bt:fn;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var i=F(this,e),s=(this.style.removeProperty(e),F(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}(e,r)).on("end.style."+e,An(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,o,i;return function(){var s=F(this,e),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(e),l=a=F(this,e)),s===l?null:s===r&&l===o?i:(o=l,i=t(r=s,a))}}(e,r,St(this,"style."+e,t))).each(function(e,t){var n,r,o,i,s="style."+t,a="end."+s;return function(){var l=ut(this,e),c=l.on,u=null==l.value[s]?i||(i=An(t)):void 0;c===n&&o===u||(r=(n=c).copy()).on(a,o=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,i=n+"";return function(){var s=F(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,i,n)),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(St(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=dt(this.node(),n).tween,i=0,s=o.length;i<s;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?xt:kt)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?kn:Sn)(t,e)):dt(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?En:Cn)(t,e)):dt(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){ut(this,e).ease=t}}(t,e)):dt(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;ut(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var a={value:s},l={value:function(){0===--o&&i()}};n.each(function(){var n=ut(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),n.on=t}),0===o&&i()})},[Symbol.iterator]:On[Symbol.iterator]};var jn={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Pn(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Ee.prototype.interrupt=function(e){return this.each(function(){ht(this,e)})},Ee.prototype.transition=function(e){var t,n;e instanceof Mn?(t=e._id,e=e._name):(t=Tn(),(n=jn).time=Qe(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s,a=r[i],l=a.length,c=0;c<l;++c)(s=a[c])&&lt(s,e,t,c,a,n||Pn(s,t));return new Mn(r,this._parents,e,t)};const In=e=>()=>e;function Dn(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Ln(e,t,n){this.k=e,this.x=t,this.y=n}Ln.prototype={constructor:Ln,scale:function(e){return 1===e?this:new Ln(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Ln(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Rn=new Ln(1,0,0);function Bn(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Rn;return e.__zoom}function $n(e){e.stopImmediatePropagation()}function zn(e){e.preventDefault(),e.stopImmediatePropagation()}function qn(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Vn(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Fn(){return this.__zoom||Rn}function Hn(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Wn(){return navigator.maxTouchPoints||"ontouchstart"in this}function Un(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function Kn(){var e,t,n,r=qn,o=Vn,i=Un,s=Hn,a=Wn,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=qe,f=h("start","zoom","end"),p=0,g=10;function m(e){e.property("__zoom",Fn).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",C).filter(a).on("touchstart.zoom",N).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",_).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new Ln(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new Ln(e.k,r,o)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,t,n,r){e.on("start.zoom",function(){x(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).event(r).end()}).tween("zoom",function(){var e=this,i=arguments,s=x(e,i).event(r),a=o.apply(e,i),l=null==n?b(a):"function"==typeof n?n.apply(e,i):n,c=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),u=e.__zoom,h="function"==typeof t?t.apply(e,i):t,f=d(u.invert(l).concat(c/u.k),h.invert(l).concat(c/h.k));return function(e){if(1===e)e=h;else{var t=f(e),n=c/t[2];e=new Ln(n,l[0]-t[0]*n,l[1]-t[1]*n)}s.zoom(null,e)}})}function x(e,t,n){return!n&&e.__zooming||new k(e,t)}function k(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function S(e,...t){if(r.apply(this,arguments)){var n=x(this,t).event(e),o=this.__zoom,a=Math.max(l[0],Math.min(l[1],o.k*Math.pow(2,s.apply(this,arguments)))),u=Ne(e);if(n.wheel)n.mouse[0][0]===u[0]&&n.mouse[0][1]===u[1]||(n.mouse[1]=o.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(o.k===a)return;n.mouse=[u,o.invert(u)],ht(this),n.start()}zn(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",i(v(y(o,a),n.mouse[0],n.mouse[1]),n.extent,c))}}function E(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,s=x(this,t,!0).event(e),a=Ce(e.view).on("mousemove.zoom",function(e){if(zn(e),!s.moved){var t=e.clientX-u,n=e.clientY-d;s.moved=t*t+n*n>p}s.event(e).zoom("mouse",i(v(s.that.__zoom,s.mouse[0]=Ne(e,o),s.mouse[1]),s.extent,c))},!0).on("mouseup.zoom",function(e){a.on("mousemove.zoom mouseup.zoom",null),je(e.view,s.moved),zn(e),s.event(e).end()},!0),l=Ne(e,o),u=e.clientX,d=e.clientY;Oe(e.view),$n(e),s.mouse=[l,this.__zoom.invert(l)],ht(this),s.start()}}function C(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,s=Ne(e.changedTouches?e.changedTouches[0]:e,this),a=n.invert(s),l=n.k*(e.shiftKey?.5:2),d=i(v(y(n,l),s,a),o.apply(this,t),c);zn(e),u>0?Ce(this).transition().duration(u).call(w,d,s,e):Ce(this).call(m.transform,d,s,e)}}function N(n,...o){if(r.apply(this,arguments)){var i,s,a,l,c=n.touches,u=c.length,d=x(this,o,n.changedTouches.length===u).event(n);for($n(n),s=0;s<u;++s)l=[l=Ne(a=c[s],this),this.__zoom.invert(l),a.identifier],d.touch0?d.touch1||d.touch0[2]===l[2]||(d.touch1=l,d.taps=0):(d.touch0=l,i=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(d.taps<2&&(t=l[0],e=setTimeout(function(){e=null},500)),ht(this),d.start())}}function A(e,...t){if(this.__zooming){var n,r,o,s,a=x(this,t).event(e),l=e.changedTouches,u=l.length;for(zn(e),n=0;n<u;++n)o=Ne(r=l[n],this),a.touch0&&a.touch0[2]===r.identifier?a.touch0[0]=o:a.touch1&&a.touch1[2]===r.identifier&&(a.touch1[0]=o);if(r=a.that.__zoom,a.touch1){var d=a.touch0[0],h=a.touch0[1],f=a.touch1[0],p=a.touch1[1],g=(g=f[0]-d[0])*g+(g=f[1]-d[1])*g,m=(m=p[0]-h[0])*m+(m=p[1]-h[1])*m;r=y(r,Math.sqrt(g/m)),o=[(d[0]+f[0])/2,(d[1]+f[1])/2],s=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!a.touch0)return;o=a.touch0[0],s=a.touch0[1]}a.zoom("touch",i(v(r,o,s),a.extent,c))}}function _(e,...r){if(this.__zooming){var o,i,s=x(this,r).event(e),a=e.changedTouches,l=a.length;for($n(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),o=0;o<l;++o)i=a[o],s.touch0&&s.touch0[2]===i.identifier?delete s.touch0:s.touch1&&s.touch1[2]===i.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(i=Ne(i,this),Math.hypot(t[0]-i[0],t[1]-i[1])<g)){var c=Ce(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return m.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",Fn),e!==o?w(e,t,n,r):o.interrupt().each(function(){x(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t,n,r){m.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n,r)},m.scaleTo=function(e,t,n,r){m.transform(e,function(){var e=o.apply(this,arguments),r=this.__zoom,s=null==n?b(e):"function"==typeof n?n.apply(this,arguments):n,a=r.invert(s),l="function"==typeof t?t.apply(this,arguments):t;return i(v(y(r,l),s,a),e,c)},n,r)},m.translateBy=function(e,t,n,r){m.transform(e,function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),c)},null,r)},m.translateTo=function(e,t,n,r,s){m.transform(e,function(){var e=o.apply(this,arguments),s=this.__zoom,a=null==r?b(e):"function"==typeof r?r.apply(this,arguments):r;return i(Rn.translate(a[0],a[1]).scale(s.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)},r,s)},k.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Ce(this.that).datum();f.call(e,this.that,new Dn(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:f}),t)}},m.wheelDelta=function(e){return arguments.length?(s="function"==typeof e?e:In(+e),m):s},m.filter=function(e){return arguments.length?(r="function"==typeof e?e:In(!!e),m):r},m.touchable=function(e){return arguments.length?(a="function"==typeof e?e:In(!!e),m):a},m.extent=function(e){return arguments.length?(o="function"==typeof e?e:In([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):o},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(e){return arguments.length?(i=e,m):i},m.duration=function(e){return arguments.length?(u=+e,m):u},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=f.on.apply(f,arguments);return e===f?m:e},m.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,m):Math.sqrt(p)},m.tapDistance=function(e){return arguments.length?(g=+e,m):g},m}function Xn(e,t){var n,r=t?t.length:0,o=e?Math.min(r,e.length):0,i=new Array(o),s=new Array(r);for(n=0;n<o;++n)i[n]=Qn(e[n],t[n]);for(;n<r;++n)s[n]=t[n];return function(e){for(n=0;n<o;++n)s[n]=i[n](e);return s}}function Yn(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Gn(e,t){var n,r={},o={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Qn(e[n],t[n]):o[n]=t[n];return function(e){for(n in r)o[n]=r[n](e);return o}}function Zn(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,o=t.slice();return function(i){for(n=0;n<r;++n)o[n]=e[n]*(1-i)+t[n]*i;return o}}function Qn(e,t){var n,r,o=typeof t;return null==t||"boolean"===o?sn(t):("number"===o?ft:"string"===o?(n=Vt(t))?(t=n,ln):hn:t instanceof Vt?ln:t instanceof Date?Yn:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?Xn:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Gn:ft:Zn))(e,t)}Bn.prototype=Ln.prototype;const Jn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],er=["Enter"," ","Escape"],tr={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var nr,rr,or;!function(e){e.Strict="strict",e.Loose="loose"}(nr||(nr={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(rr||(rr={})),function(e){e.Partial="partial",e.Full="full"}(or||(or={}));const ir={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var sr,ar,lr;!function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(sr||(sr={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(ar||(ar={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(lr||(lr={}));const cr={[lr.Left]:lr.Right,[lr.Right]:lr.Left,[lr.Top]:lr.Bottom,[lr.Bottom]:lr.Top};function ur(e){return null===e?null:e?"valid":"invalid"}const dr=e=>"id"in e&&"source"in e&&"target"in e,hr=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),fr=(e,t=[0,0])=>{const{width:n,height:r}=$r(e),o=e.origin??t,i=n*o[0],s=r*o[1];return{x:e.position.x-i,y:e.position.y-s}},pr=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(e=>{(void 0===t.filter||t.filter(e))&&(n=kr(n,Nr(e)),r=!0)}),r?Er(n):{x:0,y:0,width:0,height:0}},gr=(e,t,[n,r,o]=[0,0,1],i=!1,s=!1)=>{const a={...Pr(t,[n,r,o]),width:t.width/o,height:t.height/o},l=[];for(const t of e.values()){const{measured:e,selectable:n=!0,hidden:r=!1}=t;if(s&&!n||r)continue;const o=e.width??t.width??t.initialWidth??null,c=e.height??t.height??t.initialHeight??null,u=_r(a,Cr(t)),d=(o??0)*(c??0),h=i&&u>0;(!t.internals.handleBounds||h||u>=d||t.dragging)&&l.push(t)}return l};function mr({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:c}=a?a.internals.positionAbsolute:{x:0,y:0},u=s.origin??r;let d=s.extent||o;if("parent"!==s.extent||s.expandParent)a&&Br(s.extent)&&(d=[[s.extent[0][0]+l,s.extent[0][1]+c],[s.extent[1][0]+l,s.extent[1][1]+c]]);else if(a){const e=a.measured.width,t=a.measured.height;e&&t&&(d=[[l,c],[l+e,c+t]])}else i?.("005","Only child nodes can use a parent extent.");const h=Br(d)?vr(t,d,s.measured):t;return void 0!==s.measured.width&&void 0!==s.measured.height||i?.("015","It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."),{position:{x:h.x-l+(s.measured.width??0)*u[0],y:h.y-c+(s.measured.height??0)*u[1]},positionAbsolute:h}}const yr=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),vr=(e={x:0,y:0},t,n)=>({x:yr(e.x,t[0][0],t[1][0]-(n?.width??0)),y:yr(e.y,t[0][1],t[1][1]-(n?.height??0))});function br(e,t,n){const{width:r,height:o}=$r(n),{x:i,y:s}=n.internals.positionAbsolute;return vr(e,[[i,s],[i+r,s+o]],t)}const wr=(e,t,n)=>e<t?yr(Math.abs(e-t),1,t)/t:e>n?-yr(Math.abs(e-n),1,t)/t:0,xr=(e,t,n=15,r=40)=>[wr(e.x,r,t.width-r)*n,wr(e.y,r,t.height-r)*n],kr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Sr=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Er=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Cr=(e,t=[0,0])=>{const{x:n,y:r}=hr(e)?e.internals.positionAbsolute:fr(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Nr=(e,t=[0,0])=>{const{x:n,y:r}=hr(e)?e.internals.positionAbsolute:fr(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},Ar=(e,t)=>Er(kr(Sr(e),Sr(t))),_r=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Mr=e=>Tr(e.width)&&Tr(e.height)&&Tr(e.x)&&Tr(e.y),Tr=e=>!isNaN(e)&&isFinite(e),Or=(e,t)=>{},jr=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Pr=({x:e,y:t},[n,r,o],i=!1,s=[1,1])=>{const a={x:(e-n)/o,y:(t-r)/o};return i?jr(a,s):a},Ir=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r});function Dr(e,t){if("number"==typeof e)return Math.floor(.5*(t-t/(1+e)));if("string"==typeof e&&e.endsWith("px")){const t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}const Lr=(e,t,n,r,o,i)=>{const s=function(e,t,n){if("string"==typeof e||"number"==typeof e){const r=Dr(e,n),o=Dr(e,t);return{top:r,right:o,bottom:r,left:o,x:2*o,y:2*r}}if("object"==typeof e){const r=Dr(e.top??e.y??0,n),o=Dr(e.bottom??e.y??0,n),i=Dr(e.left??e.x??0,t),s=Dr(e.right??e.x??0,t);return{top:r,right:s,bottom:o,left:i,x:i+s,y:r+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(i,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,c=Math.min(a,l),u=yr(c,r,o),d=t/2-(e.x+e.width/2)*u,h=n/2-(e.y+e.height/2)*u,f=function(e,t,n,r,o,i){const{x:s,y:a}=Ir(e,[t,n,r]),{x:l,y:c}=Ir({x:e.x+e.width,y:e.y+e.height},[t,n,r]),u=o-l,d=i-c;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(u),bottom:Math.floor(d)}}(e,d,h,u,t,n),p=Math.min(f.left-s.left,0),g=Math.min(f.top-s.top,0);return{x:d-p+Math.min(f.right-s.right,0),y:h-g+Math.min(f.bottom-s.bottom,0),zoom:u}},Rr=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function Br(e){return null!=e&&"parent"!==e}function $r(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function zr(e){return void 0!==(e.measured?.width??e.width??e.initialWidth)&&void 0!==(e.measured?.height??e.height??e.initialHeight)}function qr(e,t={width:0,height:0},n,r,o){const i={...e},s=r.get(n);if(s){const e=s.origin||o;i.x+=s.internals.positionAbsolute.x-(t.width??0)*e[0],i.y+=s.internals.positionAbsolute.y-(t.height??0)*e[1]}return i}function Vr(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Fr(e){return{...tr,...e||{}}}function Hr(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:i,y:s}=Gr(e),a=Pr({x:i-(o?.left??0),y:s-(o?.top??0)},r),{x:l,y:c}=n?jr(a,t):a;return{xSnapped:l,ySnapped:c,...a}}const Wr=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ur=e=>e?.getRootNode?.()||window?.document,Kr=["INPUT","SELECT","TEXTAREA"];function Xr(e){const t=e.composedPath?.()?.[0]||e.target;return 1===t?.nodeType&&(Kr.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey"))}const Yr=e=>"clientX"in e,Gr=(e,t)=>{const n=Yr(e),r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},Zr=(e,t,n,r,o)=>{const i=t.querySelectorAll(`.${e}`);return i&&i.length?Array.from(i).map(t=>{const i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:o,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/r,y:(i.top-n.top)/r,...Wr(t)}}):null};function Qr({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:a}){const l=.125*e+.375*o+.375*s+.125*n,c=.125*t+.375*i+.375*a+.125*r;return[l,c,Math.abs(l-e),Math.abs(c-t)]}function Jr(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function eo({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case lr.Left:return[t-Jr(t-r,i),n];case lr.Right:return[t+Jr(r-t,i),n];case lr.Top:return[t,n-Jr(n-o,i)];case lr.Bottom:return[t,n+Jr(o-n,i)]}}function to({sourceX:e,sourceY:t,sourcePosition:n=lr.Bottom,targetX:r,targetY:o,targetPosition:i=lr.Top,curvature:s=.25}){const[a,l]=eo({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[c,u]=eo({pos:i,x1:r,y1:o,x2:e,y2:t,c:s}),[d,h,f,p]=Qr({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${a},${l} ${c},${u} ${r},${o}`,d,h,f,p]}function no({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,s=Math.abs(r-t)/2;return[i,r<t?r+s:r-s,o,s]}function ro({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const i=kr(Nr(e),Nr(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return _r(s,Er(i))>0}const oo=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`;function io({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,s,a]=no({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,s,a]}const so={[lr.Left]:{x:-1,y:0},[lr.Right]:{x:1,y:0},[lr.Top]:{x:0,y:-1},[lr.Bottom]:{x:0,y:1}},ao=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function lo({sourceX:e,sourceY:t,sourcePosition:n=lr.Bottom,targetX:r,targetY:o,targetPosition:i=lr.Top,borderRadius:s=5,centerX:a,centerY:l,offset:c=20,stepPosition:u=.5}){const[d,h,f,p,g]=function({source:e,sourcePosition:t=lr.Bottom,target:n,targetPosition:r=lr.Top,center:o,offset:i,stepPosition:s}){const a=so[t],l=so[r],c={x:e.x+a.x*i,y:e.y+a.y*i},u={x:n.x+l.x*i,y:n.y+l.y*i},d=(({source:e,sourcePosition:t=lr.Bottom,target:n})=>t===lr.Left||t===lr.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:c,sourcePosition:t,target:u}),h=0!==d.x?"x":"y",f=d[h];let p,g,m=[];const y={x:0,y:0},v={x:0,y:0},[,,b,w]=no({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[h]*l[h]===-1){"x"===h?(p=o.x??c.x+(u.x-c.x)*s,g=o.y??(c.y+u.y)/2):(p=o.x??(c.x+u.x)/2,g=o.y??c.y+(u.y-c.y)*s);const e=[{x:p,y:c.y},{x:p,y:u.y}],t=[{x:c.x,y:g},{x:u.x,y:g}];m=a[h]===f?"x"===h?e:t:"x"===h?t:e}else{const o=[{x:c.x,y:u.y}],s=[{x:u.x,y:c.y}];if(m="x"===h?a.x===f?s:o:a.y===f?o:s,t===r){const t=Math.abs(e[h]-n[h]);if(t<=i){const r=Math.min(i-1,i-t);a[h]===f?y[h]=(c[h]>e[h]?-1:1)*r:v[h]=(u[h]>n[h]?-1:1)*r}}if(t!==r){const e="x"===h?"y":"x",t=a[h]===l[e],n=c[e]>u[e],r=c[e]<u[e];(1===a[h]&&(!t&&n||t&&r)||1!==a[h]&&(!t&&r||t&&n))&&(m="x"===h?o:s)}const d={x:c.x+y.x,y:c.y+y.y},b={x:u.x+v.x,y:u.y+v.y};Math.max(Math.abs(d.x-m[0].x),Math.abs(b.x-m[0].x))>=Math.max(Math.abs(d.y-m[0].y),Math.abs(b.y-m[0].y))?(p=(d.x+b.x)/2,g=m[0].y):(p=m[0].x,g=(d.y+b.y)/2)}return[[e,{x:c.x+y.x,y:c.y+y.y},...m,{x:u.x+v.x,y:u.y+v.y},n],p,g,b,w]}({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:a,y:l},offset:c,stepPosition:u}),m=d.reduce((e,t,n)=>{let r="";return r=n>0&&n<d.length-1?function(e,t,n,r){const o=Math.min(ao(e,t)/2,ao(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s)return`L ${i+o*(e.x<n.x?-1:1)},${s}Q ${i},${s} ${i},${s+o*(e.y<n.y?1:-1)}`;const a=e.x<n.x?1:-1;return`L ${i},${s+o*(e.y<n.y?-1:1)}Q ${i},${s} ${i+o*a},${s}`}(d[n-1],t,d[n+1],s):`${0===n?"M":"L"}${t.x} ${t.y}`,e+r},"");return[m,h,f,p,g]}function co(e){return e&&!(!e.internals.handleBounds&&!e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function uo(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,"source"===r.type?t.push(r):"target"===r.type&&n.push(r);return{source:t,target:n}}function ho(e,t,n=lr.Left,r=!1){const o=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??$r(e);if(r)return{x:o+s/2,y:i+a/2};switch(t?.position??n){case lr.Top:return{x:o+s/2,y:i};case lr.Right:return{x:o+s,y:i+a/2};case lr.Bottom:return{x:o+s/2,y:i+a};case lr.Left:return{x:o,y:i+a/2}}}function fo(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function po(e,t){return e?"string"==typeof e?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`:""}const go={nodeOrigin:[0,0],nodeExtent:Jn,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},mo={...go,checkEquality:!0};function yo(e,t){const n={...e};for(const e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function vo(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const n=[],r=[];for(const t of e.handles){const o={id:t.id,width:t.width??1,height:t.height??1,nodeId:e.id,x:t.x,y:t.y,position:t.position,type:t.type};"source"===t.type?n.push(o):"target"===t.type&&r.push(o)}return{source:n,target:r}}function bo(e){return"manual"===e}function wo(e,t,n,r={}){const o=yo(mo,r),i={i:0},s=new Map(t),a=o?.elevateNodesOnSelect&&!bo(o.zIndexMode)?1e3:0;let l=e.length>0;t.clear(),n.clear();for(const c of e){let e=s.get(c.id);if(o.checkEquality&&c===e?.internals.userNode)t.set(c.id,e);else{const n=fr(c,o.nodeOrigin),r=Br(c.extent)?c.extent:o.nodeExtent,i=vr(n,r,$r(c));e={...o.defaults,...c,measured:{width:c.measured?.width,height:c.measured?.height},internals:{positionAbsolute:i,handleBounds:vo(c,e),z:ko(c,a,o.zIndexMode),userNode:c}},t.set(c.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(l=!1),c.parentId&&xo(e,t,n,r,i)}return l}function xo(e,t,n,r,o){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:a,zIndexMode:l}=yo(go,r),c=e.parentId,u=t.get(c);if(!u)return void console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n),o&&!u.parentId&&void 0===u.internals.rootParentIndex&&"auto"===l&&(u.internals.rootParentIndex=++o.i,u.internals.z=u.internals.z+10*o.i),o&&void 0!==u.internals.rootParentIndex&&(o.i=u.internals.rootParentIndex);const d=i&&!bo(l)?1e3:0,{x:h,y:f,z:p}=function(e,t,n,r,o,i){const{x:s,y:a}=t.internals.positionAbsolute,l=$r(e),c=fr(e,n),u=Br(e.extent)?vr(c,e.extent,l):c;let d=vr({x:s+u.x,y:a+u.y},r,l);"parent"===e.extent&&(d=br(d,l,t));const h=ko(e,o,i),f=t.internals.z??0;return{x:d.x,y:d.y,z:f>=h?f+1:h}}(e,u,s,a,d,l),{positionAbsolute:g}=e.internals,m=h!==g.x||f!==g.y;(m||p!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:m?{x:h,y:f}:g,z:p}})}function ko(e,t,n){const r=Tr(e.zIndex)?e.zIndex:0;return bo(n)?r:r+(e.selected?t:0)}function So(e,t,n,r=[0,0]){const o=[],i=new Map;for(const n of e){const e=t.get(n.parentId);if(!e)continue;const r=i.get(n.parentId)?.expandedRect??Cr(e),o=Ar(r,n.rect);i.set(n.parentId,{expandedRect:o,parent:e})}return i.size>0&&i.forEach(({expandedRect:t,parent:i},s)=>{const a=i.internals.positionAbsolute,l=$r(i),c=i.origin??r,u=t.x<a.x?Math.round(Math.abs(a.x-t.x)):0,d=t.y<a.y?Math.round(Math.abs(a.y-t.y)):0,h=Math.max(l.width,Math.round(t.width)),f=Math.max(l.height,Math.round(t.height)),p=(h-l.width)*c[0],g=(f-l.height)*c[1];(u>0||d>0||p||g)&&(o.push({id:s,type:"position",position:{x:i.position.x-u+p,y:i.position.y-d+g}}),n.get(s)?.forEach(t=>{e.some(e=>e.id===t.id)||o.push({id:t.id,type:"position",position:{x:t.position.x+u,y:t.position.y+d}})})),(l.width<t.width||l.height<t.height||u||d)&&o.push({id:s,type:"dimensions",setAttributes:!0,dimensions:{width:h+(u?c[0]*u-p:0),height:f+(d?c[1]*d-g:0)}})}),o}function Eo(e,t,n,r,o,i){let s=o;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${o}-${e}`;const l=r.get(s)||new Map;if(r.set(s,l.set(n,t)),i){s=`${o}-${e}-${i}`;const a=r.get(s)||new Map;r.set(s,a.set(n,t))}}function Co(e,t,n){e.clear(),t.clear();for(const r of n){const{source:n,target:o,sourceHandle:i=null,targetHandle:s=null}=r,a={edgeId:r.id,source:n,target:o,sourceHandle:i,targetHandle:s},l=`${n}-${i}--${o}-${s}`;Eo("source",a,`${o}-${s}--${n}-${i}`,e,n,i),Eo("target",a,l,e,o,s),t.set(r.id,r)}}function No(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||No(n,t))}function Ao(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function _o({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const o=[];for(const[e,i]of t){const t=n.get(e)?.internals.userNode;t&&o.push({...t,position:i.position,dragging:r})}if(!e)return[o[0],o];const i=n.get(e)?.internals.userNode;return[i?{...i,position:t.get(e)?.position||i.position,dragging:r}:o[0],o]}function Mo(e,t,n,r,o,i=!1){const s=r.get(e);if(!s)return null;const a="strict"===o?s.internals.handleBounds?.[t]:[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]],l=(n?a?.find(e=>e.id===n):a?.[0])??null;return l&&i?{...l,...ho(s,l,l.position,!0)}:l}function To(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}const Oo=()=>!0;function jo(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:s,lib:a,flowId:l,isValidConnection:c=Oo,nodeLookup:u}){const d="target"===i,h=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:f,y:p}=Gr(e),g=s.elementFromPoint(f,p),m=g?.classList.contains(`${a}-flow__handle`)?g:h,y={handleDomNode:m,isValid:!1,connection:null,toHandle:null};if(m){const e=To(void 0,m),t=m.getAttribute("data-nodeid"),i=m.getAttribute("data-handleid"),s=m.classList.contains("connectable"),a=m.classList.contains("connectableend");if(!t||!e)return y;const l={source:d?t:r,sourceHandle:d?i:o,target:d?r:t,targetHandle:d?o:i};y.connection=l;const h=s&&a&&(n===nr.Strict?d&&"source"===e||!d&&"target"===e:t!==r||i!==o);y.isValid=h&&c(l),y.toHandle=Mo(t,e,i,u,n,!0)}return y}const Po={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:s,domNode:a,nodeLookup:l,lib:c,autoPanOnConnect:u,flowId:d,panBy:h,cancelConnection:f,onConnectStart:p,onConnect:g,onConnectEnd:m,isValidConnection:y=Oo,onReconnectEnd:v,updateConnection:b,getTransform:w,getFromHandle:x,autoPanSpeed:k,dragThreshold:S=1,handleDomNode:E}){const C=Ur(e.target);let N,A=0;const{x:_,y:M}=Gr(e),T=To(i,E),O=a?.getBoundingClientRect();let j=!1;if(!O||!T)return;const P=Mo(o,T,r,l,t);if(!P)return;let I=Gr(e,O),D=!1,L=null,R=!1,B=null;function $(){if(!u||!O)return;const[e,t]=xr(I,O,k);h({x:e,y:t}),A=requestAnimationFrame($)}const z={...P,nodeId:o,type:T,position:P.position},q=l.get(o);let V={inProgress:!0,isValid:null,from:ho(q,z,lr.Left,!0),fromHandle:z,fromPosition:z.position,fromNode:q,to:I,toHandle:null,toPosition:cr[z.position],toNode:null,pointer:I};function F(){j=!0,b(V),p?.(e,{nodeId:o,handleId:r,handleType:T})}function H(e){if(!j){const{x:t,y:n}=Gr(e),r=t-_,o=n-M;if(!(r*r+o*o>S*S))return;F()}if(!x()||!z)return void W(e);const i=w();I=Gr(e,O),N=function(e,t,n,r){let o=[],i=1/0;const s=function(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const e of t.values())_r(o,Cr(e))>0&&r.push(e);return r}(e,n,t+250);for(const n of s){const s=[...n.internals.handleBounds?.source??[],...n.internals.handleBounds?.target??[]];for(const a of s){if(r.nodeId===a.nodeId&&r.type===a.type&&r.id===a.id)continue;const{x:s,y:l}=ho(n,a,a.position,!0),c=Math.sqrt(Math.pow(s-e.x,2)+Math.pow(l-e.y,2));c>t||(c<i?(o=[{...a,x:s,y:l}],i=c):c===i&&o.push({...a,x:s,y:l}))}}if(!o.length)return null;if(o.length>1){const e="source"===r.type?"target":"source";return o.find(t=>t.type===e)??o[0]}return o[0]}(Pr(I,i,!1,[1,1]),n,l,z),D||($(),D=!0);const a=jo(e,{handle:N,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:s?"target":"source",isValidConnection:y,doc:C,lib:c,flowId:d,nodeLookup:l});B=a.handleDomNode,L=a.connection,R=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!N,a.isValid);const u=l.get(o),h=u?ho(u,z,lr.Left,!0):V.from,f={...V,from:h,isValid:R,to:a.toHandle&&R?Ir({x:a.toHandle.x,y:a.toHandle.y},i):I,toHandle:a.toHandle,toPosition:R&&a.toHandle?a.toHandle.position:cr[z.position],toNode:a.toHandle?l.get(a.toHandle.nodeId):null,pointer:I};b(f),V=f}function W(e){if(!("touches"in e&&e.touches.length>0)){if(j){(N||B)&&L&&R&&g?.(L);const{inProgress:t,...n}=V,r={...n,toPosition:V.toHandle?V.toPosition:null};m?.(e,r),i&&v?.(e,r)}f(),cancelAnimationFrame(A),D=!1,R=!1,L=null,B=null,C.removeEventListener("mousemove",H),C.removeEventListener("mouseup",W),C.removeEventListener("touchmove",H),C.removeEventListener("touchend",W)}}0===S&&F(),C.addEventListener("mousemove",H),C.addEventListener("mouseup",W),C.addEventListener("touchmove",H),C.addEventListener("touchend",W)},isValid:jo},Io=e=>({x:e.x,y:e.y,zoom:e.k}),Do=({x:e,y:t,zoom:n})=>Rn.translate(e,t).scale(n),Lo=(e,t)=>e.target.closest(`.${t}`),Ro=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),Bo=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,$o=(e,t=0,n=Bo,r=()=>{})=>{const o="number"==typeof t&&t>0;return o||r(),o?e.transition().duration(t).ease(n).on("end",r):e},zo=e=>{const t=e.ctrlKey&&Rr()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function qo({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:o,onPanZoom:i,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:l}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},u=e.getBoundingClientRect(),d=Kn().scaleExtent([t,n]).translateExtent(r),h=Ce(e).call(d);y({x:o.x,y:o.y,zoom:yr(o.zoom,t,n)},[[0,0],[u.width,u.height]],r);const f=h.on("wheel.zoom"),p=h.on("dblclick.zoom");function g(e,t){return h?new Promise(n=>{d?.interpolate("linear"===t?.interpolate?Qn:qe).transform($o(h,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)}function m(){d.on("zoom",null)}async function y(e,t,n){const r=Do(e),o=d?.constrain()(r,t,n);return o&&await g(o),new Promise(e=>e(o))}return d.wheelDelta(zo),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:r,panOnScroll:o,panOnDrag:u,panOnScrollMode:g,panOnScrollSpeed:y,preventScrolling:v,zoomOnPinch:b,zoomOnScroll:w,zoomOnDoubleClick:x,zoomActivationKeyPressed:k,lib:S,onTransformChange:E,connectionInProgress:C,paneClickDistance:N,selectionOnDrag:A}){r&&!c.isZoomingOrPanning&&m();const _=o&&!k&&!r;d.clickDistance(A?1/0:!Tr(N)||N<0?0:N);const M=_?function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:c}){return u=>{if(Lo(u,t))return u.ctrlKey&&u.preventDefault(),!1;u.preventDefault(),u.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(u.ctrlKey&&s){const e=Ne(u),t=zo(u),o=d*Math.pow(2,t);return void r.scaleTo(n,o,e,u)}const h=1===u.deltaMode?20:1;let f=o===rr.Vertical?0:u.deltaX*h,p=o===rr.Horizontal?0:u.deltaY*h;!Rr()&&u.shiftKey&&o!==rr.Vertical&&(f=u.deltaY*h,p=0),r.translateBy(n,-f/d*i,-p/d*i,{internal:!0});const g=Io(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(l?.(u,g),e.panScrollTimeout=setTimeout(()=>{c?.(u,g),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a?.(u,g))}}({zoomPanValues:c,noWheelClassName:e,d3Selection:h,d3Zoom:d,panOnScrollMode:g,panOnScrollSpeed:y,zoomOnPinch:b,onPanZoomStart:s,onPanZoom:i,onPanZoomEnd:a}):function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){const i="wheel"===r.type,s=!t&&i&&!r.ctrlKey,a=Lo(r,e);if(r.ctrlKey&&i&&a&&r.preventDefault(),s||a)return null;r.preventDefault(),n.call(this,r,o)}}({noWheelClassName:e,preventScrolling:v,d3ZoomHandler:f});if(h.on("wheel.zoom",M,{passive:!1}),!r){const e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const o=Io(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,"mousedown"===r.sourceEvent?.type&&t(!0),n&&n?.(r.sourceEvent,o)}}({zoomPanValues:c,onDraggingChange:l,onPanZoomStart:s});d.on("start",e);const t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return i=>{e.usedRightMouseButton=!(!n||!Ro(t,e.mouseButton??0)),i.sourceEvent?.sync||r([i.transform.x,i.transform.y,i.transform.k]),o&&!i.sourceEvent?.internal&&o?.(i.sourceEvent,Io(i.transform))}}({zoomPanValues:c,panOnDrag:u,onPaneContextMenu:!!n,onPanZoom:i,onTransformChange:E});d.on("zoom",t);const r=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:i}){return s=>{if(!s.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,i&&Ro(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),o)){const t=Io(s.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(s.sourceEvent,t)},n?150:0)}}}({zoomPanValues:c,panOnDrag:u,panOnScroll:o,onPaneContextMenu:n,onPanZoomEnd:a,onDraggingChange:l});d.on("end",r)}const T=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:c,connectionInProgress:u}){return d=>{const h=e||t,f=n&&d.ctrlKey,p="wheel"===d.type;if(1===d.button&&"mousedown"===d.type&&(Lo(d,`${c}-flow__node`)||Lo(d,`${c}-flow__edge`)))return!0;if(!(r||h||o||i||n))return!1;if(s)return!1;if(u&&!p)return!1;if(Lo(d,a)&&p)return!1;if(Lo(d,l)&&(!p||o&&p&&!e))return!1;if(!n&&d.ctrlKey&&p)return!1;if(!n&&"touchstart"===d.type&&d.touches?.length>1)return d.preventDefault(),!1;if(!h&&!o&&!f&&p)return!1;if(!r&&("mousedown"===d.type||"touchstart"===d.type))return!1;if(Array.isArray(r)&&!r.includes(d.button)&&"mousedown"===d.type)return!1;const g=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||p)&&g}}({zoomActivationKeyPressed:k,panOnDrag:u,zoomOnScroll:w,panOnScroll:o,zoomOnDoubleClick:x,zoomOnPinch:b,userSelectionActive:r,noPanClassName:t,noWheelClassName:e,lib:S,connectionInProgress:C});d.filter(T),x?h.on("dblclick.zoom",p):h.on("dblclick.zoom",null)},destroy:m,setViewport:async function(e,t){const n=Do(e);return await g(n,t),new Promise(e=>e(n))},setViewportConstrained:y,getViewport:function(){const e=h?Bn(h.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return h?new Promise(n=>{d?.interpolate("linear"===t?.interpolate?Qn:qe).scaleTo($o(h,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return h?new Promise(n=>{d?.interpolate("linear"===t?.interpolate?Qn:qe).scaleBy($o(h,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},setScaleExtent:function(e){d?.scaleExtent(e)},setTranslateExtent:function(e){d?.translateExtent(e)},syncViewport:function(e){if(h){const t=Do(e),n=h.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||d?.transform(h,t,null,{sync:!0})}},setClickDistance:function(e){const t=!Tr(e)||e<0?0:e;d?.clickDistance(t)}}}var Vo;function Fo(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}function Ho(e,t){return Math.max(0,t-e)}function Wo(e,t){return Math.max(0,e-t)}function Uo(e,t,n){return Math.max(0,t-e,e-n)}function Ko(e,t){return e?!t:t}!function(e){e.Line="line",e.Handle="handle"}(Vo||(Vo={}));const Xo={width:0,height:0,x:0,y:0},Yo={...Xo,pointerX:0,pointerY:0,aspectRatio:1};function Go(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,i=e.measured.width??0,s=e.measured.height??0,a=n[0]*i,l=n[1]*s;return[[r-a,o-l],[r+i-a,o+s-l]]}var Zo=n(7);const Qo=e=>{let t;const n=new Set,r=(e,r)=>{const o="function"==typeof e?e(t):e;if(!Object.is(o,t)){const e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,i={setState:r,getState:o,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},s=t=e(r,o,i);return i},{useDebugValue:Jo}=o,{useSyncExternalStoreWithSelector:ei}=Zo,ti=e=>e;function ni(e,t=ti,n){const r=ei(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Jo(r),r}const ri=(e,t)=>{const n=(e=>e?Qo(e):Qo)(e),r=(e,r=t)=>ni(n,e,r);return Object.assign(r,n),r};function oi(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}n(143);const ii=(0,o.createContext)(null),si=ii.Provider,ai="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001";function li(e,t){const n=(0,o.useContext)(ii);if(null===n)throw new Error(ai);return ni(n,e,t)}function ci(){const e=(0,o.useContext)(ii);if(null===e)throw new Error(ai);return(0,o.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const ui={display:"none"},di={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},hi="react-flow__node-desc",fi="react-flow__edge-desc",pi=e=>e.ariaLiveMessage,gi=e=>e.ariaLabelConfig;function mi({rfId:e}){const t=li(pi);return(0,r.jsx)("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:di,children:t})}function yi({rfId:e,disableKeyboardA11y:t}){const n=li(gi);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{id:`${hi}-${e}`,style:ui,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),(0,r.jsx)("div",{id:`${fi}-${e}`,style:ui,children:n["edge.a11yDescription.default"]}),!t&&(0,r.jsx)(mi,{rfId:e})]})}const vi=(0,o.forwardRef)(({position:e="top-left",children:t,className:n,style:o,...i},a)=>{const l=`${e}`.split("-");return(0,r.jsx)("div",{className:s(["react-flow__panel",n,...l]),style:o,ref:a,...i,children:t})});function bi({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:(0,r.jsx)(vi,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,r.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}vi.displayName="Panel";const wi=e=>{const t=[],n=[];for(const[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(const[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},xi=e=>e.id;function ki(e,t){return oi(e.selectedNodes.map(xi),t.selectedNodes.map(xi))&&oi(e.selectedEdges.map(xi),t.selectedEdges.map(xi))}function Si({onSelectionChange:e}){const t=ci(),{selectedNodes:n,selectedEdges:r}=li(wi,ki);return(0,o.useEffect)(()=>{const o={nodes:n,edges:r};e?.(o),t.getState().onSelectionChangeHandlers.forEach(e=>e(o))},[n,r,e]),null}const Ei=e=>!!e.onSelectionChangeHandlers;function Ci({onSelectionChange:e}){const t=li(Ei);return e||t?(0,r.jsx)(Si,{onSelectionChange:e}):null}const Ni=[0,0],Ai={x:0,y:0,zoom:1},_i=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode","rfId"],Mi=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),Ti={translateExtent:Jn,nodeOrigin:Ni,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function Oi(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:a,reset:l,setDefaultNodesAndEdges:c}=li(Mi,oi),u=ci();(0,o.useEffect)(()=>(c(e.defaultNodes,e.defaultEdges),()=>{d.current=Ti,l()}),[]);const d=(0,o.useRef)(Ti);return(0,o.useEffect)(()=>{for(const o of _i){const l=e[o];l!==d.current[o]&&void 0!==e[o]&&("nodes"===o?t(l):"edges"===o?n(l):"minZoom"===o?r(l):"maxZoom"===o?i(l):"translateExtent"===o?s(l):"nodeExtent"===o?a(l):"ariaLabelConfig"===o?u.setState({ariaLabelConfig:Fr(l)}):"fitView"===o?u.setState({fitViewQueued:l}):"fitViewOptions"===o?u.setState({fitViewOptions:l}):u.setState({[o]:l}))}d.current=e},_i.map(t=>e[t])),null}function ji(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const Pi="undefined"!=typeof document?document:null;function Ii(e=null,t={target:Pi,actInsideInputWithModifier:!0}){const[n,r]=(0,o.useState)(!1),i=(0,o.useRef)(!1),s=(0,o.useRef)(new Set([])),[a,l]=(0,o.useMemo)(()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.replace("+","\n").replace("\n\n","\n+").split("\n")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,o.useEffect)(()=>{const n=t?.target??Pi,o=t?.actInsideInputWithModifier??!0;if(null!==e){const e=e=>{if(i.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey,(!i.current||i.current&&!o)&&Xr(e))return!1;const n=Li(e.code,l);if(s.current.add(e[n]),Di(a,s.current,!1)){const n=e.composedPath?.()?.[0]||e.target,o="BUTTON"===n?.nodeName||"A"===n?.nodeName;!1===t.preventDefault||!i.current&&o||e.preventDefault(),r(!0)}},c=e=>{const t=Li(e.code,l);Di(a,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(e[t]),"Meta"===e.key&&s.current.clear(),i.current=!1},u=()=>{s.current.clear(),r(!1)};return n?.addEventListener("keydown",e),n?.addEventListener("keyup",c),window.addEventListener("blur",u),window.addEventListener("contextmenu",u),()=>{n?.removeEventListener("keydown",e),n?.removeEventListener("keyup",c),window.removeEventListener("blur",u),window.removeEventListener("contextmenu",u)}}},[e,r]),n}function Di(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function Li(e,t){return t.includes(e)?"code":"key"}function Ri(e,t){const n=[],r=new Map,o=[];for(const t of e)if("add"!==t.type)if("remove"===t.type||"replace"===t.type)r.set(t.id,[t]);else{const e=r.get(t.id);e?e.push(t):r.set(t.id,[t])}else o.push(t);for(const e of t){const t=r.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}const o={...e};for(const e of t)Bi(e,o);n.push(o)}return o.length&&o.forEach(e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})}),n}function Bi(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":void 0!==e.position&&(t.position=e.position),void 0!==e.dragging&&(t.dragging=e.dragging);break;case"dimensions":void 0!==e.dimensions&&(t.measured={...e.dimensions},e.setAttributes&&(!0!==e.setAttributes&&"width"!==e.setAttributes||(t.width=e.dimensions.width),!0!==e.setAttributes&&"height"!==e.setAttributes||(t.height=e.dimensions.height))),"boolean"==typeof e.resizing&&(t.resizing=e.resizing)}}function $i(e,t){return{id:e,type:"select",selected:t}}function zi(e,t=new Set,n=!1){const r=[];for(const[o,i]of e){const e=t.has(o);void 0===i.selected&&!e||i.selected===e||(n&&(i.selected=e),r.push($i(i.id,e)))}return r}function qi({items:e=[],lookup:t}){const n=[],r=new Map(e.map(e=>[e.id,e]));for(const[r,o]of e.entries()){const e=t.get(o.id),i=e?.internals?.userNode??e;void 0!==i&&i!==o&&n.push({id:o.id,item:o,type:"replace"}),void 0===i&&n.push({item:o,type:"add",index:r})}for(const[e]of t)void 0===r.get(e)&&n.push({id:e,type:"remove"});return n}function Vi(e){return{id:e.id,type:"remove"}}const Fi=e=>(e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e))(e);function Hi(e){return(0,o.forwardRef)(e)}const Wi="undefined"!=typeof window?o.useLayoutEffect:o.useEffect;function Ui(e){const[t,n]=(0,o.useState)(BigInt(0)),[r]=(0,o.useState)(()=>function(){let e=[];return{get:()=>e,reset:()=>{e=[]},push:t=>{e.push(t),n(e=>e+BigInt(1))}}}());return Wi(()=>{const t=r.get();t.length&&(e(t),r.reset())},[t]),r}const Ki=(0,o.createContext)(null);function Xi({children:e}){const t=ci(),n=Ui((0,o.useCallback)(e=>{const{nodes:n=[],setNodes:r,hasDefaultNodes:o,onNodesChange:i,nodeLookup:s,fitViewQueued:a,onNodesChangeMiddlewareMap:l}=t.getState();let c=n;for(const t of e)c="function"==typeof t?t(c):t;let u=qi({items:c,lookup:s});for(const e of l.values())u=e(u);o&&r(c),u.length>0?i?.(u):a&&window.requestAnimationFrame(()=>{const{fitViewQueued:e,nodes:n,setNodes:r}=t.getState();e&&r(n)})},[])),i=Ui((0,o.useCallback)(e=>{const{edges:n=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:i,edgeLookup:s}=t.getState();let a=n;for(const t of e)a="function"==typeof t?t(a):t;o?r(a):i&&i(qi({items:a,lookup:s}))},[])),s=(0,o.useMemo)(()=>({nodeQueue:n,edgeQueue:i}),[]);return(0,r.jsx)(Ki.Provider,{value:s,children:e})}const Yi=e=>!!e.panZoom;function Gi(){const e=(()=>{const e=ci();return(0,o.useMemo)(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??i},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:i,maxZoom:s,panZoom:a}=e.getState(),l=Lr(t,r,o,i,s,n?.padding??.1);return a?(await a.setViewport(l,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:o,snapToGrid:i,domNode:s}=e.getState();if(!s)return t;const{x:a,y:l}=s.getBoundingClientRect(),c={x:t.x-a,y:t.y-l},u=n.snapGrid??o,d=n.snapToGrid??i;return Pr(c,r,d,u)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:i}=r.getBoundingClientRect(),s=Ir(t,n);return{x:s.x+o,y:s.y+i}}}),[])})(),t=ci(),n=function(){const e=(0,o.useContext)(Ki);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),r=li(Yi),i=(0,o.useMemo)(()=>{const e=e=>t.getState().nodeLookup.get(e),r=e=>{n.nodeQueue.push(e)},o=e=>{n.edgeQueue.push(e)},i=e=>{const{nodeLookup:n,nodeOrigin:r}=t.getState(),o=Fi(e)?e:n.get(e.id),i=o.parentId?qr(o.position,o.measured,o.parentId,n,r):o.position,s={...o,position:i,width:o.measured?.width??o.width,height:o.measured?.height??o.height};return Cr(s)},s=(e,t,n={replace:!1})=>{r(r=>r.map(r=>{if(r.id===e){const e="function"==typeof t?t(r):t;return n.replace&&Fi(e)?e:{...r,...e}}return r}))},a=(e,t,n={replace:!1})=>{o(r=>r.map(r=>{if(r.id===e){const e="function"==typeof t?t(r):t;return n.replace&&dr(e)?e:{...r,...e}}return r}))};return{getNodes:()=>t.getState().nodes.map(e=>({...e})),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{const{edges:e=[]}=t.getState();return e.map(e=>({...e}))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:r,setEdges:o,addNodes:e=>{const t=Array.isArray(e)?e:[e];n.nodeQueue.push(e=>[...e,...t])},addEdges:e=>{const t=Array.isArray(e)?e:[e];n.edgeQueue.push(e=>[...e,...t])},toObject:()=>{const{nodes:e=[],edges:n=[],transform:r}=t.getState(),[o,i,s]=r;return{nodes:e.map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:o,y:i,zoom:s}}},deleteElements:async({nodes:e=[],edges:n=[]})=>{const{nodes:r,edges:o,onNodesDelete:i,onEdgesDelete:s,triggerNodeChanges:a,triggerEdgeChanges:l,onDelete:c,onBeforeDelete:u}=t.getState(),{nodes:d,edges:h}=await async function({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const i=new Set(e.map(e=>e.id)),s=[];for(const e of n){if(!1===e.deletable)continue;const t=i.has(e.id),n=!t&&e.parentId&&s.find(t=>t.id===e.parentId);(t||n)&&s.push(e)}const a=new Set(t.map(e=>e.id)),l=r.filter(e=>!1!==e.deletable),c=((e,t)=>{const n=new Set;return e.forEach(e=>{n.add(e.id)}),t.filter(e=>n.has(e.source)||n.has(e.target))})(s,l),u=c;for(const e of l)a.has(e.id)&&!u.find(t=>t.id===e.id)&&u.push(e);if(!o)return{edges:u,nodes:s};const d=await o({nodes:s,edges:u});return"boolean"==typeof d?d?{edges:u,nodes:s}:{edges:[],nodes:[]}:d}({nodesToRemove:e,edgesToRemove:n,nodes:r,edges:o,onBeforeDelete:u}),f=h.length>0,p=d.length>0;if(f){const e=h.map(Vi);s?.(h),l(e)}if(p){const e=d.map(Vi);i?.(d),a(e)}return(p||f)&&c?.({nodes:d,edges:h}),{deletedNodes:d,deletedEdges:h}},getIntersectingNodes:(e,n=!0,r)=>{const o=Mr(e),s=o?e:i(e),a=void 0!==r;return s?(r||t.getState().nodes).filter(r=>{const i=t.getState().nodeLookup.get(r.id);if(i&&!o&&(r.id===e.id||!i.internals.positionAbsolute))return!1;const l=Cr(a?r:i),c=_r(l,s);return n&&c>0||c>=l.width*l.height||c>=s.width*s.height}):[]},isNodeIntersecting:(e,t,n=!0)=>{const r=Mr(e)?e:i(e);if(!r)return!1;const o=_r(r,t);return n&&o>0||o>=t.width*t.height||o>=r.width*r.height},updateNode:s,updateNodeData:(e,t,n={replace:!1})=>{s(e,e=>{const r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},updateEdge:a,updateEdgeData:(e,t,n={replace:!1})=>{a(e,e=>{const r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},getNodesBounds:e=>{const{nodeLookup:n,nodeOrigin:r}=t.getState();return((e,t={nodeOrigin:[0,0]})=>{if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce((e,n)=>{const r="string"==typeof n;let o=t.nodeLookup||r?void 0:n;t.nodeLookup&&(o=r?t.nodeLookup.get(n):hr(n)?n:t.nodeLookup.get(n.id));const i=o?Nr(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return kr(e,i)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Er(n)})(e,{nodeLookup:n,nodeOrigin:r})},getHandleConnections:({type:e,id:n,nodeId:r})=>Array.from(t.getState().connectionLookup.get(`${r}-${e}${n?`-${n}`:""}`)?.values()??[]),getNodeConnections:({type:e,handleId:n,nodeId:r})=>Array.from(t.getState().connectionLookup.get(`${r}${e?n?`-${e}-${n}`:`-${e}`:""}`)?.values()??[]),fitView:async e=>{const r=t.getState().fitViewResolver??function(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}();return t.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:r}),n.nodeQueue.push(e=>[...e]),r.promise}}},[]);return(0,o.useMemo)(()=>({...i,...e,viewportInitialized:r}),[r])}const Zi=e=>e.selected,Qi="undefined"!=typeof window?window:void 0,Ji={position:"absolute",width:"100%",height:"100%",top:0,left:0},es=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function ts({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:i=!1,panOnScrollSpeed:s=.5,panOnScrollMode:a=rr.Free,zoomOnDoubleClick:l=!0,panOnDrag:c=!0,defaultViewport:u,translateExtent:d,minZoom:h,maxZoom:f,zoomActivationKeyCode:p,preventScrolling:g=!0,children:m,noWheelClassName:y,noPanClassName:v,onViewportChange:b,isControlledViewport:w,paneClickDistance:x,selectionOnDrag:k}){const S=ci(),E=(0,o.useRef)(null),{userSelectionActive:C,lib:N,connectionInProgress:A}=li(es,oi),_=Ii(p),M=(0,o.useRef)();!function(e){const t=ci();(0,o.useEffect)(()=>{const n=()=>{if(!e.current||!(e.current.checkVisibility?.()??1))return!1;const n=Wr(e.current);0!==n.height&&0!==n.width||t.getState().onError?.("004","The React Flow parent container needs a width and a height to render the graph."),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);const t=new ResizeObserver(()=>n());return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}},[])}(E);const T=(0,o.useCallback)(e=>{b?.({x:e[0],y:e[1],zoom:e[2]}),w||S.setState({transform:e})},[b,w]);return(0,o.useEffect)(()=>{if(E.current){M.current=qo({domNode:E.current,minZoom:h,maxZoom:f,translateExtent:d,viewport:u,onDraggingChange:e=>S.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{const{onViewportChangeStart:n,onMoveStart:r}=S.getState();r?.(e,t),n?.(t)},onPanZoom:(e,t)=>{const{onViewportChange:n,onMove:r}=S.getState();r?.(e,t),n?.(t)},onPanZoomEnd:(e,t)=>{const{onViewportChangeEnd:n,onMoveEnd:r}=S.getState();r?.(e,t),n?.(t)}});const{x:e,y:t,zoom:n}=M.current.getViewport();return S.setState({panZoom:M.current,transform:[e,t,n],domNode:E.current.closest(".react-flow")}),()=>{M.current?.destroy()}}},[]),(0,o.useEffect)(()=>{M.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:i,panOnScrollSpeed:s,panOnScrollMode:a,zoomOnDoubleClick:l,panOnDrag:c,zoomActivationKeyPressed:_,preventScrolling:g,noPanClassName:v,userSelectionActive:C,noWheelClassName:y,lib:N,onTransformChange:T,connectionInProgress:A,selectionOnDrag:k,paneClickDistance:x})},[e,t,n,i,s,a,l,c,_,g,v,C,y,N,T,A,k,x]),(0,r.jsx)("div",{className:"react-flow__renderer",ref:E,style:Ji,children:m})}const ns=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function rs(){const{userSelectionActive:e,userSelectionRect:t}=li(ns,oi);return e&&t?(0,r.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const os=(e,t)=>n=>{n.target===t.current&&e?.(n)},is=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function ss({isSelecting:e,selectionKeyPressed:t,selectionMode:n=or.Full,panOnDrag:i,paneClickDistance:a,selectionOnDrag:l,onSelectionStart:c,onSelectionEnd:u,onPaneClick:d,onPaneContextMenu:h,onPaneScroll:f,onPaneMouseEnter:p,onPaneMouseMove:g,onPaneMouseLeave:m,children:y}){const v=ci(),{userSelectionActive:b,elementsSelectable:w,dragging:x,connectionInProgress:k}=li(is,oi),S=w&&(e||b),E=(0,o.useRef)(null),C=(0,o.useRef)(),N=(0,o.useRef)(new Set),A=(0,o.useRef)(new Set),_=(0,o.useRef)(!1),M=e=>{_.current||k?_.current=!1:(d?.(e),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1}))},T=f?e=>f(e):void 0,O=!0===i||Array.isArray(i)&&i.includes(0);return(0,r.jsxs)("div",{className:s(["react-flow__pane",{draggable:O,dragging:x,selection:e}]),onClick:S?void 0:os(M,E),onContextMenu:os(e=>{Array.isArray(i)&&i?.includes(2)?e.preventDefault():h?.(e)},E),onWheel:os(T,E),onPointerEnter:S?void 0:p,onPointerMove:S?e=>{const{userSelectionRect:r,transform:o,nodeLookup:i,edgeLookup:s,connectionLookup:l,triggerNodeChanges:u,triggerEdgeChanges:d,defaultEdgeOptions:h,resetSelectedElements:f}=v.getState();if(!C.current||!r)return;const{x:p,y:g}=Gr(e.nativeEvent,C.current),{startX:m,startY:y}=r;if(!_.current){const n=t?0:a;if(Math.hypot(p-m,g-y)<=n)return;f(),c?.(e)}_.current=!0;const b={startX:m,startY:y,x:p<m?p:m,y:g<y?g:y,width:Math.abs(p-m),height:Math.abs(g-y)},w=N.current,x=A.current;N.current=new Set(gr(i,b,o,n===or.Partial,!0).map(e=>e.id)),A.current=new Set;const k=h?.selectable??!0;for(const e of N.current){const t=l.get(e);if(t)for(const{edgeId:e}of t.values()){const t=s.get(e);t&&(t.selectable??k)&&A.current.add(e)}}Vr(w,N.current)||u(zi(i,N.current,!0)),Vr(x,A.current)||d(zi(s,A.current)),v.setState({userSelectionRect:b,userSelectionActive:!0,nodesSelectionActive:!1})}:g,onPointerUp:S?e=>{0===e.button&&(e.target?.releasePointerCapture?.(e.pointerId),!b&&e.target===E.current&&v.getState().userSelectionRect&&M?.(e),v.setState({userSelectionActive:!1,userSelectionRect:null}),_.current&&(u?.(e),v.setState({nodesSelectionActive:N.current.size>0})))}:void 0,onPointerDownCapture:S?n=>{const{domNode:r}=v.getState();if(C.current=r?.getBoundingClientRect(),!C.current)return;const o=n.target===E.current;if(!o&&n.target.closest(".nokey")||!e||!(l&&o||t)||0!==n.button||!n.isPrimary)return;n.target?.setPointerCapture?.(n.pointerId),_.current=!1;const{x:i,y:s}=Gr(n.nativeEvent,C.current);v.setState({userSelectionRect:{width:0,height:0,startX:i,startY:s,x:i,y:s}}),o||(n.stopPropagation(),n.preventDefault())}:void 0,onClickCapture:S?e=>{_.current&&(e.stopPropagation(),_.current=!1)}:void 0,onPointerLeave:m,ref:E,style:Ji,children:[y,(0,r.jsx)(rs,{})]})}function as({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:a,onError:l}=t.getState(),c=a.get(e);c?(t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(i({nodes:[c],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):o([e])):l?.("012",(e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`)(e))}function ls({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:a}){const l=ci(),[c,u]=(0,o.useState)(!1),d=(0,o.useRef)();return(0,o.useEffect)(()=>{d.current=function({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let i={x:null,y:null},s=0,a=new Map,l=!1,c={x:0,y:0},u=null,d=!1,h=null,f=!1,p=!1,g=null;return{update:function({noDragClassName:m,handleSelector:y,domNode:v,isSelectable:b,nodeId:w,nodeClickDistance:x=0}){function k({x:e,y:n}){const{nodeLookup:o,nodeExtent:s,snapGrid:l,snapToGrid:c,nodeOrigin:u,onNodeDrag:d,onSelectionDrag:h,onError:f,updateNodePositions:m}=t();i={x:e,y:n};let y=!1;const v=a.size>1,b=v&&s?Sr(pr(a)):null,x=v&&c?function({dragItems:e,snapGrid:t,x:n,y:r}){const o=e.values().next().value;if(!o)return null;const i={x:n-o.distance.x,y:r-o.distance.y},s=jr(i,t);return{x:s.x-i.x,y:s.y-i.y}}({dragItems:a,snapGrid:l,x:e,y:n}):null;for(const[t,r]of a){if(!o.has(t))continue;let i={x:e-r.distance.x,y:n-r.distance.y};c&&(i=x?{x:Math.round(i.x+x.x),y:Math.round(i.y+x.y)}:jr(i,l));let a=null;if(v&&s&&!r.extent&&b){const{positionAbsolute:e}=r.internals,t=e.x-b.x+s[0][0],n=e.x+r.measured.width-b.x2+s[1][0];a=[[t,e.y-b.y+s[0][1]],[n,e.y+r.measured.height-b.y2+s[1][1]]]}const{position:d,positionAbsolute:h}=mr({nodeId:t,nextPosition:i,nodeLookup:o,nodeExtent:a||s,nodeOrigin:u,onError:f});y=y||r.position.x!==d.x||r.position.y!==d.y,r.position=d,r.internals.positionAbsolute=h}if(p=p||y,y&&(m(a,!0),g&&(r||d||!w&&h))){const[e,t]=_o({nodeId:w,dragItems:a,nodeLookup:o});r?.(g,a,e,t),d?.(g,e,t),w||h?.(g,t)}}async function S(){if(!u)return;const{transform:e,panBy:n,autoPanSpeed:r,autoPanOnNodeDrag:o}=t();if(!o)return l=!1,void cancelAnimationFrame(s);const[a,d]=xr(c,u,r);0===a&&0===d||(i.x=(i.x??0)-a/e[2],i.y=(i.y??0)-d/e[2],await n({x:a,y:d})&&k(i)),s=requestAnimationFrame(S)}function E(r){const{nodeLookup:o,multiSelectionActive:s,nodesDraggable:l,transform:c,snapGrid:h,snapToGrid:f,selectNodesOnDrag:p,onNodeDragStart:g,onSelectionDragStart:m,unselectNodesAndEdges:y}=t();d=!0,p&&b||s||!w||o.get(w)?.selected||y(),b&&p&&w&&e?.(w);const v=Hr(r.sourceEvent,{transform:c,snapGrid:h,snapToGrid:f,containerBounds:u});if(i=v,a=function(e,t,n,r){const o=new Map;for(const[i,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!No(s,e))&&(s.draggable||t&&void 0===s.draggable)){const t=e.get(i);t&&o.set(i,{id:i,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return o}(o,l,v,w),a.size>0&&(n||g||!w&&m)){const[e,t]=_o({nodeId:w,dragItems:a,nodeLookup:o});n?.(r.sourceEvent,a,e,t),g?.(r.sourceEvent,e,t),w||m?.(r.sourceEvent,t)}}h=Ce(v);const C=$e().clickDistance(x).on("start",e=>{const{domNode:n,nodeDragThreshold:r,transform:o,snapGrid:s,snapToGrid:a}=t();u=n?.getBoundingClientRect()||null,f=!1,p=!1,g=e.sourceEvent,0===r&&E(e);const l=Hr(e.sourceEvent,{transform:o,snapGrid:s,snapToGrid:a,containerBounds:u});i=l,c=Gr(e.sourceEvent,u)}).on("drag",e=>{const{autoPanOnNodeDrag:n,transform:r,snapGrid:o,snapToGrid:s,nodeDragThreshold:h,nodeLookup:p}=t(),m=Hr(e.sourceEvent,{transform:r,snapGrid:o,snapToGrid:s,containerBounds:u});if(g=e.sourceEvent,("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||w&&!p.has(w))&&(f=!0),!f){if(!l&&n&&d&&(l=!0,S()),!d){const t=Gr(e.sourceEvent,u),n=t.x-c.x,r=t.y-c.y;Math.sqrt(n*n+r*r)>h&&E(e)}(i.x!==m.xSnapped||i.y!==m.ySnapped)&&a&&d&&(c=Gr(e.sourceEvent,u),k(m))}}).on("end",e=>{if(d&&!f&&(l=!1,d=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:n,updateNodePositions:r,onNodeDragStop:i,onSelectionDragStop:s}=t();if(p&&(r(a,!1),p=!1),o||i||!w&&s){const[t,r]=_o({nodeId:w,dragItems:a,nodeLookup:n,dragging:!1});o?.(e.sourceEvent,a,t,r),i?.(e.sourceEvent,t,r),w||s?.(e.sourceEvent,r)}}}).filter(e=>{const t=e.target;return!e.button&&(!m||!Ao(t,`.${m}`,v))&&(!y||Ao(t,y,v))});h.call(C)},destroy:function(){h?.on(".drag",null)}}}({getStoreItems:()=>l.getState(),onNodeMouseDown:t=>{as({id:t,store:l,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),(0,o.useEffect)(()=>{if(t)d.current?.destroy();else if(e.current)return d.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i,nodeClickDistance:a}),()=>{d.current?.destroy()}},[n,r,t,s,e,i]),c}function cs(){const e=ci();return(0,o.useCallback)(t=>{const{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:i,onError:s,updateNodePositions:a,nodeLookup:l,nodeOrigin:c}=e.getState(),u=new Map,d=(e=>t=>t.selected&&(t.draggable||e&&void 0===t.draggable))(i),h=r?o[0]:5,f=r?o[1]:5,p=t.direction.x*h*t.factor,g=t.direction.y*f*t.factor;for(const[,e]of l){if(!d(e))continue;let t={x:e.internals.positionAbsolute.x+p,y:e.internals.positionAbsolute.y+g};r&&(t=jr(t,o));const{position:i,positionAbsolute:a}=mr({nodeId:e.id,nextPosition:t,nodeLookup:l,nodeExtent:n,nodeOrigin:c,onError:s});e.position=i,e.internals.positionAbsolute=a,u.set(e.id,e)}a(u)},[])}const us=(0,o.createContext)(null),ds=us.Provider;us.Consumer;const hs=()=>(0,o.useContext)(us),fs=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),ps=(0,o.memo)(Hi(function({type:e="source",position:t=lr.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:i=!0,isConnectableEnd:a=!0,id:l,onConnect:c,children:u,className:d,onMouseDown:h,onTouchStart:f,...p},g){const m=l||null,y="target"===e,v=ci(),b=hs(),{connectOnClick:w,noPanClassName:x,rfId:k}=li(fs,oi),{connectingFrom:S,connectingTo:E,clickConnecting:C,isPossibleEndHandle:N,connectionInProcess:A,clickConnectionInProcess:_,valid:M}=li(((e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:i,connection:s}=r,{fromHandle:a,toHandle:l,isValid:c}=s,u=l?.nodeId===e&&l?.id===t&&l?.type===n;return{connectingFrom:a?.nodeId===e&&a?.id===t&&a?.type===n,connectingTo:u,clickConnecting:o?.nodeId===e&&o?.id===t&&o?.type===n,isPossibleEndHandle:i===nr.Strict?a?.type!==n:e!==a?.nodeId||t!==a?.id,connectionInProcess:!!a,clickConnectionInProcess:!!o,valid:u&&c}})(b,m,e),oi);b||v.getState().onError?.("010","Handle: No node id found. Make sure to only use a Handle inside a custom Node.");const T=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=v.getState(),o={...t,...e};if(r){const{edges:e,setEdges:t}=v.getState();t(((e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||oo;let o;return o=dr(e)?{...e}:{...e,id:r(e)},((e,t)=>t.some(t=>!(t.source!==e.source||t.target!==e.target||t.sourceHandle!==e.sourceHandle&&(t.sourceHandle||e.sourceHandle)||t.targetHandle!==e.targetHandle&&(t.targetHandle||e.targetHandle))))(o,t)?t:(null===o.sourceHandle&&delete o.sourceHandle,null===o.targetHandle&&delete o.targetHandle,t.concat(o))})(o,e))}n?.(o),c?.(o)},O=e=>{if(!b)return;const t=Yr(e.nativeEvent);if(i&&(t&&0===e.button||!t)){const t=v.getState();Po.onPointerDown(e.nativeEvent,{handleDomNode:e.currentTarget,autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:y,handleId:m,nodeId:b,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:T,isValidConnection:n||t.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed,dragThreshold:t.connectionDragThreshold})}t?h?.(e):f?.(e)};return(0,r.jsx)("div",{"data-handleid":m,"data-nodeid":b,"data-handlepos":t,"data-id":`${k}-${b}-${m}-${e}`,className:s(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",x,d,{source:!y,target:y,connectable:o,connectablestart:i,connectableend:a,clickconnecting:C,connectingfrom:S,connectingto:E,valid:M,connectionindicator:o&&(!A||N)&&(A||_?a:i)}]),onMouseDown:O,onTouchStart:O,onClick:w?t=>{const{onClickConnectStart:r,onClickConnectEnd:o,connectionClickStartHandle:s,connectionMode:a,isValidConnection:l,lib:c,rfId:u,nodeLookup:d,connection:h}=v.getState();if(!b||!s&&!i)return;if(!s)return r?.(t.nativeEvent,{nodeId:b,handleId:m,handleType:e}),void v.setState({connectionClickStartHandle:{nodeId:b,type:e,id:m}});const f=Ur(t.target),p=n||l,{connection:g,isValid:y}=Po.isValid(t.nativeEvent,{handle:{nodeId:b,id:m,type:e},connectionMode:a,fromNodeId:s.nodeId,fromHandleId:s.id||null,fromType:s.type,isValidConnection:p,flowId:u,doc:f,lib:c,nodeLookup:d});y&&g&&T(g);const w=structuredClone(h);delete w.inProgress,w.toPosition=w.toHandle?w.toHandle.position:null,o?.(t,w),v.setState({connectionClickStartHandle:null})}:void 0,ref:g,...p,children:u})})),gs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ms={input:function({data:e,isConnectable:t,sourcePosition:n=lr.Bottom}){return(0,r.jsxs)(r.Fragment,{children:[e?.label,(0,r.jsx)(ps,{type:"source",position:n,isConnectable:t})]})},default:function({data:e,isConnectable:t,targetPosition:n=lr.Top,sourcePosition:o=lr.Bottom}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ps,{type:"target",position:n,isConnectable:t}),e?.label,(0,r.jsx)(ps,{type:"source",position:o,isConnectable:t})]})},output:function({data:e,isConnectable:t,targetPosition:n=lr.Top}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ps,{type:"target",position:n,isConnectable:t}),e?.label]})},group:function(){return null}},ys=e=>{const{width:t,height:n,x:r,y:o}=pr(e.nodeLookup,{filter:e=>!!e.selected});return{width:Tr(t)?t:null,height:Tr(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function vs({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=ci(),{width:a,height:l,transformString:c,userSelectionActive:u}=li(ys,oi),d=cs(),h=(0,o.useRef)(null);if((0,o.useEffect)(()=>{n||h.current?.focus({preventScroll:!0})},[n]),ls({nodeRef:h}),u||!a||!l)return null;const f=e?t=>{const n=i.getState().nodes.filter(e=>e.selected);e(t,n)}:void 0;return(0,r.jsx)("div",{className:s(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c},children:(0,r.jsx)("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(gs,e.key)&&(e.preventDefault(),d({direction:gs[e.key],factor:e.shiftKey?4:1}))},style:{width:a,height:l}})})}const bs="undefined"!=typeof window?window:void 0,ws=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function xs({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:l,paneClickDistance:c,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:h,selectionMode:f,onSelectionStart:p,onSelectionEnd:g,multiSelectionKeyCode:m,panActivationKeyCode:y,zoomActivationKeyCode:v,elementsSelectable:b,zoomOnScroll:w,zoomOnPinch:x,panOnScroll:k,panOnScrollSpeed:S,panOnScrollMode:E,zoomOnDoubleClick:C,panOnDrag:N,defaultViewport:A,translateExtent:_,minZoom:M,maxZoom:T,preventScrolling:O,onSelectionContextMenu:j,noWheelClassName:P,noPanClassName:I,disableKeyboardA11y:D,onViewportChange:L,isControlledViewport:R}){const{nodesSelectionActive:B,userSelectionActive:$}=li(ws,oi),z=Ii(d,{target:bs}),q=Ii(y,{target:bs}),V=q||N,F=q||k,H=h&&!0!==V,W=z||$||H;return function({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ci(),{deleteElements:r}=Gi(),i=Ii(e,{actInsideInputWithModifier:!1}),s=Ii(t,{target:Qi});(0,o.useEffect)(()=>{if(i){const{edges:e,nodes:t}=n.getState();r({nodes:t.filter(Zi),edges:e.filter(Zi)}),n.setState({nodesSelectionActive:!1})}},[i]),(0,o.useEffect)(()=>{n.setState({multiSelectionActive:s})},[s])}({deleteKeyCode:u,multiSelectionKeyCode:m}),(0,r.jsx)(ts,{onPaneContextMenu:a,elementsSelectable:b,zoomOnScroll:w,zoomOnPinch:x,panOnScroll:F,panOnScrollSpeed:S,panOnScrollMode:E,zoomOnDoubleClick:C,panOnDrag:!z&&V,defaultViewport:A,translateExtent:_,minZoom:M,maxZoom:T,zoomActivationKeyCode:v,preventScrolling:O,noWheelClassName:P,noPanClassName:I,onViewportChange:L,isControlledViewport:R,paneClickDistance:c,selectionOnDrag:H,children:(0,r.jsxs)(ss,{onSelectionStart:p,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:l,panOnDrag:V,isSelecting:!!W,selectionMode:f,selectionKeyPressed:z,paneClickDistance:c,selectionOnDrag:H,children:[e,B&&(0,r.jsx)(vs,{onSelectionContextMenu:j,noPanClassName:I,disableKeyboardA11y:D})]})})}xs.displayName="FlowRenderer";const ks=(0,o.memo)(xs);const Ss=e=>e.updateNodeInternals;var Es=(0,o.memo)(function({id:e,onClick:t,onMouseEnter:n,onMouseMove:i,onMouseLeave:a,onContextMenu:l,onDoubleClick:c,nodesDraggable:u,elementsSelectable:d,nodesConnectable:h,nodesFocusable:f,resizeObserver:p,noDragClassName:g,noPanClassName:m,disableKeyboardA11y:y,rfId:v,nodeTypes:b,nodeClickDistance:w,onError:x}){const{node:k,internals:S,isParent:E}=li(t=>{const n=t.nodeLookup.get(e),r=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:r}},oi);let C=k.type||"default",N=b?.[C]||ms[C];void 0===N&&(x?.("003",(e=>`Node type "${e}" not found. Using fallback type "default".`)(C)),C="default",N=b?.default||ms.default);const A=!!(k.draggable||u&&void 0===k.draggable),_=!!(k.selectable||d&&void 0===k.selectable),M=!!(k.connectable||h&&void 0===k.connectable),T=!!(k.focusable||f&&void 0===k.focusable),O=ci(),j=zr(k),P=function({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=ci(),s=(0,o.useRef)(null),a=(0,o.useRef)(null),l=(0,o.useRef)(e.sourcePosition),c=(0,o.useRef)(e.targetPosition),u=(0,o.useRef)(t),d=n&&!!e.internals.handleBounds;return(0,o.useEffect)(()=>{!s.current||e.hidden||d&&a.current===s.current||(a.current&&r?.unobserve(a.current),r?.observe(s.current),a.current=s.current)},[d,e.hidden]),(0,o.useEffect)(()=>()=>{a.current&&(r?.unobserve(a.current),a.current=null)},[]),(0,o.useEffect)(()=>{if(s.current){const n=u.current!==t,r=l.current!==e.sourcePosition,o=c.current!==e.targetPosition;(n||r||o)&&(u.current=t,l.current=e.sourcePosition,c.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}({node:k,nodeType:C,hasDimensions:j,resizeObserver:p}),I=ls({nodeRef:P,disabled:k.hidden||!A,noDragClassName:g,handleSelector:k.dragHandle,nodeId:e,isSelectable:_,nodeClickDistance:w}),D=cs();if(k.hidden)return null;const L=$r(k),R=function(e){return void 0===e.internals.handleBounds?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}(k),B=_||A||t||n||i||a,$=n?e=>n(e,{...S.userNode}):void 0,z=i?e=>i(e,{...S.userNode}):void 0,q=a?e=>a(e,{...S.userNode}):void 0,V=l?e=>l(e,{...S.userNode}):void 0,F=c?e=>c(e,{...S.userNode}):void 0;return(0,r.jsx)("div",{className:s(["react-flow__node",`react-flow__node-${C}`,{[m]:A},k.className,{selected:k.selected,selectable:_,parent:E,draggable:A,dragging:I}]),ref:P,style:{zIndex:S.z,transform:`translate(${S.positionAbsolute.x}px,${S.positionAbsolute.y}px)`,pointerEvents:B?"all":"none",visibility:j?"visible":"hidden",...k.style,...R},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:$,onMouseMove:z,onMouseLeave:q,onContextMenu:V,onClick:n=>{const{selectNodesOnDrag:r,nodeDragThreshold:o}=O.getState();_&&(!r||!A||o>0)&&as({id:e,store:O,nodeRef:P}),t&&t(n,{...S.userNode})},onDoubleClick:F,onKeyDown:T?t=>{if(!Xr(t.nativeEvent)&&!y)if(er.includes(t.key)&&_){const n="Escape"===t.key;as({id:e,store:O,unselect:n,nodeRef:P})}else if(A&&k.selected&&Object.prototype.hasOwnProperty.call(gs,t.key)){t.preventDefault();const{ariaLabelConfig:e}=O.getState();O.setState({ariaLiveMessage:e["node.a11yDescription.ariaLiveMessage"]({direction:t.key.replace("Arrow","").toLowerCase(),x:~~S.positionAbsolute.x,y:~~S.positionAbsolute.y})}),D({direction:gs[t.key],factor:t.shiftKey?4:1})}}:void 0,tabIndex:T?0:void 0,onFocus:T?()=>{if(y||!P.current?.matches(":focus-visible"))return;const{transform:t,width:n,height:r,autoPanOnNodeFocus:o,setCenter:i}=O.getState();o&&(gr(new Map([[e,k]]),{x:0,y:0,width:n,height:r},t,!0).length>0||i(k.position.x+L.width/2,k.position.y+L.height/2,{zoom:t[2]}))}:void 0,role:k.ariaRole??(T?"group":void 0),"aria-roledescription":"node","aria-describedby":y?void 0:`${hi}-${v}`,"aria-label":k.ariaLabel,...k.domAttributes,children:(0,r.jsx)(ds,{value:e,children:(0,r.jsx)(N,{id:e,data:k.data,type:C,positionAbsoluteX:S.positionAbsolute.x,positionAbsoluteY:S.positionAbsolute.y,selected:k.selected??!1,selectable:_,draggable:A,deletable:k.deletable??!0,isConnectable:M,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:I,dragHandle:k.dragHandle,zIndex:S.z,parentId:k.parentId,...L})})})});const Cs=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Ns(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:s,onError:a}=li(Cs,oi),l=(u=e.onlyRenderVisibleElements,li((0,o.useCallback)((e=>t=>e?gr(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys()))(u),[u]),oi)),c=function(){const e=li(Ss),[t]=(0,o.useState)(()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver(t=>{const n=new Map;t.forEach(e=>{const t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})}),e(n)}));return(0,o.useEffect)(()=>()=>{t?.disconnect()},[t]),t}();var u;return(0,r.jsx)("div",{className:"react-flow__nodes",style:Ji,children:l.map(o=>(0,r.jsx)(Es,{id:o,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:a},o))})}Ns.displayName="NodeRenderer";const As=(0,o.memo)(Ns),_s={[ar.Arrow]:({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return(0,r.jsx)("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},[ar.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return(0,r.jsx)("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}},Ms=({id:e,type:t,color:n,width:i=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const u=function(e){const t=ci();return(0,o.useMemo)(()=>Object.prototype.hasOwnProperty.call(_s,e)?_s[e]:(t.getState().onError?.("009",(e=>`Marker type "${e}" doesn't exist.`)(e)),null),[e])}(t);return u?(0,r.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:c,refX:"0",refY:"0",children:(0,r.jsx)(u,{color:n,strokeWidth:l})}):null},Ts=({defaultColor:e,rfId:t})=>{const n=li(e=>e.edges),i=li(e=>e.defaultEdgeOptions),s=(0,o.useMemo)(()=>{const r=function(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const i=new Set;return e.reduce((e,s)=>([s.markerStart||r,s.markerEnd||o].forEach(r=>{if(r&&"object"==typeof r){const o=po(r,t);i.has(o)||(e.push({id:o,color:r.color||n,...r}),i.add(o))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}(n,{id:t,defaultColor:e,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd});return r},[n,i,t,e]);return s.length?(0,r.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,r.jsx)("defs",{children:s.map(e=>(0,r.jsx)(Ms,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id))})}):null};Ts.displayName="MarkerDefinitions";var Os=(0,o.memo)(Ts);function js({x:e,y:t,label:n,labelStyle:i,labelShowBg:a=!0,labelBgStyle:l,labelBgPadding:c=[2,4],labelBgBorderRadius:u=2,children:d,className:h,...f}){const[p,g]=(0,o.useState)({x:1,y:0,width:0,height:0}),m=s(["react-flow__edge-textwrapper",h]),y=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(y.current){const e=y.current.getBBox();g({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),n?(0,r.jsxs)("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:m,visibility:p.width?"visible":"hidden",...f,children:[a&&(0,r.jsx)("rect",{width:p.width+2*c[0],x:-c[0],y:-c[1],height:p.height+2*c[1],className:"react-flow__edge-textbg",style:l,rx:u,ry:u}),(0,r.jsx)("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:y,style:i,children:n}),d]}):null}js.displayName="EdgeText";const Ps=(0,o.memo)(js);function Is({path:e,labelX:t,labelY:n,label:o,labelStyle:i,labelShowBg:a,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,interactionWidth:d=20,...h}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{...h,d:e,fill:"none",className:s(["react-flow__edge-path",h.className])}),d?(0,r.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}):null,o&&Tr(t)&&Tr(n)?(0,r.jsx)(Ps,{x:t,y:n,label:o,labelStyle:i,labelShowBg:a,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null]})}function Ds({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===lr.Left||e===lr.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Ls({sourceX:e,sourceY:t,sourcePosition:n=lr.Bottom,targetX:r,targetY:o,targetPosition:i=lr.Top}){const[s,a]=Ds({pos:n,x1:e,y1:t,x2:r,y2:o}),[l,c]=Ds({pos:i,x1:r,y1:o,x2:e,y2:t}),[u,d,h,f]=Qr({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:a,targetControlX:l,targetControlY:c});return[`M${e},${t} C${s},${a} ${l},${c} ${r},${o}`,u,d,h,f]}function Rs(e){return(0,o.memo)(({id:t,sourceX:n,sourceY:o,targetX:i,targetY:s,sourcePosition:a,targetPosition:l,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:m,markerStart:y,interactionWidth:v})=>{const[b,w,x]=Ls({sourceX:n,sourceY:o,sourcePosition:a,targetX:i,targetY:s,targetPosition:l}),k=e.isInternal?void 0:t;return(0,r.jsx)(Is,{id:k,path:b,labelX:w,labelY:x,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:m,markerStart:y,interactionWidth:v})})}const Bs=Rs({isInternal:!1}),$s=Rs({isInternal:!0});function zs(e){return(0,o.memo)(({id:t,sourceX:n,sourceY:o,targetX:i,targetY:s,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,sourcePosition:p=lr.Bottom,targetPosition:g=lr.Top,markerEnd:m,markerStart:y,pathOptions:v,interactionWidth:b})=>{const[w,x,k]=lo({sourceX:n,sourceY:o,sourcePosition:p,targetX:i,targetY:s,targetPosition:g,borderRadius:v?.borderRadius,offset:v?.offset,stepPosition:v?.stepPosition}),S=e.isInternal?void 0:t;return(0,r.jsx)(Is,{id:S,path:w,labelX:x,labelY:k,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:y,interactionWidth:b})})}Bs.displayName="SimpleBezierEdge",$s.displayName="SimpleBezierEdgeInternal";const qs=zs({isInternal:!1}),Vs=zs({isInternal:!0});function Fs(e){return(0,o.memo)(({id:t,...n})=>{const i=e.isInternal?void 0:t;return(0,r.jsx)(qs,{...n,id:i,pathOptions:(0,o.useMemo)(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}qs.displayName="SmoothStepEdge",Vs.displayName="SmoothStepEdgeInternal";const Hs=Fs({isInternal:!1}),Ws=Fs({isInternal:!0});function Us(e){return(0,o.memo)(({id:t,sourceX:n,sourceY:o,targetX:i,targetY:s,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:p,markerStart:g,interactionWidth:m})=>{const[y,v,b]=io({sourceX:n,sourceY:o,targetX:i,targetY:s}),w=e.isInternal?void 0:t;return(0,r.jsx)(Is,{id:w,path:y,labelX:v,labelY:b,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:p,markerStart:g,interactionWidth:m})})}Hs.displayName="StepEdge",Ws.displayName="StepEdgeInternal";const Ks=Us({isInternal:!1}),Xs=Us({isInternal:!0});function Ys(e){return(0,o.memo)(({id:t,sourceX:n,sourceY:o,targetX:i,targetY:s,sourcePosition:a=lr.Bottom,targetPosition:l=lr.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:m,markerStart:y,pathOptions:v,interactionWidth:b})=>{const[w,x,k]=to({sourceX:n,sourceY:o,sourcePosition:a,targetX:i,targetY:s,targetPosition:l,curvature:v?.curvature}),S=e.isInternal?void 0:t;return(0,r.jsx)(Is,{id:S,path:w,labelX:x,labelY:k,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:m,markerStart:y,interactionWidth:b})})}Ks.displayName="StraightEdge",Xs.displayName="StraightEdgeInternal";const Gs=Ys({isInternal:!1}),Zs=Ys({isInternal:!0});Gs.displayName="BezierEdge",Zs.displayName="BezierEdgeInternal";const Qs={default:Zs,straight:Xs,step:Ws,smoothstep:Vs,simplebezier:$s},Js={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},ea=(e,t,n)=>n===lr.Left?e-t:n===lr.Right?e+t:e,ta=(e,t,n)=>n===lr.Top?e-t:n===lr.Bottom?e+t:e,na="react-flow__edgeupdater";function ra({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:i,onMouseEnter:a,onMouseOut:l,type:c}){return(0,r.jsx)("circle",{onMouseDown:i,onMouseEnter:a,onMouseOut:l,className:s([na,`${na}-${c}`]),cx:ea(t,o,e),cy:ta(n,o,e),r:o,stroke:"transparent",fill:"transparent"})}function oa({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:i,targetX:s,targetY:a,sourcePosition:l,targetPosition:c,onReconnect:u,onReconnectStart:d,onReconnectEnd:h,setReconnecting:f,setUpdateHover:p}){const g=ci(),m=(e,t)=>{if(0!==e.button)return;const{autoPanOnConnect:r,domNode:o,isValidConnection:i,connectionMode:s,connectionRadius:a,lib:l,onConnectStart:c,onConnectEnd:p,cancelConnection:m,nodeLookup:y,rfId:v,panBy:b,updateConnection:w}=g.getState(),x="target"===t.type;Po.onPointerDown(e.nativeEvent,{autoPanOnConnect:r,connectionMode:s,connectionRadius:a,domNode:o,handleId:t.id,nodeId:t.nodeId,nodeLookup:y,isTarget:x,edgeUpdaterType:t.type,lib:l,flowId:v,cancelConnection:m,panBy:b,isValidConnection:i,onConnect:e=>u?.(n,e),onConnectStart:(r,o)=>{f(!0),d?.(e,n,t.type),c?.(r,o)},onConnectEnd:p,onReconnectEnd:(e,r)=>{f(!1),h?.(e,n,t.type,r)},updateConnection:w,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle,dragThreshold:g.getState().connectionDragThreshold,handleDomNode:e.currentTarget})},y=()=>p(!0),v=()=>p(!1);return(0,r.jsxs)(r.Fragment,{children:[(!0===e||"source"===e)&&(0,r.jsx)(ra,{position:l,centerX:o,centerY:i,radius:t,onMouseDown:e=>m(e,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),onMouseEnter:y,onMouseOut:v,type:"source"}),(!0===e||"target"===e)&&(0,r.jsx)(ra,{position:c,centerX:s,centerY:a,radius:t,onMouseDown:e=>m(e,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),onMouseEnter:y,onMouseOut:v,type:"target"})]})}var ia=(0,o.memo)(function({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:i,onClick:a,onDoubleClick:l,onContextMenu:c,onMouseEnter:u,onMouseMove:d,onMouseLeave:h,reconnectRadius:f,onReconnect:p,onReconnectStart:g,onReconnectEnd:m,rfId:y,edgeTypes:v,noPanClassName:b,onError:w,disableKeyboardA11y:x}){let k=li(t=>t.edgeLookup.get(e));const S=li(e=>e.defaultEdgeOptions);k=S?{...S,...k}:k;let E=k.type||"default",C=v?.[E]||Qs[E];void 0===C&&(w?.("011",(e=>`Edge type "${e}" not found. Using fallback type "default".`)(E)),E="default",C=v?.default||Qs.default);const N=!!(k.focusable||t&&void 0===k.focusable),A=void 0!==p&&(k.reconnectable||n&&void 0===k.reconnectable),_=!!(k.selectable||i&&void 0===k.selectable),M=(0,o.useRef)(null),[T,O]=(0,o.useState)(!1),[j,P]=(0,o.useState)(!1),I=ci(),{zIndex:D,sourceX:L,sourceY:R,targetX:B,targetY:$,sourcePosition:z,targetPosition:q}=li((0,o.useCallback)(t=>{const n=t.nodeLookup.get(k.source),r=t.nodeLookup.get(k.target);if(!n||!r)return{zIndex:k.zIndex,...Js};const o=function(e){const{sourceNode:t,targetNode:n}=e;if(!co(t)||!co(n))return null;const r=t.internals.handleBounds||uo(t.handles),o=n.internals.handleBounds||uo(n.handles),i=fo(r?.source??[],e.sourceHandle),s=fo(e.connectionMode===nr.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!i||!s)return e.onError?.("008",((e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:r}", edge id: ${t}.`)(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=i?.position||lr.Bottom,l=s?.position||lr.Top,c=ho(t,i,a),u=ho(n,s,l);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:a,targetPosition:l}}({id:e,sourceNode:n,targetNode:r,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:t.connectionMode,onError:w}),i=function({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1,zIndexMode:i="basic"}){return"manual"===i?r:(o&&n?r+1e3:r)+Math.max(e.parentId||o&&e.selected?e.internals.z:0,t.parentId||o&&t.selected?t.internals.z:0)}({selected:k.selected,zIndex:k.zIndex,sourceNode:n,targetNode:r,elevateOnSelect:t.elevateEdgesOnSelect,zIndexMode:t.zIndexMode});return{zIndex:i,...o||Js}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),oi),V=(0,o.useMemo)(()=>k.markerStart?`url('#${po(k.markerStart,y)}')`:void 0,[k.markerStart,y]),F=(0,o.useMemo)(()=>k.markerEnd?`url('#${po(k.markerEnd,y)}')`:void 0,[k.markerEnd,y]);if(k.hidden||null===L||null===R||null===B||null===$)return null;const H=l?e=>{l(e,{...k})}:void 0,W=c?e=>{c(e,{...k})}:void 0,U=u?e=>{u(e,{...k})}:void 0,K=d?e=>{d(e,{...k})}:void 0,X=h?e=>{h(e,{...k})}:void 0;return(0,r.jsx)("svg",{style:{zIndex:D},children:(0,r.jsxs)("g",{className:s(["react-flow__edge",`react-flow__edge-${E}`,k.className,b,{selected:k.selected,animated:k.animated,inactive:!_&&!a,updating:T,selectable:_}]),onClick:t=>{const{addSelectedEdges:n,unselectNodesAndEdges:r,multiSelectionActive:o}=I.getState();_&&(I.setState({nodesSelectionActive:!1}),k.selected&&o?(r({nodes:[],edges:[k]}),M.current?.blur()):n([e])),a&&a(t,k)},onDoubleClick:H,onContextMenu:W,onMouseEnter:U,onMouseMove:K,onMouseLeave:X,onKeyDown:N?t=>{if(!x&&er.includes(t.key)&&_){const{unselectNodesAndEdges:n,addSelectedEdges:r}=I.getState();"Escape"===t.key?(M.current?.blur(),n({edges:[k]})):r([e])}}:void 0,tabIndex:N?0:void 0,role:k.ariaRole??(N?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===k.ariaLabel?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":N?`${fi}-${y}`:void 0,ref:M,...k.domAttributes,children:[!j&&(0,r.jsx)(C,{id:e,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:_,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:L,sourceY:R,targetX:B,targetY:$,sourcePosition:z,targetPosition:q,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:V,markerEnd:F,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),A&&(0,r.jsx)(oa,{edge:k,isReconnectable:A,reconnectRadius:f,onReconnect:p,onReconnectStart:g,onReconnectEnd:m,sourceX:L,sourceY:R,targetX:B,targetY:$,sourcePosition:z,targetPosition:q,setUpdateHover:O,setReconnecting:P})]})})});const sa=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function aa({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:i,noPanClassName:s,onReconnect:a,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:h,reconnectRadius:f,onEdgeDoubleClick:p,onReconnectStart:g,onReconnectEnd:m,disableKeyboardA11y:y}){const{edgesFocusable:v,edgesReconnectable:b,elementsSelectable:w,onError:x}=li(sa,oi),k=(S=t,li((0,o.useCallback)(e=>{if(!S)return e.edges.map(e=>e.id);const t=[];if(e.width&&e.height)for(const n of e.edges){const r=e.nodeLookup.get(n.source),o=e.nodeLookup.get(n.target);r&&o&&ro({sourceNode:r,targetNode:o,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t},[S]),oi));var S;return(0,r.jsxs)("div",{className:"react-flow__edges",children:[(0,r.jsx)(Os,{defaultColor:e,rfId:n}),k.map(e=>(0,r.jsx)(ia,{id:e,edgesFocusable:v,edgesReconnectable:b,elementsSelectable:w,noPanClassName:s,onReconnect:a,onContextMenu:l,onMouseEnter:c,onMouseMove:u,onMouseLeave:d,onClick:h,reconnectRadius:f,onDoubleClick:p,onReconnectStart:g,onReconnectEnd:m,rfId:n,onError:x,edgeTypes:i,disableKeyboardA11y:y},e))]})}aa.displayName="EdgeRenderer";const la=(0,o.memo)(aa),ca=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function ua({children:e}){const t=li(ca);return(0,r.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}const da=e=>e.panZoom?.syncViewport;function ha(e){return e.connection.inProgress?{...e.connection,to:Pr(e.connection.to,e.transform)}:{...e.connection}}const fa=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function pa({containerStyle:e,style:t,type:n,component:o}){const{nodesConnectable:i,width:a,height:l,isValid:c,inProgress:u}=li(fa,oi);return a&&i&&u?(0,r.jsx)("svg",{style:e,width:a,height:l,className:"react-flow__connectionline react-flow__container",children:(0,r.jsx)("g",{className:s(["react-flow__connection",ur(c)]),children:(0,r.jsx)(ga,{style:t,type:n,CustomComponent:o,isValid:c})})}):null}const ga=({style:e,type:t=sr.Bezier,CustomComponent:n,isValid:o})=>{const{inProgress:i,from:s,fromNode:a,fromHandle:l,fromPosition:c,to:u,toNode:d,toHandle:h,toPosition:f,pointer:p}=li(function(e){return e?t=>{const n=ha(t);return e(n)}:ha}(g),oi);var g;if(!i)return;if(n)return(0,r.jsx)(n,{connectionLineType:t,connectionLineStyle:e,fromNode:a,fromHandle:l,fromX:s.x,fromY:s.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:f,connectionStatus:ur(o),toNode:d,toHandle:h,pointer:p});let m="";const y={sourceX:s.x,sourceY:s.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:f};switch(t){case sr.Bezier:[m]=to(y);break;case sr.SimpleBezier:[m]=Ls(y);break;case sr.Step:[m]=lo({...y,borderRadius:0});break;case sr.SmoothStep:[m]=lo(y);break;default:[m]=io(y)}return(0,r.jsx)("path",{d:m,fill:"none",className:"react-flow__connection-path",style:e})};ga.displayName="ConnectionLine";const ma={};function ya(e=ma){(0,o.useRef)(e),ci(),(0,o.useEffect)(()=>{},[e])}function va({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:i,onEdgeClick:s,onNodeDoubleClick:a,onEdgeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:h,onSelectionContextMenu:f,onSelectionStart:p,onSelectionEnd:g,connectionLineType:m,connectionLineStyle:y,connectionLineComponent:v,connectionLineContainerStyle:b,selectionKeyCode:w,selectionOnDrag:x,selectionMode:k,multiSelectionKeyCode:S,panActivationKeyCode:E,zoomActivationKeyCode:C,deleteKeyCode:N,onlyRenderVisibleElements:A,elementsSelectable:_,defaultViewport:M,translateExtent:T,minZoom:O,maxZoom:j,preventScrolling:P,defaultMarkerColor:I,zoomOnScroll:D,zoomOnPinch:L,panOnScroll:R,panOnScrollSpeed:B,panOnScrollMode:$,zoomOnDoubleClick:z,panOnDrag:q,onPaneClick:V,onPaneMouseEnter:F,onPaneMouseMove:H,onPaneMouseLeave:W,onPaneScroll:U,onPaneContextMenu:K,paneClickDistance:X,nodeClickDistance:Y,onEdgeContextMenu:G,onEdgeMouseEnter:Z,onEdgeMouseMove:Q,onEdgeMouseLeave:J,reconnectRadius:ee,onReconnect:te,onReconnectStart:ne,onReconnectEnd:re,noDragClassName:oe,noWheelClassName:ie,noPanClassName:se,disableKeyboardA11y:ae,nodeExtent:le,rfId:ce,viewport:ue,onViewportChange:de}){return ya(e),ya(t),ci(),(0,o.useRef)(!1),(0,o.useEffect)(()=>{},[]),function(e){const t=Gi(),n=(0,o.useRef)(!1);(0,o.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}(n),function(e){const t=li(da),n=ci();(0,o.useEffect)(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t])}(ue),(0,r.jsx)(ks,{onPaneClick:V,onPaneMouseEnter:F,onPaneMouseMove:H,onPaneMouseLeave:W,onPaneContextMenu:K,onPaneScroll:U,paneClickDistance:X,deleteKeyCode:N,selectionKeyCode:w,selectionOnDrag:x,selectionMode:k,onSelectionStart:p,onSelectionEnd:g,multiSelectionKeyCode:S,panActivationKeyCode:E,zoomActivationKeyCode:C,elementsSelectable:_,zoomOnScroll:D,zoomOnPinch:L,zoomOnDoubleClick:z,panOnScroll:R,panOnScrollSpeed:B,panOnScrollMode:$,panOnDrag:q,defaultViewport:M,translateExtent:T,minZoom:O,maxZoom:j,onSelectionContextMenu:f,preventScrolling:P,noDragClassName:oe,noWheelClassName:ie,noPanClassName:se,disableKeyboardA11y:ae,onViewportChange:de,isControlledViewport:!!ue,children:(0,r.jsxs)(ua,{children:[(0,r.jsx)(la,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:l,onReconnect:te,onReconnectStart:ne,onReconnectEnd:re,onlyRenderVisibleElements:A,onEdgeContextMenu:G,onEdgeMouseEnter:Z,onEdgeMouseMove:Q,onEdgeMouseLeave:J,reconnectRadius:ee,defaultMarkerColor:I,noPanClassName:se,disableKeyboardA11y:ae,rfId:ce}),(0,r.jsx)(pa,{style:y,type:m,component:v,containerStyle:b}),(0,r.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,r.jsx)(As,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:a,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:h,nodeClickDistance:Y,onlyRenderVisibleElements:A,noPanClassName:se,noDragClassName:oe,disableKeyboardA11y:ae,nodeExtent:le,rfId:ce}),(0,r.jsx)("div",{className:"react-flow__viewport-portal"})]})})}va.displayName="GraphView";const ba=(0,o.memo)(va),wa=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,fitViewOptions:a,minZoom:l=.5,maxZoom:c=2,nodeOrigin:u,nodeExtent:d,zIndexMode:h="basic"}={})=>{const f=new Map,p=new Map,g=new Map,m=new Map,y=r??t??[],v=n??e??[],b=u??[0,0],w=d??Jn;Co(g,m,y);const x=wo(v,f,p,{nodeOrigin:b,nodeExtent:w,zIndexMode:h});let k=[0,0,1];if(s&&o&&i){const e=pr(f,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:t,y:n,zoom:r}=Lr(e,o,i,l,c,a?.padding??.1);k=[t,n,r]}return{rfId:"1",width:o??0,height:i??0,transform:k,nodes:v,nodesInitialized:x,nodeLookup:f,parentLookup:p,edges:y,edgeLookup:m,connectionLookup:g,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==r,panZoom:null,minZoom:l,maxZoom:c,translateExtent:Jn,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:nr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:b,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s??!1,fitViewOptions:a,fitViewResolver:null,connection:{...ir},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Or,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:tr,zIndexMode:h,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},xa=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,fitViewOptions:a,minZoom:l,maxZoom:c,nodeOrigin:u,nodeExtent:d,zIndexMode:h})=>{return f=(f,p)=>{async function g(){const{nodeLookup:e,panZoom:t,fitViewOptions:n,fitViewResolver:r,width:o,height:i,minZoom:s,maxZoom:a}=p();t&&(await async function({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},s){if(0===e.size)return Promise.resolve(!0);const a=function(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(e=>e.id)):null;return e.forEach(e=>{!e.measured.width||!e.measured.height||!t?.includeHiddenNodes&&e.hidden||r&&!r.has(e.id)||n.set(e.id,e)}),n}(e,s),l=pr(a),c=Lr(l,t,n,s?.minZoom??o,s?.maxZoom??i,s?.padding??.1);return await r.setViewport(c,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)}({nodes:e,width:o,height:i,panZoom:t,minZoom:s,maxZoom:a},n),r?.resolve(!0),f({fitViewResolver:null}))}return{...wa({nodes:e,edges:t,width:o,height:i,fitView:s,fitViewOptions:a,minZoom:l,maxZoom:c,nodeOrigin:u,nodeExtent:d,defaultNodes:n,defaultEdges:r,zIndexMode:h}),setNodes:e=>{const{nodeLookup:t,parentLookup:n,nodeOrigin:r,elevateNodesOnSelect:o,fitViewQueued:i,zIndexMode:s}=p(),a=wo(e,t,n,{nodeOrigin:r,nodeExtent:d,elevateNodesOnSelect:o,checkEquality:!0,zIndexMode:s});i&&a?(g(),f({nodes:e,nodesInitialized:a,fitViewQueued:!1,fitViewOptions:void 0})):f({nodes:e,nodesInitialized:a})},setEdges:e=>{const{connectionLookup:t,edgeLookup:n}=p();Co(t,n,e),f({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){const{setNodes:t}=p();t(e),f({hasDefaultNodes:!0})}if(t){const{setEdges:e}=p();e(t),f({hasDefaultEdges:!0})}},updateNodeInternals:e=>{const{triggerNodeChanges:t,nodeLookup:n,parentLookup:r,domNode:o,nodeOrigin:i,nodeExtent:s,debug:a,fitViewQueued:l,zIndexMode:c}=p(),{changes:u,updatedInternals:d}=function(e,t,n,r,o,i,s){const a=r?.querySelector(".xyflow__viewport");let l=!1;if(!a)return{changes:[],updatedInternals:l};const c=[],u=window.getComputedStyle(a),{m22:d}=new window.DOMMatrixReadOnly(u.transform),h=[];for(const r of e.values()){const e=t.get(r.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),l=!0;continue}const a=Wr(r.nodeElement),u=e.measured.width!==a.width||e.measured.height!==a.height;if(a.width&&a.height&&(u||!e.internals.handleBounds||r.force)){const f=r.nodeElement.getBoundingClientRect(),p=Br(e.extent)?e.extent:i;let{positionAbsolute:g}=e.internals;e.parentId&&"parent"===e.extent?g=br(g,a,t.get(e.parentId)):p&&(g=vr(g,p,a));const m={...e,measured:a,internals:{...e.internals,positionAbsolute:g,handleBounds:{source:Zr("source",r.nodeElement,f,d,e.id),target:Zr("target",r.nodeElement,f,d,e.id)}}};t.set(e.id,m),e.parentId&&xo(m,t,n,{nodeOrigin:o,zIndexMode:s}),l=!0,u&&(c.push({id:e.id,type:"dimensions",dimensions:a}),e.expandParent&&e.parentId&&h.push({id:e.id,parentId:e.parentId,rect:Cr(m,o)}))}}if(h.length>0){const e=So(h,t,n,o);c.push(...e)}return{changes:c,updatedInternals:l}}(e,n,r,o,i,s,c);d&&(function(e,t,n){const r=yo(go,n);for(const n of e.values())if(n.parentId)xo(n,e,t,r);else{const e=fr(n,r.nodeOrigin),t=Br(n.extent)?n.extent:r.nodeExtent,o=vr(e,t,$r(n));n.internals.positionAbsolute=o}}(n,r,{nodeOrigin:i,nodeExtent:s,zIndexMode:c}),l?(g(),f({fitViewQueued:!1,fitViewOptions:void 0})):f({}),u?.length>0&&(a&&console.log("React Flow: trigger node changes",u),t?.(u)))},updateNodePositions:(e,t=!1)=>{const n=[];let r=[];const{nodeLookup:o,triggerNodeChanges:i,connection:s,updateConnection:a,onNodesChangeMiddlewareMap:l}=p();for(const[i,l]of e){const e=o.get(i),c=!!(e?.expandParent&&e?.parentId&&l?.position),u={id:i,type:"position",position:c?{x:Math.max(0,l.position.x),y:Math.max(0,l.position.y)}:l.position,dragging:t};if(e&&s.inProgress&&s.fromNode.id===e.id){const t=ho(e,s.fromHandle,lr.Left,!0);a({...s,from:t})}c&&e.parentId&&n.push({id:i,parentId:e.parentId,rect:{...l.internals.positionAbsolute,width:l.measured.width??0,height:l.measured.height??0}}),r.push(u)}if(n.length>0){const{parentLookup:e,nodeOrigin:t}=p(),i=So(n,o,e,t);r.push(...i)}for(const e of l.values())r=e(r);i(r)},triggerNodeChanges:e=>{const{onNodesChange:t,setNodes:n,nodes:r,hasDefaultNodes:o,debug:i}=p();e?.length&&(o&&n(function(e,t){return Ri(e,t)}(e,r)),i&&console.log("React Flow: trigger node changes",e),t?.(e))},triggerEdgeChanges:e=>{const{onEdgesChange:t,setEdges:n,edges:r,hasDefaultEdges:o,debug:i}=p();e?.length&&(o&&n(function(e,t){return Ri(e,t)}(e,r)),i&&console.log("React Flow: trigger edge changes",e),t?.(e))},addSelectedNodes:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:i}=p();t?o(e.map(e=>$i(e,!0))):(o(zi(r,new Set([...e]),!0)),i(zi(n)))},addSelectedEdges:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:i}=p();t?i(e.map(e=>$i(e,!0))):(i(zi(n,new Set([...e]))),o(zi(r,new Set,!0)))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{const{edges:n,nodes:r,nodeLookup:o,triggerNodeChanges:i,triggerEdgeChanges:s}=p(),a=t||n,l=(e||r).map(e=>{const t=o.get(e.id);return t&&(t.selected=!1),$i(e.id,!1)}),c=a.map(e=>$i(e.id,!1));i(l),s(c)},setMinZoom:e=>{const{panZoom:t,maxZoom:n}=p();t?.setScaleExtent([e,n]),f({minZoom:e})},setMaxZoom:e=>{const{panZoom:t,minZoom:n}=p();t?.setScaleExtent([n,e]),f({maxZoom:e})},setTranslateExtent:e=>{p().panZoom?.setTranslateExtent(e),f({translateExtent:e})},resetSelectedElements:()=>{const{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:r,elementsSelectable:o}=p();if(!o)return;const i=t.reduce((e,t)=>t.selected?[...e,$i(t.id,!1)]:e,[]),s=e.reduce((e,t)=>t.selected?[...e,$i(t.id,!1)]:e,[]);n(i),r(s)},setNodeExtent:e=>{const{nodes:t,nodeLookup:n,parentLookup:r,nodeOrigin:o,elevateNodesOnSelect:i,nodeExtent:s,zIndexMode:a}=p();e[0][0]===s[0][0]&&e[0][1]===s[0][1]&&e[1][0]===s[1][0]&&e[1][1]===s[1][1]||(wo(t,n,r,{nodeOrigin:o,nodeExtent:e,elevateNodesOnSelect:i,checkEquality:!1,zIndexMode:a}),f({nodeExtent:e}))},panBy:e=>{const{transform:t,width:n,height:r,panZoom:o,translateExtent:i}=p();return async function({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}({delta:e,panZoom:o,transform:t,translateExtent:i,width:n,height:r})},setCenter:async(e,t,n)=>{const{width:r,height:o,maxZoom:i,panZoom:s}=p();if(!s)return Promise.resolve(!1);const a=void 0!==n?.zoom?n.zoom:i;return await s.setViewport({x:r/2-e*a,y:o/2-t*a,zoom:a},{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{f({connection:{...ir}})},updateConnection:e=>{f({connection:e})},reset:()=>f({...wa()})}},p=Object.is,f?ri(f,p):ri;var f,p};function ka({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:i,initialWidth:s,initialHeight:a,initialMinZoom:l,initialMaxZoom:c,initialFitViewOptions:u,fitView:d,nodeOrigin:h,nodeExtent:f,zIndexMode:p,children:g}){const[m]=(0,o.useState)(()=>xa({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,width:s,height:a,fitView:d,minZoom:l,maxZoom:c,fitViewOptions:u,nodeOrigin:h,nodeExtent:f,zIndexMode:p}));return(0,r.jsx)(si,{value:m,children:(0,r.jsx)(Xi,{children:g})})}function Sa({children:e,nodes:t,edges:n,defaultNodes:i,defaultEdges:s,width:a,height:l,fitView:c,fitViewOptions:u,minZoom:d,maxZoom:h,nodeOrigin:f,nodeExtent:p,zIndexMode:g}){return(0,o.useContext)(ii)?(0,r.jsx)(r.Fragment,{children:e}):(0,r.jsx)(ka,{initialNodes:t,initialEdges:n,defaultNodes:i,defaultEdges:s,initialWidth:a,initialHeight:l,fitView:c,initialFitViewOptions:u,initialMinZoom:d,initialMaxZoom:h,nodeOrigin:f,nodeExtent:p,zIndexMode:g,children:e})}const Ea={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var Ca,Na=Hi(function({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:a,nodeTypes:l,edgeTypes:c,onNodeClick:u,onEdgeClick:d,onInit:h,onMove:f,onMoveStart:p,onMoveEnd:g,onConnect:m,onConnectStart:y,onConnectEnd:v,onClickConnectStart:b,onClickConnectEnd:w,onNodeMouseEnter:x,onNodeMouseMove:k,onNodeMouseLeave:S,onNodeContextMenu:E,onNodeDoubleClick:C,onNodeDragStart:N,onNodeDrag:A,onNodeDragStop:_,onNodesDelete:M,onEdgesDelete:T,onDelete:O,onSelectionChange:j,onSelectionDragStart:P,onSelectionDrag:I,onSelectionDragStop:D,onSelectionContextMenu:L,onSelectionStart:R,onSelectionEnd:B,onBeforeDelete:$,connectionMode:z,connectionLineType:q=sr.Bezier,connectionLineStyle:V,connectionLineComponent:F,connectionLineContainerStyle:H,deleteKeyCode:W="Backspace",selectionKeyCode:U="Shift",selectionOnDrag:K=!1,selectionMode:X=or.Full,panActivationKeyCode:Y="Space",multiSelectionKeyCode:G=(Rr()?"Meta":"Control"),zoomActivationKeyCode:Z=(Rr()?"Meta":"Control"),snapToGrid:Q,snapGrid:J,onlyRenderVisibleElements:ee=!1,selectNodesOnDrag:te,nodesDraggable:ne,autoPanOnNodeFocus:re,nodesConnectable:oe,nodesFocusable:ie,nodeOrigin:se=Ni,edgesFocusable:ae,edgesReconnectable:le,elementsSelectable:ce=!0,defaultViewport:ue=Ai,minZoom:de=.5,maxZoom:he=2,translateExtent:fe=Jn,preventScrolling:pe=!0,nodeExtent:ge,defaultMarkerColor:me="#b1b1b7",zoomOnScroll:ye=!0,zoomOnPinch:ve=!0,panOnScroll:be=!1,panOnScrollSpeed:we=.5,panOnScrollMode:xe=rr.Free,zoomOnDoubleClick:ke=!0,panOnDrag:Se=!0,onPaneClick:Ee,onPaneMouseEnter:Ce,onPaneMouseMove:Ne,onPaneMouseLeave:Ae,onPaneScroll:_e,onPaneContextMenu:Me,paneClickDistance:Te=1,nodeClickDistance:Oe=0,children:je,onReconnect:Pe,onReconnectStart:Ie,onReconnectEnd:De,onEdgeContextMenu:Le,onEdgeDoubleClick:Re,onEdgeMouseEnter:Be,onEdgeMouseMove:$e,onEdgeMouseLeave:ze,reconnectRadius:qe=10,onNodesChange:Ve,onEdgesChange:Fe,noDragClassName:He="nodrag",noWheelClassName:We="nowheel",noPanClassName:Ue="nopan",fitView:Ke,fitViewOptions:Xe,connectOnClick:Ye,attributionPosition:Ge,proOptions:Ze,defaultEdgeOptions:Qe,elevateNodesOnSelect:Je=!0,elevateEdgesOnSelect:et=!1,disableKeyboardA11y:tt=!1,autoPanOnConnect:nt,autoPanOnNodeDrag:rt,autoPanSpeed:ot,connectionRadius:it,isValidConnection:st,onError:at,style:lt,id:ct,nodeDragThreshold:ut,connectionDragThreshold:dt,viewport:ht,onViewportChange:ft,width:pt,height:gt,colorMode:mt="light",debug:yt,onScroll:vt,ariaLabelConfig:bt,zIndexMode:wt="basic",...xt},kt){const St=ct||"1",Et=function(e){const[t,n]=(0,o.useState)("system"===e?null:e);return(0,o.useEffect)(()=>{if("system"!==e)return void n(e);const t=ji(),r=()=>n(t?.matches?"dark":"light");return r(),t?.addEventListener("change",r),()=>{t?.removeEventListener("change",r)}},[e]),null!==t?t:ji()?.matches?"dark":"light"}(mt),Ct=(0,o.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),vt?.(e)},[vt]);return(0,r.jsx)("div",{"data-testid":"rf__wrapper",...xt,onScroll:Ct,style:{...lt,...Ea},ref:kt,className:s(["react-flow",a,Et]),id:ct,role:"application",children:(0,r.jsxs)(Sa,{nodes:e,edges:t,width:pt,height:gt,fitView:Ke,fitViewOptions:Xe,minZoom:de,maxZoom:he,nodeOrigin:se,nodeExtent:ge,zIndexMode:wt,children:[(0,r.jsx)(ba,{onInit:h,onNodeClick:u,onEdgeClick:d,onNodeMouseEnter:x,onNodeMouseMove:k,onNodeMouseLeave:S,onNodeContextMenu:E,onNodeDoubleClick:C,nodeTypes:l,edgeTypes:c,connectionLineType:q,connectionLineStyle:V,connectionLineComponent:F,connectionLineContainerStyle:H,selectionKeyCode:U,selectionOnDrag:K,selectionMode:X,deleteKeyCode:W,multiSelectionKeyCode:G,panActivationKeyCode:Y,zoomActivationKeyCode:Z,onlyRenderVisibleElements:ee,defaultViewport:ue,translateExtent:fe,minZoom:de,maxZoom:he,preventScrolling:pe,zoomOnScroll:ye,zoomOnPinch:ve,zoomOnDoubleClick:ke,panOnScroll:be,panOnScrollSpeed:we,panOnScrollMode:xe,panOnDrag:Se,onPaneClick:Ee,onPaneMouseEnter:Ce,onPaneMouseMove:Ne,onPaneMouseLeave:Ae,onPaneScroll:_e,onPaneContextMenu:Me,paneClickDistance:Te,nodeClickDistance:Oe,onSelectionContextMenu:L,onSelectionStart:R,onSelectionEnd:B,onReconnect:Pe,onReconnectStart:Ie,onReconnectEnd:De,onEdgeContextMenu:Le,onEdgeDoubleClick:Re,onEdgeMouseEnter:Be,onEdgeMouseMove:$e,onEdgeMouseLeave:ze,reconnectRadius:qe,defaultMarkerColor:me,noDragClassName:He,noWheelClassName:We,noPanClassName:Ue,rfId:St,disableKeyboardA11y:tt,nodeExtent:ge,viewport:ht,onViewportChange:ft}),(0,r.jsx)(Oi,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:m,onConnectStart:y,onConnectEnd:v,onClickConnectStart:b,onClickConnectEnd:w,nodesDraggable:ne,autoPanOnNodeFocus:re,nodesConnectable:oe,nodesFocusable:ie,edgesFocusable:ae,edgesReconnectable:le,elementsSelectable:ce,elevateNodesOnSelect:Je,elevateEdgesOnSelect:et,minZoom:de,maxZoom:he,nodeExtent:ge,onNodesChange:Ve,onEdgesChange:Fe,snapToGrid:Q,snapGrid:J,connectionMode:z,translateExtent:fe,connectOnClick:Ye,defaultEdgeOptions:Qe,fitView:Ke,fitViewOptions:Xe,onNodesDelete:M,onEdgesDelete:T,onDelete:O,onNodeDragStart:N,onNodeDrag:A,onNodeDragStop:_,onSelectionDrag:I,onSelectionDragStart:P,onSelectionDragStop:D,onMove:f,onMoveStart:p,onMoveEnd:g,noPanClassName:Ue,nodeOrigin:se,rfId:St,autoPanOnConnect:nt,autoPanOnNodeDrag:rt,autoPanSpeed:ot,onError:at,connectionRadius:it,isValidConnection:st,selectNodesOnDrag:te,nodeDragThreshold:ut,connectionDragThreshold:dt,onBeforeDelete:$,debug:yt,ariaLabelConfig:bt,zIndexMode:wt}),(0,r.jsx)(Ci,{onSelectionChange:j}),je,(0,r.jsx)(bi,{proOptions:Ze,position:Ge}),(0,r.jsx)(yi,{rfId:St,disableKeyboardA11y:tt})]})})});function Aa({dimensions:e,lineWidth:t,variant:n,className:o}){return(0,r.jsx)("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:s(["react-flow__background-pattern",n,o])})}function _a({radius:e,className:t}){return(0,r.jsx)("circle",{cx:e,cy:e,r:e,className:s(["react-flow__background-pattern","dots",t])})}!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(Ca||(Ca={}));const Ma={[Ca.Dots]:1,[Ca.Lines]:1,[Ca.Cross]:6},Ta=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Oa({id:e,variant:t=Ca.Dots,gap:n=20,size:i,lineWidth:a=1,offset:l=0,color:c,bgColor:u,style:d,className:h,patternClassName:f}){const p=(0,o.useRef)(null),{transform:g,patternId:m}=li(Ta,oi),y=i||Ma[t],v=t===Ca.Dots,b=t===Ca.Cross,w=Array.isArray(n)?n:[n,n],x=[w[0]*g[2]||1,w[1]*g[2]||1],k=y*g[2],S=Array.isArray(l)?l:[l,l],E=b?[k,k]:x,C=[S[0]*g[2]||1+E[0]/2,S[1]*g[2]||1+E[1]/2],N=`${m}${e||""}`;return(0,r.jsxs)("svg",{className:s(["react-flow__background",h]),style:{...d,...Ji,"--xy-background-color-props":u,"--xy-background-pattern-color-props":c},ref:p,"data-testid":"rf__background",children:[(0,r.jsx)("pattern",{id:N,x:g[0]%x[0],y:g[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`,children:v?(0,r.jsx)(_a,{radius:k/2,className:f}):(0,r.jsx)(Aa,{dimensions:E,lineWidth:a,variant:t,className:f})}),(0,r.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${N})`})]})}Oa.displayName="Background";const ja=(0,o.memo)(Oa);function Pa(){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,r.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Ia(){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,r.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function Da(){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,r.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function La(){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,r.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Ra(){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,r.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Ba({children:e,className:t,...n}){return(0,r.jsx)("button",{type:"button",className:s(["react-flow__controls-button",t]),...n,children:e})}const $a=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function za({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:l,onFitView:c,onInteractiveChange:u,className:d,children:h,position:f="bottom-left",orientation:p="vertical","aria-label":g}){const m=ci(),{isInteractive:y,minZoomReached:v,maxZoomReached:b,ariaLabelConfig:w}=li($a,oi),{zoomIn:x,zoomOut:k,fitView:S}=Gi(),E="horizontal"===p?"horizontal":"vertical";return(0,r.jsxs)(vi,{className:s(["react-flow__controls",E,d]),position:f,style:e,"data-testid":"rf__controls","aria-label":g??w["controls.ariaLabel"],children:[t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ba,{onClick:()=>{x(),a?.()},className:"react-flow__controls-zoomin",title:w["controls.zoomIn.ariaLabel"],"aria-label":w["controls.zoomIn.ariaLabel"],disabled:b,children:(0,r.jsx)(Pa,{})}),(0,r.jsx)(Ba,{onClick:()=>{k(),l?.()},className:"react-flow__controls-zoomout",title:w["controls.zoomOut.ariaLabel"],"aria-label":w["controls.zoomOut.ariaLabel"],disabled:v,children:(0,r.jsx)(Ia,{})})]}),n&&(0,r.jsx)(Ba,{className:"react-flow__controls-fitview",onClick:()=>{S(i),c?.()},title:w["controls.fitView.ariaLabel"],"aria-label":w["controls.fitView.ariaLabel"],children:(0,r.jsx)(Da,{})}),o&&(0,r.jsx)(Ba,{className:"react-flow__controls-interactive",onClick:()=>{m.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),u?.(!y)},title:w["controls.interactive.ariaLabel"],"aria-label":w["controls.interactive.ariaLabel"],children:y?(0,r.jsx)(Ra,{}):(0,r.jsx)(La,{})}),h]})}za.displayName="Controls";const qa=(0,o.memo)(za),Va=(0,o.memo)(function({id:e,x:t,y:n,width:o,height:i,style:a,color:l,strokeColor:c,strokeWidth:u,className:d,borderRadius:h,shapeRendering:f,selected:p,onClick:g}){const{background:m,backgroundColor:y}=a||{},v=l||m||y;return(0,r.jsx)("rect",{className:s(["react-flow__minimap-node",{selected:p},d]),x:t,y:n,rx:h,ry:h,width:o,height:i,style:{fill:v,stroke:c,strokeWidth:u},shapeRendering:f,onClick:g?t=>g(t,e):void 0})}),Fa=e=>e.nodes.map(e=>e.id),Ha=e=>e instanceof Function?e:()=>e,Wa=(0,o.memo)(function({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:a,NodeComponent:l,onClick:c}){const{node:u,x:d,y:h,width:f,height:p}=li(t=>{const{internals:n}=t.nodeLookup.get(e),r=n.userNode,{x:o,y:i}=n.positionAbsolute,{width:s,height:a}=$r(r);return{node:r,x:o,y:i,width:s,height:a}},oi);return u&&!u.hidden&&zr(u)?(0,r.jsx)(l,{x:d,y:h,width:f,height:p,style:u.style,selected:!!u.selected,className:o(u),color:t(u),borderRadius:i,strokeColor:n(u),strokeWidth:s,shapeRendering:a,onClick:c,id:u.id}):null});var Ua=(0,o.memo)(function({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:i,nodeComponent:s=Va,onClick:a}){const l=li(Fa,oi),c=Ha(t),u=Ha(e),d=Ha(n),h="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,r.jsx)(r.Fragment,{children:l.map(e=>(0,r.jsx)(Wa,{id:e,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:d,nodeBorderRadius:o,nodeStrokeWidth:i,NodeComponent:s,onClick:a,shapeRendering:h},e))})});const Ka=e=>!e.hidden,Xa=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Ar(pr(e.nodeLookup,{filter:Ka}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}};function Ya({style:e,className:t,nodeStrokeColor:n,nodeColor:i,nodeClassName:a="",nodeBorderRadius:l=5,nodeStrokeWidth:c,nodeComponent:u,bgColor:d,maskColor:h,maskStrokeColor:f,maskStrokeWidth:p,position:g="bottom-right",onClick:m,onNodeClick:y,pannable:v=!1,zoomable:b=!1,ariaLabel:w,inversePan:x,zoomStep:k=1,offsetScale:S=5}){const E=ci(),C=(0,o.useRef)(null),{boundingRect:N,viewBB:A,rfId:_,panZoom:M,translateExtent:T,flowWidth:O,flowHeight:j,ariaLabelConfig:P}=li(Xa,oi),I=e?.width??200,D=e?.height??150,L=N.width/I,R=N.height/D,B=Math.max(L,R),$=B*I,z=B*D,q=S*B,V=N.x-($-N.width)/2-q,F=N.y-(z-N.height)/2-q,H=$+2*q,W=z+2*q,U=`react-flow__minimap-desc-${_}`,K=(0,o.useRef)(0),X=(0,o.useRef)();K.current=B,(0,o.useEffect)(()=>{if(C.current&&M)return X.current=function({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Ce(e);return{update:function({translateExtent:e,width:i,height:s,zoomStep:a=1,pannable:l=!0,zoomable:c=!0,inversePan:u=!1}){let d=[0,0];const h=Kn().on("start",e=>{"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(d=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])}).on("zoom",l?o=>{const a=n();if("mousemove"!==o.sourceEvent.type&&"touchmove"!==o.sourceEvent.type||!t)return;const l=[o.sourceEvent.clientX??o.sourceEvent.touches[0].clientX,o.sourceEvent.clientY??o.sourceEvent.touches[0].clientY],c=[l[0]-d[0],l[1]-d[1]];d=l;const h=r()*Math.max(a[2],Math.log(a[2]))*(u?-1:1),f={x:a[0]-c[0]*h,y:a[1]-c[1]*h},p=[[0,0],[i,s]];t.setViewportConstrained({x:f.x,y:f.y,zoom:a[2]},p,e)}:null).on("zoom.wheel",c?e=>{if("wheel"!==e.sourceEvent.type||!t)return;const r=n(),o=e.sourceEvent.ctrlKey&&Rr()?10:1,i=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*a,s=r[2]*Math.pow(2,i*o);t.scaleTo(s)}:null);o.call(h,{})},destroy:function(){o.on("zoom",null)},pointer:Ne}}({domNode:C.current,panZoom:M,getTransform:()=>E.getState().transform,getViewScale:()=>K.current}),()=>{X.current?.destroy()}},[M]),(0,o.useEffect)(()=>{X.current?.update({translateExtent:T,width:O,height:j,inversePan:x,pannable:v,zoomStep:k,zoomable:b})},[v,b,x,k,T,O,j]);const Y=m?e=>{const[t,n]=X.current?.pointer(e)||[0,0];m(e,{x:t,y:n})}:void 0,G=y?(0,o.useCallback)((e,t)=>{const n=E.getState().nodeLookup.get(t).internals.userNode;y(e,n)},[]):void 0,Z=w??P["minimap.ariaLabel"];return(0,r.jsx)(vi,{position:g,style:{...e,"--xy-minimap-background-color-props":"string"==typeof d?d:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof h?h:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof f?f:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof p?p*B:void 0,"--xy-minimap-node-background-color-props":"string"==typeof i?i:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof n?n:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof c?c:void 0},className:s(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:(0,r.jsxs)("svg",{width:I,height:D,viewBox:`${V} ${F} ${H} ${W}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":U,ref:C,onClick:Y,children:[Z&&(0,r.jsx)("title",{id:U,children:Z}),(0,r.jsx)(Ua,{onClick:G,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:l,nodeClassName:a,nodeStrokeWidth:c,nodeComponent:u}),(0,r.jsx)("path",{className:"react-flow__minimap-mask",d:`M${V-q},${F-q}h${H+2*q}v${W+2*q}h${-H-2*q}z\n        M${A.x},${A.y}h${A.width}v${A.height}h${-A.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Ya.displayName="MiniMap",(0,o.memo)(Ya);const Ga={[Vo.Line]:"right",[Vo.Handle]:"bottom-right"};(0,o.memo)(function({nodeId:e,position:t,variant:n=Vo.Handle,className:i,style:a,children:l,color:c,minWidth:u=10,minHeight:d=10,maxWidth:h=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:g,autoScale:m=!0,shouldResize:y,onResizeStart:v,onResize:b,onResizeEnd:w}){const x=hs(),k="string"==typeof e?e:x,S=ci(),E=(0,o.useRef)(null),C=n===Vo.Handle,N=li((0,o.useCallback)((A=C&&m,e=>A?`${Math.max(1/e.transform[2],1)}`:void 0),[C,m]),oi);var A;const _=(0,o.useRef)(null),M=t??Ga[n];(0,o.useEffect)(()=>{if(E.current&&k)return _.current||(_.current=function({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const i=Ce(e);let s={controlDirection:Fo("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};return{update:function({controlPosition:e,boundaries:a,keepAspectRatio:l,resizeDirection:c,onResizeStart:u,onResize:d,onResizeEnd:h,shouldResize:f}){let p,g={...Xo},m={...Yo};s={boundaries:a,resizeDirection:c,keepAspectRatio:l,controlDirection:Fo(e)};let y,v,b,w=null,x=[],k=!1;const S=$e().on("start",e=>{const{nodeLookup:r,transform:o,snapGrid:i,snapToGrid:s,nodeOrigin:a,paneDomNode:l}=n();if(p=r.get(t),!p)return;w=l?.getBoundingClientRect()??null;const{xSnapped:c,ySnapped:d}=Hr(e.sourceEvent,{transform:o,snapGrid:i,snapToGrid:s,containerBounds:w});g={width:p.measured.width??0,height:p.measured.height??0,x:p.position.x??0,y:p.position.y??0},m={...g,pointerX:c,pointerY:d,aspectRatio:g.width/g.height},y=void 0,p.parentId&&("parent"===p.extent||p.expandParent)&&(y=r.get(p.parentId),v=y&&"parent"===p.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(y):void 0),x=[],b=void 0;for(const[e,n]of r)if(n.parentId===t&&(x.push({id:e,position:{...n.position},extent:n.extent}),"parent"===n.extent||n.expandParent)){const e=Go(n,p,n.origin??a);b=b?[[Math.min(e[0][0],b[0][0]),Math.min(e[0][1],b[0][1])],[Math.max(e[1][0],b[1][0]),Math.max(e[1][1],b[1][1])]]:e}u?.(e,{...g})}).on("drag",e=>{const{transform:t,snapGrid:o,snapToGrid:i,nodeOrigin:a}=n(),l=Hr(e.sourceEvent,{transform:t,snapGrid:o,snapToGrid:i,containerBounds:w}),c=[];if(!p)return;const{x:u,y:h,width:S,height:E}=g,C={},N=p.origin??a,{width:A,height:_,x:M,y:T}=function(e,t,n,r,o,i,s,a){let{affectsX:l,affectsY:c}=t;const{isHorizontal:u,isVertical:d}=t,h=u&&d,{xSnapped:f,ySnapped:p}=n,{minWidth:g,maxWidth:m,minHeight:y,maxHeight:v}=r,{x:b,y:w,width:x,height:k,aspectRatio:S}=e;let E=Math.floor(u?f-e.pointerX:0),C=Math.floor(d?p-e.pointerY:0);const N=x+(l?-E:E),A=k+(c?-C:C),_=-i[0]*x,M=-i[1]*k;let T=Uo(N,g,m),O=Uo(A,y,v);if(s){let e=0,t=0;l&&E<0?e=Ho(b+E+_,s[0][0]):!l&&E>0&&(e=Wo(b+N+_,s[1][0])),c&&C<0?t=Ho(w+C+M,s[0][1]):!c&&C>0&&(t=Wo(w+A+M,s[1][1])),T=Math.max(T,e),O=Math.max(O,t)}if(a){let e=0,t=0;l&&E>0?e=Wo(b+E,a[0][0]):!l&&E<0&&(e=Ho(b+N,a[1][0])),c&&C>0?t=Wo(w+C,a[0][1]):!c&&C<0&&(t=Ho(w+A,a[1][1])),T=Math.max(T,e),O=Math.max(O,t)}if(o){if(u){const e=Uo(N/S,y,v)*S;if(T=Math.max(T,e),s){let e=0;e=!l&&!c||l&&!c&&h?Wo(w+M+N/S,s[1][1])*S:Ho(w+M+(l?E:-E)/S,s[0][1])*S,T=Math.max(T,e)}if(a){let e=0;e=!l&&!c||l&&!c&&h?Ho(w+N/S,a[1][1])*S:Wo(w+(l?E:-E)/S,a[0][1])*S,T=Math.max(T,e)}}if(d){const e=Uo(A*S,g,m)/S;if(O=Math.max(O,e),s){let e=0;e=!l&&!c||c&&!l&&h?Wo(b+A*S+_,s[1][0])/S:Ho(b+(c?C:-C)*S+_,s[0][0])/S,O=Math.max(O,e)}if(a){let e=0;e=!l&&!c||c&&!l&&h?Ho(b+A*S,a[1][0])/S:Wo(b+(c?C:-C)*S,a[0][0])/S,O=Math.max(O,e)}}}C+=C<0?O:-O,E+=E<0?T:-T,o&&(h?N>A*S?C=(Ko(l,c)?-E:E)/S:E=(Ko(l,c)?-C:C)*S:u?(C=E/S,c=l):(E=C*S,l=c));const j=l?b+E:b,P=c?w+C:w;return{width:x+(l?-E:E),height:k+(c?-C:C),x:i[0]*E*(l?-1:1)+j,y:i[1]*C*(c?-1:1)+P}}(m,s.controlDirection,l,s.boundaries,s.keepAspectRatio,N,v,b),O=A!==S,j=_!==E,P=M!==u&&O,I=T!==h&&j;if(!(P||I||O||j))return;if((P||I||1===N[0]||1===N[1])&&(C.x=P?M:g.x,C.y=I?T:g.y,g.x=C.x,g.y=C.y,x.length>0)){const e=M-u,t=T-h;for(const n of x)n.position={x:n.position.x-e+N[0]*(A-S),y:n.position.y-t+N[1]*(_-E)},c.push(n)}if((O||j)&&(C.width=!O||s.resizeDirection&&"horizontal"!==s.resizeDirection?g.width:A,C.height=!j||s.resizeDirection&&"vertical"!==s.resizeDirection?g.height:_,g.width=C.width,g.height=C.height),y&&p.expandParent){const e=N[0]*(C.width??0);C.x&&C.x<e&&(g.x=e,m.x=m.x-(C.x-e));const t=N[1]*(C.height??0);C.y&&C.y<t&&(g.y=t,m.y=m.y-(C.y-t))}const D=function({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:i}){const s=e-t,a=n-r,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&o&&(l[0]=-1*l[0]),a&&i&&(l[1]=-1*l[1]),l}({width:g.width,prevWidth:S,height:g.height,prevHeight:E,affectsX:s.controlDirection.affectsX,affectsY:s.controlDirection.affectsY}),L={...g,direction:D},R=f?.(e,L);!1!==R&&(k=!0,d?.(e,L),r(C,c))}).on("end",e=>{k&&(h?.(e,{...g}),o?.({...g}),k=!1)});i.call(S)},destroy:function(){i.on(".drag",null)}}}({domNode:E.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o,domNode:i}=S.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o,paneDomNode:i}},onChange:(e,t)=>{const{triggerNodeChanges:n,nodeLookup:r,parentLookup:o,nodeOrigin:i}=S.getState(),s=[],a={x:e.x,y:e.y},l=r.get(k);if(l&&l.expandParent&&l.parentId){const t=l.origin??i,n=e.width??l.measured.width??0,c=e.height??l.measured.height??0,u=So([{id:l.id,parentId:l.parentId,rect:{width:n,height:c,...qr({x:e.x??l.position.x,y:e.y??l.position.y},{width:n,height:c},l.parentId,r,t)}}],r,o,i);s.push(...u),a.x=e.x?Math.max(t[0]*n,e.x):void 0,a.y=e.y?Math.max(t[1]*c,e.y):void 0}if(void 0!==a.x&&void 0!==a.y){const e={id:k,type:"position",position:{...a}};s.push(e)}if(void 0!==e.width&&void 0!==e.height){const t={id:k,type:"dimensions",resizing:!0,setAttributes:!g||("horizontal"===g?"width":"height"),dimensions:{width:e.width,height:e.height}};s.push(t)}for(const e of t){const t={...e,type:"position"};s.push(t)}n(s)},onEnd:({width:e,height:t})=>{const n={id:k,type:"dimensions",resizing:!1,dimensions:{width:e,height:t}};S.getState().triggerNodeChanges([n])}})),_.current.update({controlPosition:M,boundaries:{minWidth:u,minHeight:d,maxWidth:h,maxHeight:f},keepAspectRatio:p,resizeDirection:g,onResizeStart:v,onResize:b,onResizeEnd:w,shouldResize:y}),()=>{_.current?.destroy()}},[M,u,d,h,f,p,v,b,w,y]);const T=M.split("-");return(0,r.jsx)("div",{className:s(["react-flow__resize-control","nodrag",...T,n,i]),ref:E,style:{...a,scale:N,...c&&{[C?"backgroundColor":"borderColor"]:c}},children:l})});var Za={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Qa=o.createContext&&o.createContext(Za),Ja=["attr","size","title"];function el(){return el=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},el.apply(this,arguments)}function tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(n),!0).forEach(function(t){rl(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rl(e,t,n){return t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ol(e){return e&&e.map((e,t)=>o.createElement(e.tag,nl({key:t},e.attr),ol(e.child)))}function il(e){return t=>o.createElement(sl,el({attr:nl({},e.attr)},t),ol(e.child))}function sl(e){var t=t=>{var n,{attr:r,size:i,title:s}=e,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ja),l=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),o.createElement("svg",el({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:n,style:nl(nl({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&o.createElement("title",null,s),e.children)};return void 0!==Qa?o.createElement(Qa.Consumer,null,e=>t(e)):t(Za)}function al(e){return il({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(e)}function ll(e){return il({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function cl(e){return il({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"},child:[]}]})(e)}function ul(e){return il({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z",clipRule:"evenodd"},child:[]},{tag:"path",attr:{d:"M6 12a2 2 0 012-2h8a2 2 0 012 2v2a2 2 0 01-2 2H2h2a2 2 0 002-2v-2z"},child:[]}]})(e)}function dl(e){return il({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"},child:[]}]})(e)}function hl(e){return il({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2 5a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm14 1a1 1 0 11-2 0 1 1 0 012 0zM2 13a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2zm14 1a1 1 0 11-2 0 1 1 0 012 0z",clipRule:"evenodd"},child:[]}]})(e)}function fl(e){return il({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"},child:[]}]})(e)}function pl(e){return il({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function gl(e){return il({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},child:[]}]})(e)}function ml(e){return il({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"},child:[]},{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},child:[]}]})(e)}function yl(e){return il({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},child:[]}]})(e)}function vl(e){return il({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},child:[]}]})(e)}const bl=(0,o.memo)(function(e){const{selected:t}=e;return(0,r.jsxs)("div",{className:`\n        flex h-10 w-10 items-center justify-center rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800\n        text-lg font-light text-slate-500 dark:text-slate-400 shadow-sm transition-colors\n        hover:border-blue-400 dark:hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 hover:text-blue-600 dark:hover:text-blue-400\n        ${t?"border-blue-500 dark:border-blue-400 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 ring-2 ring-blue-200 dark:ring-blue-900":""}\n      `,title:"Add new job",children:[(0,r.jsx)(ps,{type:"target",position:lr.Left,className:"!h-2 !w-2 !border-2 !border-slate-400 dark:!border-slate-600 !bg-white dark:!bg-slate-800"}),"+"]})});function wl(e){return il({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09zM15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701"},child:[]}]})(e)}function xl(e){return il({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M17.61.455a3.41 3.41 0 0 0-3.41 3.41 3.41 3.41 0 0 0 3.41 3.41 3.41 3.41 0 0 0 3.41-3.41 3.41 3.41 0 0 0-3.41-3.41zM12.92.8C8.923.777 5.137 2.941 3.148 6.451a4.5 4.5 0 0 1 .26-.007 4.92 4.92 0 0 1 2.585.737A8.316 8.316 0 0 1 12.688 3.6 4.944 4.944 0 0 1 13.723.834 11.008 11.008 0 0 0 12.92.8zm9.226 4.994a4.915 4.915 0 0 1-1.918 2.246 8.36 8.36 0 0 1-.273 8.303 4.89 4.89 0 0 1 1.632 2.54 11.156 11.156 0 0 0 .559-13.089zM3.41 7.932A3.41 3.41 0 0 0 0 11.342a3.41 3.41 0 0 0 3.41 3.409 3.41 3.41 0 0 0 3.41-3.41 3.41 3.41 0 0 0-3.41-3.41zm2.027 7.866a4.908 4.908 0 0 1-2.915.358 11.1 11.1 0 0 0 7.991 6.698 11.234 11.234 0 0 0 2.422.249 4.879 4.879 0 0 1-.999-2.85 8.484 8.484 0 0 1-.836-.136 8.304 8.304 0 0 1-5.663-4.32zm11.405.928a3.41 3.41 0 0 0-3.41 3.41 3.41 3.41 0 0 0 3.41 3.41 3.41 3.41 0 0 0 3.41-3.41 3.41 3.41 0 0 0-3.41-3.41z"},child:[]}]})(e)}function kl(e){return il({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 93.7l183.6-25.3v177.4H0V93.7zm0 324.6l183.6 25.3V268.4H0v149.9zm203.8 28L448 480V268.4H203.8v177.9zm0-380.6v180.1H448V32L203.8 65.7z"},child:[]}]})(e)}function Sl({runsOn:e,className:t=""}){const{icon:n,version:o}=function(e){const t=(e||"ubuntu-latest").split(",")[0].trim().toLowerCase();if(t.startsWith("ubuntu")){const e=t.slice(7)||"latest";return{icon:(0,r.jsx)(xl,{className:"text-[#E95420] shrink-0",size:14}),version:e}}if(t.startsWith("macos")){const e=t.slice(6)||"latest";return{icon:(0,r.jsx)(wl,{className:"text-gray-700 dark:text-gray-300 shrink-0",size:14}),version:e}}if(t.startsWith("windows")){const e=t.slice(8)||"latest";return{icon:(0,r.jsx)(kl,{className:"text-blue-500 shrink-0",size:14}),version:e}}if("self-hosted"===t||t.startsWith("self-hosted"))return{icon:(0,r.jsx)(hl,{className:"text-slate-600 dark:text-slate-400 shrink-0",size:14}),version:"self-hosted"};const n=t.includes("-")?t.slice(t.indexOf("-")+1):t||"latest";return{icon:(0,r.jsx)(hl,{className:"text-slate-600 dark:text-slate-400 shrink-0",size:14}),version:n}}(e);return(0,r.jsxs)("span",{className:`inline-flex items-center gap-1 rounded bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 text-xs text-slate-600 dark:text-slate-300 ${t}`,title:e||"ubuntu-latest",children:[n,(0,r.jsx)("span",{children:o})]})}const El=(0,o.memo)(function(e){const{data:t,selected:n}=e,o=t;return(0,r.jsxs)("div",{className:`\n        min-w-[180px] rounded-lg border-2 bg-white dark:bg-slate-800 px-3 py-2 shadow-sm\n        ${n?"border-blue-500 dark:border-blue-400 ring-2 ring-blue-200 dark:ring-blue-900":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"}\n      `,children:[(0,r.jsx)(ps,{type:"target",position:lr.Left,className:"!h-2 !w-2 !border-2 !border-slate-400 dark:!border-slate-600 !bg-white dark:!bg-slate-800"}),(0,r.jsx)("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:o.label}),(0,r.jsxs)("div",{className:"mt-1 flex flex-wrap items-center gap-1",children:[(0,r.jsx)(Sl,{runsOn:o.runsOn??"ubuntu-latest"}),o.hasMatrix&&o.matrixCombinations&&(0,r.jsxs)("span",{className:"rounded bg-amber-100 dark:bg-amber-900/30 px-1.5 py-0.5 text-xs font-medium text-amber-800 dark:text-amber-200",children:[o.matrixCombinations," matrix"]}),o.stepCount>0&&(0,r.jsxs)("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[o.stepCount," step",1!==o.stepCount?"s":""]})]}),(0,r.jsx)(ps,{type:"source",position:lr.Right,className:"!h-2 !w-2 !border-2 !border-slate-400 dark:!border-slate-600 !bg-white dark:!bg-slate-800"})]})}),Cl=[{name:"node",label:"Node.js",values:["16","18","20","22"]},{name:"python",label:"Python",values:["3.8","3.9","3.10","3.11","3.12","3.13"]},{name:"os",label:"Operating System",values:["ubuntu-latest","ubuntu-22.04","ubuntu-20.04","windows-latest","windows-2022","windows-2019","macos-latest","macos-14","macos-13","macos-12"]},{name:"java",label:"Java",values:["8","11","17","21"]},{name:"go",label:"Go",values:["1.19","1.20","1.21","1.22","1.23"]},{name:"ruby",label:"Ruby",values:["3.0","3.1","3.2","3.3"]},{name:"php",label:"PHP",values:["8.0","8.1","8.2","8.3"]},{name:"dotnet",label:".NET",values:["6.0","7.0","8.0"]}];let Nl=[],Al=[];function _l(e){if(e<768)return!1;for(let t=0,n=Nl.length;;){let r=t+n>>1;if(e<Nl[r])n=r;else{if(!(e>=Al[r]))return!0;t=r+1}if(t==n)return!1}}function Ml(e){return e>=127462&&e<=127487}function Tl(e,t,n=!0,r=!0){return(n?Ol:jl)(e,t,r)}function Ol(e,t,n){if(t==e.length)return t;t&&Il(e.charCodeAt(t))&&Dl(e.charCodeAt(t-1))&&t--;let r=Pl(e,t);for(t+=Ll(r);t<e.length;){let o=Pl(e,t);if(8205==r||8205==o||n&&_l(o))t+=Ll(o),r=o;else{if(!Ml(o))break;{let n=0,r=t-2;for(;r>=0&&Ml(Pl(e,r));)n++,r-=2;if(n%2==0)break;t+=2}}}return t}function jl(e,t,n){for(;t>0;){let r=Ol(e,t-2,n);if(r<t)return r;t--}return 0}function Pl(e,t){let n=e.charCodeAt(t);if(!Dl(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return Il(r)?r-56320+(n-55296<<10)+65536:n}function Il(e){return e>=56320&&e<57344}function Dl(e){return e>=55296&&e<56320}function Ll(e){return e<65536?1:2}(()=>{let e="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let t=0,n=0;t<e.length;t++)(t%2?Al:Nl).push(n+=e[t])})();class Rl{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=Ul(this,e,t);let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),$l.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Ul(this,e,t);let n=[];return this.decompose(e,t,n,0),$l.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new Vl(this),o=new Vl(e);for(let e=t,i=t;;){if(r.next(e),o.next(e),e=0,r.lineBreak!=o.lineBreak||r.done!=o.done||r.value!=o.value)return!1;if(i+=r.value.length,r.done||i>=n)return!0}}iter(e=1){return new Vl(this,e)}iterRange(e,t=this.length){return new Fl(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Hl(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new Bl(e):$l.from(Bl.split(e,[])):Rl.empty}}class Bl extends Rl{constructor(e,t=function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let o=0;;o++){let i=this.text[o],s=r+i.length;if((t?n:s)>=e)return new Wl(r,s,n,i);r=s+1,n++}}decompose(e,t,n,r){let o=e<=0&&t>=this.length?this:new Bl(ql(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=zl(o.text,e.text.slice(),0,o.length);if(t.length<=32)n.push(new Bl(t,e.length+o.length));else{let e=t.length>>1;n.push(new Bl(t.slice(0,e)),new Bl(t.slice(e)))}}else n.push(o)}replace(e,t,n){if(!(n instanceof Bl))return super.replace(e,t,n);[e,t]=Ul(this,e,t);let r=zl(this.text,zl(n.text,ql(this.text,0,e)),t),o=this.length+n.length-(t-e);return r.length<=32?new Bl(r,o):$l.from(Bl.split(r,[]),o)}sliceString(e,t=this.length,n="\n"){[e,t]=Ul(this,e,t);let r="";for(let o=0,i=0;o<=t&&i<this.text.length;i++){let s=this.text[i],a=o+s.length;o>e&&i&&(r+=n),e<a&&t>o&&(r+=s.slice(Math.max(0,e-o),t-o)),o=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let o of e)n.push(o),r+=o.length+1,32==n.length&&(t.push(new Bl(n,r)),n=[],r=-1);return r>-1&&t.push(new Bl(n,r)),t}}class $l extends Rl{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,n,r){for(let o=0;;o++){let i=this.children[o],s=r+i.length,a=n+i.lines-1;if((t?a:s)>=e)return i.lineInner(e,t,n,r);r=s+1,n=a+1}}decompose(e,t,n,r){for(let o=0,i=0;i<=t&&o<this.children.length;o++){let s=this.children[o],a=i+s.length;if(e<=a&&t>=i){let o=r&((i<=e?1:0)|(a>=t?2:0));i>=e&&a<=t&&!o?n.push(s):s.decompose(e-i,t-i,n,o)}i=a+1}}replace(e,t,n){if([e,t]=Ul(this,e,t),n.lines<this.lines)for(let r=0,o=0;r<this.children.length;r++){let i=this.children[r],s=o+i.length;if(e>=o&&t<=s){let a=i.replace(e-o,t-o,n),l=this.lines-i.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let o=this.children.slice();return o[r]=a,new $l(o,this.length-(t-e)+n.length)}return super.replace(o,s,a)}o=s+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n="\n"){[e,t]=Ul(this,e,t);let r="";for(let o=0,i=0;o<this.children.length&&i<=t;o++){let s=this.children[o],a=i+s.length;i>e&&o&&(r+=n),e<a&&t>i&&(r+=s.sliceString(e-i,t-i,n)),i=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof $l))return 0;let n=0,[r,o,i,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,o+=t){if(r==i||o==s)return n;let a=this.children[r],l=e.children[o];if(a!=l)return n+a.scanIdentical(l,t);n+=a.length+1}}static from(e,t=e.reduce((e,t)=>e+t.length+1,-1)){let n=0;for(let t of e)n+=t.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new Bl(n,t)}let r=Math.max(32,n>>5),o=r<<1,i=r>>1,s=[],a=0,l=-1,c=[];function u(e){let t;if(e.lines>o&&e instanceof $l)for(let t of e.children)u(t);else e.lines>i&&(a>i||!a)?(d(),s.push(e)):e instanceof Bl&&a&&(t=c[c.length-1])instanceof Bl&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,c[c.length-1]=new Bl(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>r&&d(),a+=e.lines,l+=e.length+1,c.push(e))}function d(){0!=a&&(s.push(1==c.length?c[0]:$l.from(c,l)),l=-1,a=c.length=0)}for(let t of e)u(t);return d(),1==s.length?s[0]:new $l(s,t)}}function zl(e,t,n=0,r=1e9){for(let o=0,i=0,s=!0;i<e.length&&o<=r;i++){let a=e[i],l=o+a.length;l>=n&&(l>r&&(a=a.slice(0,r-o)),o<n&&(a=a.slice(n-o)),s?(t[t.length-1]+=a,s=!1):t.push(a)),o=l+1}return t}function ql(e,t,n){return zl(e,[""],t,n)}Rl.empty=new Bl([""],0);class Vl{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Bl?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],o=this.offsets[n],i=o>>1,s=r instanceof Bl?r.text.length:r.children.length;if(i==(t>0?s:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&o)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof Bl){let o=r.text[i+(t<0?-1:0)];if(this.offsets[n]+=t,o.length>Math.max(0,e))return this.value=0==e?o:t>0?o.slice(e):o.slice(0,o.length-e),this;e-=o.length}else{let o=r.children[i+(t<0?-1:0)];e>o.length?(e-=o.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(o),this.offsets.push(t>0?1:(o instanceof Bl?o.text.length:o.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Fl{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new Vl(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class Hl{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Rl.prototype[Symbol.iterator]=function(){return this.iter()},Vl.prototype[Symbol.iterator]=Fl.prototype[Symbol.iterator]=Hl.prototype[Symbol.iterator]=function(){return this});class Wl{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}function Ul(e,t,n){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,n))]}function Kl(e,t,n=!0,r=!0){return Tl(e,t,n,r)}const Xl=/\r\n?|\n/;var Yl=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(Yl||(Yl={}));class Gl{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let o=this.sections[t++],i=this.sections[t++];i<0?(e(n,r,o),r+=o):r+=i,n+=o}}iterChangedRanges(e,t=!1){ec(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new Gl(e)}composeDesc(e){return this.empty?e:e.empty?this:nc(this,e)}mapDesc(e,t=!1){return e.empty?this:tc(this,e,t)}mapPos(e,t=-1,n=Yl.Simple){let r=0,o=0;for(let i=0;i<this.sections.length;){let s=this.sections[i++],a=this.sections[i++],l=r+s;if(a<0){if(l>e)return o+(e-r);o+=s}else{if(n!=Yl.Simple&&l>=e&&(n==Yl.TrackDel&&r<e&&l>e||n==Yl.TrackBefore&&r<e||n==Yl.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!s)return e==r||t<0?o:o+a;o+=a}r=l}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return o}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let o=r+this.sections[n++];if(this.sections[n++]>=0&&r<=t&&o>=e)return!(r<e&&o>t)||"cover";r=o}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(e=>"number"!=typeof e))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Gl(e)}static create(e){return new Gl(e)}}class Zl extends Gl{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ec(this,(t,n,r,o,i)=>e=e.replace(r,r+(n-t),i),!1),e}mapDesc(e,t=!1){return tc(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,o=0;r<t.length;r+=2){let i=t[r],s=t[r+1];if(s>=0){t[r]=s,t[r+1]=i;let a=r>>1;for(;n.length<a;)n.push(Rl.empty);n.push(i?e.slice(o,o+i):Rl.empty)}o+=i}return new Zl(t,n)}compose(e){return this.empty?e:e.empty?this:nc(this,e,!0)}map(e,t=!1){return e.empty?this:tc(this,e,t,!0)}iterChanges(e,t=!1){ec(this,e,t)}get desc(){return Gl.create(this.sections)}filter(e){let t=[],n=[],r=[],o=new rc(this);e:for(let i=0,s=0;;){let a=i==e.length?1e9:e[i++];for(;s<a||s==a&&0==o.len;){if(o.done)break e;let e=Math.min(o.len,a-s);Ql(r,e,-1);let i=-1==o.ins?-1:0==o.off?o.ins:0;Ql(t,e,i),i>0&&Jl(n,t,o.text),o.forward(e),s+=e}let l=e[i++];for(;s<l;){if(o.done)break e;let e=Math.min(o.len,l-s);Ql(t,e,-1),Ql(r,e,-1==o.ins?-1:0==o.off?o.ins:0),o.forward(e),s+=e}}return{changes:new Zl(t,n),filtered:Gl.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],o=[],i=0,s=null;function a(e=!1){if(!e&&!r.length)return;i<t&&Ql(r,t-i,-1);let n=new Zl(r,o);s=s?s.compose(n.map(s)):n,r=[],o=[],i=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof Zl){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),s=s?s.compose(l.map(s)):l}else{let{from:e,to:s=e,insert:c}=l;if(e>s||e<0||s>t)throw new RangeError(`Invalid change range ${e} to ${s} (in doc of length ${t})`);let u=c?"string"==typeof c?Rl.of(c.split(n||Xl)):c:Rl.empty,d=u.length;if(e==s&&0==d)return;e<i&&a(),e>i&&Ql(r,e-i,-1),Ql(r,s-e,d),Jl(o,r,u),i=s}}(e),a(!s),s}static empty(e){return new Zl(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let o=e[r];if("number"==typeof o)t.push(o,-1);else{if(!Array.isArray(o)||"number"!=typeof o[0]||o.some((e,t)=>t&&"string"!=typeof e))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==o.length)t.push(o[0],0);else{for(;n.length<r;)n.push(Rl.empty);n[r]=Rl.of(o.slice(1)),t.push(o[0],n[r].length)}}}return new Zl(t,n)}static createSet(e,t){return new Zl(e,t)}}function Ql(e,t,n,r=!1){if(0==t&&n<=0)return;let o=e.length-2;o>=0&&n<=0&&n==e[o+1]?e[o]+=t:o>=0&&0==t&&0==e[o]?e[o+1]+=n:r?(e[o]+=t,e[o+1]+=n):e.push(t,n)}function Jl(e,t,n){if(0==n.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<r;)e.push(Rl.empty);e.push(n)}}function ec(e,t,n){let r=e.inserted;for(let o=0,i=0,s=0;s<e.sections.length;){let a=e.sections[s++],l=e.sections[s++];if(l<0)o+=a,i+=a;else{let c=o,u=i,d=Rl.empty;for(;c+=a,u+=l,l&&r&&(d=d.append(r[s-2>>1])),!(n||s==e.sections.length||e.sections[s+1]<0);)a=e.sections[s++],l=e.sections[s++];t(o,c,i,u,d),o=c,i=u}}}function tc(e,t,n,r=!1){let o=[],i=r?[]:null,s=new rc(e),a=new rc(t);for(let e=-1;;){if(s.done&&a.len||a.done&&s.len)throw new Error("Mismatched change set lengths");if(-1==s.ins&&-1==a.ins){let e=Math.min(s.len,a.len);Ql(o,e,-1),s.forward(e),a.forward(e)}else if(a.ins>=0&&(s.ins<0||e==s.i||0==s.off&&(a.len<s.len||a.len==s.len&&!n))){let t=a.len;for(Ql(o,a.ins,-1);t;){let n=Math.min(s.len,t);s.ins>=0&&e<s.i&&s.len<=n&&(Ql(o,0,s.ins),i&&Jl(i,o,s.text),e=s.i),s.forward(n),t-=n}a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return i?Zl.createSet(o,i):Gl.create(o);throw new Error("Mismatched change set lengths")}{let t=0,n=s.len;for(;n;)if(-1==a.ins){let e=Math.min(n,a.len);t+=e,n-=e,a.forward(e)}else{if(!(0==a.ins&&a.len<n))break;n-=a.len,a.next()}Ql(o,t,e<s.i?s.ins:0),i&&e<s.i&&Jl(i,o,s.text),e=s.i,s.forward(s.len-n)}}}}function nc(e,t,n=!1){let r=[],o=n?[]:null,i=new rc(e),s=new rc(t);for(let e=!1;;){if(i.done&&s.done)return o?Zl.createSet(r,o):Gl.create(r);if(0==i.ins)Ql(r,i.len,0,e),i.next();else if(0!=s.len||s.done){if(i.done||s.done)throw new Error("Mismatched change set lengths");{let t=Math.min(i.len2,s.len),n=r.length;if(-1==i.ins){let n=-1==s.ins?-1:s.off?0:s.ins;Ql(r,t,n,e),o&&n&&Jl(o,r,s.text)}else-1==s.ins?(Ql(r,i.off?0:i.len,t,e),o&&Jl(o,r,i.textBit(t))):(Ql(r,i.off?0:i.len,s.off?0:s.ins,e),o&&!s.off&&Jl(o,r,s.text));e=(i.ins>t||s.ins>=0&&s.len>t)&&(e||r.length>n),i.forward2(t),s.forward(t)}}else Ql(r,0,s.ins,e),o&&Jl(o,r,s.text),s.next()}}class rc{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Rl.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?Rl.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class oc{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 16777215==e?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new oc(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ic.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ic.range(this.anchor,n)}eq(e,t=!1){return!(this.anchor!=e.anchor||this.head!=e.head||this.goalColumn!=e.goalColumn||t&&this.empty&&this.assoc!=e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return ic.range(e.anchor,e.head)}static create(e,t,n){return new oc(e,t,n)}}class ic{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ic.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new ic([this.main],0)}addRange(e,t=!0){return ic.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,ic.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ic(e.ranges.map(e=>oc.fromJSON(e)),e.main)}static single(e,t=e){return new ic([ic.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let o=e[r];if(o.empty?o.from<=n:o.from<n)return ic.normalized(e.slice(),t);n=o.to}return new ic(e,t)}static cursor(e,t=0,n,r){return oc.create(e,e,(0==t?0:t<0?8:16)|(null==n?7:Math.min(6,n))|(null!=r?r:16777215)<<6)}static range(e,t,n,r){let o=(null!=n?n:16777215)<<6|(null==r?7:Math.min(6,r));return t<e?oc.create(t,e,48|o):oc.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let n=e[t];e.sort((e,t)=>e.from-t.from),t=e.indexOf(n);for(let n=1;n<e.length;n++){let r=e[n],o=e[n-1];if(r.empty?r.from<=o.to:r.from<o.to){let i=o.from,s=Math.max(r.to,o.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?ic.range(s,i):ic.range(i,s))}}return new ic(e,t)}}function sc(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let ac=0;class lc{constructor(e,t,n,r,o){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=ac++,this.default=e([]),this.extensions="function"==typeof o?o(this):o}get reader(){return this}static define(e={}){return new lc(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:cc),!!e.static,e.enables)}of(e){return new uc([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new uc(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new uc(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],n=>t(n.field(e)))}}function cc(e,t){return e==t||e.length==t.length&&e.every((e,n)=>e===t[n])}class uc{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=ac++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,o=this.id,i=e[o]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let n of this.dependencies)"doc"==n?a=!0:"selection"==n?l=!0:1&(null!==(t=e[n.id])&&void 0!==t?t:1)||c.push(e[n.id]);return{create:e=>(e.values[i]=n(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||hc(e,c)){let t=n(e);if(s?!dc(t,e.values[i],r):!r(t,e.values[i]))return e.values[i]=t,1}return 0},reconfigure:(e,t)=>{let a,l=t.config.address[o];if(null!=l){let o=Sc(t,l);if(this.dependencies.every(n=>n instanceof lc?t.facet(n)===e.facet(n):!(n instanceof gc)||t.field(n,!1)==e.field(n,!1))||(s?dc(a=n(e),o,r):r(a=n(e),o)))return e.values[i]=o,0}else a=n(e);return e.values[i]=a,1}}}}function dc(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function hc(e,t){let n=!1;for(let r of t)1&kc(e,r)&&(n=!0);return n}function fc(e,t,n){let r=n.map(t=>e[t.id]),o=n.map(e=>e.type),i=r.filter(e=>!(1&e)),s=e[t.id]>>1;function a(e){let n=[];for(let t=0;t<r.length;t++){let i=Sc(e,r[t]);if(2==o[t])for(let e of i)n.push(e);else n.push(i)}return t.combine(n)}return{create(e){for(let t of r)kc(e,t);return e.values[s]=a(e),1},update(e,n){if(!hc(e,i))return 0;let r=a(e);return t.compare(r,e.values[s])?0:(e.values[s]=r,1)},reconfigure(e,o){let i=hc(e,r),l=o.config.facets[t.id],c=o.facet(t);if(l&&!i&&cc(n,l))return e.values[s]=c,0;let u=a(e);return t.compare(u,c)?(e.values[s]=c,0):(e.values[s]=u,1)}}}const pc=lc.define({static:!0});class gc{constructor(e,t,n,r,o){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=o,this.provides=void 0}static define(e){let t=new gc(ac++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(pc).find(e=>e.field==this);return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],o=this.updateF(r,n);return this.compareF(r,o)?0:(e.values[t]=o,1)},reconfigure:(e,n)=>{let r,o=e.facet(pc),i=n.facet(pc);return(r=o.find(e=>e.field==this))&&r!=i.find(e=>e.field==this)?(e.values[t]=r.create(e),1):null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}}init(e){return[this,pc.of({field:this,create:e})]}get extension(){return this}}function mc(e){return t=>new vc(t,e)}const yc={highest:mc(0),high:mc(1),default:mc(2),low:mc(3),lowest:mc(4)};class vc{constructor(e,t){this.inner=e,this.prec=t}}class bc{of(e){return new wc(this,e)}reconfigure(e){return bc.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class wc{constructor(e,t){this.compartment=e,this.inner=t}}class xc{constructor(e,t,n,r,o,i){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=o,this.facets=i,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],o=Object.create(null),i=new Map;for(let n of function(e,t,n){let r=[[],[],[],[],[]],o=new Map;return function e(i,s){let a=o.get(i);if(null!=a){if(a<=s)return;let e=r[a].indexOf(i);e>-1&&r[a].splice(e,1),i instanceof wc&&n.delete(i.compartment)}if(o.set(i,s),Array.isArray(i))for(let t of i)e(t,s);else if(i instanceof wc){if(n.has(i.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(i.compartment)||i.inner;n.set(i.compartment,r),e(r,s)}else if(i instanceof vc)e(i.inner,i.prec);else if(i instanceof gc)r[s].push(i),i.provides&&e(i.provides,s);else if(i instanceof uc)r[s].push(i),i.facet.extensions&&e(i.facet.extensions,2);else{let t=i.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${i}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);e(t,s)}}(e,2),r.reduce((e,t)=>e.concat(t))}(e,t,i))n instanceof gc?r.push(n):(o[n.facet.id]||(o[n.facet.id]=[])).push(n);let s=Object.create(null),a=[],l=[];for(let e of r)s[e.id]=l.length<<1,l.push(t=>e.slot(t));let c=null==n?void 0:n.config.facets;for(let e in o){let t=o[e],r=t[0].facet,i=c&&c[e]||[];if(t.every(e=>0==e.type))if(s[r.id]=a.length<<1|1,cc(i,t))a.push(n.facet(r));else{let e=r.combine(t.map(e=>e.value));a.push(n&&r.compare(e,n.facet(r))?n.facet(r):e)}else{for(let e of t)0==e.type?(s[e.id]=a.length<<1|1,a.push(e.value)):(s[e.id]=l.length<<1,l.push(t=>e.dynamicSlot(t)));s[r.id]=l.length<<1,l.push(e=>fc(e,r,t))}}let u=l.map(e=>e(s));return new xc(e,i,u,s,a,o)}}function kc(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let o=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|o}function Sc(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const Ec=lc.define(),Cc=lc.define({combine:e=>e.some(e=>e),static:!0}),Nc=lc.define({combine:e=>e.length?e[0]:void 0,static:!0}),Ac=lc.define(),_c=lc.define(),Mc=lc.define(),Tc=lc.define({combine:e=>!!e.length&&e[0]});class Oc{constructor(e,t){this.type=e,this.value=t}static define(){return new jc}}class jc{of(e){return new Oc(this,e)}}class Pc{constructor(e){this.map=e}of(e){return new Ic(this,e)}}class Ic{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new Ic(this.type,t)}is(e){return this.type==e}static define(e={}){return new Pc(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}}Ic.reconfigure=Ic.define(),Ic.appendConfig=Ic.define();class Dc{constructor(e,t,n,r,o,i){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=o,this.scrollIntoView=i,this._doc=null,this._state=null,n&&sc(n,t.newLength),o.some(e=>e.type==Dc.time)||(this.annotations=o.concat(Dc.time.of(Date.now())))}static create(e,t,n,r,o,i){return new Dc(e,t,n,r,o,i)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Dc.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function Lc(e,t){let n=[];for(let r=0,o=0;;){let i,s;if(r<e.length&&(o==t.length||t[o]>=e[r]))i=e[r++],s=e[r++];else{if(!(o<t.length))return n;i=t[o++],s=t[o++]}!n.length||n[n.length-1]<i?n.push(i,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function Rc(e,t,n){var r;let o,i,s;return n?(o=t.changes,i=Zl.empty(t.changes.length),s=e.changes.compose(t.changes)):(o=t.changes.map(e.changes),i=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(o)),{changes:s,selection:t.selection?t.selection.map(i):null===(r=e.selection)||void 0===r?void 0:r.map(o),effects:Ic.mapEffects(e.effects,o).concat(Ic.mapEffects(t.effects,i)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function Bc(e,t,n){let r=t.selection,o=qc(t.annotations);return t.userEvent&&(o=o.concat(Dc.userEvent.of(t.userEvent))),{changes:t.changes instanceof Zl?t.changes:Zl.of(t.changes||[],n,e.facet(Nc)),selection:r&&(r instanceof ic?r:ic.single(r.anchor,r.head)),effects:qc(t.effects),annotations:o,scrollIntoView:!!t.scrollIntoView}}function $c(e,t,n){let r=Bc(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let o=1;o<t.length;o++){!1===t[o].filter&&(n=!1);let i=!!t[o].sequential;r=Rc(r,Bc(e,t[o],i?r.changes.newLength:e.doc.length),i)}let o=Dc.create(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){let t=e.startState,n=t.facet(Mc),r=e;for(let o=n.length-1;o>=0;o--){let i=n[o](e);i&&Object.keys(i).length&&(r=Rc(r,Bc(t,i,e.changes.newLength),!0))}return r==e?e:Dc.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(e){let t=e.startState,n=!0;for(let r of t.facet(Ac)){let t=r(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:Lc(n,t))}if(!0!==n){let r,o;if(!1===n)o=e.changes.invertedDesc,r=Zl.empty(t.doc.length);else{let t=e.changes.filter(n);r=t.changes,o=t.filtered.mapDesc(t.changes).invertedDesc}e=Dc.create(t,r,e.selection&&e.selection.map(o),Ic.mapEffects(e.effects,o),e.annotations,e.scrollIntoView)}let r=t.facet(_c);for(let n=r.length-1;n>=0;n--){let o=r[n](e);e=o instanceof Dc?o:Array.isArray(o)&&1==o.length&&o[0]instanceof Dc?o[0]:$c(t,qc(o),!1)}return e}(o):o)}Dc.time=Oc.define(),Dc.userEvent=Oc.define(),Dc.addToHistory=Oc.define(),Dc.remote=Oc.define();const zc=[];function qc(e){return null==e?zc:Array.isArray(e)?e:[e]}var Vc=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(Vc||(Vc={}));const Fc=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Hc;try{Hc=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}class Wc{constructor(e,t,n,r,o,i){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=o,i&&(i._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)kc(this,e<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(null!=n)return kc(this,n),Sc(this,n);if(t)throw new RangeError("Field is not present in this state")}update(...e){return $c(this,e,!0)}applyTransaction(e){let t,n=this.config,{base:r,compartments:o}=n;for(let t of e.effects)t.is(bc.reconfigure)?(n&&(o=new Map,n.compartments.forEach((e,t)=>o.set(t,e)),n=null),o.set(t.value.compartment,t.value.extension)):t.is(Ic.reconfigure)?(n=null,r=t.value):t.is(Ic.appendConfig)&&(n=null,r=qc(r).concat(t.value));n?t=e.startState.values.slice():(n=xc.resolve(r,o,this),t=new Wc(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(e,t)=>t.reconfigure(e,this),null).values);let i=e.startState.facet(Cc)?e.newSelection:e.newSelection.asSingle();new Wc(n,e.newDoc,i,t,(t,n)=>n.update(t,e),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ic.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),o=[n.range],i=qc(n.effects);for(let n=1;n<t.ranges.length;n++){let s=e(t.ranges[n]),a=this.changes(s.changes),l=a.map(r);for(let e=0;e<n;e++)o[e]=o[e].map(l);let c=r.mapDesc(a,!0);o.push(s.range.map(c)),r=r.compose(l),i=Ic.mapEffects(i,l).concat(Ic.mapEffects(qc(s.effects),c))}return{changes:r,selection:ic.create(o,t.mainIndex),effects:i}}changes(e=[]){return e instanceof Zl?e:Zl.of(e,this.doc.length,this.facet(Wc.lineSeparator))}toText(e){return Rl.of(e.split(this.facet(Wc.lineSeparator)||Xl))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(kc(this,t),Sc(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof gc&&null!=this.config.address[r.id]&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let t in n)if(Object.prototype.hasOwnProperty.call(e,t)){let o=n[t],i=e[t];r.push(o.init(e=>o.spec.fromJSON(i,e)))}return Wc.create({doc:e.doc,selection:ic.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=xc.resolve(e.extensions||[],new Map),n=e.doc instanceof Rl?e.doc:Rl.of((e.doc||"").split(t.staticFacet(Wc.lineSeparator)||Xl)),r=e.selection?e.selection instanceof ic?e.selection:ic.single(e.selection.anchor,e.selection.head):ic.single(0);return sc(r,n.length),t.staticFacet(Cc)||(r=r.asSingle()),new Wc(t,n,r,t.dynamicSlots.map(()=>null),(e,t)=>t.create(e),null)}get tabSize(){return this.facet(Wc.tabSize)}get lineBreak(){return this.facet(Wc.lineSeparator)||"\n"}get readOnly(){return this.facet(Tc)}phrase(e,...t){for(let t of this.facet(Wc.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(e,n)=>{if("$"==n)return"$";let r=+(n||1);return!r||r>t.length?e:t[r-1]})),e}languageDataAt(e,t,n=-1){let r=[];for(let o of this.facet(Ec))for(let i of o(this,t,n))Object.prototype.hasOwnProperty.call(i,e)&&r.push(i[e]);return r}charCategorizer(e){let t=this.languageDataAt("wordChars",e);return n=t.length?t[0]:"",e=>{if(!/\S/.test(e))return Vc.Space;if(function(e){if(Hc)return Hc.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Fc.test(n)))return!0}return!1}(e))return Vc.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Vc.Word;return Vc.Other};var n}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),o=this.charCategorizer(e),i=e-n,s=e-n;for(;i>0;){let e=Kl(t,i,!1);if(o(t.slice(e,i))!=Vc.Word)break;i=e}for(;s<r;){let e=Kl(t,s);if(o(t.slice(s,e))!=Vc.Word)break;s=e}return i==s?null:ic.range(i+n,s+n)}}Wc.allowMultipleSelections=Cc,Wc.tabSize=lc.define({combine:e=>e.length?e[0]:4}),Wc.lineSeparator=Nc,Wc.readOnly=Tc,Wc.phrases=lc.define({compare(e,t){let n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every(n=>e[n]==t[n])}}),Wc.languageData=Ec,Wc.changeFilter=Ac,Wc.transactionFilter=_c,Wc.transactionExtender=Mc,bc.reconfigure=Ic.define();class Uc{eq(e){return this==e}range(e,t=e){return Xc.create(e,t,this)}}function Kc(e,t){return e==t||e.constructor==t.constructor&&e.eq(t)}Uc.prototype.startSide=Uc.prototype.endSide=0,Uc.prototype.point=!1,Uc.prototype.mapMode=Yl.TrackDel;class Xc{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new Xc(e,t,n)}}function Yc(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class Gc{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let o=n?this.to:this.from;for(let i=r,s=o.length;;){if(i==s)return i;let r=i+s>>1,a=o[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==i)return a>=0?i:s;a>=0?s=r:i=r+1}}between(e,t,n,r){for(let o=this.findIndex(t,-1e9,!0),i=this.findIndex(n,1e9,!1,o);o<i;o++)if(!1===r(this.from[o]+e,this.to[o]+e,this.value[o]))return!1}map(e,t){let n=[],r=[],o=[],i=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,u=this.value[a],d=this.from[a]+e,h=this.to[a]+e;if(d==h){let e=t.mapPos(d,u.startSide,u.mapMode);if(null==e)continue;if(l=c=e,u.startSide!=u.endSide&&(c=t.mapPos(d,u.endSide),c<l))continue}else if(l=t.mapPos(d,u.startSide),c=t.mapPos(h,u.endSide),l>c||l==c&&u.startSide>0&&u.endSide<=0)continue;(c-l||u.endSide-u.startSide)<0||(i<0&&(i=l),u.point&&(s=Math.max(s,c-l)),n.push(u),r.push(l-i),o.push(c-i))}return{mapped:n.length?new Gc(r,o,n,s):null,pos:i}}}class Zc{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new Zc(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:o=this.length}=e,i=e.filter;if(0==t.length&&!i)return this;if(n&&(t=t.slice().sort(Yc)),this.isEmpty)return t.length?Zc.of(t):this;let s=new eu(this,null,-1).goto(0),a=0,l=[],c=new Qc;for(;s.value||a<t.length;)if(a<t.length&&(s.from-t[a].from||s.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(s.chunkIndex)<t[a].from)&&(!i||r>this.chunkEnd(s.chunkIndex)||o<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!i||r>s.to||o<s.from||i(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(Xc.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?Zc.empty:this.nextLayer.update({add:l,filter:i,filterFrom:r,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let o=0;o<this.chunk.length;o++){let i=this.chunkPos[o],s=this.chunk[o],a=e.touchesRange(i,i+s.length);if(!1===a)r=Math.max(r,s.maxPoint),t.push(s),n.push(e.mapPos(i));else if(!0===a){let{mapped:o,pos:a}=s.map(i,e);o&&(r=Math.max(r,o.maxPoint),t.push(o),n.push(a))}}let o=this.nextLayer.map(e);return 0==t.length?o:new Zc(n,t,o||Zc.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],i=this.chunk[r];if(t>=o&&e<=o+i.length&&!1===i.between(o,e-o,t-o,n))return}this.nextLayer.between(e,t,n)}}iter(e=0){return tu.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return tu.from(e).goto(t)}static compare(e,t,n,r,o=-1){let i=e.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=o),s=t.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=o),a=Jc(i,s,n),l=new ru(i,a,o),c=new ru(s,a,o);n.iterGaps((e,t,n)=>ou(l,e,c,t,n,r)),n.empty&&0==n.length&&ou(l,0,c,0,0,r)}static eq(e,t,n=0,r){null==r&&(r=999999999);let o=e.filter(e=>!e.isEmpty&&t.indexOf(e)<0),i=t.filter(t=>!t.isEmpty&&e.indexOf(t)<0);if(o.length!=i.length)return!1;if(!o.length)return!0;let s=Jc(o,i),a=new ru(o,s,0).goto(n),l=new ru(i,s,0).goto(n);for(;;){if(a.to!=l.to||!iu(a.active,l.active)||a.point&&(!l.point||!Kc(a.point,l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(e,t,n,r,o=-1){let i=new ru(e,null,o).goto(t),s=t,a=i.openStart;for(;;){let e=Math.min(i.to,n);if(i.point){let n=i.activeForPoint(i.to),o=i.pointFrom<t?n.length+1:i.point.startSide<0?n.length:Math.min(n.length,a);r.point(s,e,i.point,n,o,i.pointRank),a=Math.min(i.openEnd(e),n.length)}else e>s&&(r.span(s,e,i.active,a),a=i.openEnd(e));if(i.to>n)return a+(i.point&&i.to>n?1:0);s=i.to,i.next()}}static of(e,t=!1){let n=new Qc;for(let r of e instanceof Xc?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(Yc(t,r)>0)return e.slice().sort(Yc);t=r}return e}(e):e)n.add(r.from,r.to,r.value);return n.finish()}static join(e){if(!e.length)return Zc.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let r=e[n];r!=Zc.empty;r=r.nextLayer)t=new Zc(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}Zc.empty=new Zc([],[],null,-1),Zc.empty.nextLayer=Zc.empty;class Qc{finishChunk(e){this.chunks.push(new Gc(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new Qc)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),0))}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(Zc.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=Zc.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Jc(e,t,n){let r=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&r.set(t.chunk[e],t.chunkPos[e]);let o=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let i=r.get(e.chunk[t]);null==i||(n?n.mapPos(i):i)!=e.chunkPos[t]||(null==n?void 0:n.touchesRange(i,i+e.chunk[t].length))||o.add(e.chunk[t])}return o}class eu{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class tu{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let o=0;o<e.length;o++)for(let i=e[o];!i.isEmpty;i=i.nextLayer)i.maxPoint>=n&&r.push(new eu(i,t,n,o));return 1==r.length?r[0]:new tu(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)nu(this.heap,e);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)nu(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),nu(this.heap,0)}}}function nu(e,t){for(let n=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let o=e[r];if(r+1<e.length&&o.compare(e[r+1])>=0&&(o=e[r+1],r++),n.compare(o)<0)break;e[r]=n,e[t]=o,t=r}}class ru{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=tu.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){su(this.active,e),su(this.activeTo,e),su(this.activeRank,e),this.minActive=lu(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||r-this.activeTo[t])>0;)t++;au(this.active,t,n),au(this.activeTo,t,r),au(this.activeRank,t,o),e&&au(e,t,this.cursor.from),this.minActive=lu(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&su(n,r)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let t=n.length-1;t>=0&&n[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function ou(e,t,n,r,o,i){e.goto(t),n.goto(r);let s=r+o,a=r,l=r-t,c=!!i.boundChange;for(let t=!1;;){let r=e.to+l-n.to,o=r||e.endSide-n.endSide,u=o<0?e.to+l:n.to,d=Math.min(u,s);if(e.point||n.point?(e.point&&n.point&&Kc(e.point,n.point)&&iu(e.activeForPoint(e.to),n.activeForPoint(n.to))||i.comparePoint(a,d,e.point,n.point),t=!1):(t&&i.boundChange(a),d>a&&!iu(e.active,n.active)&&i.compareRange(a,d,e.active,n.active),c&&d<s&&(r||e.openEnd(u)!=n.openEnd(u))&&(t=!0)),u>s)break;a=u,o<=0&&e.next(),o>=0&&n.next()}}function iu(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!Kc(e[n],t[n]))return!1;return!0}function su(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function au(e,t,n){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=n}function lu(e,t){let n=-1,r=1e9;for(let o=0;o<t.length;o++)(t[o]-r||e[o].endSide-e[n].endSide)<0&&(n=o,r=t[o]);return n}function cu(e,t,n=e.length){let r=0;for(let o=0;o<n&&o<e.length;)9==e.charCodeAt(o)?(r+=t-r%t,o++):(r++,o=Kl(e,o));return r}const uu="undefined"==typeof Symbol?"__":Symbol.for(""),du="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),hu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class fu{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function o(e,t,i,s){let a=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return i.push(e[0]+";");for(let n in t){let s=t[n];if(/&/.test(n))o(n.split(/,\s*/).map(t=>e.map(e=>t.replace(/&/,e))).reduce((e,t)=>e.concat(t)),s,i);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");o(r(n),s,a,c)}else null!=s&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())+": "+s+";")}(a.length||c)&&i.push((!n||l||s?e:e.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let t in e)o(r(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=hu[uu]||1;return hu[uu]=e+1,""+e.toString(36)}static mount(e,t,n){let r=e[du],o=n&&n.nonce;r?o&&r.setNonce(o):r=new gu(e,o),r.mount(Array.isArray(t)?t:[t],e)}}let pu=new Map;class gu{constructor(e,t){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let t=pu.get(n);if(t)return e[du]=t;this.sheet=new r.CSSStyleSheet,pu.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[du]=this}mount(e,t){let n=this.sheet,r=0,o=0;for(let t=0;t<e.length;t++){let i=e[t],s=this.modules.indexOf(i);if(s<o&&s>-1&&(this.modules.splice(s,1),o--,s=-1),-1==s){if(this.modules.splice(o++,0,i),n)for(let e=0;e<i.rules.length;e++)n.insertRule(i.rules[e],r++)}else{for(;o<s;)r+=this.modules[o++].rules.length;r+=i.rules.length,o++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e;let n=t.head||t;this.styleTag.parentNode!=n&&n.insertBefore(this.styleTag,n.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var mu={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},yu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},vu="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),bu="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),wu=0;wu<10;wu++)mu[48+wu]=mu[96+wu]=String(wu);for(wu=1;wu<=24;wu++)mu[wu+111]="F"+wu;for(wu=65;wu<=90;wu++)mu[wu]=String.fromCharCode(wu+32),yu[wu]=String.fromCharCode(wu);for(var xu in mu)yu.hasOwnProperty(xu)||(yu[xu]=mu[xu]);let ku="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},Su="undefined"!=typeof document?document:{documentElement:{style:{}}};const Eu=/Edge\/(\d+)/.exec(ku.userAgent),Cu=/MSIE \d/.test(ku.userAgent),Nu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ku.userAgent),Au=!!(Cu||Nu||Eu),_u=!Au&&/gecko\/(\d+)/i.test(ku.userAgent),Mu=!Au&&/Chrome\/(\d+)/.exec(ku.userAgent),Tu="webkitFontSmoothing"in Su.documentElement.style,Ou=!Au&&/Apple Computer/.test(ku.vendor),ju=Ou&&(/Mobile\/\w+/.test(ku.userAgent)||ku.maxTouchPoints>2);var Pu={mac:ju||/Mac/.test(ku.platform),windows:/Win/.test(ku.platform),linux:/Linux|X11/.test(ku.platform),ie:Au,ie_version:Cu?Su.documentMode||6:Nu?+Nu[1]:Eu?+Eu[1]:0,gecko:_u,gecko_version:_u?+(/Firefox\/(\d+)/.exec(ku.userAgent)||[0,0])[1]:0,chrome:!!Mu,chrome_version:Mu?+Mu[1]:0,ios:ju,android:/Android\b/.test(ku.userAgent),webkit:Tu,webkit_version:Tu?+(/\bAppleWebKit\/(\d+)/.exec(ku.userAgent)||[0,0])[1]:0,safari:Ou,safari_version:Ou?+(/\bVersion\/(\d+(\.\d+)?)/.exec(ku.userAgent)||[0,0])[1]:0,tabSize:null!=Su.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};function Iu(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}const Du=Object.create(null);function Lu(e,t,n){if(e==t)return!0;e||(e=Du),t||(t=Du);let r=Object.keys(e),o=Object.keys(t);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=o.length-(n&&o.indexOf(n)>-1?1:0))return!1;for(let i of r)if(i!=n&&(-1==o.indexOf(i)||e[i]!==t[i]))return!1;return!0}function Ru(e,t,n){let r=!1;if(t)for(let o in t)n&&o in n||(r=!0,"style"==o?e.style.cssText="":e.removeAttribute(o));if(n)for(let o in n)t&&t[o]==n[o]||(r=!0,"style"==o?e.style.cssText=n[o]:e.setAttribute(o,n[o]));return r}function Bu(e){let t=Object.create(null);for(let n=0;n<e.attributes.length;n++){let r=e.attributes[n];t[r.name]=r.value}return t}class $u{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var zu=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(zu||(zu={}));class qu extends Uc{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Vu(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Hu(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,r=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:o,end:i}=Wu(e,r);t=(o?r?-3e8:-1:5e8)-1,n=1+(i?r?2e8:1:-6e8)}return new Hu(e,t,n,r,e.widget||null,!0)}static line(e){return new Fu(e)}static set(e,t=!1){return Zc.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}qu.none=Zc.empty;class Vu extends qu{constructor(e){let{start:t,end:n}=Wu(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?Iu(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||Du}eq(e){return this==e||e instanceof Vu&&this.tagName==e.tagName&&Lu(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Vu.prototype.point=!1;class Fu extends qu{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Fu&&this.spec.class==e.spec.class&&Lu(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Fu.prototype.mapMode=Yl.TrackBefore,Fu.prototype.point=!0;class Hu extends qu{constructor(e,t,n,r,o,i){super(t,n,o,e),this.block=r,this.isReplace=i,this.mapMode=r?t<=0?Yl.TrackBefore:Yl.TrackAfter:Yl.TrackDel}get type(){return this.startSide!=this.endSide?zu.WidgetRange:this.startSide<=0?zu.WidgetBefore:zu.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Hu&&((t=this.widget)==(n=e.widget)||!!(t&&n&&t.compare(n)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,n}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function Wu(e,t=!1){let{inclusiveStart:n,inclusiveEnd:r}=e;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:null!=n?n:t,end:null!=r?r:t}}function Uu(e,t,n,r=0){let o=n.length-1;o>=0&&n[o]+r>=e?n[o]=Math.max(n[o],t):n.push(e,t)}Hu.prototype.point=!0;class Ku extends Uc{constructor(e,t){super(),this.tagName=e,this.attributes=t}eq(e){return e==this||e instanceof Ku&&this.tagName==e.tagName&&Lu(this.attributes,e.attributes)}static create(e){return new Ku(e.tagName,e.attributes||Du)}static set(e,t=!1){return Zc.of(e,t)}}function Xu(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function Yu(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function Gu(e,t){if(!t.anchorNode)return!1;try{return Yu(e,t.anchorNode)}catch(e){return!1}}function Zu(e){return 3==e.nodeType?ud(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function Qu(e,t,n,r){return!!n&&(td(e,t,n,r,-1)||td(e,t,n,r,1))}function Ju(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function ed(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function td(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:nd(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=Ju(e)+(o<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(o<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=o<0?nd(e):0}}}function nd(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function rd(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function od(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function id(e,t){let n=t.width/e.offsetWidth,r=t.height/e.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(t.width-e.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(t.height-e.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}Ku.prototype.startSide=Ku.prototype.endSide=-1;class sd{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?nd(t):0),n,Math.min(e.focusOffset,n?nd(n):0))}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let ad,ld=null;function cd(e){if(e.setActive)return e.setActive();if(ld)return e.focus(ld);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==ld?{get preventScroll(){return ld={preventScroll:!0},!0}}:void 0),!ld){ld=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],o=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=o&&(n.scrollLeft=o)}}}function ud(e,t,n=t){let r=ad||(ad=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function dd(e,t,n,r){let o={key:t,code:t,keyCode:n,which:n,cancelable:!0};r&&({altKey:o.altKey,ctrlKey:o.ctrlKey,shiftKey:o.shiftKey,metaKey:o.metaKey}=r);let i=new KeyboardEvent("keydown",o);i.synthetic=!0,e.dispatchEvent(i);let s=new KeyboardEvent("keyup",o);return s.synthetic=!0,e.dispatchEvent(s),i.defaultPrevented||s.defaultPrevented}function hd(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function fd(e,t){for(let n=e,r=t;;){if(3==n.nodeType&&r>0)return{node:n,offset:r};if(1==n.nodeType&&r>0){if("false"==n.contentEditable)return null;n=n.childNodes[r-1],r=nd(n)}else{if(!n.parentNode||ed(n))return null;r=Ju(n),n=n.parentNode}}}function pd(e,t){for(let n=e,r=t;;){if(3==n.nodeType&&r<n.nodeValue.length)return{node:n,offset:r};if(1==n.nodeType&&r<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[r],r=0}else{if(!n.parentNode||ed(n))return null;r=Ju(n)+1,n=n.parentNode}}}Pu.safari&&Pu.safari_version>=26&&(ld=!1);class gd{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new gd(e.parentNode,Ju(e),t)}static after(e,t){return new gd(e.parentNode,Ju(e)+1,t)}}var md=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(md||(md={}));const yd=md.LTR,vd=md.RTL;function bd(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const wd=bd("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),xd=bd("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),kd=Object.create(null),Sd=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),n=e.charCodeAt(1);kd[t]=n,kd[n]=-t}function Ed(e){return e<=247?wd[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?xd[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}const Cd=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Nd{get dir(){return this.level%2?vd:yd}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,r){let o=-1;for(let i=0;i<e.length;i++){let s=e[i];if(s.from<=t&&s.to>=t){if(s.level==n)return i;(o<0||(0!=r?r<0?s.from<t:s.to>t:e[o].level>s.level))&&(o=i)}}if(o<0)throw new RangeError("Index out of range");return o}}function Ad(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],o=t[n];if(r.from!=o.from||r.to!=o.to||r.direction!=o.direction||!Ad(r.inner,o.inner))return!1}return!0}const _d=[];function Md(e,t,n,r,o,i,s){let a=r%2?2:1;if(r%2==o%2)for(let l=t,c=0;l<n;){let t=!0,u=!1;if(c==i.length||l<i[c].from){let e=_d[l];e!=a&&(t=!1,u=16==e)}let d=t||1!=a?null:[],h=t?r:r+1,f=l;e:for(;;)if(c<i.length&&f==i[c].from){if(u)break e;let p=i[c];if(!t)for(let e=p.to,t=c+1;;){if(e==n)break e;if(!(t<i.length&&i[t].from==e)){if(_d[e]==a)break e;break}e=i[t++].to}c++,d?d.push(p):(p.from>l&&s.push(new Nd(l,p.from,h)),Td(e,p.direction==yd!=!(h%2)?r+1:r,o,p.inner,p.from,p.to,s),l=p.to),f=p.to}else{if(f==n||(t?_d[f]!=a:_d[f]==a))break;f++}d?Md(e,l,f,r+1,o,d,s):l<f&&s.push(new Nd(l,f,h)),l=f}else for(let l=n,c=i.length;l>t;){let n=!0,u=!1;if(!c||l>i[c-1].to){let e=_d[l-1];e!=a&&(n=!1,u=16==e)}let d=n||1!=a?null:[],h=n?r:r+1,f=l;e:for(;;)if(c&&f==i[c-1].to){if(u)break e;let p=i[--c];if(!n)for(let e=p.from,n=c;;){if(e==t)break e;if(!n||i[n-1].to!=e){if(_d[e-1]==a)break e;break}e=i[--n].from}d?d.push(p):(p.to<l&&s.push(new Nd(p.to,l,h)),Td(e,p.direction==yd!=!(h%2)?r+1:r,o,p.inner,p.from,p.to,s),l=p.from),f=p.from}else{if(f==t||(n?_d[f-1]!=a:_d[f-1]==a))break;f--}d?Md(e,f,l,r+1,o,d,s):f<l&&s.push(new Nd(f,l,h)),l=f}}function Td(e,t,n,r,o,i,s){let a=t%2?2:1;!function(e,t,n,r,o){for(let i=0;i<=r.length;i++){let s=i?r[i-1].to:t,a=i<r.length?r[i].from:n,l=i?256:o;for(let t=s,n=l,r=l;t<a;t++){let o=Ed(e.charCodeAt(t));512==o?o=n:8==o&&4==r&&(o=16),_d[t]=4==o?2:o,7&o&&(r=o),n=o}for(let e=s,t=l,r=l;e<a;e++){let o=_d[e];if(128==o)e<a-1&&t==_d[e+1]&&24&t?o=_d[e]=t:_d[e]=256;else if(64==o){let o=e+1;for(;o<a&&64==_d[o];)o++;let i=e&&8==t||o<n&&8==_d[o]?1==r?1:8:256;for(let t=e;t<o;t++)_d[t]=i;e=o-1}else 8==o&&1==r&&(_d[e]=1);t=o,7&o&&(r=o)}}}(e,o,i,r,a),function(e,t,n,r,o){let i=1==o?2:1;for(let s=0,a=0,l=0;s<=r.length;s++){let c=s?r[s-1].to:t,u=s<r.length?r[s].from:n;for(let t,n,r,s=c;s<u;s++)if(n=kd[t=e.charCodeAt(s)])if(n<0){for(let e=a-3;e>=0;e-=3)if(Sd[e+1]==-n){let t=Sd[e+2],n=2&t?o:4&t?1&t?i:o:0;n&&(_d[s]=_d[Sd[e]]=n),a=e;break}}else{if(189==Sd.length)break;Sd[a++]=s,Sd[a++]=t,Sd[a++]=l}else if(2==(r=_d[s])||1==r){let e=r==o;l=e?0:1;for(let t=a-3;t>=0;t-=3){let n=Sd[t+2];if(2&n)break;if(e)Sd[t+2]|=2;else{if(4&n)break;Sd[t+2]|=4}}}}}(e,o,i,r,a),function(e,t,n,r){for(let o=0,i=r;o<=n.length;o++){let s=o?n[o-1].to:e,a=o<n.length?n[o].from:t;for(let l=s;l<a;){let s=_d[l];if(256==s){let s=l+1;for(;;)if(s==a){if(o==n.length)break;s=n[o++].to,a=o<n.length?n[o].from:t}else{if(256!=_d[s])break;s++}let c=1==i,u=c==(1==(s<t?_d[s]:r))?c?1:2:r;for(let t=s,r=o,i=r?n[r-1].to:e;t>l;)t==i&&(t=n[--r].from,i=r?n[r-1].to:e),_d[--t]=u;l=s}else i=s,l++}}}(o,i,r,a),Md(e,o,i,t,n,r,s)}function Od(e){return[new Nd(0,e,0)]}let jd="";function Pd(e,t,n,r,o){var i;let s=r.head-e.from,a=Nd.find(t,s,null!==(i=r.bidiLevel)&&void 0!==i?i:-1,r.assoc),l=t[a],c=l.side(o,n);if(s==c){let e=a+=o?1:-1;if(e<0||e>=t.length)return null;l=t[a=e],s=l.side(!o,n),c=l.side(o,n)}let u=Kl(e.text,s,l.forward(o,n));(u<l.from||u>l.to)&&(u=c),jd=e.text.slice(Math.min(s,u),Math.max(s,u));let d=a==(o?t.length-1:0)?null:t[a+(o?1:-1)];return d&&u==c&&d.level+(o?0:1)<l.level?ic.cursor(d.side(!o,n)+e.from,d.forward(o,n)?1:-1,d.level):ic.cursor(u+e.from,l.forward(o,n)?-1:1,l.level)}function Id(e,t,n){for(let r=t;r<n;r++){let t=Ed(e.charCodeAt(r));if(1==t)return yd;if(2==t||4==t)return vd}return yd}const Dd=lc.define(),Ld=lc.define(),Rd=lc.define(),Bd=lc.define(),$d=lc.define(),zd=lc.define(),qd=lc.define(),Vd=lc.define(),Fd=lc.define(),Hd=lc.define({combine:e=>e.some(e=>e)}),Wd=lc.define({combine:e=>e.some(e=>e)}),Ud=lc.define();class Kd{constructor(e,t="nearest",n="nearest",r=5,o=5,i=!1){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=o,this.isSnapshot=i}map(e){return e.empty?this:new Kd(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Kd(ic.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Xd=Ic.define({map:(e,t)=>e.map(t)}),Yd=Ic.define();function Gd(e,t,n){let r=e.facet(Bd);r.length?r[0](t):window.onerror&&window.onerror(String(t),n,void 0,void 0,t)||(n?console.error(n+":",t):console.error(t))}const Zd=lc.define({combine:e=>!e.length||e[0]});let Qd=0;const Jd=lc.define({combine:e=>e.filter((t,n)=>{for(let r=0;r<n;r++)if(e[r].plugin==t.plugin)return!1;return!0})});class eh{constructor(e,t,n,r,o){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=r,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(Jd.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Jd.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:n,eventObservers:r,provide:o,decorations:i}=t||{};return new eh(Qd++,e,n,r,e=>{let t=[];return i&&t.push(oh.of(t=>{let n=t.plugin(e);return n?i(n):qu.none})),o&&t.push(o(e)),t})}static fromClass(e,t){return eh.define((t,n)=>new e(t,n),t)}}class th{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(Gd(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Gd(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){Gd(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const nh=lc.define(),rh=lc.define(),oh=lc.define(),ih=lc.define(),sh=lc.define(),ah=lc.define(),lh=lc.define();function ch(e,t){let n=e.state.facet(lh);if(!n.length)return n;let r=n.map(t=>t instanceof Function?t(e):t),o=[];return Zc.spans(r,t.from,t.to,{point(){},span(e,n,r,i){let s=e-t.from,a=n-t.from,l=o;for(let e=r.length-1;e>=0;e--,i--){let n,o=r[e].spec.bidiIsolate;if(null==o&&(o=Id(t.text,s,a)),i>0&&l.length&&(n=l[l.length-1]).to==s&&n.direction==o)n.to=a,l=n.inner;else{let e={from:s,to:a,direction:o,inner:[]};l.push(e),l=e.inner}}}}),o}const uh=lc.define();function dh(e){let t=0,n=0,r=0,o=0;for(let i of e.state.facet(uh)){let s=i(e);s&&(null!=s.left&&(t=Math.max(t,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(r=Math.max(r,s.top)),null!=s.bottom&&(o=Math.max(o,s.bottom)))}return{left:t,right:n,top:r,bottom:o}}const hh=lc.define();class fh{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new fh(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let r=0,o=0,i=0;;){let s=r<e.length?e[r].fromB:1e9,a=o<t.length?t[o]:1e9,l=Math.min(s,a);if(1e9==l)break;let c=l+i,u=l,d=c;for(;;)if(o<t.length&&t[o]<=u){let n=t[o+1];o+=2,u=Math.max(u,n);for(let t=r;t<e.length&&e[t].fromB<=u;t++)i=e[t].toA-e[t].toB;d=Math.max(d,n+i)}else{if(!(r<e.length&&e[r].fromB<=u))break;{let t=e[r++];u=Math.max(u,t.toB),d=Math.max(d,t.toA),i=t.toA-t.toB}}n.push(new fh(c,d,l,u))}return n}}class ph{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Zl.empty(this.startState.doc.length);for(let e of n)this.changes=this.changes.compose(e.changes);let r=[];this.changes.iterChangedRanges((e,t,n,o)=>r.push(new fh(e,t,n,o))),this.changedRanges=r}static create(e,t,n){return new ph(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}const gh=[];class mh{constructor(e,t,n=0){this.dom=e,this.length=t,this.flags=n,this.parent=null,e.cmTile=this}get breakAfter(){return 1&this.flags}get children(){return gh}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,4&this.flags){this.flags&=-5;let e=this.domAttrs;e&&function(e,t){for(let n=e.attributes.length-1;n>=0;n--){let r=e.attributes[n].name;null==t[r]&&e.removeAttribute(r)}for(let n in t){let r=t[n];"style"==n?e.style.cssText=r:e.getAttribute(n)!=r&&e.setAttribute(n,r)}}(this.dom,e)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,t=this.posAtStart){let n=t;for(let t of this.children){if(t==e)return n;n+=t.length+t.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,t){return null}domPosFor(e,t){let n=Ju(this.dom),r=this.length?e>0:t>0;return new gd(this.parent.dom,n+(r?1:0),0==e||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&2&this.parent.flags&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof bh)return e;return null}static get(e){return e.cmTile}}class yh extends mh{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(2&this.flags)return;super.sync(e);let t,n=this.dom,r=null,o=(null==e?void 0:e.node)==n?e:null,i=0;for(let s of this.children){if(s.sync(e),i+=s.length+s.breakAfter,t=r?r.nextSibling:n.firstChild,o&&t!=s.dom&&(o.written=!0),s.dom.parentNode==n)for(;t&&t!=s.dom;)t=vh(t);else n.insertBefore(s.dom,t);r=s.dom}for(t=r?r.nextSibling:n.firstChild,o&&t&&(o.written=!0);t;)t=vh(t);this.length=i}}function vh(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class bh extends yh{constructor(e,t){super(t),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let t=mh.get(e);if(t&&this.owns(t))return t;e=e.parentNode}}blockTiles(e){for(let t=[],n=this,r=0,o=0;;)if(r==n.children.length){if(!t.length)return;n=n.parent,n.breakAfter&&o++,r=t.pop()}else{let i=n.children[r++];if(i instanceof wh)t.push(r),n=i,r=0;else{let t=o+i.length,n=e(i,o);if(void 0!==n)return n;o=t+i.breakAfter}}}resolveBlock(e,t){let n,r,o=-1,i=-1;if(this.blockTiles((s,a)=>{let l=a+s.length;if(e>=a&&e<=l){if(s.isWidget()&&t>=-1&&t<=1){if(32&s.flags)return!0;16&s.flags&&(n=void 0)}(a<e||e==l&&(t<-1?s.length:s.covers(1)))&&(!n||!s.isWidget()&&n.isWidget())&&(n=s,o=e-a),(l>e||e==a&&(t>1?s.length:s.covers(-1)))&&(!r||!s.isWidget()&&r.isWidget())&&(r=s,i=e-a)}}),!n&&!r)throw new Error("No tile at position "+e);return n&&t<0||!r?{tile:n,offset:o}:{tile:r,offset:i}}}class wh extends yh{constructor(e,t){super(e),this.wrapper=t}isBlock(){return!0}covers(e){return!!this.children.length&&(e<0?this.children[0].covers(-1):this.lastChild.covers(1))}get domAttrs(){return this.wrapper.attributes}static of(e,t){let n=new wh(t||document.createElement(e.tagName),e);return t||(n.flags|=4),n}}class xh extends yh{constructor(e,t){super(e),this.attrs=t}isLine(){return!0}static start(e,t,n){let r=new xh(t||document.createElement("div"),e);return t&&n||(r.flags|=4),r}get domAttrs(){return this.attrs}resolveInline(e,t,n){let r=null,o=-1,i=null,s=-1;!function e(a,l){for(let c=0,u=0;c<a.children.length&&u<=l;c++){let d=a.children[c],h=u+d.length;h>=l&&(d.isComposite()?e(d,l-u):(!i||i.isHidden&&(t>0||n&&kh(i,d)))&&(h>l||32&d.flags)?(i=d,s=l-u):(u<l||16&d.flags&&!d.isHidden)&&(r=d,o=l-u)),u=h}}(this,e);let a=(t<0?r:i)||r||i;return a?{tile:a,offset:a==r?o:s}:null}coordsIn(e,t){let n=this.resolveInline(e,t,!0);return n?n.tile.coordsIn(Math.max(0,n.offset),t):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let n=Zu(t);return n[n.length-1]||null}(this)}domIn(e,t){let n=this.resolveInline(e,t);if(n){let{tile:e,offset:r}=n;if(this.dom.contains(e.dom))return e.isText()?new gd(e.dom,Math.min(e.dom.nodeValue.length,r)):e.domPosFor(r,16&e.flags?1:32&e.flags?-1:t);let o=n.tile.parent,i=!1;for(let e of o.children){if(i)return new gd(e.dom,0);e==n.tile&&(i=!0)}}return new gd(this.dom,0)}}function kh(e,t){let n=e.coordsIn(0,1),r=t.coordsIn(0,1);return n&&r&&r.top<n.bottom}class Sh extends yh{constructor(e,t){super(e),this.mark=t}get domAttrs(){return this.mark.attrs}static of(e,t){let n=new Sh(t||document.createElement(e.tagName),e);return t||(n.flags|=4),n}}class Eh extends mh{constructor(e,t){super(e,t.length),this.text=t}sync(e){2&this.flags||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,t){let n=this.dom.nodeValue.length;e>n&&(e=n);let r=e,o=e,i=0;0==e&&t<0||e==n&&t>=0?Pu.chrome||Pu.gecko||(e?(r--,i=1):o<n&&(o++,i=-1)):t<0?r--:o<n&&o++;let s=ud(this.dom,r,o).getClientRects();if(!s.length)return null;let a=s[(i?i<0:t>=0)?0:s.length-1];return Pu.safari&&!i&&0==a.width&&(a=Array.prototype.find.call(s,e=>e.width)||a),i?rd(a,i<0):a||null}static of(e,t){let n=new Eh(t||document.createTextNode(e),e);return t||(n.flags|=2),n}}class Ch extends mh{constructor(e,t,n,r){super(e,t,r),this.widget=n}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return!(48&this.flags)&&(this.flags&(e<0?64:128))>0}coordsIn(e,t){return this.coordsInWidget(e,t,!1)}coordsInWidget(e,t,n){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;if(n)return rd(this.dom.getBoundingClientRect(),this.length?0==e:t<=0);{let t=this.dom.getClientRects(),n=null;if(!t.length)return null;let r=!!(16&this.flags)||!(32&this.flags)&&e>0;for(let o=r?t.length-1:0;n=t[o],!(e>0?0==o:o==t.length-1||n.top<n.bottom);o+=r?-1:1);return rd(n,!r)}}get overrideDOMText(){if(!this.length)return Rl.empty;let{root:e}=this;if(!e)return Rl.empty;let t=this.posAtStart;return e.view.state.doc.slice(t,t+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,t,n,r,o){return o||(o=e.toDOM(t),e.editable||(o.contentEditable="false")),new Ch(o,n,e,r)}}class Nh extends mh{constructor(e){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),super(t,0,e)}get isHidden(){return!0}get overrideDOMText(){return Rl.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class Ah{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,t,n){let{tile:r,index:o,beforeBreak:i,parents:s}=this;for(;e||t>0;)if(r.isComposite())if(i){if(!e)break;n&&n.break(),e--,i=!1}else if(o==r.children.length){if(!e&&!s.length)break;n&&n.leave(r),i=!!r.breakAfter,({tile:r,index:o}=s.pop()),o++}else{let a=r.children[o],l=a.breakAfter;!(t>0?a.length<=e:a.length<e)||n&&!1===n.skip(a,0,a.length)&&a.isComposite?(s.push({tile:r,index:o}),r=a,o=0,n&&a.isComposite()&&n.enter(a)):(i=!!l,o++,e-=a.length)}else if(o==r.length)i=!!r.breakAfter,({tile:r,index:o}=s.pop()),o++;else{if(!e)break;{let t=Math.min(e,r.length-o);n&&n.skip(r,o,o+t),e-=t,o+=t}}return this.tile=r,this.index=o,this.beforeBreak=i,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class _h{constructor(e,t,n,r){this.from=e,this.to=t,this.wrapper=n,this.rank=r}}class Mh{constructor(e,t,n){this.cache=e,this.root=t,this.blockWrappers=n,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,t,n,r){var o;this.flushBuffer();let i=this.ensureMarks(t,n),s=i.lastChild;s&&s.isText()&&!(8&s.flags)&&s.length+e.length<512?(this.cache.reused.set(s,2),(i.children[i.children.length-1]=new Eh(s.dom,s.text+e)).parent=i):i.append(r||Eh.of(e,null===(o=this.cache.find(Eh))||void 0===o?void 0:o.dom)),this.pos+=e.length,this.afterWidget=null}addComposition(e,t){let n=this.curLine;n.dom!=t.line.dom&&(n.setDOM(this.cache.reused.has(t.line)?Lh(t.line.dom):t.line.dom),this.cache.reused.set(t.line,2));let r=n;for(let e=t.marks.length-1;e>=0;e--){let n=t.marks[e],o=r.lastChild;if(o instanceof Sh&&o.mark.eq(n.mark))o.dom!=n.dom&&o.setDOM(Lh(n.dom)),r=o;else{if(this.cache.reused.get(n)){let e=mh.get(n.dom);e&&e.setDOM(Lh(n.dom))}let e=Sh.of(n.mark,n.dom);r.append(e),r=e}this.cache.reused.set(n,2)}let o=mh.get(e.text);o&&this.cache.reused.set(o,2);let i=new Eh(e.text,e.text.nodeValue);i.flags|=8,r.append(i)}addInlineWidget(e,t,n){let r=this.afterWidget&&48&e.flags&&(48&this.afterWidget.flags)==(48&e.flags);r||this.flushBuffer();let o=this.ensureMarks(t,n);r||16&e.flags||o.append(this.getBuffer(1)),o.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,t,n){this.flushBuffer(),this.ensureMarks(t,n).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){(this.afterWidget||this.lastBlock).length+=e,this.pos+=e}addLineStart(e,t){var n;e||(e=Dh);let r=xh.start(e,t||(null===(n=this.cache.find(xh))||void 0===n?void 0:n.dom),!!t);this.getBlockPos().append(this.lastBlock=this.curLine=r)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,t){var n;let r=this.curLine;for(let o=e.length-1;o>=0;o--){let i,s=e[o];if(t>0&&(i=r.lastChild)&&i instanceof Sh&&i.mark.eq(s))r=i,t--;else{let e=Sh.of(s,null===(n=this.cache.find(Sh,e=>e.mark.eq(s)))||void 0===n?void 0:n.dom);r.append(e),r=e,t=0}}return r}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;e&&Ih(this.curLine,!1)&&("BR"==e.dom.nodeName||!e.isWidget()||Pu.ios&&Ih(this.curLine,!0))||this.curLine.append(this.cache.findWidget(Bh,0,32)||new Ch(Bh.toDOM(),0,Bh,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let t=new _h(e.from,e.to,e.value,e.rank),n=this.wrappers.length;for(;n>0&&(this.wrappers[n-1].rank-t.rank||this.wrappers[n-1].to-t.to)<0;)n--;this.wrappers.splice(n,0,t)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let t=this.root;for(let n of this.wrappers){let r=t.lastChild;if(n.from<this.pos&&r instanceof wh&&r.wrapper.eq(n.wrapper))t=r;else{let r=wh.of(n.wrapper,null===(e=this.cache.find(wh,e=>e.wrapper.eq(n.wrapper)))||void 0===e?void 0:e.dom);t.append(r),t=r}}return t}blockPosCovered(){let e=this.lastBlock;return null!=e&&!e.breakAfter&&(!e.isWidget()||(160&e.flags)>0)}getBuffer(e){let t=2|(e<0?16:32),n=this.cache.find(Nh,void 0,1);return n&&(n.flags=t),n||new Nh(t)}flushBuffer(){!this.afterWidget||32&this.afterWidget.flags||(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class Th{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:r}=this.cursor.next(this.skipCount);if(this.skipCount=0,r)throw new Error("Ran out of text content when drawing inline views");this.text=t;let o=this.textOff=Math.min(e,t.length);return n?null:t.slice(0,o)}let t=Math.min(this.text.length,this.textOff+e),n=this.text.slice(this.textOff,t);return this.textOff=t,n}}const Oh=[Ch,xh,Eh,Sh,Nh,wh,bh];for(let e=0;e<Oh.length;e++)Oh[e].bucket=e;class jh{constructor(e){this.view=e,this.buckets=Oh.map(()=>[]),this.index=Oh.map(()=>0),this.reused=new Map}add(e){let t=e.constructor.bucket,n=this.buckets[t];n.length<6?n.push(e):n[this.index[t]=(this.index[t]+1)%6]=e}find(e,t,n=2){let r=e.bucket,o=this.buckets[r],i=this.index[r];for(let e=o.length-1;e>=0;e--){let s=(e+i)%o.length,a=o[s];if((!t||t(a))&&!this.reused.has(a))return o.splice(s,1),s<i&&this.index[r]--,this.reused.set(a,n),a}return null}findWidget(e,t,n){let r=this.buckets[0];if(r.length)for(let o=0,i=0;;o++){if(o==r.length){if(i)return null;i=1,o=0}let s=r[o];if(!this.reused.has(s)&&(0==i?s.widget.compare(e):s.widget.constructor==e.constructor&&e.updateDOM(s.dom,this.view)))return r.splice(o,1),o<this.index[0]&&this.index[0]--,s.widget==e&&s.length==t&&(497&s.flags)==n?(this.reused.set(s,1),s):(this.reused.set(s,2),new Ch(s.dom,t,e,-498&s.flags|n))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,t=2){if(!this.reused.has(e))return this.reused.set(e,t),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class Ph{constructor(e,t,n,r,o){this.view=e,this.decorations=r,this.disallowBlockEffectsFor=o,this.openWidget=!1,this.openMarks=0,this.cache=new jh(e),this.text=new Th(e.state.doc),this.builder=new Mh(this.cache,new bh(e,e.contentDOM),Zc.iter(n)),this.cache.reused.set(t,2),this.old=new Ah(t),this.reuseWalker={skip:(e,t,n)=>{if(this.cache.add(e),e.isComposite())return!1},enter:e=>this.cache.add(e),leave:()=>{},break:()=>{}}}run(e,t){let n=t&&this.getCompositionContext(t.text);for(let r=0,o=0,i=0;;){let s=i<e.length?e[i++]:null,a=s?s.fromA:this.old.root.length;if(a>r){let e=a-r;this.preserve(e,!i,!s),r=a,o+=e}if(!s)break;t&&s.fromA<=t.range.fromA&&s.toA>=t.range.toA?(this.forward(s.fromA,t.range.fromA,t.range.fromA<t.range.toA?1:-1),this.emit(o,t.range.fromB),this.cache.clear(),this.builder.addComposition(t,n),this.text.skip(t.range.toB-t.range.fromB),this.forward(t.range.fromA,s.toA),this.emit(t.range.toB,s.toB)):(this.forward(s.fromA,s.toA),this.emit(o,s.toB)),o=s.toB,r=s.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,t,n){let r=function(e){let t=[];for(let n=e.parents.length;n>1;n--){let r=n==e.parents.length?e.tile:e.parents[n].tile;r instanceof Sh&&t.push(r.mark)}return t}(this.old),o=this.openMarks;this.old.advance(e,n?1:-1,{skip:(e,t,n)=>{if(e.isWidget())if(this.openWidget)this.builder.continueWidget(n-t);else{let i=n>0||t<e.length?Ch.of(e.widget,this.view,n-t,496&e.flags,this.cache.maybeReuse(e)):this.cache.reuse(e);256&i.flags?(i.flags&=-2,this.builder.addBlockWidget(i)):(this.builder.ensureLine(null),this.builder.addInlineWidget(i,r,o),o=r.length)}else if(e.isText())this.builder.ensureLine(null),t||n!=e.length?(this.cache.add(e),this.builder.addText(e.text.slice(t,n),r,o)):this.builder.addText(e.text,r,o,this.cache.reuse(e)),o=r.length;else if(e.isLine())e.flags&=-2,this.cache.reused.set(e,1),this.builder.addLine(e);else if(e instanceof Nh)this.cache.add(e);else{if(!(e instanceof Sh))return!1;this.builder.ensureLine(null),this.builder.addMark(e,r,o),this.cache.reused.set(e,1),o=r.length}this.openWidget=!1},enter:e=>{e.isLine()?this.builder.addLineStart(e.attrs,this.cache.maybeReuse(e)):(this.cache.add(e),e instanceof Sh&&r.unshift(e.mark)),this.openWidget=!1},leave:e=>{e.isLine()?r.length&&(r.length=o=0):e instanceof Sh&&(r.shift(),o=Math.min(o,r.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,t){let n=null,r=this.builder,o=0,i=Zc.spans(this.decorations,e,t,{point:(e,t,i,s,a,l)=>{if(i instanceof Hu){if(this.disallowBlockEffectsFor[l]){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.view.state.doc.lineAt(e).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(o=s.length,a>s.length)r.continueWidget(t-e);else{let o=i.widget||(i.block?Rh.block:Rh.inline),l=function(e){let t=e.isReplace?(e.startSide<0?64:0)|(e.endSide>0?128:0):e.startSide>0?32:16;return e.block&&(t|=256),t}(i),c=this.cache.findWidget(o,t-e,l)||Ch.of(o,this.view,t-e,l);i.block?(i.startSide>0&&r.addLineStartIfNotCovered(n),r.addBlockWidget(c)):(r.ensureLine(n),r.addInlineWidget(c,s,a))}n=null}else n=function(e,t){let n=t.spec.attributes,r=t.spec.class;return n||r?(e||(e={class:"cm-line"}),n&&Iu(n,e),r&&(e.class+=" "+r),e):e}(n,i);t>e&&this.text.skip(t-e)},span:(e,t,o,i)=>{for(let s=e;s<t;){let a=this.text.next(Math.min(512,t-s));null==a?(r.addLineStartIfNotCovered(n),r.addBreak(),s++):(r.ensureLine(n),r.addText(a,o,s==e?i:o.length),s+=a.length),n=null}}});r.addLineStartIfNotCovered(n),this.openWidget=i>o,this.openMarks=i}forward(e,t,n=1){t-e<=10?this.old.advance(t-e,n,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(t-e-10,-1),this.old.advance(5,n,this.reuseWalker))}getCompositionContext(e){let t=[],n=null;for(let r=e.parentNode;;r=r.parentNode){let e=mh.get(r);if(r==this.view.contentDOM)break;e instanceof Sh?t.push(e):(null==e?void 0:e.isLine())?n=e:"DIV"!=r.nodeName||n||r==this.view.contentDOM?t.push(Sh.of(new Vu({tagName:r.nodeName.toLowerCase(),attributes:Bu(r)}),r)):n=new xh(r,Dh)}return{line:n,marks:t}}}function Ih(e,t){let n=e=>{for(let r of e.children)if((t?r.isText():r.length)||n(r))return!0;return!1};return n(e)}const Dh={class:"cm-line"};function Lh(e){let t=mh.get(e);return t&&t.setDOM(e.cloneNode()),e}class Rh extends $u{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Rh.inline=new Rh("span"),Rh.block=new Rh("div");const Bh=new class extends $u{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class $h{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=qu.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new bh(e,e.contentDOM),this.updateInner([new fh(0,0,0,e.state.doc.length)],null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(t=this.domChanged)||void 0===t?void 0:t.newSel)?r=this.domChanged.newSel.head:function(e,t){let n=!1;return t&&e.iterChangedRanges((e,r)=>{e<t.to&&r>t.from&&(n=!0)}),n}(e.changes,this.hasComposition)||e.selectionSet||(r=e.state.selection.main.head));let o=r>-1?function(e,t,n){let r=qh(e,n);if(!r)return null;let{node:o,from:i,to:s}=r,a=o.nodeValue;if(/[\n\r]/.test(a))return null;if(e.state.doc.sliceString(r.from,r.to)!=a)return null;let l=t.invertedDesc;return{range:new fh(l.mapPos(i),l.mapPos(s),i,s),text:o}}(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){let{from:t,to:r}=this.hasComposition;n=new fh(t,r,e.changes.mapPos(t,-1),e.changes.mapPos(r,1)).addToSet(n.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(Pu.ie||Pu.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,s=this.blockWrappers;this.updateDeco();let a=function(e,t,n){let r=new Vh;return Zc.compare(e,t,n,r),r.changes}(i,this.decorations,e.changes);a.length&&(n=fh.extendWithRanges(n,a));let l=function(e,t,n){let r=new Fh;return Zc.compare(e,t,n,r),r.changes}(s,this.blockWrappers,e.changes);return l.length&&(n=fh.extendWithRanges(n,l)),o&&!n.some(e=>e.fromA<=o.range.fromA&&e.toA>=o.range.toA)&&(n=o.range.addToSet(n.slice())),!(2&this.tile.flags&&0==n.length||(this.updateInner(n,o),e.transactions.length&&(this.lastUpdate=Date.now()),0))}updateInner(e,t){this.view.viewState.mustMeasureContent=!0;let{observer:n}=this.view;n.ignore(()=>{if(t||e.length){let n=this.tile,r=new Ph(this.view,n,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=r.run(e,t),zh(n,r.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let r=Pu.chrome||Pu.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(r),!r||!r.written&&n.selectionRange.focusNode==r.node&&this.tile.dom.contains(r.node)||(this.forceSelection=!0),this.tile.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.tile.children)e.isWidget()&&e.widget instanceof Hh&&r.push(e.dom);n.updateGaps(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let e of t.effects)e.is(Yd)&&(this.editContextFormatting=e.value)}updateSelection(e=!1,t=!1){!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let{dom:n}=this.tile,r=this.view.root.activeElement,o=r==n,i=!o&&!(this.view.state.facet(Zd)||n.tabIndex>-1)&&Gu(n,this.view.observer.selectionRange)&&!(r&&n.contains(r));if(!(o||t||i))return;let s=this.forceSelection;this.forceSelection=!1;let a,l,c=this.view.state.selection.main;if(c.empty?l=a=this.inlineDOMNearPos(c.anchor,c.assoc||1):(l=this.inlineDOMNearPos(c.head,c.head==c.from?1:-1),a=this.inlineDOMNearPos(c.anchor,c.anchor==c.from?1:-1)),Pu.gecko&&c.empty&&!this.hasComposition&&1==(u=a).node.nodeType&&u.node.firstChild&&(0==u.offset||"false"==u.node.childNodes[u.offset-1].contentEditable)&&(u.offset==u.node.childNodes.length||"false"==u.node.childNodes[u.offset].contentEditable)){let e=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(e,a.node.childNodes[a.offset]||null)),a=l=new gd(e,0),s=!0}var u;let d=this.view.observer.selectionRange;!s&&d.focusNode&&(Qu(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Qu(l.node,l.offset,d.focusNode,d.focusOffset)||this.suppressWidgetCursorChange(d,c))||(this.view.observer.ignore(()=>{Pu.android&&Pu.chrome&&n.contains(d.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(d.focusNode,n)&&(n.blur(),n.focus({preventScroll:!0}));let e=Xu(this.view.root);if(e)if(c.empty){if(Pu.gecko){let e=(t=a.node,o=a.offset,1!=t.nodeType?0:(o&&"false"==t.childNodes[o-1].contentEditable?1:0)|(o<t.childNodes.length&&"false"==t.childNodes[o].contentEditable?2:0));if(e&&3!=e){let t=(1==e?fd:pd)(a.node,a.offset);t&&(a=new gd(t.node,t.offset))}}e.collapse(a.node,a.offset),null!=c.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=c.bidiLevel)}else if(e.extend){e.collapse(a.node,a.offset);try{e.extend(l.node,l.offset)}catch(e){}}else{let t=document.createRange();c.anchor>c.head&&([a,l]=[l,a]),t.setEnd(l.node,l.offset),t.setStart(a.node,a.offset),e.removeAllRanges(),e.addRange(t)}var t,o;i&&this.view.root.activeElement==n&&(n.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new gd(d.anchorNode,d.anchorOffset),this.impreciseHead=l.precise?null:new gd(d.focusNode,d.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Qu(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=Xu(e.root),{anchorNode:r,anchorOffset:o}=e.observer.selectionRange;if(!(n&&t.empty&&t.assoc&&n.modify))return;let i=this.lineAt(t.head,t.assoc);if(!i)return;let s=i.posAtStart;if(t.head==s||t.head==s+i.length)return;let a=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(t.head+t.assoc,t.assoc);n.collapse(c.node,c.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&n.collapse(r,o)}posFromDOM(e,t){let n=this.tile.nearest(e);if(!n)return 2&this.tile.dom.compareDocumentPosition(e)?0:this.view.state.doc.length;let r=n.posAtStart;if(!n.isComposite())return n.isText()?e==n.dom?r+t:r+(t?n.length:0):r;{let o;if(e==n.dom)o=n.dom.childNodes[t];else{let r=0==nd(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==n.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}o=r<0?e:e.nextSibling}if(o==n.dom.firstChild)return r;for(;o&&!mh.get(o);)o=o.nextSibling;if(!o)return r+n.length;for(let e=0,t=r;;e++){let r=n.children[e];if(r.dom==o)return t;t+=r.length+r.breakAfter}}}domAtPos(e,t){let{tile:n,offset:r}=this.tile.resolveBlock(e,t);return n.isWidget()?n.domPosFor(e,t):n.domIn(r,t)}inlineDOMNearPos(e,t){let n,r,o=-1,i=!1,s=-1,a=!1;return this.tile.blockTiles((t,l)=>{if(t.isWidget()){if(32&t.flags&&l>=e)return!0;16&t.flags&&(i=!0)}else{let c=l+t.length;if(l<=e&&(n=t,o=e-l,i=c<e),c>=e&&!r&&(r=t,s=e-l,a=l>e),l>e&&r)return!0}}),n||r?(i&&r?n=null:a&&n&&(r=null),n&&t<0||!r?n.domIn(o,t):r.domIn(s,t)):this.domAtPos(e,t)}coordsAt(e,t){let{tile:n,offset:r}=this.tile.resolveBlock(e,t);return n.isWidget()?n.widget instanceof Hh?null:n.coordsInWidget(r,t,!0):n.coordsIn(r,t)}lineAt(e,t){let{tile:n}=this.tile.resolveBlock(e,t);return n.isLine()?n:null}coordsForChar(e){let{tile:t,offset:n}=this.tile.resolveBlock(e,1);return t.isLine()?function e(t,n){if(t.isComposite())for(let r of t.children){if(r.length>=n){let t=e(r,n);if(t)return t}if((n-=r.length)<0)break}else if(t.isText()&&n<t.length){let e=Kl(t.text,n);if(e==n)return null;let r=ud(t.dom,n,e).getClientRects();for(let e=0;e<r.length;e++){let t=r[e];if(e==r.length-1||t.top<t.bottom&&t.left<t.right)return t}}return null}(t,n):null}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,o=this.view.contentDOM.clientWidth,i=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==md.LTR,l=0,c=(e,u,d)=>{for(let h=0;h<e.children.length&&!(u>r);h++){let r=e.children[h],f=u+r.length,p=r.dom.getBoundingClientRect(),{height:g}=p;if(d&&!h&&(l+=p.top-d.top),r instanceof wh)f>n&&c(r,u,p);else if(u>=n&&(l>0&&t.push(-l),t.push(g+l),l=0,i)){let e=r.dom.lastChild,t=e?Zu(e):[];if(t.length){let e=t[t.length-1],n=a?e.right-p.left:p.right-e.left;n>s&&(s=n,this.minWidth=o,this.minWidthFrom=u,this.minWidthTo=f)}}d&&h==e.children.length-1&&(l+=d.bottom-p.bottom),u=f+r.breakAfter}};return c(this.tile,0,null),t}textDirectionAt(e){let{tile:t}=this.tile.resolveBlock(e,1);return"rtl"==getComputedStyle(t.dom).direction?md.RTL:md.LTR}measureTextSize(){let e=this.tile.blockTiles(e=>{if(e.isLine()&&e.children.length&&e.length<=20){let t,n=0;for(let r of e.children){if(!r.isText()||/[^ -~]/.test(r.text))return;let e=Zu(r.dom);if(1!=e.length)return;n+=e[0].width,t=e[0].height}if(n)return{lineHeight:e.dom.getBoundingClientRect().height,charWidth:n/e.length,textHeight:t}}});if(e)return e;let t,n,r,o=document.createElement("div");return o.className="cm-line",o.style.width="99999px",o.style.position="absolute",o.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(o);let e=Zu(o.firstChild)[0];t=o.getBoundingClientRect().height,n=e&&e.width?e.width/27:7,r=e&&e.height?e.height:t,o.remove()}),{lineHeight:t,charWidth:n,textHeight:r}}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let o=r==t.viewports.length?null:t.viewports[r],i=o?o.from-1:this.view.state.doc.length;if(i>n){let r=(t.lineBlockAt(i).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(qu.replace({widget:new Hh(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,i))}if(!o)break;n=o.to+1}return qu.set(e)}updateDeco(){let e=1,t=this.view.state.facet(oh).map(t=>(this.dynamicDecorationMap[e++]="function"==typeof t)?t(this.view):t),n=!1,r=this.view.state.facet(sh).map((e,t)=>{let r="function"==typeof e;return r&&(n=!0),r?e(this.view):e});for(r.length&&(this.dynamicDecorationMap[e++]=n,t.push(Zc.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(ih).map(e=>"function"==typeof e?e(this.view):e)}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);return this.view.scrollDOM.scrollTop=t.top-e.yMargin,void(this.view.scrollDOM.scrollLeft=e.xMargin)}for(let t of this.view.state.facet(Ud))try{if(t(this.view,e.range,e))return!0}catch(e){Gd(this.view.state,e,"scroll handler")}let t,{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let o=dh(this.view),i={left:r.left-o.left,top:r.top-o.top,right:r.right+o.right,bottom:r.bottom+o.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;!function(e,t,n,r,o,i,s,a){let l=e.ownerDocument,c=l.defaultView||window;for(let u=e,d=!1;u&&!d;)if(1==u.nodeType){let e,h=u==l.body,f=1,p=1;if(h)e=od(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let t=u.getBoundingClientRect();({scaleX:f,scaleY:p}=id(u,t)),e={left:t.left,right:t.left+u.clientWidth*f,top:t.top,bottom:t.top+u.clientHeight*p}}let g=0,m=0;if("nearest"==o)t.top<e.top?(m=t.top-(e.top+s),n>0&&t.bottom>e.bottom+m&&(m=t.bottom-e.bottom+s)):t.bottom>e.bottom&&(m=t.bottom-e.bottom+s,n<0&&t.top-m<e.top&&(m=t.top-(e.top+s)));else{let r=t.bottom-t.top,i=e.bottom-e.top;m=("center"==o&&r<=i?t.top+r/2-i/2:"start"==o||"center"==o&&n<0?t.top-s:t.bottom-i+s)-e.top}if("nearest"==r?t.left<e.left?(g=t.left-(e.left+i),n>0&&t.right>e.right+g&&(g=t.right-e.right+i)):t.right>e.right&&(g=t.right-e.right+i,n<0&&t.left<e.left+g&&(g=t.left-(e.left+i))):g=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==a?t.left-i:t.right-(e.right-e.left)+i)-e.left,g||m)if(h)c.scrollBy(g,m);else{let e=0,n=0;if(m){let e=u.scrollTop;u.scrollTop+=m/p,n=(u.scrollTop-e)*p}if(g){let t=u.scrollLeft;u.scrollLeft+=g/f,e=(u.scrollLeft-t)*f}t={left:t.left-e,top:t.top-n,right:t.right-e,bottom:t.bottom-n},e&&Math.abs(e-g)<1&&(r="nearest"),n&&Math.abs(n-m)<1&&(o="nearest")}if(h)break;(t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)&&(t={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)}),u=u.assignedSlot||u.parentNode}else{if(11!=u.nodeType)break;u=u.host}}(this.view.scrollDOM,i,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,s),-s),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==md.LTR)}lineHasWidget(e){let t=e=>e.isWidget()||e.children.some(t);return t(this.tile.resolveBlock(e,1).tile)}destroy(){zh(this.tile)}}function zh(e,t){let n=null==t?void 0:t.get(e);if(1!=n){null==n&&e.destroy();for(let n of e.children)zh(n,t)}}function qh(e,t){let n=e.observer.selectionRange;if(!n.focusNode)return null;let r=fd(n.focusNode,n.focusOffset),o=pd(n.focusNode,n.focusOffset),i=r||o;if(o&&r&&o.node!=r.node){let t=mh.get(o.node);if(!t||t.isText()&&t.text!=o.node.nodeValue)i=o;else if(e.docView.lastCompositionAfterCursor){let e=mh.get(r.node);!e||e.isText()&&e.text!=r.node.nodeValue||(i=o)}}if(e.docView.lastCompositionAfterCursor=i!=r,!i)return null;let s=t-i.offset;return{from:s,to:s+i.node.nodeValue.length,node:i.node}}let Vh=class{constructor(){this.changes=[]}compareRange(e,t){Uu(e,t,this.changes)}comparePoint(e,t){Uu(e,t,this.changes)}boundChange(e){Uu(e,e,this.changes)}};class Fh{constructor(){this.changes=[]}compareRange(e,t){Uu(e,t,this.changes)}comparePoint(){}boundChange(e){Uu(e,e,this.changes)}}class Hh extends $u{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function Wh(e,t,n,r){let o=e.state.doc.lineAt(t.head),i=e.bidiSpans(o),s=e.textDirectionAt(o.from);for(let a=t,l=null;;){let t=Pd(o,i,s,a,n),c=jd;if(!t){if(o.number==(n?e.state.doc.lines:1))return a;c="\n",o=e.state.doc.line(o.number+(n?1:-1)),i=e.bidiSpans(o),t=e.visualLineSide(o,!n)}if(l){if(!l(c))return a}else{if(!r)return t;l=r(c)}a=t}}function Uh(e,t,n){for(;;){let r=0;for(let o of e)o.between(t-1,t+1,(e,o,i)=>{if(t>e&&t<o){let i=r||n||(t-e<o-t?-1:1);t=i<0?e:o,r=i}});if(!r)return t}}function Kh(e,t){let n=null;for(let r=0;r<t.ranges.length;r++){let o=t.ranges[r],i=null;if(o.empty){let t=Uh(e,o.from,0);t!=o.from&&(i=ic.cursor(t,-1))}else{let t=Uh(e,o.from,-1),n=Uh(e,o.to,1);t==o.from&&n==o.to||(i=ic.range(o.from==o.anchor?t:n,o.from==o.head?t:n))}i&&(n||(n=t.ranges.slice()),n[r]=i)}return n?ic.create(n,t.mainIndex):t}function Xh(e,t,n){let r=Uh(e.state.facet(ah).map(t=>t(e)),n.from,t.head>n.from?-1:1);return r==n.from?n:ic.cursor(r,r<n.from?1:-1)}class Yh{constructor(e,t){this.pos=e,this.assoc=t}}function Gh(e,t,n,r){let o,i=e.contentDOM.getBoundingClientRect(),s=i.top+e.viewState.paddingTop,{x:a,y:l}=t,c=l-s;for(;;){if(c<0)return new Yh(0,1);if(c>e.viewState.docHeight)return new Yh(e.state.doc.length,-1);if(o=e.elementAtHeight(c),null==r)break;if(o.type==zu.Text){if(r<0?o.to<e.viewport.from:o.from>e.viewport.to)break;let t=e.docView.coordsAt(r<0?o.from:o.to,r>0?-1:1);if(t&&(r<0?t.top<=c+s:t.bottom>=c+s))break}let t=e.viewState.heightOracle.textHeight/2;c=r>0?o.bottom+t:o.top-t}if(e.viewport.from>=o.to||e.viewport.to<=o.from){if(n)return null;if(o.type==zu.Text){let t=function(e,t,n,r,o){let i=Math.round((r-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;i+=Math.floor((o-n.top-.5*(e.defaultLineHeight-t))/t)*e.viewState.heightOracle.lineLength}let s=e.state.sliceDoc(n.from,n.to);return n.from+function(e,t,n){for(let r=0,o=0;;){if(o>=t)return r;if(r==e.length)break;o+=9==e.charCodeAt(r)?n-o%n:1,r=Kl(e,r)}return e.length}(s,i,e.state.tabSize)}(e,i,o,a,l);return new Yh(t,t==o.from?1:-1)}}if(o.type!=zu.Text)return c<(o.top+o.bottom)/2?new Yh(o.from,1):new Yh(o.to,-1);let u=e.docView.lineAt(o.from,2);return u&&u.length==o.length||(u=e.docView.lineAt(o.from,-2)),Zh(e,u,o.from,a,l)}function Zh(e,t,n,r,o){let i=-1,s=null,a=1e9,l=1e9,c=o,u=o,d=(e,t)=>{for(let n=0;n<e.length;n++){let d=e[n];if(d.top==d.bottom)continue;let h=d.left>r?d.left-r:d.right<r?r-d.right:0,f=d.top>o?d.top-o:d.bottom<o?o-d.bottom:0;d.top<=u&&d.bottom>=c&&(c=Math.min(d.top,c),u=Math.max(d.bottom,u),f=0),(i<0||(f-l||h-a)<0)&&(i>=0&&l&&a<h&&s.top<=u-2&&s.bottom>=c+2?l=0:(i=t,a=h,l=f,s=d))}};if(t.isText()){for(let e=0;e<t.length;){let n=Kl(t.text,e);if(d(ud(t.dom,e,n).getClientRects(),e),!a&&!l)break;e=n}return r>(s.left+s.right)/2==(Qh(e,i+n)==md.LTR)?new Yh(n+Kl(t.text,i),-1):new Yh(n+i,1)}{if(!t.length)return new Yh(n,1);for(let e=0;e<t.children.length;e++){let n=t.children[e];if(!(48&n.flags||(d((1==n.dom.nodeType?n.dom:ud(n.dom,0,n.length)).getClientRects(),e),a||l)))break}let c=t.children[i],u=t.posBefore(c,n);return c.isComposite()||c.isText()?Zh(e,c,u,Math.max(s.left,Math.min(s.right,r)),o):r>(s.left+s.right)/2==(Qh(e,i+n)==md.LTR)?new Yh(u+c.length,-1):new Yh(u,1)}}function Qh(e,t){let n=e.state.doc.lineAt(t);return e.bidiSpans(n)[Nd.find(e.bidiSpans(n),t-n.from,-1,1)].dir}const Jh="";class ef{constructor(e,t){this.points=e,this.view=t,this.text="",this.lineSeparator=t.state.facet(Wc.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Jh}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r);let e=this.text.length;this.readNode(r);let o=mh.get(r),i=r.nextSibling;if(i==t){(null==o?void 0:o.breakAfter)&&!i&&n!=this.view.contentDOM&&this.lineBreak();break}let s=mh.get(i);(o&&s?o.breakAfter:(o?o.breakAfter:ed(r))||ed(i)&&("BR"!=r.nodeName||(null==o?void 0:o.isWidget()))&&this.text.length>e)&&!nf(i,t)&&this.lineBreak(),r=i}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let o,i=-1,s=1;if(this.lineSeparator?(i=t.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(o=r.exec(t))&&(i=o.index,s=o[0].length),this.append(t.slice(n,i<0?t.length:i)),i<0)break;if(this.lineBreak(),s>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=s-1);n=i+s}}readNode(e){let t=mh.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(tf(e,n.node,n.offset)?t:0))}}function tf(e,t,n){for(;;){if(!t||n<nd(t))return!1;if(t==e)return!0;n=Ju(t)+1,t=t.parentNode}}function nf(e,t){let n;for(;e!=t&&e;e=e.nextSibling){let t=mh.get(e);if(!(null==t?void 0:t.isWidget()))return!1;t&&(n||(n=[])).push(t)}if(n)for(let e of n){let t=e.overrideDOMText;if(null==t?void 0:t.length)return!1}return!0}class rf{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class of{constructor(e,t,n,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:i}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=sf(e.docView.tile,t,n,0))){let t=o||i?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}=e.observer.selectionRange;return n&&(t.push(new rf(n,r)),o==n&&i==r||t.push(new rf(o,i))),t}(e),n=new ef(t,e);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(e,t){if(0==e.length)return null;let n=e[0].pos,r=2==e.length?e[1].pos:n;return n>-1&&r>-1?ic.single(n+t,r+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,n=o&&o.node==t.focusNode&&o.offset==t.focusOffset||!Yu(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),r=i&&i.node==t.anchorNode&&i.offset==t.anchorOffset||!Yu(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset),s=e.viewport;if((Pu.ios||Pu.chrome)&&e.state.selection.main.empty&&n!=r&&(s.from>0||s.to<e.state.doc.length)){let t=Math.min(n,r),o=Math.max(n,r),i=s.from-t,a=s.to-o;0!=i&&1!=i&&0!=t||0!=a&&-1!=a&&o!=e.state.doc.length||(n=0,r=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(ic.range(r,n)):this.newSel=ic.single(r,n)}}}function sf(e,t,n,r){if(e.isComposite()){let o=-1,i=-1,s=-1,a=-1;for(let l=0,c=r,u=r;l<e.children.length;l++){let r=e.children[l],d=c+r.length;if(c<t&&d>n)return sf(r,t,n,c);if(d>=t&&-1==o&&(o=l,i=c),c>n&&r.dom.parentNode==e.dom){s=l,a=u;break}u=d,c=d+r.breakAfter}return{from:i,to:a<0?r+e.length:a,startDOM:(o?e.children[o-1].dom.nextSibling:null)||e.dom.firstChild,endDOM:s<e.children.length&&s>=0?e.children[s].dom:null}}return e.isText()?{from:r,to:r+e.length,startDOM:e.dom,endDOM:e.dom.nextSibling}:null}function af(e,t){let n,{newSel:r}=t,o=e.state.selection.main,i=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:r,to:s}=t.bounds,a=o.from,l=null;(8===i||Pu.android&&t.text.length<s-r)&&(a=o.to,l="end");let c=cf(e.state.doc.sliceString(r,s,Jh),t.text,a-r,l);c&&(Pu.chrome&&13==i&&c.toB==c.from+2&&t.text.slice(c.from,c.toB)==Jh+Jh&&c.toB--,n={from:r+c.from,to:r+c.toA,insert:Rl.of(t.text.slice(c.from,c.toB).split(Jh))})}else r&&(!e.hasFocus&&e.state.facet(Zd)||uf(r,o))&&(r=null);if(!n&&!r)return!1;if(!n&&t.typeOver&&!o.empty&&r&&r.main.empty?n={from:o.from,to:o.to,insert:e.state.doc.slice(o.from,o.to)}:(Pu.mac||Pu.android)&&n&&n.from==n.to&&n.from==o.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(r&&2==n.insert.length&&(r=ic.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:Rl.of([n.insert.toString().replace("."," ")])}):n&&n.from>=o.from&&n.to<=o.to&&(n.from!=o.from||n.to!=o.to)&&o.to-o.from-(n.to-n.from)<=4?n={from:o.from,to:o.to,insert:e.state.doc.slice(o.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,o.to))}:e.state.doc.lineAt(o.from).to<o.to&&e.docView.lineHasWidget(o.to)&&e.inputState.insertingTextAt>Date.now()-50?n={from:o.from,to:o.to,insert:e.state.toText(e.inputState.insertingText)}:Pu.chrome&&n&&n.from==n.to&&n.from==o.head&&"\n "==n.insert.toString()&&e.lineWrapping&&(r&&(r=ic.single(r.main.anchor-1,r.main.head-1)),n={from:o.from,to:o.to,insert:Rl.of([" "])}),n)return lf(e,n,r,i);if(r&&!uf(r,o)){let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin,"select.pointer"==n&&(r=Kh(e.state.facet(ah).map(t=>t(e)),r))),e.dispatch({selection:r,scrollIntoView:t,userEvent:n}),!0}return!1}function lf(e,t,n,r=-1){if(Pu.ios&&e.inputState.flushIOSKey(t))return!0;let o=e.state.selection.main;if(Pu.android&&(t.to==o.to&&(t.from==o.from||t.from==o.from-1&&" "==e.state.sliceDoc(t.from,o.from))&&1==t.insert.length&&2==t.insert.lines&&dd(e.contentDOM,"Enter",13)||(t.from==o.from-1&&t.to==o.to&&0==t.insert.length||8==r&&t.insert.length<t.to-t.from&&t.to>o.head)&&dd(e.contentDOM,"Backspace",8)||t.from==o.from&&t.to==o.to+1&&0==t.insert.length&&dd(e.contentDOM,"Delete",46)))return!0;let i,s=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let a=()=>i||(i=function(e,t,n){let r,o=e.state,i=o.selection.main,s=-1;if(t.from==t.to&&t.from<i.from||t.from>i.to){let n=t.from<i.from?-1:1,r=n<0?i.from:i.to,a=Uh(o.facet(ah).map(t=>t(e)),r,n);t.from==a&&(s=a)}if(s>-1)r={changes:t,selection:ic.cursor(t.from+t.insert.length,-1)};else if(t.from>=i.from&&t.to<=i.to&&t.to-t.from>=(i.to-i.from)/3&&(!n||n.main.empty&&n.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let n=i.from<t.from?o.sliceDoc(i.from,t.from):"",s=i.to>t.to?o.sliceDoc(t.to,i.to):"";r=o.replaceSelection(e.state.toText(n+t.insert.sliceString(0,void 0,e.state.lineBreak)+s))}else{let s=o.changes(t),a=n&&n.main.to<=s.newLength?n.main:void 0;if(o.selection.ranges.length>1&&(e.inputState.composing>=0||e.inputState.compositionPendingChange)&&t.to<=i.to+10&&t.to>=i.to-10){let l,c=e.state.sliceDoc(t.from,t.to),u=n&&qh(e,n.main.head);if(u){let e=t.insert.length-(t.to-t.from);l={from:u.from,to:u.to-e}}else l=e.state.doc.lineAt(i.head);let d=i.to-t.to;r=o.changeByRange(n=>{if(n.from==i.from&&n.to==i.to)return{changes:s,range:a||n.map(s)};let r=n.to-d,u=r-c.length;if(e.state.sliceDoc(u,r)!=c||r>=l.from&&u<=l.to)return{range:n};let h=o.changes({from:u,to:r,insert:t.insert}),f=n.to-i.to;return{changes:h,range:a?ic.range(Math.max(0,a.anchor+f),Math.max(0,a.head+f)):n.map(h)}})}else r={changes:s,selection:a&&o.selection.replaceRange(a)}}let a="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1)),o.update(r,{userEvent:a,scrollIntoView:!0})}(e,t,n));return e.state.facet(zd).some(n=>n(e,t.from,t.to,s,a))||e.dispatch(a()),!0}function cf(e,t,n,r){let o=Math.min(e.length,t.length),i=0;for(;i<o&&e.charCodeAt(i)==t.charCodeAt(i);)i++;if(i==o&&e.length==t.length)return null;let s=e.length,a=t.length;for(;s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;return"end"==r&&(n-=s+Math.max(0,i-Math.min(s,a))-i),s<i&&e.length<t.length?(i-=n<=i&&n>=s?i-n:0,a=i+(a-s),s=i):a<i&&(i-=n<=i&&n>=a?i-n:0,s=i+(s-a),a=i),{from:i,toA:s,toB:a}}function uf(e,t){return t.head==e.main.head&&t.anchor==e.main.anchor}class df{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Pu.safari&&e.contentDOM.addEventListener("input",()=>null),Pu.gecko&&function(e){Df.has(e)||(Df.add(e),e.addEventListener("copy",()=>{}),e.addEventListener("cut",()=>{}))}(e.contentDOM.ownerDocument)}handleEvent(e){(function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=mh.get(r))&&n.isWidget()&&!n.isHidden&&n.widget.ignoreEvent(t))return!1;return!0})(this.view,e)&&!this.ignoreDuringComposition(e)&&("keydown"==e.type&&this.keydown(e)||(0!=this.view.updateState?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e)))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let e of n.observers)e(this.view,t);for(let e of n.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=ff(e),n=this.handlers,r=this.view.contentDOM;for(let e in t)if("scroll"!=e){let o=!t[e].handlers.length,i=n[e];i&&o!=!i.handlers.length&&(r.removeEventListener(e,this.handleEvent),i=null),i||r.addEventListener(e,this.handleEvent,{passive:o})}for(let e in n)"scroll"==e||t[e]||r.removeEventListener(e,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=e.keyCode&&mf.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Pu.android&&Pu.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return!Pu.ios||e.synthetic||e.altKey||e.metaKey||!((t=pf.find(t=>t.keyCode==e.keyCode))&&!e.ctrlKey||gf.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(229!=e.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&!("Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,dd(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!(!/^key/.test(e.type)||e.synthetic)&&(this.composing>0||!!(Pu.safari&&!Pu.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function hf(e,t){return(n,r)=>{try{return t.call(e,r,n)}catch(e){Gd(n.state,e)}}}function ff(e){let t=Object.create(null);function n(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let t of e){let e=t.spec,r=e&&e.plugin.domEventHandlers,o=e&&e.plugin.domEventObservers;if(r)for(let e in r){let o=r[e];o&&n(e).handlers.push(hf(t.value,o))}if(o)for(let e in o){let r=o[e];r&&n(e).observers.push(hf(t.value,r))}}for(let e in bf)n(e).handlers.push(bf[e]);for(let e in wf)n(e).observers.push(wf[e]);return t}const pf=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],gf="dthko",mf=[16,17,18,20,91,92,224,225];function yf(e){return.7*Math.max(0,e)+8}class vf{constructor(e,t,n,r){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=function(e){let t,n,r=e.ownerDocument;for(let o=e.parentNode;o&&!(o==r.body||t&&n);)if(1==o.nodeType)!n&&o.scrollHeight>o.clientHeight&&(n=o),!t&&o.scrollWidth>o.clientWidth&&(t=o),o=o.assignedSlot||o.parentNode;else{if(11!=o.nodeType)break;o=o.host}return{x:t,y:n}}(e.contentDOM),this.atoms=e.state.facet(ah).map(t=>t(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Wc.allowMultipleSelections)&&function(e,t){let n=e.state.facet(Dd);return n.length?n[0](t):Pu.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let r=Xu(e.root);if(!r||0==r.rangeCount)return!0;let o=r.getRangeAt(0).getClientRects();for(let e=0;e<o.length;e++){let n=o[e];if(n.left<=t.clientX&&n.right>=t.clientX&&n.top<=t.clientY&&n.bottom>=t.clientY)return!0}return!1}(e,t)||1!=Mf(t))&&null}start(e){!1===this.dragging&&this.select(e)}move(e){if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&(t=this.startEvent,n=e,Math.max(Math.abs(t.clientX-n.clientX),Math.abs(t.clientY-n.clientY))<10))return;var t,n;this.select(this.lastEvent=e);let r=0,o=0,i=0,s=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=dh(this.view);e.clientX-c.left<=i+6?r=-yf(i-e.clientX):e.clientX+c.right>=a-6&&(r=yf(e.clientX-a)),e.clientY-c.top<=s+6?o=-yf(s-e.clientY):e.clientY+c.bottom>=l-6&&(o=yf(e.clientY-l)),this.setScrollSpeed(r,o)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),!1===this.dragging&&this.select(this.lastEvent)}select(e){let{view:t}=this,n=Kh(this.atoms,this.style.get(e,this.extend,this.multiple));!this.mustSelect&&n.eq(t.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}const bf=Object.create(null),wf=Object.create(null),xf=Pu.ie&&Pu.ie_version<15||Pu.ios&&Pu.webkit_version<604;function kf(e,t,n){for(let r of e.facet(t))n=r(n,e);return n}function Sf(e,t){t=kf(e.state,Vd,t);let n,{state:r}=e,o=1,i=r.toText(t),s=i.lines==r.selection.ranges.length;if(null!=Of&&r.selection.ranges.every(e=>e.empty)&&Of==i.toString()){let e=-1;n=r.changeByRange(n=>{let a=r.doc.lineAt(n.from);if(a.from==e)return{range:n};e=a.from;let l=r.toText((s?i.line(o++).text:t)+r.lineBreak);return{changes:{from:a.from,insert:l},range:ic.cursor(n.from+l.length)}})}else n=s?r.changeByRange(e=>{let t=i.line(o++);return{changes:{from:e.from,to:e.to,insert:t.text},range:ic.cursor(e.from+t.length)}}):r.replaceSelection(i);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function Ef(e,t,n,r){if(1==r)return ic.cursor(t,n);if(2==r)return function(e,t,n=1){let r=e.charCategorizer(t),o=e.doc.lineAt(t),i=t-o.from;if(0==o.length)return ic.cursor(t);0==i?n=1:i==o.length&&(n=-1);let s=i,a=i;n<0?s=Kl(o.text,i,!1):a=Kl(o.text,i);let l=r(o.text.slice(s,a));for(;s>0;){let e=Kl(o.text,s,!1);if(r(o.text.slice(e,s))!=l)break;s=e}for(;a<o.length;){let e=Kl(o.text,a);if(r(o.text.slice(a,e))!=l)break;a=e}return ic.range(s+o.from,a+o.from)}(e.state,t,n);{let r=e.docView.lineAt(t,n),o=e.state.doc.lineAt(r?r.posAtEnd:t),i=r?r.posAtStart:o.from,s=r?r.posAtEnd:o.to;return s<e.state.doc.length&&s==o.to&&s++,ic.range(i,s)}}wf.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},bf.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),wf.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},wf.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},bf.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of e.state.facet(Rd))if(n=r(e,t),n)break;if(n||0!=t.button||(n=function(e,t){let n=e.posAndSideAtCoords({x:t.clientX,y:t.clientY},!1),r=Mf(t),o=e.state.selection;return{update(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),o=o.map(e.changes))},get(t,i,s){let a,l=e.posAndSideAtCoords({x:t.clientX,y:t.clientY},!1),c=Ef(e,l.pos,l.assoc,r);if(n.pos!=l.pos&&!i){let t=Ef(e,n.pos,n.assoc,r),o=Math.min(t.from,c.from),i=Math.max(t.to,c.to);c=o<c.from?ic.range(o,i):ic.range(i,o)}return i?o.replaceRange(o.main.extend(c.from,c.to)):s&&1==r&&o.ranges.length>1&&(a=function(e,t){for(let n=0;n<e.ranges.length;n++){let{from:r,to:o}=e.ranges[n];if(r<=t&&o>=t)return ic.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}return null}(o,l.pos))?a:s?o.addRange(c):ic.create([c])}}}(e,t)),n){let r=!e.hasFocus;e.inputState.startMouseSelection(new vf(e,t,n,r)),r&&e.observer.ignore(()=>{cd(e.contentDOM);let t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()});let o=e.inputState.mouseSelection;if(o)return o.start(t),!1===o.dragging}else e.inputState.setSelectionOrigin("select.pointer");return!1};const Cf=Pu.ie&&Pu.ie_version<=11;let Nf=null,Af=0,_f=0;function Mf(e){if(!Cf)return e.detail;let t=Nf,n=_f;return Nf=e,_f=Date.now(),Af=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(Af+1)%3:1}function Tf(e,t,n,r){if(!(n=kf(e.state,Vd,n)))return;let o=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:i}=e.inputState,s=r&&i&&function(e,t){let n=e.state.facet(Ld);return n.length?n[0](t):Pu.mac?!t.altKey:!t.ctrlKey}(e,t)?{from:i.from,to:i.to}:null,a={from:o,insert:n},l=e.state.changes(s?[s,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(o,-1),head:l.mapPos(o,1)},userEvent:s?"move.drop":"input.drop"}),e.inputState.draggedContent=null}bf.dragstart=(e,t)=>{let{selection:{main:n}}=e.state;if(t.target.draggable){let r=e.docView.tile.nearest(t.target);if(r&&r.isWidget()){let e=r.posAtStart,t=e+r.length;(e>=n.to||t<=n.from)&&(n=ic.range(e,t))}}let{inputState:r}=e;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,t.dataTransfer&&(t.dataTransfer.setData("Text",kf(e.state,Fd,e.state.sliceDoc(n.from,n.to))),t.dataTransfer.effectAllowed="copyMove"),!1},bf.dragend=e=>(e.inputState.draggedContent=null,!1),bf.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let n=t.dataTransfer.files;if(n&&n.length){let r=Array(n.length),o=0,i=()=>{++o==n.length&&Tf(e,t,r.filter(e=>null!=e).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=i,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),i()},t.readAsText(n[e])}return!0}{let n=t.dataTransfer.getData("Text");if(n)return Tf(e,t,n,!0),!0}return!1},bf.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let n=xf?null:t.clipboardData;return n?(Sf(e,n.getData("text/plain")||n.getData("text/uri-list")),!0):(function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{e.focus(),n.remove(),Sf(e,n.value)},50)}(e),!1)};let Of=null;bf.copy=bf.cut=(e,t)=>{let n=Xu(e.root);if(n&&!Gu(e.contentDOM,n))return!1;let{text:r,ranges:o,linewise:i}=function(e){let t=[],n=[],r=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),n.push(r));if(!t.length){let o=-1;for(let{from:r}of e.selection.ranges){let i=e.doc.lineAt(r);i.number>o&&(t.push(i.text),n.push({from:i.from,to:Math.min(e.doc.length,i.to+1)})),o=i.number}r=!0}return{text:kf(e,Fd,t.join(e.lineBreak)),ranges:n,linewise:r}}(e.state);if(!r&&!i)return!1;Of=i?r:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:o,scrollIntoView:!0,userEvent:"delete.cut"});let s=xf?null:t.clipboardData;return s?(s.clearData(),s.setData("text/plain",r),!0):(function(e,t){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout(()=>{r.remove(),e.focus()},50)}(e,r),!1)};const jf=Oc.define();function Pf(e,t){let n=[];for(let r of e.facet(qd)){let o=r(e,t);o&&n.push(o)}return n.length?e.update({effects:n,annotations:jf.of(!0)}):null}function If(e){setTimeout(()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let n=Pf(e.state,t);n?e.dispatch(n):e.update([])}},10)}wf.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),If(e)},wf.blur=e=>{e.observer.clearSelectionRange(),If(e)},wf.compositionstart=wf.compositionupdate=e=>{e.observer.editContext||(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},wf.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,Pu.chrome&&Pu.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then(()=>e.observer.flush()):setTimeout(()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])},50))},wf.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},bf.beforeinput=(e,t)=>{var n,r;if("insertText"!=t.inputType&&"insertCompositionText"!=t.inputType||(e.inputState.insertingText=t.data,e.inputState.insertingTextAt=Date.now()),"insertReplacementText"==t.inputType&&e.observer.editContext){let r=null===(n=t.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),o=t.getTargetRanges();if(r&&o.length){let t=o[0],n=e.posAtDOM(t.startContainer,t.startOffset),i=e.posAtDOM(t.endContainer,t.endOffset);return lf(e,{from:n,to:i,insert:e.state.toText(r)},null),!0}}let o;if(Pu.chrome&&Pu.android&&(o=pf.find(e=>e.inputType==t.inputType))&&(e.observer.delayAndroidKey(o.key,o.keyCode),"Backspace"==o.key||"Delete"==o.key)){let t=(null===(r=window.visualViewport)||void 0===r?void 0:r.height)||0;setTimeout(()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}return Pu.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),Pu.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout(()=>wf.compositionend(e,t),20),!1};const Df=new Set,Lf=["pre-wrap","normal","pre-line","break-spaces"];let Rf=!1;function Bf(){Rf=!1}class $f{constructor(e){this.lineWrapping=e,this.doc=Rl.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Lf.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,n,r,o,i){let s=Lf.indexOf(e)>-1,a=Math.abs(t-this.lineHeight)>.3||this.lineWrapping!=s||Math.abs(n-this.charWidth)>.1;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=n,this.textHeight=r,this.lineLength=o,a){this.heightSamples={};for(let e=0;e<i.length;e++){let t=i[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return a}}class zf{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class qf{constructor(e,t,n,r,o){this.from=e,this.length=t,this.top=n,this.height=r,this._content=o}get type(){return"number"==typeof this._content?zu.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Hu?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new qf(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Vf=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(Vf||(Vf={}));const Ff=.001;class Hf{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Ff&&(Rf=!0),this.height=e)}replace(e,t,n){return Hf.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let o=this,i=n.doc;for(let s=r.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:u}=r[s],d=o.lineAt(a,Vf.ByPosNoHeight,n.setDoc(t),0,0),h=d.to>=l?d:o.lineAt(l,Vf.ByPosNoHeight,n,0,0);for(u+=h.to-l,l=h.to;s>0&&d.from<=r[s-1].toA;)a=r[s-1].fromA,c=r[s-1].fromB,s--,a<d.from&&(d=o.lineAt(a,Vf.ByPosNoHeight,n,0,0));c+=d.from-a,a=d.from;let f=Qf.build(n.setDoc(i),e,c,u);o=Wf(o,o.replace(a,l,f))}return o.updateHeight(n,0)}static empty(){return new Xf(0,0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,r=0,o=0;for(;;)if(t==n)if(r>2*o){let o=e[t-1];o.break?e.splice(--t,1,o.left,null,o.right):e.splice(--t,1,o.left,o.right),n+=1+o.break,r-=o.size}else{if(!(o>2*r))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,o-=t.size}}else if(r<o){let n=e[t++];n&&(r+=n.size)}else{let t=e[--n];t&&(o+=t.size)}let i=0;return null==e[t-1]?(i=1,t--):null==e[t]&&(i=1,n++),new Gf(Hf.of(e.slice(0,t)),i,Hf.of(e.slice(n)))}}function Wf(e,t){return e==t?e:(e.constructor!=t.constructor&&(Rf=!0),t)}Hf.prototype.size=1;const Uf=qu.replace({});class Kf extends Hf{constructor(e,t,n){super(e,t),this.deco=n,this.spaceAbove=0}mainBlock(e,t){return new qf(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,t,n,r){return this.spaceAbove&&e<n+this.spaceAbove?new qf(r,0,n,this.spaceAbove,Uf):this.mainBlock(n,r)}lineAt(e,t,n,r,o){let i=this.mainBlock(r,o);return this.spaceAbove?this.blockAt(0,n,r,o).join(i):i}forEachLine(e,t,n,r,o,i){e<=o+this.length&&t>=o&&i(this.lineAt(0,Vf.ByPos,n,r,o))}setMeasuredHeight(e){let t=e.heights[e.index++];t<0?(this.spaceAbove=-t,t=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(t)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setMeasuredHeight(r),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Xf extends Kf{constructor(e,t,n){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=n}mainBlock(e,t){return new qf(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,t,n){let r=n[0];return 1==n.length&&(r instanceof Xf||r instanceof Yf&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof Yf?r=new Xf(r.length,this.height,this.spaceAbove):r.height=this.height,this.outdated||(r.outdated=!1),r):Hf.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setMeasuredHeight(r):(n||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Yf extends Hf{constructor(e){super(e,0)}heightMetrics(e,t){let n,r=e.doc.lineAt(t).number,o=e.doc.lineAt(t+this.length).number,i=o-r+1,s=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*i);n=t/i,this.length>i+1&&(s=(this.height-t)/(this.length-i-1))}else n=this.height/i;return{firstLine:r,lastLine:o,perLine:n,perChar:s}}blockAt(e,t,n,r){let{firstLine:o,lastLine:i,perLine:s,perChar:a}=this.heightMetrics(t,r);if(t.lineWrapping){let o=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),i=t.doc.lineAt(o),l=s+i.length*a,c=Math.max(n,e-l/2);return new qf(i.from,i.length,c,l,0)}{let r=Math.max(0,Math.min(i-o,Math.floor((e-n)/s))),{from:a,length:l}=t.doc.line(o+r);return new qf(a,l,n+s*r,s,0)}}lineAt(e,t,n,r,o){if(t==Vf.ByHeight)return this.blockAt(e,n,r,o);if(t==Vf.ByPosNoHeight){let{from:t,to:r}=n.doc.lineAt(e);return new qf(t,r-t,0,0,0)}let{firstLine:i,perLine:s,perChar:a}=this.heightMetrics(n,o),l=n.doc.lineAt(e),c=s+l.length*a,u=l.number-i,d=r+s*u+a*(l.from-o-u);return new qf(l.from,l.length,Math.max(r,Math.min(d,r+this.height-c)),c,0)}forEachLine(e,t,n,r,o,i){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,o);for(let c=e,u=r;c<=t;){let t=n.doc.lineAt(c);if(c==e){let n=t.number-s;u+=a*n+l*(e-o-n)}let r=a+l*t.length;i(new qf(t.from,t.length,u,r,0)),u+=r,c=t.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let e=n[n.length-1];e instanceof Yf?n[n.length-1]=new Yf(e.length+r):n.push(null,new Yf(r-1))}if(e>0){let t=n[0];t instanceof Yf?n[0]=new Yf(e+t.length):n.unshift(new Yf(e-1),null)}return Hf.of(n)}decomposeLeft(e,t){t.push(new Yf(e-1),null)}decomposeRight(e,t){t.push(null,new Yf(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let o=t+this.length;if(r&&r.from<=t+this.length&&r.more){let n=[],i=Math.max(t,r.from),s=-1;for(r.from>t&&n.push(new Yf(r.from-t-1).updateHeight(e,t));i<=o&&r.more;){let t=e.doc.lineAt(i).length;n.length&&n.push(null);let o=r.heights[r.index++],a=0;o<0&&(a=-o,o=r.heights[r.index++]),-1==s?s=o:Math.abs(o-s)>=Ff&&(s=-2);let l=new Xf(t,o,a);l.outdated=!1,n.push(l),i+=t+1}i<=o&&n.push(null,new Yf(o-i).updateHeight(e,i));let a=Hf.of(n);return(s<0||Math.abs(a.height-this.height)>=Ff||Math.abs(s-this.heightMetrics(e,t).perLine)>=Ff)&&(Rf=!0),Wf(this,a)}return(n||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class Gf extends Hf{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,r){let o=n+this.left.height;return e<o?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,o,r+this.left.length+this.break)}lineAt(e,t,n,r,o){let i=r+this.left.height,s=o+this.left.length+this.break,a=t==Vf.ByHeight?e<i:e<s,l=a?this.left.lineAt(e,t,n,r,o):this.right.lineAt(e,t,n,i,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=t==Vf.ByPosNoHeight?Vf.ByPosNoHeight:Vf.ByPos;return a?l.join(this.right.lineAt(s,c,n,i,s)):this.left.lineAt(s,c,n,r,o).join(l)}forEachLine(e,t,n,r,o,i){let s=r+this.left.height,a=o+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,r,o,i),t>=a&&this.right.forEachLine(e,t,n,s,a,i);else{let l=this.lineAt(a,Vf.ByPos,n,r,o);e<l.from&&this.left.forEachLine(e,l.from-1,n,r,o,i),l.to>=e&&l.from<=t&&i(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,s,a,i)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let o=[];e>0&&this.decomposeLeft(e,o);let i=o.length;for(let e of n)o.push(e);if(e>0&&Zf(o,i-1),t<this.length){let e=o.length;this.decomposeRight(t,o),Zf(o,e)}return Hf.of(o)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Hf.of(this.break?[e,null,t]:[e,t]):(this.left=Wf(this.left,e),this.right=Wf(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:o,right:i}=this,s=t+o.length+this.break,a=null;return r&&r.from<=t+o.length&&r.more?a=o=o.updateHeight(e,t,n,r):o.updateHeight(e,t,n),r&&r.from<=s+i.length&&r.more?a=i=i.updateHeight(e,s,n,r):i.updateHeight(e,s,n),a?this.balanced(o,i):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Zf(e,t){let n,r;null==e[t]&&(n=e[t-1])instanceof Yf&&(r=e[t+1])instanceof Yf&&e.splice(t-1,3,new Yf(n.length+1+r.length))}class Qf{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Xf?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new Xf(e-this.pos,-1,0)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0,o=n.widget?n.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let i=t-e;n.block?this.addBlock(new Kf(i,r,n)):(i||o||r>=5)&&this.addLineDeco(r,o,i)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Xf(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,t){let n=new Yf(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Xf)return e;let t=new Xf(0,-1,0);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof Xf||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Xf(0,-1,0));let n=e;for(let e of this.nodes)e instanceof Xf&&e.updateHeight(this.oracle,n),n+=e?e.length:1;return this.nodes}static build(e,t,n,r){let o=new Qf(n,e);return Zc.spans(t,n,r,o,0),o.finish(n)}}class Jf{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&Uu(e,t,this.changes,5)}}function ep(e,t){let n=e.getBoundingClientRect(),r=e.ownerDocument,o=r.defaultView||window,i=Math.max(0,n.left),s=Math.min(o.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(o.innerHeight,n.bottom);for(let t=e.parentNode;t&&t!=r.body;)if(1==t.nodeType){let n=t,r=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=r.overflow){let r=n.getBoundingClientRect();i=Math.max(i,r.left),s=Math.min(s,r.right),a=Math.max(a,r.top),l=Math.min(t==e.parentNode?o.innerHeight:l,r.bottom)}t="absolute"==r.position||"fixed"==r.position?n.offsetParent:n.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:i-n.left,right:Math.max(i,s)-n.left,top:a-(n.top+t),bottom:Math.max(a,l)-(n.top+t)}}function tp(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class np{constructor(e,t,n,r){this.from=e,this.to=t,this.size=n,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],o=t[n];if(r.from!=o.from||r.to!=o.to||r.size!=o.size)return!1}return!0}draw(e,t){return qu.replace({widget:new rp(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class rp extends $u{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class op{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=lp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=md.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(rh).some(e=>"function"!=typeof e&&"cm-lineWrapping"==e.class);this.heightOracle=new $f(t),this.stateDeco=cp(e),this.heightMap=Hf.empty().applyChanges(this.stateDeco,Rl.empty,this.heightOracle.setDoc(e.doc),[new fh(0,0,0,e.doc.length)]);for(let e=0;e<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());e++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=qu.set(this.lineGaps.map(e=>e.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some(({from:e,to:t})=>r>=e&&r<=t)){let{from:t,to:n}=this.lineBlockAt(r);e.push(new ip(t,n))}}return this.viewports=e.sort((e,t)=>e.from-t.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?lp:new up(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(dp(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=cp(this.state);let r=e.changedRanges,o=fh.extendWithRanges(r,function(e,t,n){let r=new Jf;return Zc.compare(e,t,n,r,0),r.changes}(n,this.stateDeco,e?e.changes:Zl.empty(this.state.doc.length))),i=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Bf(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=i||Rf)&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=i);let a=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(l||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Wd)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,o=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?md.RTL:md.LTR;let i=this.heightOracle.mustRefreshForWrapping(o)||this.mustMeasureContent,s=t.getBoundingClientRect(),a=i||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let l=0,c=0;if(s.width&&s.height){let{scaleX:e,scaleY:n}=id(t,s);(e>.005&&Math.abs(this.scaleX-e)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=e,this.scaleY=n,l|=16,i=a=!0)}let u=(parseInt(n.paddingTop)||0)*this.scaleY,d=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==u&&this.paddingBottom==d||(this.paddingTop=u,this.paddingBottom=d,l|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=16);let h=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=h&&(this.scrollAnchorHeight=-1,this.scrollTop=h),this.scrolledToBottom=hd(e.scrollDOM);let f=(this.printing?tp:ep)(t,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!function(e){let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView||window;return t.left<n.innerWidth&&t.right>0&&t.top<n.innerHeight&&t.bottom>0}(e.dom))return 0;let y=s.width;if(this.contentDOMWidth==y&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,l|=16),a){let t=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(t)&&(i=!0),i||r.lineWrapping&&Math.abs(y-this.contentDOMWidth)>r.charWidth){let{lineHeight:n,charWidth:s,textHeight:a}=e.docView.measureTextSize();i=n>0&&r.refresh(o,n,s,a,Math.max(5,y/s),t),i&&(e.docView.minWidth=0,l|=16)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),Bf();for(let n of this.viewports){let o=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=(i?Hf.empty().applyChanges(this.stateDeco,Rl.empty,this.heightOracle,[new fh(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,i,new zf(n.from,o))}Rf&&(l|=2)}let v=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),l|=this.updateForViewport()),(2&l||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(i?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,o=this.heightOracle,{visibleTop:i,visibleBottom:s}=this,a=new ip(r.lineAt(i-1e3*n,Vf.ByHeight,o,0,0).from,r.lineAt(s+1e3*(1-n),Vf.ByHeight,o,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let n,i=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=r.lineAt(e,Vf.ByPos,o,0,0);n="center"==t.y?(s.top+s.bottom)/2-i/2:"start"==t.y||"nearest"==t.y&&e<a.from?s.top:s.bottom-i,a=new ip(r.lineAt(n-500,Vf.ByHeight,o,0,0).from,r.lineAt(n+i+500,Vf.ByHeight,o,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new ip(this.heightMap.lineAt(n,Vf.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Vf.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Vf.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,Vf.ByPos,this.heightOracle,0,0),{visibleTop:i,visibleBottom:s}=this;return(0==e||r<=i-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||o>=s+Math.max(10,Math.min(n,250)))&&r>i-2e3&&o<s+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new np(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,o=r>>1,i=r<<1;if(this.defaultTextDirection!=md.LTR&&!n)return[];let s=[],a=(r,i,l,c)=>{if(i-r<o)return;let u=this.state.selection.main,d=[u.from];u.empty||d.push(u.to);for(let e of d)if(e>r&&e<i)return a(r,e-10,l,c),void a(e+10,i,l,c);let h=function(e,t){for(let n of e)if(t(n))return n}(e,e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-r)<o&&Math.abs(e.to-i)<o&&!d.some(t=>e.from<t&&e.to>t));if(!h){if(i<l.to&&t&&n&&t.visibleRanges.some(e=>e.from<=i&&e.to>=i)){let e=t.moveToLineBoundary(ic.cursor(i),!1,!0).head;e>r&&(i=e)}let e=this.gapSize(l,r,i,c);h=new np(r,i,e,n||e<2e6?e:2e6)}s.push(h)},l=t=>{if(t.length<i||t.type!=zu.Text)return;let o=function(e,t,n){let r=[],o=e,i=0;return Zc.spans(n,e,t,{span(){},point(e,t){e>o&&(r.push({from:o,to:e}),i+=e-o),o=t}},20),o<t&&(r.push({from:o,to:t}),i+=t-o),{total:i,ranges:r}}(t.from,t.to,this.stateDeco);if(o.total<i)return;let s,l,c=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let e,n,i=r/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=c){let r=ap(o,c),s=((this.visibleBottom-this.visibleTop)/2+i)/t.height;e=r-s,n=r+s}else e=(this.visibleTop-t.top-i)/t.height,n=(this.visibleBottom-t.top+i)/t.height;s=sp(o,e),l=sp(o,n)}else{let n=o.total*this.heightOracle.charWidth,i=r*this.heightOracle.charWidth,a=0;if(n>2e6)for(let n of e)n.from>=t.from&&n.from<t.to&&n.size!=n.displaySize&&n.from*this.heightOracle.charWidth+a<this.pixelViewport.left&&(a=n.size-n.displaySize);let u,d,h=this.pixelViewport.left+a,f=this.pixelViewport.right+a;if(null!=c){let e=ap(o,c),t=((f-h)/2+i)/n;u=e-t,d=e+t}else u=(h-i)/n,d=(f+i)/n;s=sp(o,u),l=sp(o,d)}s>t.from&&a(t.from,s,t,o),l<t.to&&a(l,t.to,t,o)};for(let e of this.viewportLines)Array.isArray(e.type)?e.type.forEach(l):l(e);return s}gapSize(e,t,n,r){let o=ap(r,n)-ap(r,t);return this.heightOracle.lineWrapping?e.height*o:r.total*this.heightOracle.charWidth*o}updateLineGaps(e){np.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=qu.set(e.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];Zc.spans(t,this.viewport.from,this.viewport.to,{span(e,t){n.push({from:e,to:t})},point(){}},20);let r=0;if(n.length!=this.visibleRanges.length)r=12;else for(let t=0;t<n.length&&!(8&r);t++){let o=this.visibleRanges[t],i=n[t];o.from==i.from&&o.to==i.to||(r|=4,e&&e.mapPos(o.from,-1)==i.from&&e.mapPos(o.to,1)==i.to||(r|=8))}return this.visibleRanges=n,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||dp(this.heightMap.lineAt(e,Vf.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||dp(this.heightMap.lineAt(this.scaler.fromDOM(e),Vf.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return dp(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ip{constructor(e,t){this.from=e,this.to=t}}function sp({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let r=Math.floor(e*n);for(let e=0;;e++){let{from:n,to:o}=t[e],i=o-n;if(r<=i)return n+r;r-=i}}function ap(e,t){let n=0;for(let{from:r,to:o}of e.ranges){if(t<=o){n+=t-r;break}n+=o-r}return n/e.total}const lp={toDOM:e=>e,fromDOM:e=>e,scale:1,eq(e){return e==this}};function cp(e){let t=e.facet(oh).filter(e=>"function"!=typeof e),n=e.facet(sh).filter(e=>"function"!=typeof e);return n.length&&t.push(Zc.join(n)),t}class up{constructor(e,t,n){let r=0,o=0,i=0;this.viewports=n.map(({from:n,to:o})=>{let i=t.lineAt(n,Vf.ByPos,e,0,0).top,s=t.lineAt(o,Vf.ByPos,e,0,0).bottom;return r+=s-i,{from:n,to:o,top:i,bottom:s,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let e of this.viewports)e.domTop=i+(e.top-o)*this.scale,i=e.domBottom=e.domTop+(e.bottom-e.top),o=e.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return r+(e-n)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);n=o.bottom,r=o.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return n+(e-r)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);n=o.bottom,r=o.domBottom}}eq(e){return e instanceof up&&this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to)}}function dp(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new qf(e.from,e.length,n,r-n,Array.isArray(e._content)?e._content.map(e=>dp(e,t)):e._content)}const hp=lc.define({combine:e=>e.join(" ")}),fp=lc.define({combine:e=>e.indexOf(!0)>-1}),pp=fu.newName(),gp=fu.newName(),mp=fu.newName(),yp={"&light":"."+gp,"&dark":"."+mp};function vp(e,t,n){return new fu(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError(`Unsupported selector: ${t}`);return n[t]}):e+" "+t})}const bp=vp("."+pp,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},yp),wp={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},xp=Pu.ie&&Pu.ie_version<=11;class kp{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new sd,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let e of t)this.queue.push(e);(Pu.ie&&Pu.ie_version<=11||Pu.ios&&e.composing)&&t.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),!window.EditContext||!Pu.android||!1===e.constructor.EDIT_CONTEXT||Pu.chrome&&Pu.chrome_version<126||(this.editContext=new Cp(e),e.state.facet(Zd)&&(e.contentDOM.editContext=this.editContext.editContext)),xp&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){("change"!=e.type&&e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(Zd)?n.root.activeElement!=this.dom:!Gu(this.dom,r))return;let o=r.anchorNode&&n.docView.tile.nearest(r.anchorNode);o&&o.isWidget()&&o.widget.ignoreEvent(e)?t||(this.selectionChanged=!1):(Pu.ie&&Pu.ie_version<=11||Pu.android&&Pu.chrome)&&!n.state.selection.main.empty&&r.focusNode&&Qu(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Xu(e.root);if(!t)return!1;let n=Pu.safari&&11==e.root.nodeType&&e.root.activeElement==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return Ep(e,n)}let n=null;function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",r,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",r,!0),n?Ep(e,n):null}(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let r=Gu(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let n=t.focusNode,r=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=r)return!1;for(r=Math.min(r,nd(n));;)if(r){if(1!=n.nodeType)return!1;let e=n.childNodes[r-1];"false"==e.contentEditable?r--:(n=e,r=nd(n))}else{if(n==e)return!0;r=Ju(n),n=n.parentNode}}(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,wp),xp&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),xp&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;e&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&dd(this.dom,e.key,e.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let o of e){let e=this.readMutation(o);e&&(e.typeOver&&(r=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:r}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),r=this.selectionChanged&&Gu(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new of(this.view,e,t,n);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,r=af(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!uf(this.view.state.selection,t.newSel.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.tile.nearest(e.target);if(!t||t.isWidget())return null;if(t.markDirty("attributes"==e.type),"childList"==e.type){let n=Sp(t,e.previousSibling||e.target.previousSibling,-1),r=Sp(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Zd)!=e.state.facet(Zd)&&(e.view.contentDOM.editContext=e.state.facet(Zd)?this.editContext.editContext:null))}destroy(){var e,t,n;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Sp(e,t,n){for(;t;){let r=mh.get(t);if(r&&r.parent==e)return r;let o=t.parentNode;t=o!=e.dom?o:n>0?t.nextSibling:t.previousSibling}return null}function Ep(e,t){let n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,s=e.docView.domAtPos(e.state.selection.main.anchor,1);return Qu(s.node,s.offset,o,i)&&([n,r,o,i]=[o,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}class Cp{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let r=e.state.selection.main,{anchor:o,head:i}=r,s=this.toEditorPos(n.updateRangeStart),a=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:s,drifted:!1});let l=a-s>n.text.length;s==this.from&&o<this.from?s=o:a==this.to&&o>this.to&&(a=o);let c=cf(e.state.sliceDoc(s,a),n.text,(l?r.from:r.to)-s,l?"end":null);if(!c){let t=ic.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));return void(uf(t,r)||e.dispatch({selection:t,userEvent:"select"}))}let u={from:c.from+s,to:c.toA+s,insert:Rl.of(n.text.slice(c.from,c.toB).split("\n"))};if((Pu.mac||Pu.android)&&u.from==i-1&&/^\. ?$/.test(n.text)&&"off"==e.contentDOM.getAttribute("autocorrect")&&(u={from:s,to:a,insert:Rl.of([n.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let t=this.to-this.from+(u.to-u.from+u.insert.length);lf(e,u,ic.single(this.toEditorPos(n.selectionStart,t),this.toEditorPos(n.selectionEnd,t)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),u.from<u.to&&!u.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,n.updateRangeStart-1),Math.min(t.text.length,n.updateRangeStart+1)))&&this.handlers.compositionend(n)},this.handlers.characterboundsupdate=n=>{let r=[],o=null;for(let t=this.toEditorPos(n.rangeStart),i=this.toEditorPos(n.rangeEnd);t<i;t++){let n=e.coordsForChar(t);o=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||o||new DOMRect,r.push(o)}t.updateCharacterBounds(n.rangeStart,r)},this.handlers.textformatupdate=t=>{let n=[];for(let e of t.getTextFormats()){let t=e.underlineStyle,r=e.underlineThickness;if(!/none/i.test(t)&&!/none/i.test(r)){let o=this.toEditorPos(e.rangeStart),i=this.toEditorPos(e.rangeEnd);if(o<i){let e=`text-decoration: underline ${/^[a-z]/.test(t)?t+" ":"Dashed"==t?"dashed ":"Squiggle"==t?"wavy ":""}${/thin/i.test(r)?1:2}px`;n.push(qu.mark({attributes:{style:e}}).range(o,i))}}}e.dispatch({effects:Yd.of(qu.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:t}=this.composing;this.composing=null,t&&this.reset(e.state)}};for(let e in this.handlers)t.addEventListener(e,this.handlers[e]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let t=Xu(e.root);t&&t.rangeCount&&this.editContext.updateSelectionBounds(t.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,r=this.pendingContextChange;return e.changes.iterChanges((o,i,s,a,l)=>{if(n)return;let c=l.length-(i-o);if(r&&i>=r.to){if(r.from==o&&r.to==i&&r.insert.eq(l))return r=this.pendingContextChange=null,t+=c,void(this.to+=c);r=null,this.revertPending(e.state)}if(o+=t,(i+=t)<=this.from)this.from+=c,this.to+=c;else if(o<this.to){if(o<this.from||i>this.to||this.to-this.from+l.length>3e4)return void(n=!0);this.editContext.updateText(this.toContextPos(o),this.toContextPos(i),l.toString()),this.to+=c}t+=c}),r&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange,n=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(n.from,n.to)&&e.transactions.some(e=>!e.isUserEvent("input.type")&&e.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state):(this.pendingContextChange=null,this.reset(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==r||this.editContext.updateSelection(n,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Np{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(e=>e.forEach(e=>n(e,this)))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new op(e.state||Wc.create(e)),e.scrollTo&&e.scrollTo.is(Xd)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Jd).map(e=>new th(e));for(let e of this.plugins)e.update(this);this.observer=new kp(this),this.inputState=new df(this),this.inputState.ensureHandlers(this.plugins),this.docView=new $h(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(t=document.fonts)||void 0===t?void 0:t.ready)&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...e){let t=1==e.length&&e[0]instanceof Dc?e:1==e.length&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,r=!1,o=this.state;for(let t of e){if(t.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=t.state}if(this.destroyed)return void(this.viewState.state=o);let i=this.hasFocus,s=0,a=null;e.some(e=>e.annotation(jf))?(this.inputState.notifiedFocused=i,s=1):i!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=i,a=Pf(o,i),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(c=null)):this.observer.clear(),o.facet(Wc.phrases)!=this.state.facet(Wc.phrases))return this.setState(o);t=ph.create(this,o,e),t.flags|=s;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(u&&(u=u.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;u=new Kd(e.empty?e:ic.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(Xd)&&(u=e.value.clip(this.state))}this.viewState.update(t,u),this.bidiCache=Mp.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(hh)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(e=>e.isUserEvent("select.pointer")))}finally{this.updateState=0}if(t.startState.facet(hp)!=t.state.facet(hp)&&(this.viewState.mustMeasureContent=!0),(n||r||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!t.empty)for(let e of this.state.facet($d))try{e(t)}catch(e){Gd(this.state,e,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!af(this,c)&&l.force&&dd(this.contentDOM,l.key,l.keyCode)})}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new op(e),this.plugins=e.facet(Jd).map(e=>new th(e)),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView.destroy(),this.docView=new $h(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Jd),n=e.state.facet(Jd);if(t!=n){let r=[];for(let o of n){let n=t.indexOf(o);if(n<0)r.push(new th(o));else{let t=this.plugins[n];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(e){Gd(this.state,e,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,r=n.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:i}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(i=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(i<0)if(hd(n))o=-1,i=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(r);o=e.from,i=e.top}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&s||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map(e=>{try{return e.read(this)}catch(e){return Gd(this.state,e),_p}}),c=ph.create(this,this.state,[]),u=!1;c.flags|=s,t?t.flags|=s:t=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),u=this.docView.update(c),u&&this.docViewUpdate());for(let e=0;e<a.length;e++)if(l[e]!=_p)try{let t=a[e];t.write&&t.write(l[e],this)}catch(e){Gd(this.state,e)}if(u&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,i=-1;continue}{let e=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-i;if(e>1||e<-1){r+=e,n.scrollTop=r/this.scaleY,i=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet($d))e(t)}get themeClasses(){return pp+" "+(this.state.facet(fp)?mp:gp)+" "+this.state.facet(hp)}updateAttrs(){let e=Tp(this,nh,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Zd)?"true":"false",class:"cm-content",style:`${Pu.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Tp(this,rh,t);let n=this.observer.ignore(()=>{let n=Ru(this.contentDOM,this.contentAttrs,t),r=Ru(this.dom,this.editorAttrs,e);return n||r});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)e.is(Np.announce)&&(t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value)}mountStyles(){this.styleModules=this.state.facet(hh);let e=this.state.facet(Np.cspNonce);fu.mount(this.root,this.styleModules.concat(bp).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(t=>t.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return Xh(this,e,Wh(this,e,t,n))}moveByGroup(e,t){return Xh(this,e,Wh(this,e,t,t=>function(e,t,n){let r=e.state.charCategorizer(t),o=r(n);return e=>{let t=r(e);return o==Vc.Space&&(o=t),o==t}}(this,e.head,t)))}visualLineSide(e,t){let n=this.bidiSpans(e),r=this.textDirectionAt(e.from),o=n[t?n.length-1:0];return ic.cursor(o.side(t,r)+e.from,o.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,n=!0){return function(e,t,n,r){let o=function(e,t,n){let r=e.lineBlockAt(t);if(Array.isArray(r.type)){let e;for(let o of r.type){if(o.from>t)break;if(!(o.to<t)){if(o.from<t&&o.to>t)return o;e&&(o.type!=zu.Text||e.type==o.type&&!(n<0?o.from<t:o.to>t))||(e=o)}}return e||r}return r}(e,t.head,t.assoc||-1),i=r&&o.type==zu.Text&&(e.lineWrapping||o.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>o.from?t.head-1:t.head):null;if(i){let t=e.dom.getBoundingClientRect(),r=e.textDirectionAt(o.from),s=e.posAtCoords({x:n==(r==md.LTR)?t.right-1:t.left+1,y:(i.top+i.bottom)/2});if(null!=s)return ic.cursor(s,n?-1:1)}return ic.cursor(n?o.to:o.from,n?-1:1)}(this,e,t,n)}moveVertically(e,t,n){return Xh(this,e,function(e,t,n,r){let o=t.head,i=n?1:-1;if(o==(n?e.state.doc.length:0))return ic.cursor(o,t.assoc);let s,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(o,(t.empty?t.assoc:0)||(n?1:-1)),u=e.documentTop;if(c)null==a&&(a=c.left-l.left),s=i<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(o);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(o-t.from))),s=(i<0?t.top:t.bottom)+u}let d=Gh(e,{x:l.left+a,y:s+(null!=r?r:e.viewState.heightOracle.textHeight>>1)*i},!1,i);return ic.cursor(d.pos,d.assoc,void 0,a)}(this,e,t,n))}domAtPos(e,t=1){return this.docView.domAtPos(e,t)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){this.readMeasured();let n=Gh(this,e,t);return n&&n.pos}posAndSideAtCoords(e,t=!0){return this.readMeasured(),Gh(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),o=this.bidiSpans(r);return rd(n,o[Nd.find(o,e-r.from,-1,t)].dir==md.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Hd)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Ap)return Od(e.length);let t,n=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==n&&(r.fresh||Ad(r.isolates,t=ch(this,e))))return r.order;t||(t=ch(this,e));let r=function(e,t,n){if(!e)return[new Nd(0,0,t==vd?1:0)];if(t==yd&&!n.length&&!Cd.test(e))return Od(e.length);if(n.length)for(;e.length>_d.length;)_d[_d.length]=256;let r=[],o=t==yd?0:1;return Td(e,o,o,n,0,e.length,r),r}(e.text,n,t);return this.bidiCache.push(new Mp(e.from,e.to,n,t,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Pu.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{cd(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Xd.of(new Kd("number"==typeof e?ic.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return Xd.of(new Kd(ic.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return eh.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return eh.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=fu.newName(),r=[hp.of(n),hh.of(vp(`.${n}`,e))];return t&&t.dark&&r.push(fp.of(!0)),r}static baseTheme(e){return yc.lowest(hh.of(vp("."+pp,e,yp)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&mh.get(n)||mh.get(e);return(null===(t=null==r?void 0:r.root)||void 0===t?void 0:t.view)||null}}Np.styleModule=hh,Np.inputHandler=zd,Np.clipboardInputFilter=Vd,Np.clipboardOutputFilter=Fd,Np.scrollHandler=Ud,Np.focusChangeEffect=qd,Np.perLineTextDirection=Hd,Np.exceptionSink=Bd,Np.updateListener=$d,Np.editable=Zd,Np.mouseSelectionStyle=Rd,Np.dragMovesSelection=Ld,Np.clickAddsSelectionRange=Dd,Np.decorations=oh,Np.blockWrappers=ih,Np.outerDecorations=sh,Np.atomicRanges=ah,Np.bidiIsolatedRanges=lh,Np.scrollMargins=uh,Np.darkTheme=fp,Np.cspNonce=lc.define({combine:e=>e.length?e[0]:""}),Np.contentAttributes=rh,Np.editorAttributes=nh,Np.lineWrapping=Np.contentAttributes.of({class:"cm-lineWrapping"}),Np.announce=Ic.define();const Ap=4096,_p={};class Mp{constructor(e,t,n,r,o,i){this.from=e,this.to=t,this.dir=n,this.isolates=r,this.fresh=o,this.order=i}static update(e,t){if(t.empty&&!e.some(e=>e.fresh))return e;let n=[],r=e.length?e[e.length-1].dir:md.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let i=e[o];i.dir!=r||t.touchesRange(i.from,i.to)||n.push(new Mp(t.mapPos(i.from,1),t.mapPos(i.to,-1),i.dir,i.isolates,!1,i.order))}return n}}function Tp(e,t,n){for(let r=e.state.facet(t),o=r.length-1;o>=0;o--){let t=r[o],i="function"==typeof t?t(e):t;i&&Iu(i,n)}return n}const Op=Pu.mac?"mac":Pu.windows?"win":Pu.linux?"linux":"key";function jp(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const Pp=yc.default(Np.domEventHandlers({keydown:(e,t)=>function(e,t,n,r){Bp=t;let o=function(e){var t=!(vu&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||bu&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?yu:mu)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),i=function(e){return e<65536?1:2}(function(e,t){let n=e.charCodeAt(t);if(!((r=n)>=55296&&r<56320&&t+1!=e.length))return n;var r;let o=e.charCodeAt(t+1);return function(e){return e>=56320&&e<57344}(o)?o-56320+(n-55296<<10)+65536:n}(o,0))==o.length&&" "!=o,s="",a=!1,l=!1,c=!1;Lp&&Lp.view==n&&Lp.scope==r&&(s=Lp.prefix+" ",mf.indexOf(t.keyCode)<0&&(l=!0,Lp=null));let u,d,h=new Set,f=e=>{if(e){for(let t of e.run)if(!h.has(t)&&(h.add(t),t(n)))return e.stopPropagation&&(c=!0),!0;e.preventDefault&&(e.stopPropagation&&(c=!0),l=!0)}return!1},p=e[r];return p&&(f(p[s+jp(o,t,!i)])?a=!0:!i||!(t.altKey||t.metaKey||t.ctrlKey)||Pu.windows&&t.ctrlKey&&t.altKey||Pu.mac&&t.altKey&&!t.ctrlKey&&!t.metaKey||!(u=mu[t.keyCode])||u==o?i&&t.shiftKey&&f(p[s+jp(o,t,!0)])&&(a=!0):(f(p[s+jp(u,t,!0)])||t.shiftKey&&(d=yu[t.keyCode])!=o&&d!=u&&f(p[s+jp(d,t,!1)]))&&(a=!0),!a&&f(p._any)&&(a=!0)),l&&(a=!0),a&&c&&t.stopPropagation(),Bp=null,a}(function(e){let t=e.facet(Ip),n=Dp.get(t);return n||Dp.set(t,n=function(e,t=Op){let n=Object.create(null),r=Object.create(null),o=(e,t)=>{let n=r[e];if(null==n)r[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},i=(e,r,i,s,a)=>{var l,c;let u=n[e]||(n[e]=Object.create(null)),d=r.split(/ (?!$)/).map(e=>function(e,t){const n=e.split(/-(?!$)/);let r,o,i,s,a=n[n.length-1];"Space"==a&&(a=" ");for(let e=0;e<n.length-1;++e){const a=n[e];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))o=!0;else if(/^s(hift)?$/i.test(a))i=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==t?s=!0:o=!0}}return r&&(a="Alt-"+a),o&&(a="Ctrl-"+a),s&&(a="Meta-"+a),i&&(a="Shift-"+a),a}(e,t));for(let t=1;t<d.length;t++){let n=d.slice(0,t).join(" ");o(n,!0),u[n]||(u[n]={preventDefault:!0,stopPropagation:!1,run:[t=>{let r=Lp={view:t,prefix:n,scope:e};return setTimeout(()=>{Lp==r&&(Lp=null)},Rp),!0}]})}let h=d.join(" ");o(h,!1);let f=u[h]||(u[h]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(l=u._any)||void 0===l?void 0:l.run)||void 0===c?void 0:c.slice())||[]});i&&f.run.push(i),s&&(f.preventDefault=!0),a&&(f.stopPropagation=!0)};for(let r of e){let e=r.scope?r.scope.split(" "):["editor"];if(r.any)for(let t of e){let e=n[t]||(n[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:o}=r;for(let t in e)e[t].run.push(e=>o(e,Bp))}let o=r[t]||r.key;if(o)for(let t of e)i(t,o,r.run,r.preventDefault,r.stopPropagation),r.shift&&i(t,"Shift-"+o,r.shift,r.preventDefault,r.stopPropagation)}return n}(t.reduce((e,t)=>e.concat(t),[]))),n}(t.state),e,t,"editor")})),Ip=lc.define({enables:Pp}),Dp=new WeakMap;let Lp=null;const Rp=4e3;let Bp=null;class $p extends Uc{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}$p.prototype.elementClass="",$p.prototype.toDOM=void 0,$p.prototype.mapMode=Yl.TrackBefore,$p.prototype.startSide=$p.prototype.endSide=-1,$p.prototype.point=!0;const zp=1024;let qp=0;class Vp{constructor(e,t){this.from=e,this.to=t}}class Fp{constructor(e={}){this.id=qp++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=Up.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}Fp.closedBy=new Fp({deserialize:e=>e.split(" ")}),Fp.openedBy=new Fp({deserialize:e=>e.split(" ")}),Fp.group=new Fp({deserialize:e=>e.split(" ")}),Fp.isolate=new Fp({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),Fp.contextHash=new Fp({perNode:!0}),Fp.lookAhead=new Fp({perNode:!0}),Fp.mounted=new Fp({perNode:!0});class Hp{constructor(e,t,n,r=!1){this.tree=e,this.overlay=t,this.parser=n,this.bracketed=r}static get(e){return e&&e.props&&e.props[Fp.mounted.id]}}const Wp=Object.create(null);class Up{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):Wp,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new Up(e.name||"",t,e.id,n);if(e.props)for(let n of e.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(Fp.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(Fp.group),r=-1;r<(n?n.length:0);r++){let o=t[r<0?e.name:n[r]];if(o)return o}}}}Up.none=new Up("",Object.create(null),0,8);class Kp{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let t of e){let e=t(n);if(e){r||(r=Object.assign({},n.props));let t=e[1],o=e[0];o.combine&&o.id in r&&(t=o.combine(r[o.id],t)),r[o.id]=t}}t.push(r?new Up(n.name,r,n.id,n.flags):n)}return new Kp(t)}}const Xp=new WeakMap,Yp=new WeakMap;var Gp;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays",e[e.EnterBracketed=16]="EnterBracketed"}(Gp||(Gp={}));class Zp{constructor(e,t,n,r,o){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,o&&o.length){this.props=Object.create(null);for(let[e,t]of o)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=Hp.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let n=e.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new ug(this.topNode,e)}cursorAt(e,t=0,n=0){let r=Xp.get(this)||this.topNode,o=new ug(r);return o.moveTo(e,t),Xp.set(this,o._tree),o}get topNode(){return new rg(this,0,0,null)}resolve(e,t=0){let n=tg(Xp.get(this)||this.topNode,e,t,!1);return Xp.set(this,n),n}resolveInner(e,t=0){let n=tg(Yp.get(this)||this.topNode,e,t,!0);return Yp.set(this,n),n}resolveStack(e,t=0){return function(e,t,n){let r=e.resolveInner(t,n),o=null;for(let e=r instanceof rg?r:r.context.parent;e;e=e.parent)if(e.index<0){let i=e.parent;(o||(o=[r])).push(i.resolve(t,n)),e=i}else{let i=Hp.get(e.tree);if(i&&i.overlay&&i.overlay[0].from<=t&&i.overlay[i.overlay.length-1].to>=t){let s=new rg(i.tree,i.overlay[0].from+e.from,-1,e);(o||(o=[r])).push(tg(s,t,n,!1))}}return o?lg(o):r}(this,e,t)}iterate(e){let{enter:t,leave:n,from:r=0,to:o=this.length}=e,i=e.mode||0,s=(i&Gp.IncludeAnonymous)>0;for(let e=this.cursor(i|Gp.IncludeAnonymous);;){let i=!1;if(e.from<=o&&e.to>=r&&(!s&&e.type.isAnonymous||!1!==t(e))){if(e.firstChild())continue;i=!0}for(;i&&n&&(s||!e.type.isAnonymous)&&n(e),!e.nextSibling();){if(!e.parent())return;i=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:pg(Up.none,this.children,this.positions,0,this.children.length,0,this.length,(e,t,n)=>new Zp(this.type,e,t,n,this.propValues),e.makeTree||((e,t,n)=>new Zp(Up.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:o=zp,reused:i=[],minRepeatType:s=r.types.length}=e,a=Array.isArray(n)?new Qp(n,n.length):n,l=r.types,c=0,u=0;function d(e,t,n,m,y,v){let{id:b,start:w,end:x,size:k}=a,S=u,E=c;if(k<0){if(a.next(),-1==k){let t=i[b];return n.push(t),void m.push(w-e)}if(-3==k)return void(c=b);if(-4==k)return void(u=b);throw new RangeError(`Unrecognized record size: ${k}`)}let C,N,A=l[b],_=w-e;if(x-w<=o&&(N=function(e,t){let n=a.fork(),r=0,i=0,l=0,c=n.end-o,u={size:0,start:0,skip:0};e:for(let o=n.pos-e;n.pos>o;){let e=n.size;if(n.id==t&&e>=0){u.size=r,u.start=i,u.skip=l,l+=4,r+=4,n.next();continue}let a=n.pos-e;if(e<0||a<o||n.start<c)break;let d=n.id>=s?4:0,h=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size&&-4!=n.size)break e;d+=4}else n.id>=s&&(d+=4);n.next()}i=h,r+=e,l+=d}return(t<0||r==e)&&(u.size=r,u.start=i,u.skip=l),u.size>4?u:void 0}(a.pos-t,y))){let t=new Uint16Array(N.size-N.skip),n=a.pos-N.size,o=t.length;for(;a.pos>n;)o=g(N.start,t,o);C=new Jp(t,x-N.start,r),_=N.start-e}else{let e=a.pos-k;a.next();let t=[],n=[],r=b>=s?b:-1,i=0,l=x;for(;a.pos>e;)r>=0&&a.id==r&&a.size>=0?(a.end<=l-o&&(f(t,n,w,i,a.end,l,r,S,E),i=t.length,l=a.end),a.next()):v>2500?h(w,e,t,n):d(w,e,t,n,r,v+1);if(r>=0&&i>0&&i<t.length&&f(t,n,w,i,w,l,r,S,E),t.reverse(),n.reverse(),r>-1&&i>0){let e=function(e,t){return(n,r,o)=>{let i,s,a=0,l=n.length-1;if(l>=0&&(i=n[l])instanceof Zp){if(!l&&i.type==e&&i.length==o)return i;(s=i.prop(Fp.lookAhead))&&(a=r[l]+i.length+s)}return p(e,n,r,o,a,t)}}(A,E);C=pg(A,t,n,0,t.length,0,x-w,e,e)}else C=p(A,t,n,x-w,S-x,E)}n.push(C),m.push(_)}function h(e,t,n,i){let s=[],l=0,c=-1;for(;a.pos>t;){let{id:e,start:t,end:n,size:r}=a;if(r>4)a.next();else{if(c>-1&&t<c)break;c<0&&(c=n-o),s.push(e,t,n),l++,a.next()}}if(l){let t=new Uint16Array(4*l),o=s[s.length-2];for(let e=s.length-3,n=0;e>=0;e-=3)t[n++]=s[e],t[n++]=s[e+1]-o,t[n++]=s[e+2]-o,t[n++]=n;n.push(new Jp(t,s[2]-o,r)),i.push(o-e)}}function f(e,t,n,o,i,s,a,l,c){let u=[],d=[];for(;e.length>o;)u.push(e.pop()),d.push(t.pop()+n-i);e.push(p(r.types[a],u,d,s-i,l-s,c)),t.push(i-n)}function p(e,t,n,r,o,i,s){if(i){let e=[Fp.contextHash,i];s=s?[e].concat(s):[e]}if(o>25){let e=[Fp.lookAhead,o];s=s?[e].concat(s):[e]}return new Zp(e,t,n,r,s)}function g(e,t,n){let{id:r,start:o,end:i,size:l}=a;if(a.next(),l>=0&&r<s){let s=n;if(l>4){let r=a.pos-(l-4);for(;a.pos>r;)n=g(e,t,n)}t[--n]=s,t[--n]=i-e,t[--n]=o-e,t[--n]=r}else-3==l?c=r:-4==l&&(u=r);return n}let m=[],y=[];for(;a.pos>0;)d(e.start||0,e.bufferStart||0,m,y,-1,0);let v=null!==(t=e.length)&&void 0!==t?t:m.length?y[0]+m[0].length:0;return new Zp(l[e.topID],m.reverse(),y.reverse(),v)}(e)}}Zp.empty=new Zp(Up.none,[],[],0);class Qp{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Qp(this.buffer,this.index)}}class Jp{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return Up.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],o=r.name;if(/\W/.test(o)&&!r.isError&&(o=JSON.stringify(o)),n==(e+=4))return o;let i=[];for(;e<n;)i.push(this.childString(e)),e=this.buffer[e+3];return o+"("+i.join(",")+")"}findChild(e,t,n,r,o){let{buffer:i}=this,s=-1;for(let a=e;a!=t&&!(eg(o,r,i[a+1],i[a+2])&&(s=a,n>0));a=i[a+3]);return s}slice(e,t,n){let r=this.buffer,o=new Uint16Array(t-e),i=0;for(let s=e,a=0;s<t;){o[a++]=r[s++],o[a++]=r[s++]-n;let t=o[a++]=r[s++]-n;o[a++]=r[s++]-e,i=Math.max(i,t)}return new Jp(o,i,this.set)}}function eg(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function tg(e,t,n,r){for(var o;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof rg&&e.index<0?null:e.parent;if(!t)return e;e=t}let i=r?0:Gp.IgnoreOverlays;if(r)for(let r=e,s=r.parent;s;r=s,s=r.parent)r instanceof rg&&r.index<0&&(null===(o=s.enter(t,n,i))||void 0===o?void 0:o.from)!=r.from&&(e=s);for(;;){let r=e.enter(t,n,i);if(!r)return e;e=r}}class ng{cursor(e=0){return new ug(this,e)}getChild(e,t=null,n=null){let r=og(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return og(this,e,t,n)}resolve(e,t=0){return tg(this,e,t,!1)}resolveInner(e,t=0){return tg(this,e,t,!0)}matchContext(e){return ig(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class rg extends ng{constructor(e,t,n,r){super(),this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,o=0){for(let i=this;;){for(let{children:s,positions:a}=i._tree,l=t>0?s.length:-1;e!=l;e+=t){let l,c=s[e],u=a[e]+i.from;if(o&Gp.EnterBracketed&&c instanceof Zp&&(l=Hp.get(c))&&!l.overlay&&l.bracketed&&n>=u&&n<=u+c.length||eg(r,n,u,u+c.length))if(c instanceof Jp){if(o&Gp.ExcludeBuffers)continue;let s=c.findChild(0,c.buffer.length,t,n-u,r);if(s>-1)return new ag(new sg(i,c,e,u),null,s)}else if(o&Gp.IncludeAnonymous||!c.type.isAnonymous||dg(c)){let s;if(!(o&Gp.IgnoreMounts)&&(s=Hp.get(c))&&!s.overlay)return new rg(s.tree,u,e,i);let a=new rg(c,u,e,i);return o&Gp.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?c.children.length-1:0,t,n,r,o)}}if(o&Gp.IncludeAnonymous||!i.type.isAnonymous)return null;if(e=i.index>=0?i.index+t:t<0?-1:i._parent._tree.children.length,i=i._parent,!i)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,t,n=0){let r;if(!(n&Gp.IgnoreOverlays)&&(r=Hp.get(this._tree))&&r.overlay){let o=e-this.from,i=n&Gp.EnterBracketed&&r.bracketed;for(let{from:e,to:n}of r.overlay)if((t>0||i?e<=o:e<o)&&(t<0||i?n>=o:n>o))return new rg(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function og(e,t,n,r){let o=e.cursor(),i=[];if(!o.firstChild())return i;if(null!=n)for(let e=!1;!e;)if(e=o.type.is(n),!o.nextSibling())return i;for(;;){if(null!=r&&o.type.is(r))return i;if(o.type.is(t)&&i.push(o.node),!o.nextSibling())return null==r?i:[]}}function ig(e,t,n=t.length-1){for(let r=e;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class sg{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class ag extends ng{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return o<0?null:new ag(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,t,n=0){if(n&Gp.ExcludeBuffers)return null;let{buffer:r}=this.context,o=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new ag(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ag(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ag(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,o=n.buffer[this.index+3];if(o>r){let i=n.buffer[this.index+1];e.push(n.slice(r,o,i)),t.push(0)}return new Zp(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function lg(e){if(!e.length)return null;let t=0,n=e[0];for(let r=1;r<e.length;r++){let o=e[r];(o.from>n.from||o.to<n.to)&&(n=o,t=r)}let r=n instanceof rg&&n.index<0?null:n.parent,o=e.slice();return r?o[t]=r:o.splice(t,1),new cg(o,n)}class cg{constructor(e,t){this.heads=e,this.node=t}get next(){return lg(this.heads)}}class ug{get name(){return this.type.name}constructor(e,t=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=t&~Gp.EnterBracketed,e instanceof rg)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof rg?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,o=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(o<0)&&(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?!(n&Gp.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Gp.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Gp.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let r=t+e,o=e<0?-1:n._tree.children.length;r!=o;r+=e){let e=n._tree.children[r];if(this.mode&Gp.IncludeAnonymous||e instanceof Jp||!e.type.isAnonymous||dg(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,o=this.stack.length;o>=0;){for(let i=e;i;i=i._parent)if(i.index==r){if(r==this.index)return i;t=i,n=o+1;break e}r=this.stack[--o]}for(let e=n;e<this.stack.length;e++)t=new ag(this.buffer,t,this.stack[e]);return this.bufferNode=new ag(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return ig(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,o=this.stack.length-1;r>=0;o--){if(o<0)return ig(this._tree,e,r);let i=n[t.buffer[this.stack[o]]];if(!i.isAnonymous){if(e[r]&&e[r]!=i.name)return!1;r--}}return!0}}function dg(e){return e.children.some(e=>e instanceof Jp||!e.type.isAnonymous||dg(e))}const hg=new WeakMap;function fg(e,t){if(!e.isAnonymous||t instanceof Jp||t.type!=e)return 1;let n=hg.get(t);if(null==n){n=1;for(let r of t.children){if(r.type!=e||!(r instanceof Zp)){n=1;break}n+=fg(e,r)}hg.set(t,n)}return n}function pg(e,t,n,r,o,i,s,a,l){let c=0;for(let n=r;n<o;n++)c+=fg(e,t[n]);let u=Math.ceil(1.5*c/8),d=[],h=[];return function t(n,r,o,s,a){for(let c=o;c<s;){let o=c,f=r[c],p=fg(e,n[c]);for(c++;c<s;c++){let t=fg(e,n[c]);if(p+t>=u)break;p+=t}if(c==o+1){if(p>u){let e=n[o];t(e.children,e.positions,0,e.children.length,r[o]+a);continue}d.push(n[o])}else{let t=r[c-1]+n[c-1].length-f;d.push(pg(e,n,r,o,c,f,t,null,l))}h.push(f+a-i)}}(t,n,r,o,0),(a||l)(d,h,s)}class gg{constructor(e,t,n,r,o=!1,i=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(o?1:0)|(i?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],n=!1){let r=[new gg(0,e.length,e,0,!1,n)];for(let n of t)n.to>e.length&&r.push(n);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],o=1,i=e.length?e[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<t.length?t[s]:null,u=c?c.fromA:1e9;if(u-a>=n)for(;i&&i.from<u;){let t=i;if(a>=t.from||u<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,u)-l;t=e>=n?null:new gg(e,n,t.tree,t.offset+l,s>0,!!c)}if(t&&r.push(t),i.to>u)break;i=o<e.length?e[o++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return r}}class mg{startParse(e,t,n){return"string"==typeof e&&(e=new yg(e)),n=n?n.length?n.map(e=>new Vp(e.from,e.to)):[new Vp(0,0)]:[new Vp(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}}class yg{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Fp({perNode:!0});let vg=0;class bg{constructor(e,t,n,r){this.name=e,this.set=t,this.base=n,this.modified=r,this.id=vg++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n="string"==typeof e?e:"?";if(e instanceof bg&&(t=e),null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let r=new bg(n,[],null,[]);if(r.set.push(r),t)for(let e of t.set)r.set.push(e);return r}static defineModifier(e){let t=new xg(e);return e=>e.modified.indexOf(t)>-1?e:xg.get(e.base||e,e.modified.concat(t).sort((e,t)=>e.id-t.id))}}let wg=0;class xg{constructor(e){this.name=e,this.instances=[],this.id=wg++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(n=>{return n.base==e&&(r=t,o=n.modified,r.length==o.length&&r.every((e,t)=>e==o[t]));var r,o});if(n)return n;let r=[],o=new bg(e.name,r,e,t);for(let e of t)e.instances.push(o);let i=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let r=0,o=t.length;r<o;r++)t.push(t[r].concat(e[n]));return t.sort((e,t)=>t.length-e.length)}(t);for(let t of e.set)if(!t.modified.length)for(let e of i)r.push(xg.get(t,e));return o}}function kg(e){let t=Object.create(null);for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let e of n.split(" "))if(e){let n=[],o=2,i=e;for(let t=0;;){if("..."==i&&t>0&&t+3==e.length){o=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(i);if(!r)throw new RangeError("Invalid path: "+e);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){o=0;break}if("/"!=s)throw new RangeError("Invalid path: "+e);i=e.slice(t)}let s=n.length-1,a=n[s];if(!a)throw new RangeError("Invalid path: "+e);let l=new Eg(r,o,s>0?n.slice(0,s):null);t[a]=l.sort(t[a])}}return Sg.add(t)}const Sg=new Fp({combine(e,t){let n,r,o;for(;e||t;){if(!e||t&&e.depth>=t.depth?(o=t,t=t.next):(o=e,e=e.next),n&&n.mode==o.mode&&!o.context&&!n.context)continue;let i=new Eg(o.tags,o.mode,o.context);n?n.next=i:r=i,n=i}return r}});class Eg{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function Cg(e,t){let n=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)n[e.id]=t.class;else n[t.tag.id]=t.class;let{scope:r,all:o=null}=t||{};return{style:e=>{let t=o;for(let r of e)for(let e of r.set){let r=n[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}function Ng(e,t,n,r=0,o=e.length){let i=new Ag(r,Array.isArray(t)?t:[t],n);i.highlightRange(e.cursor(),r,o,"",i.highlighters),i.flush(o)}Eg.empty=new Eg([],2,null);class Ag{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,o){let{type:i,from:s,to:a}=e;if(s>=n||a<=t)return;i.isTop&&(o=this.highlighters.filter(e=>!e.scope||e.scope(i)));let l=r,c=function(e){let t=e.type.prop(Sg);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||Eg.empty,u=function(e,t){let n=null;for(let r of e){let e=r.style(t);e&&(n=n?n+" "+e:e)}return n}(o,c.tags);if(u&&(l&&(l+=" "),l+=u,1==c.mode&&(r+=(r?" ":"")+u)),this.startSpan(Math.max(t,s),l),c.opaque)return;let d=e.tree&&e.tree.prop(Fp.mounted);if(d&&d.overlay){let i=e.node.enter(d.overlay[0].from+s,1),c=this.highlighters.filter(e=>!e.scope||e.scope(d.tree.type)),u=e.firstChild();for(let h=0,f=s;;h++){let p=h<d.overlay.length?d.overlay[h]:null,g=p?p.from+s:a,m=Math.max(t,f),y=Math.min(n,g);if(m<y&&u)for(;e.from<y&&(this.highlightRange(e,m,y,r,o),this.startSpan(Math.min(y,e.to),l),!(e.to>=g)&&e.nextSibling()););if(!p||g>n)break;f=p.to+s,f>t&&(this.highlightRange(i.cursor(),Math.max(t,p.from+s),Math.min(n,f),"",c),this.startSpan(Math.min(n,f),l))}u&&e.parent()}else if(e.firstChild()){d&&(r="");do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,o),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}}const _g=bg.define,Mg=_g(),Tg=_g(),Og=_g(Tg),jg=_g(Tg),Pg=_g(),Ig=_g(Pg),Dg=_g(Pg),Lg=_g(),Rg=_g(Lg),Bg=_g(),$g=_g(),zg=_g(),qg=_g(zg),Vg=_g(),Fg={comment:Mg,lineComment:_g(Mg),blockComment:_g(Mg),docComment:_g(Mg),name:Tg,variableName:_g(Tg),typeName:Og,tagName:_g(Og),propertyName:jg,attributeName:_g(jg),className:_g(Tg),labelName:_g(Tg),namespace:_g(Tg),macroName:_g(Tg),literal:Pg,string:Ig,docString:_g(Ig),character:_g(Ig),attributeValue:_g(Ig),number:Dg,integer:_g(Dg),float:_g(Dg),bool:_g(Pg),regexp:_g(Pg),escape:_g(Pg),color:_g(Pg),url:_g(Pg),keyword:Bg,self:_g(Bg),null:_g(Bg),atom:_g(Bg),unit:_g(Bg),modifier:_g(Bg),operatorKeyword:_g(Bg),controlKeyword:_g(Bg),definitionKeyword:_g(Bg),moduleKeyword:_g(Bg),operator:$g,derefOperator:_g($g),arithmeticOperator:_g($g),logicOperator:_g($g),bitwiseOperator:_g($g),compareOperator:_g($g),updateOperator:_g($g),definitionOperator:_g($g),typeOperator:_g($g),controlOperator:_g($g),punctuation:zg,separator:_g(zg),bracket:qg,angleBracket:_g(qg),squareBracket:_g(qg),paren:_g(qg),brace:_g(qg),content:Lg,heading:Rg,heading1:_g(Rg),heading2:_g(Rg),heading3:_g(Rg),heading4:_g(Rg),heading5:_g(Rg),heading6:_g(Rg),contentSeparator:_g(Lg),list:_g(Lg),quote:_g(Lg),emphasis:_g(Lg),strong:_g(Lg),link:_g(Lg),monospace:_g(Lg),strikethrough:_g(Lg),inserted:_g(),deleted:_g(),changed:_g(),invalid:_g(),meta:Vg,documentMeta:_g(Vg),annotation:_g(Vg),processingInstruction:_g(Vg),definition:bg.defineModifier("definition"),constant:bg.defineModifier("constant"),function:bg.defineModifier("function"),standard:bg.defineModifier("standard"),local:bg.defineModifier("local"),special:bg.defineModifier("special")};for(let e in Fg){let t=Fg[e];t instanceof bg&&(t.name=e)}var Hg;Cg([{tag:Fg.link,class:"tok-link"},{tag:Fg.heading,class:"tok-heading"},{tag:Fg.emphasis,class:"tok-emphasis"},{tag:Fg.strong,class:"tok-strong"},{tag:Fg.keyword,class:"tok-keyword"},{tag:Fg.atom,class:"tok-atom"},{tag:Fg.bool,class:"tok-bool"},{tag:Fg.url,class:"tok-url"},{tag:Fg.labelName,class:"tok-labelName"},{tag:Fg.inserted,class:"tok-inserted"},{tag:Fg.deleted,class:"tok-deleted"},{tag:Fg.literal,class:"tok-literal"},{tag:Fg.string,class:"tok-string"},{tag:Fg.number,class:"tok-number"},{tag:[Fg.regexp,Fg.escape,Fg.special(Fg.string)],class:"tok-string2"},{tag:Fg.variableName,class:"tok-variableName"},{tag:Fg.local(Fg.variableName),class:"tok-variableName tok-local"},{tag:Fg.definition(Fg.variableName),class:"tok-variableName tok-definition"},{tag:Fg.special(Fg.variableName),class:"tok-variableName2"},{tag:Fg.definition(Fg.propertyName),class:"tok-propertyName tok-definition"},{tag:Fg.typeName,class:"tok-typeName"},{tag:Fg.namespace,class:"tok-namespace"},{tag:Fg.className,class:"tok-className"},{tag:Fg.macroName,class:"tok-macroName"},{tag:Fg.propertyName,class:"tok-propertyName"},{tag:Fg.operator,class:"tok-operator"},{tag:Fg.comment,class:"tok-comment"},{tag:Fg.meta,class:"tok-meta"},{tag:Fg.invalid,class:"tok-invalid"},{tag:Fg.punctuation,class:"tok-punctuation"}]);const Wg=new Fp;const Ug=new Fp;class Kg{constructor(e,t,n=[],r=""){this.data=e,this.name=r,Wc.prototype.hasOwnProperty("tree")||Object.defineProperty(Wc.prototype,"tree",{get(){return Yg(this)}}),this.parser=t,this.extension=[om.of(this),Wc.languageData.of((e,t,n)=>{let r=Xg(e,t,n),o=r.type.prop(Wg);if(!o)return[];let i=e.facet(o),s=r.type.prop(Ug);if(s){let o=r.resolve(t-r.from,n);for(let t of s)if(t.test(o,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(i)}}return i})].concat(n)}isActiveAt(e,t,n=-1){return Xg(e,t,n).type.prop(Wg)==this.data}findRegions(e){let t=e.facet(om);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop(Wg)==this.data)return void n.push({from:t,to:t+e.length});let o=e.prop(Fp.mounted);if(o){if(o.tree.prop(Wg)==this.data){if(o.overlay)for(let e of o.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(o.overlay){let e=n.length;if(r(o.tree,o.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let o=e.children[n];o instanceof Zp&&r(o,e.positions[n]+t)}};return r(Yg(e),0),n}get allowsNesting(){return!0}}function Xg(e,t,n){let r=e.facet(om),o=Yg(e).topNode;if(!r||r.allowsNesting)for(let e=o;e;e=e.enter(t,n,Gp.ExcludeBuffers|Gp.EnterBracketed))e.type.isTop&&(o=e);return o}function Yg(e){let t=e.field(Kg.state,!1);return t?t.tree:Zp.empty}Kg.setState=Ic.define();class Gg{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let Zg=null;class Qg{constructor(e,t,n=[],r,o,i,s,a){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=o,this.viewport=i,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new Qg(e,t,[],Zp.empty,0,n,[],null)}startParse(){return this.parser.startParse(new Gg(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=Zp.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(gg.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(gg.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Zg;Zg=this;try{return e()}finally{Zg=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Jg(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:o,viewport:i,skipped:s}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges((e,n,r,o)=>t.push({fromA:e,toA:n,fromB:r,toB:o})),n=gg.applyChanges(n,t),r=Zp.empty,o=0,i={from:e.mapPos(i.from,-1),to:e.mapPos(i.to,1)},this.skipped.length){s=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);n<r&&s.push({from:n,to:r})}}}return new Qg(this.parser,t,n,r,o,i,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:n,to:r}=this.skipped[t];n<e.to&&r>e.from&&(this.fragments=Jg(this.fragments,n,r),this.skipped.splice(t--,1))}return!(this.skipped.length>=t||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends mg{createParse(t,n,r){let o=r[0].from,i=r[r.length-1].to;return{parsedPos:o,advance(){let t=Zg;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=i,new Zp(Up.none,[],[],i-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return Zg}}function Jg(e,t,n){return gg.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class em{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new em(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=Qg.create(e.facet(om).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new em(n)}}Kg.state=gc.define({create:em.init,update(e,t){for(let e of t.effects)if(e.is(Kg.setState))return e.value;return t.startState.facet(om)!=t.state.facet(om)?em.init(t.state):e.apply(t)}});let tm=e=>{let t=setTimeout(()=>e(),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(tm=e=>{let t=-1,n=setTimeout(()=>{t=requestIdleCallback(e,{timeout:400})},100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const nm="undefined"!=typeof navigator&&(null===(Hg=navigator.scheduling)||void 0===Hg?void 0:Hg.isInputPending)?()=>navigator.scheduling.isInputPending():null,rm=eh.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Kg.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Kg.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=tm(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,o=n.field(Kg.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let i=Date.now()+Math.min(this.chunkBudget,100,e&&!nm?Math.max(25,e.timeRemaining()-5):1e9),s=o.context.treeLen<r&&n.doc.length>r+1e3,a=o.context.work(()=>nm&&nm()||Date.now()>i,r+(s?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Kg.setState.of(new em(o.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(e=>Gd(this.view.state,e)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),om=lc.define({combine:e=>e.length?e[0]:null,enables:e=>[Kg.state,rm,Np.contentAttributes.compute([e],t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}})]}),im=lc.define(),sm=lc.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function am(e){let t=e.facet(sm);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function lm(e,t){let n="",r=e.tabSize,o=e.facet(sm)[0];if("\t"==o){for(;t>=r;)n+="\t",t-=r;o=" "}for(let e=0;e<t;e++)n+=o;return n}function cm(e,t){e instanceof Wc&&(e=new um(e));for(let n of e.state.facet(im)){let r=n(e,t);if(void 0!==r)return r}let n=Yg(e.state);return n.length>=t?function(e,t,n){let r=t.resolveStack(n),o=t.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(o!=r.node){let e=[];for(let t=o;t&&!(t.from<r.node.from||t.to>r.node.to||t.from==r.node.from&&t.type==r.node.type);t=t.parent)e.push(t);for(let t=e.length-1;t>=0;t--)r={node:e[t],next:r}}return hm(r,e,n)}(e,n,t):null}class um{constructor(e,t={}){this.state=e,this.options=t,this.unit=am(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:o}=this.options;return null!=r&&r>=n.from&&r<=n.to?o&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),o=this.countColumn(n,e-r),i=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return i>-1&&(o+=i-this.countColumn(n,n.search(/\S|$/))),o}countColumn(e,t=e.length){return cu(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let e=o(r);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const dm=new Fp;function hm(e,t,n){for(let r=e;r;r=r.next){let e=fm(r.node);if(e)return e(gm.create(t,n,r))}return 0}function fm(e){let t=e.type.prop(dm);if(t)return t;let n,r=e.firstChild;if(r&&(n=r.type.prop(Fp.closedBy))){let t=e.lastChild,r=t&&n.indexOf(t.name)>-1;return e=>function(e,t,n,r,o){let i=e.textAfter,s=i.match(/^\s*/)[0].length,a=r&&i.slice(s,s+r.length)==r||o==e.pos+s,l=t?function(e){let t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let o=e.options.simulateBreak,i=e.state.doc.lineAt(n.from),s=null==o||o<=i.from?i.to:Math.min(i.to,o);for(let e=n.to;;){let o=t.childAfter(e);if(!o||o==r)return null;if(!o.type.isSkipped){if(o.from>=s)return null;let e=/^ */.exec(i.text.slice(n.to-i.from))[0].length;return{from:n.from,to:n.to+e}}e=o.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}(e,!0,1,void 0,r&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?pm:null}function pm(){return 0}class gm extends um{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new gm(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(mm(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return hm(this.context.next,this.base,this.pos)}}function mm(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}class ym{constructor(e,t){let n;function r(e){let t=fu.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;const o="string"==typeof t.all?t.all:t.all?r(t.all):void 0,i=t.scope;this.scope=i instanceof Kg?e=>e.prop(Wg)==i.data:i?e=>e==i:void 0,this.style=Cg(e.map(e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))})),{all:o}).style,this.module=n?new fu(n):null,this.themeType=t.themeType}static define(e,t){return new ym(e,t||{})}}const vm=lc.define(),bm=lc.define({combine:e=>e.length?[e[0]]:null});function wm(e){let t=e.facet(vm);return t.length?t:e.facet(bm)}function xm(e,t){let n,r=[Sm];return e instanceof ym&&(e.module&&r.push(Np.styleModule.of(e.module)),n=e.themeType),(null==t?void 0:t.fallback)?r.push(bm.of(e)):n?r.push(vm.computeN([Np.darkTheme],t=>t.facet(Np.darkTheme)==("dark"==n)?[e]:[])):r.push(vm.of(e)),r}class km{constructor(e){this.markCache=Object.create(null),this.tree=Yg(e.state),this.decorations=this.buildDeco(e,wm(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Yg(e.state),n=wm(e.state),r=n!=wm(e.startState),{viewport:o}=e.view,i=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!r&&t.type==this.tree.type&&i>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=i):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return qu.none;let n=new Qc;for(let{from:r,to:o}of e.visibleRanges)Ng(this.tree,t,(e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=qu.mark({class:r})))},r,o);return n.finish()}}const Sm=yc.high(eh.fromClass(km,{decorations:e=>e.decorations})),Em=ym.define([{tag:Fg.meta,color:"#404740"},{tag:Fg.link,textDecoration:"underline"},{tag:Fg.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Fg.emphasis,fontStyle:"italic"},{tag:Fg.strong,fontWeight:"bold"},{tag:Fg.strikethrough,textDecoration:"line-through"},{tag:Fg.keyword,color:"#708"},{tag:[Fg.atom,Fg.bool,Fg.url,Fg.contentSeparator,Fg.labelName],color:"#219"},{tag:[Fg.literal,Fg.inserted],color:"#164"},{tag:[Fg.string,Fg.deleted],color:"#a11"},{tag:[Fg.regexp,Fg.escape,Fg.special(Fg.string)],color:"#e40"},{tag:Fg.definition(Fg.variableName),color:"#00f"},{tag:Fg.local(Fg.variableName),color:"#30a"},{tag:[Fg.typeName,Fg.namespace],color:"#085"},{tag:Fg.className,color:"#167"},{tag:[Fg.special(Fg.variableName),Fg.macroName],color:"#256"},{tag:Fg.definition(Fg.propertyName),color:"#00c"},{tag:Fg.comment,color:"#940"},{tag:Fg.invalid,color:"#f00"}]),Cm=new Fp;function Nm(e,t,n){let r=e.prop(t<0?Fp.openedBy:Fp.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function Am(e){let t=e.type.prop(Cm);return t?t(e.node):e}function _m(e,t,n,r={}){let o=r.maxScanDistance||1e4,i=r.brackets||"()[]{}",s=Yg(e),a=s.resolveInner(t,n);for(let e=a;e;e=e.parent){let r=Nm(e.type,n,i);if(r&&e.from<e.to){let o=Am(e);if(o&&(n>0?t>=o.from&&t<o.to:t>o.from&&t<=o.to))return Mm(0,0,n,e,o,r,i)}}return function(e,t,n,r,o,i,s){let a=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},u=e.doc.iterRange(t,n>0?e.doc.length:0),d=0;for(let e=0;!u.next().done&&e<=i;){let i=u.value;n<0&&(e+=i.length);let a=t+e*n;for(let e=n>0?0:i.length-1,t=n>0?i.length:-1;e!=t;e+=n){let t=s.indexOf(i[e]);if(!(t<0||r.resolveInner(a+e,1).type!=o))if(t%2==0==n>0)d++;else{if(1==d)return{start:c,end:{from:a+e,to:a+e+1},matched:t>>1==l>>1};d--}}n>0&&(e+=i.length)}return u.done?{start:c,matched:!1}:null}(e,t,n,s,a.type,o,i)}function Mm(e,t,n,r,o,i,s){let a=r.parent,l={from:o.from,to:o.to},c=0,u=null==a?void 0:a.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do{if(n<0?u.to<=r.from:u.from>=r.to){if(0==c&&i.indexOf(u.type.name)>-1&&u.from<u.to){let e=Am(u);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(Nm(u.type,n,s))c++;else if(Nm(u.type,-n,s)){if(0==c){let e=Am(u);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}c--}}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function Tm(e,t,n,r=0,o=0){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);let i=o;for(let o=r;o<t;o++)9==e.charCodeAt(o)?i+=n-i%n:i++;return i}class Om{constructor(e,t,n,r){this.string=e,this.tabSize=t,this.indentUnit=n,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return 0==this.pos}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t,n=this.string.charAt(this.pos);if(t="string"==typeof e?n==e:n&&(e instanceof RegExp?e.test(n):e(n)),t)return++this.pos,n}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Tm(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return null!==(e=this.overrideIndent)&&void 0!==e?e:Tm(this.string,null,this.tabSize)}match(e,t,n){if("string"==typeof e){let r=e=>n?e.toLowerCase():e;return r(this.string.substr(this.pos,e.length))==r(e)?(!1!==t&&(this.pos+=e.length),!0):null}{let n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}}current(){return this.string.slice(this.start,this.pos)}}function jm(e){if("object"!=typeof e)return e;let t={};for(let n in e){let r=e[n];t[n]=r instanceof Array?r.slice():r}return t}const Pm=new WeakMap;class Im extends Kg{constructor(e){let t,n=(o=e.languageData,lc.define({combine:o?e=>e.concat(o):void 0})),r={name:(i=e).name||"",token:i.token,blankLine:i.blankLine||(()=>{}),startState:i.startState||(()=>!0),copyState:i.copyState||jm,indent:i.indent||(()=>null),languageData:i.languageData||{},tokenTable:i.tokenTable||$m,mergeTokens:!1!==i.mergeTokens};var o,i;super(n,new class extends mg{createParse(e,n,r){return new Rm(t,e,n,r)}},[],e.name),this.topNode=function(e,t){let n=Up.define({id:zm.length,name:"Document",props:[Wg.add(()=>e),dm.add(()=>e=>t.getIndent(e))],top:!0});return zm.push(n),n}(n,this),t=this,this.streamParser=r,this.stateAfter=new Fp({perNode:!0}),this.tokenTable=e.tokenTable?new Wm(r.tokenTable):Um}static define(e){return new Im(e)}getIndent(e){let t,{overrideIndentation:n}=e.options;n&&(t=Pm.get(e.state),null!=t&&t<e.pos-1e4&&(t=void 0));let r,o,i=Dm(this,e.node.tree,e.node.from,e.node.from,null!=t?t:e.pos);if(i?(o=i.state,r=i.pos+1):(o=this.streamParser.startState(e.unit),r=e.node.from),e.pos-r>1e4)return null;for(;r<e.pos;){let t=e.state.doc.lineAt(r),i=Math.min(e.pos,t.to);if(t.length){let r=n?n(t.from):-1,s=new Om(t.text,e.state.tabSize,e.unit,r<0?void 0:r);for(;s.pos<i-t.from;)Bm(this.streamParser.token,s,o)}else this.streamParser.blankLine(o,e.unit);if(i==e.pos)break;r=t.to+1}let s=e.lineAt(e.pos);return n&&null==t&&Pm.set(e.state,s.from),this.streamParser.indent(o,/^\s*(.*)/.exec(s.text)[1],e)}get allowsNesting(){return!1}}function Dm(e,t,n,r,o){let i=n>=r&&n+t.length<=o&&t.prop(e.stateAfter);if(i)return{state:e.streamParser.copyState(i),pos:n+t.length};for(let i=t.children.length-1;i>=0;i--){let s=t.children[i],a=n+t.positions[i],l=s instanceof Zp&&a<o&&Dm(e,s,a,r,o);if(l)return l}return null}function Lm(e,t,n,r,o){if(o&&n<=0&&r>=t.length)return t;o||0!=n||t.type!=e.topNode||(o=!0);for(let i=t.children.length-1;i>=0;i--){let s,a=t.positions[i],l=t.children[i];if(a<r&&l instanceof Zp){if(!(s=Lm(e,l,n-a,r-a,o)))break;return o?new Zp(t.type,t.children.slice(0,i).concat(s),t.positions.slice(0,i+1),a+s.length):s}}return null}class Rm{constructor(e,t,n,r){this.lang=e,this.input=t,this.fragments=n,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let o=Qg.get(),i=r[0].from,{state:s,tree:a}=function(e,t,n,r,o){for(let o of t){let t,i=o.from+(o.openStart?25:0),s=o.to-(o.openEnd?25:0),a=i<=n&&s>n&&Dm(e,o.tree,0-o.offset,n,s);if(a&&a.pos<=r&&(t=Lm(e,o.tree,n+o.offset,a.pos+o.offset,!1)))return{state:a.state,tree:t}}return{state:e.streamParser.startState(o?am(o):4),tree:Zp.empty}}(e,n,i,this.to,null==o?void 0:o.state);this.state=s,this.parsedPos=this.chunkStart=i+a.length;for(let e=0;e<a.children.length;e++)this.chunks.push(a.children[e]),this.chunkPos.push(a.positions[e]);o&&this.parsedPos<o.viewport.from-1e5&&r.some(e=>e.from<=o.viewport.from&&e.to>=o.viewport.from)&&(this.state=this.lang.streamParser.startState(am(o.state)),o.skipUntilInView(this.parsedPos,o.viewport.from),this.parsedPos=o.viewport.from),this.moveRangeIndex()}advance(){let e=Qg.get(),t=null==this.stoppedAt?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(t,this.chunkStart+512);for(e&&(n=Math.min(n,e.viewport.to));this.parsedPos<n;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)"\n"==t&&(t="");else{let e=t.indexOf("\n");e>-1&&(t=t.slice(0,e))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),n=e+t.length;for(let e=this.rangeIndex;;){let r=this.ranges[e].to;if(r>=n)break;if(t=t.slice(0,r-(n-t.length)),e++,e==this.ranges.length)break;let o=this.ranges[e].from,i=this.lineAfter(o);t+=i,n=o+i.length}return{line:t,end:n}}skipGapsTo(e,t,n){for(;;){let r=this.ranges[this.rangeIndex].to,o=e+t;if(n>0?r>o:r>=o)break;t+=this.ranges[++this.rangeIndex].from-r}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,n,r){let o=4;if(this.ranges.length>1){t+=r=this.skipGapsTo(t,r,1);let e=this.chunk.length;n+=r=this.skipGapsTo(n,r,-1),o+=this.chunk.length-e}let i=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&4==o&&i>=0&&this.chunk[i]==e&&this.chunk[i+2]==t?this.chunk[i+2]=n:this.chunk.push(e,t,n,o),r}parseLine(e){let{line:t,end:n}=this.nextLine(),r=0,{streamParser:o}=this.lang,i=new Om(t,e?e.state.tabSize:4,e?am(e.state):2);if(i.eol())o.blankLine(this.state,i.indentUnit);else for(;!i.eol();){let e=Bm(o.token,i,this.state);if(e&&(r=this.emitToken(this.lang.tokenTable.resolve(e),this.parsedPos+i.start,this.parsedPos+i.pos,r)),i.start>1e4)break}this.parsedPos=n,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Zp.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:qm,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new Zp(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Zp(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Bm(e,t,n){t.start=t.pos;for(let r=0;r<10;r++){let r=e(t,n);if(t.pos>t.start)return r}throw new Error("Stream parser failed to advance stream.")}const $m=Object.create(null),zm=[Up.none],qm=new Kp(zm),Vm=[],Fm=Object.create(null),Hm=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Hm[e]=Xm($m,t);class Wm{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Hm)}resolve(e){return e?this.table[e]||(this.table[e]=Xm(this.extra,e)):0}}const Um=new Wm($m);function Km(e,t){Vm.indexOf(e)>-1||(Vm.push(e),console.warn(t))}function Xm(e,t){let n=[];for(let r of t.split(" ")){let t=[];for(let n of r.split(".")){let r=e[n]||Fg[n];r?"function"==typeof r?t.length?t=t.map(r):Km(n,`Modifier ${n} used at start of tag`):t.length?Km(n,`Tag ${n} used as modifier`):t=Array.isArray(r)?r:[r]:Km(n,`Unknown highlighting tag ${n}`)}for(let e of t)n.push(e)}if(!n.length)return 0;let r=t.replace(/ /g,"_"),o=r+" "+n.map(e=>e.id),i=Fm[o];if(i)return i.id;let s=Fm[o]=Up.define({id:zm.length,name:r,props:[kg({[r]:n})]});return zm.push(s),s.id}function Ym(e,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let o=e(t,n);return!!o&&(r(n.update(o)),!0)}}md.RTL,md.LTR;const Gm=Ym(ny,0),Zm=Ym(ty,0),Qm=Ym((e,t)=>ty(e,t,function(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),o=n.to<=r.to?r:e.doc.lineAt(n.to);o.from>r.from&&o.from==n.to&&(o=n.to==r.to+1?r:e.doc.lineAt(n.to-1));let i=t.length-1;i>=0&&t[i].to>r.from?t[i].to=o.to:t.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:o.to})}return t}(t)),0);function Jm(e,t){let n=e.languageDataAt("commentTokens",t,1);return n.length?n[0]:{}}const ey=50;function ty(e,t,n=t.selection.ranges){let r=n.map(e=>Jm(t,e.from).block);if(!r.every(e=>e))return null;let o=n.map((e,n)=>function(e,{open:t,close:n},r,o){let i,s,a=e.sliceDoc(r-ey,r),l=e.sliceDoc(o,o+ey),c=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(l)[0].length,d=a.length-c;if(a.slice(d-t.length,d)==t&&l.slice(u,u+n.length)==n)return{open:{pos:r-c,margin:c&&1},close:{pos:o+u,margin:u&&1}};o-r<=2*ey?i=s=e.sliceDoc(r,o):(i=e.sliceDoc(r,r+ey),s=e.sliceDoc(o-ey,o));let h=/^\s*/.exec(i)[0].length,f=/\s*$/.exec(s)[0].length,p=s.length-f-n.length;return i.slice(h,h+t.length)==t&&s.slice(p,p+n.length)==n?{open:{pos:r+h+t.length,margin:/\s/.test(i.charAt(h+t.length))?1:0},close:{pos:o-f-n.length,margin:/\s/.test(s.charAt(p-1))?1:0}}:null}(t,r[n],e.from,e.to));if(2!=e&&!o.every(e=>e))return{changes:t.changes(n.map((e,t)=>o[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}]))};if(1!=e&&o.some(e=>e)){let e=[];for(let t,n=0;n<o.length;n++)if(t=o[n]){let o=r[n],{open:i,close:s}=t;e.push({from:i.pos-o.open.length,to:i.pos+i.margin},{from:s.pos-s.margin,to:s.pos+o.close.length})}return{changes:e}}return null}function ny(e,t,n=t.selection.ranges){let r=[],o=-1;e:for(let{from:e,to:i}of n){let n,s=r.length,a=1e9;for(let s=e;s<=i;){let l=t.doc.lineAt(s);if(null==n&&(n=Jm(t,l.from).line,!n))continue e;if(l.from>o&&(e==i||i>l.from)){o=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,i=l.text.slice(e,e+n.length)==n?e:-1;e<l.text.length&&e<a&&(a=e),r.push({line:l,comment:i,token:n,indent:e,empty:t,single:!1})}s=l.to+1}if(a<1e9)for(let e=s;e<r.length;e++)r[e].indent<r[e].line.text.length&&(r[e].indent=a);r.length==s+1&&(r[s].single=!0)}if(2!=e&&r.some(e=>e.comment<0&&(!e.empty||e.single))){let e=[];for(let{line:t,token:n,indent:o,empty:i,single:s}of r)!s&&i||e.push({from:t.from+o,insert:n+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&r.some(e=>e.comment>=0)){let e=[];for(let{line:t,comment:n,token:o}of r)if(n>=0){let r=t.from+n,i=r+o.length;" "==t.text[i-t.from]&&i++,e.push({from:r,to:i})}return{changes:e}}return null}const ry=Oc.define(),oy=lc.define();class iy{constructor(e,t,n,r,o){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=o}setSelAfter(e){return new iy(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(e=>e.toJSON())}}static fromJSON(e){return new iy(e.changes&&Zl.fromJSON(e.changes),[],e.mapped&&Gl.fromJSON(e.mapped),e.startSelection&&ic.fromJSON(e.startSelection),e.selectionsAfter.map(ic.fromJSON))}static fromTransaction(e,t){let n=ly;for(let t of e.startState.facet(oy)){let r=t(e);r.length&&(n=n.concat(r))}return!n.length&&e.changes.empty?null:new iy(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,ly)}static selection(e){return new iy(void 0,ly,void 0,void 0,e)}}function sy(e,t,n,r){let o=t+1>n+20?t-n-1:0,i=e.slice(o,t);return i.push(r),i}function ay(e,t){return e.length?t.length?e.concat(t):e:t}const ly=[];function cy(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function uy(e,t){if(!e.length)return e;let n=e.length,r=ly;for(;n;){let o=dy(e[n-1],t,r);if(o.changes&&!o.changes.empty||o.effects.length){let t=e.slice(0,n);return t[n-1]=o,t}t=o.mapped,n--,r=o.selectionsAfter}return r.length?[iy.selection(r)]:ly}function dy(e,t,n){let r=ay(e.selectionsAfter.length?e.selectionsAfter.map(e=>e.map(t)):ly,n);if(!e.changes)return iy.selection(r);let o=e.changes.map(t),i=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(i):i;return new iy(o,Ic.mapEffects(e.effects,t),s,e.startSelection.map(i),r)}const hy=/^(input\.type|delete)($|\.)/;class fy{constructor(e,t,n=0,r=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new fy(this.done,this.undone):this}addChanges(e,t,n,r,o){let i=this.done,s=i[i.length-1];return i=s&&s.changes&&!s.changes.empty&&e.changes&&(!n||hy.test(n))&&(!s.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(o,function(e,t){let n=[],r=!1;return e.iterChangedRanges((e,t)=>n.push(e,t)),t.iterChangedRanges((e,t,o,i)=>{for(let e=0;e<n.length;){let t=n[e++],s=n[e++];i>=t&&o<=s&&(r=!0)}}),r}(s.changes,e.changes))||"input.type.compose"==n)?sy(i,i.length-1,r.minDepth,new iy(e.changes.compose(s.changes),ay(Ic.mapEffects(e.effects,s.changes),s.effects),s.mapped,s.startSelection,ly)):sy(i,i.length,r.minDepth,e),new fy(i,ly,t,n)}addSelection(e,t,n,r){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:ly;return o.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&(i=o[o.length-1],s=e,i.ranges.length==s.ranges.length&&0===i.ranges.filter((e,t)=>e.empty!=s.ranges[t].empty).length)?this:new fy(function(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),sy(e,e.length-1,1e9,n.setSelAfter(r)))}return[iy.selection([t])]}(this.done,e),this.undone,t,n);var i,s}addMapping(e){return new fy(uy(this.done,e),uy(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let o=r[r.length-1],i=o.selectionsAfter[0]||(o.startSelection?o.startSelection.map(o.changes.invertedDesc,1):t.selection);if(n&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:ry.of({side:e,rest:cy(r),selection:i}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let n=1==r.length?ly:r.slice(0,r.length-1);return o.mapped&&(n=uy(n,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:ry.of({side:e,rest:n,selection:i}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}function py(e,t){return ic.create(e.ranges.map(t),e.mainIndex)}function gy(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function my({state:e,dispatch:t},n){let r=py(e.selection,n);return!r.eq(e.selection,!0)&&(t(gy(e,r)),!0)}function yy(e,t){return ic.cursor(t?e.to:e.from)}function vy(e,t){return my(e,n=>n.empty?e.moveByChar(n,t):yy(n,t))}function by(e){return e.textDirectionAt(e.state.selection.main.head)==md.LTR}fy.empty=new fy(ly,ly);const wy=e=>vy(e,!by(e)),xy=e=>vy(e,by(e));function ky(e,t){return my(e,n=>n.empty?e.moveByGroup(n,t):yy(n,t))}function Sy(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function Ey(e,t,n){let r,o,i=Yg(e).resolveInner(t.head),s=n?Fp.closedBy:Fp.openedBy;for(let r=t.head;;){let t=n?i.childAfter(r):i.childBefore(r);if(!t)break;Sy(e,t,s)?i=t:r=n?t.to:t.from}return o=i.type.prop(s)&&(r=n?_m(e,i.from,1):_m(e,i.to,-1))&&r.matched?n?r.end.to:r.end.from:n?i.to:i.from,ic.cursor(o,n?-1:1)}function Cy(e,t){return my(e,n=>{if(!n.empty)return yy(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)})}"undefined"!=typeof Intl&&Intl.Segmenter;const Ny=e=>Cy(e,!1),Ay=e=>Cy(e,!0);function _y(e){let t,n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,r=0,o=0;if(n){for(let t of e.state.facet(Np.scrollMargins)){let n=t(e);(null==n?void 0:n.top)&&(r=Math.max(null==n?void 0:n.top,r)),(null==n?void 0:n.bottom)&&(o=Math.max(null==n?void 0:n.bottom,o))}t=e.scrollDOM.clientHeight-r-o}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:o,selfScroll:n,height:Math.max(e.defaultLineHeight,t-5)}}function My(e,t){let n,r=_y(e),{state:o}=e,i=py(o.selection,n=>n.empty?e.moveVertically(n,t,r.height):yy(n,t));if(i.eq(o.selection))return!1;if(r.selfScroll){let t=e.coordsAtPos(o.selection.main.head),s=e.scrollDOM.getBoundingClientRect(),a=s.top+r.marginTop,l=s.bottom-r.marginBottom;t&&t.top>a&&t.bottom<l&&(n=Np.scrollIntoView(i.main.head,{y:"start",yMargin:t.top-a}))}return e.dispatch(gy(o,i),{effects:n}),!0}const Ty=e=>My(e,!1),Oy=e=>My(e,!0);function jy(e,t,n){let r=e.lineBlockAt(t.head),o=e.moveToLineBoundary(t,n);if(o.head==t.head&&o.head!=(n?r.to:r.from)&&(o=e.moveToLineBoundary(t,n,!1)),!n&&o.head==r.from&&r.length){let n=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&t.head!=r.from+n&&(o=ic.cursor(r.from+n))}return o}function Py(e,t){let n=py(e.state.selection,e=>{let n=t(e);return ic.range(e.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return!n.eq(e.state.selection)&&(e.dispatch(gy(e.state,n)),!0)}function Iy(e,t){return Py(e,n=>e.moveByChar(n,t))}const Dy=e=>Iy(e,!by(e)),Ly=e=>Iy(e,by(e));function Ry(e,t){return Py(e,n=>e.moveByGroup(n,t))}function By(e,t){return Py(e,n=>e.moveVertically(n,t))}const $y=e=>By(e,!1),zy=e=>By(e,!0);function qy(e,t){return Py(e,n=>e.moveVertically(n,t,_y(e).height))}const Vy=e=>qy(e,!1),Fy=e=>qy(e,!0),Hy=({state:e,dispatch:t})=>(t(gy(e,{anchor:0})),!0),Wy=({state:e,dispatch:t})=>(t(gy(e,{anchor:e.doc.length})),!0),Uy=({state:e,dispatch:t})=>(t(gy(e,{anchor:e.selection.main.anchor,head:0})),!0),Ky=({state:e,dispatch:t})=>(t(gy(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function Xy(e,t){let{state:n}=e,r=n.selection,o=n.selection.ranges.slice();for(let r of n.selection.ranges){let i=n.doc.lineAt(r.head);if(t?i.to<e.state.doc.length:i.from>0)for(let n=r;;){let r=e.moveVertically(n,t);if(r.head<i.from||r.head>i.to){o.some(e=>e.head==r.head)||o.push(r);break}if(r.head==n.head)break;n=r}}return o.length!=r.ranges.length&&(e.dispatch(gy(n,ic.create(o,o.length-1))),!0)}function Yy(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:r}=e,o=r.changeByRange(r=>{let{from:o,to:i}=r;if(o==i){let s=t(r);s<o?(n="delete.backward",s=Gy(e,s,!1)):s>o&&(n="delete.forward",s=Gy(e,s,!0)),o=Math.min(o,s),i=Math.max(i,s)}else o=Gy(e,o,!1),i=Gy(e,i,!0);return o==i?{range:r}:{changes:{from:o,to:i},range:ic.cursor(o,o<r.head?-1:1)}});return!o.changes.empty&&(e.dispatch(r.update(o,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?Np.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Gy(e,t,n){if(e instanceof Np)for(let r of e.state.facet(Np.atomicRanges).map(t=>t(e)))r.between(t,t,(e,r)=>{e<t&&r>t&&(t=n?r:e)});return t}const Zy=(e,t,n)=>Yy(e,r=>{let o,i,s=r.from,{state:a}=e,l=a.doc.lineAt(s);if(n&&!t&&s>l.from&&s<l.from+200&&!/[^ \t]/.test(o=l.text.slice(0,s-l.from))){if("\t"==o[o.length-1])return s-1;let e=cu(o,a.tabSize)%am(a)||am(a);for(let t=0;t<e&&" "==o[o.length-1-t];t++)s--;i=s}else i=Kl(l.text,s-l.from,t,t)+l.from,i==s&&l.number!=(t?a.doc.lines:1)?i+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(l.text.slice(i-l.from,s-l.from))&&(i=Kl(l.text,i-l.from,!1,!1)+l.from);return i}),Qy=e=>Zy(e,!1,!0),Jy=e=>Zy(e,!0,!1),ev=(e,t)=>Yy(e,n=>{let r=n.head,{state:o}=e,i=o.doc.lineAt(r),s=o.charCategorizer(r);for(let e=null;;){if(r==(t?i.to:i.from)){r==n.head&&i.number!=(t?o.doc.lines:1)&&(r+=t?1:-1);break}let a=Kl(i.text,r-i.from,t)+i.from,l=i.text.slice(Math.min(r,a)-i.from,Math.max(r,a)-i.from),c=s(l);if(null!=e&&c!=e)break;" "==l&&r==n.head||(e=c),r=a}return r}),tv=e=>ev(e,!1);function nv(e){let t=[],n=-1;for(let r of e.selection.ranges){let o=e.doc.lineAt(r.from),i=e.doc.lineAt(r.to);if(r.empty||r.to!=i.from||(i=e.doc.lineAt(r.to-1)),n>=o.number){let e=t[t.length-1];e.to=i.to,e.ranges.push(r)}else t.push({from:o.from,to:i.to,ranges:[r]});n=i.number+1}return t}function rv(e,t,n){if(e.readOnly)return!1;let r=[],o=[];for(let t of nv(e)){if(n?t.to==e.doc.length:0==t.from)continue;let i=e.doc.lineAt(n?t.to+1:t.from-1),s=i.length+1;if(n){r.push({from:t.to,to:i.to},{from:t.from,insert:i.text+e.lineBreak});for(let n of t.ranges)o.push(ic.range(Math.min(e.doc.length,n.anchor+s),Math.min(e.doc.length,n.head+s)))}else{r.push({from:i.from,to:t.from},{from:t.to,insert:e.lineBreak+i.text});for(let e of t.ranges)o.push(ic.range(e.anchor-s,e.head-s))}}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:ic.create(o,e.selection.mainIndex),userEvent:"move.line"})),!0)}function ov(e,t,n){if(e.readOnly)return!1;let r=[];for(let t of nv(e))n?r.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):r.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});let o=e.changes(r);return t(e.update({changes:o,selection:e.selection.map(o,n?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const iv=av(!1),sv=av(!0);function av(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange(n=>{let{from:r,to:o}=n,i=t.doc.lineAt(r),s=!e&&r==o&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,r=Yg(e).resolveInner(t),o=r.childBefore(t),i=r.childAfter(t);return o&&i&&o.to<=t&&i.from>=t&&(n=o.type.prop(Fp.closedBy))&&n.indexOf(i.name)>-1&&e.doc.lineAt(o.to).from==e.doc.lineAt(i.from).from&&!/\S/.test(e.sliceDoc(o.to,i.from))?{from:o.to,to:i.from}:null}(t,r);e&&(r=o=(o<=i.to?i:t.doc.lineAt(o)).to);let a=new um(t,{simulateBreak:r,simulateDoubleBreak:!!s}),l=cm(a,r);for(null==l&&(l=cu(/^\s*/.exec(t.doc.lineAt(r).text)[0],t.tabSize));o<i.to&&/\s/.test(i.text[o-i.from]);)o++;s?({from:r,to:o}=s):r>i.from&&r<i.from+100&&!/\S/.test(i.text.slice(0,r))&&(r=i.from);let c=["",lm(t,l)];return s&&c.push(lm(t,a.lineIndent(i.from,-1))),{changes:{from:r,to:o,insert:Rl.of(c)},range:ic.cursor(r+1+c[1].length)}});return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function lv(e,t){let n=-1;return e.changeByRange(r=>{let o=[];for(let i=r.from;i<=r.to;){let s=e.doc.lineAt(i);s.number>n&&(r.empty||r.to>s.from)&&(t(s,o,r),n=s.number),i=s.to+1}let i=e.changes(o);return{changes:o,range:ic.range(i.mapPos(r.anchor,1),i.mapPos(r.head,1))}})}const cv=[{key:"Ctrl-b",run:wy,shift:Dy,preventDefault:!0},{key:"Ctrl-f",run:xy,shift:Ly},{key:"Ctrl-p",run:Ny,shift:$y},{key:"Ctrl-n",run:Ay,shift:zy},{key:"Ctrl-a",run:e=>my(e,t=>ic.cursor(e.lineBlockAt(t.head).from,1)),shift:e=>Py(e,t=>ic.cursor(e.lineBlockAt(t.head).from))},{key:"Ctrl-e",run:e=>my(e,t=>ic.cursor(e.lineBlockAt(t.head).to,-1)),shift:e=>Py(e,t=>ic.cursor(e.lineBlockAt(t.head).to))},{key:"Ctrl-d",run:Jy},{key:"Ctrl-h",run:Qy},{key:"Ctrl-k",run:e=>Yy(e,t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)})},{key:"Ctrl-Alt-h",run:tv},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:Rl.of(["",""])},range:ic.cursor(e.from)}));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let n=t.from,r=e.doc.lineAt(n),o=n==r.from?n-1:Kl(r.text,n-r.from,!1)+r.from,i=n==r.to?n+1:Kl(r.text,n-r.from,!0)+r.from;return{changes:{from:o,to:i,insert:e.doc.slice(n,i).append(e.doc.slice(o,n))},range:ic.cursor(i)}});return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:Oy}],uv=[{key:"ArrowLeft",run:wy,shift:Dy,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>ky(e,!by(e)),shift:e=>Ry(e,!by(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>my(e,t=>jy(e,t,!by(e))),shift:e=>Py(e,t=>jy(e,t,!by(e))),preventDefault:!0},{key:"ArrowRight",run:xy,shift:Ly,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>ky(e,by(e)),shift:e=>Ry(e,by(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>my(e,t=>jy(e,t,by(e))),shift:e=>Py(e,t=>jy(e,t,by(e))),preventDefault:!0},{key:"ArrowUp",run:Ny,shift:$y,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Hy,shift:Uy},{mac:"Ctrl-ArrowUp",run:Ty,shift:Vy},{key:"ArrowDown",run:Ay,shift:zy,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Wy,shift:Ky},{mac:"Ctrl-ArrowDown",run:Oy,shift:Fy},{key:"PageUp",run:Ty,shift:Vy},{key:"PageDown",run:Oy,shift:Fy},{key:"Home",run:e=>my(e,t=>jy(e,t,!1)),shift:e=>Py(e,t=>jy(e,t,!1)),preventDefault:!0},{key:"Mod-Home",run:Hy,shift:Uy},{key:"End",run:e=>my(e,t=>jy(e,t,!0)),shift:e=>Py(e,t=>jy(e,t,!0)),preventDefault:!0},{key:"Mod-End",run:Wy,shift:Ky},{key:"Enter",run:iv,shift:iv},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Qy,shift:Qy,preventDefault:!0},{key:"Delete",run:Jy,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:tv,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>ev(e,!0),preventDefault:!0},{mac:"Mod-Backspace",run:e=>Yy(e,t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)}),preventDefault:!0},{mac:"Mod-Delete",run:e=>Yy(e,t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}),preventDefault:!0}].concat(cv.map(e=>({mac:e.key,run:e.run,shift:e.shift}))),dv=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>my(e,t=>Ey(e.state,t,!by(e))),shift:e=>Py(e,t=>Ey(e.state,t,!by(e)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>my(e,t=>Ey(e.state,t,by(e))),shift:e=>Py(e,t=>Ey(e.state,t,by(e)))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>rv(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>ov(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>rv(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>ov(e,t,!0)},{key:"Mod-Alt-ArrowUp",run:e=>Xy(e,!1)},{key:"Mod-Alt-ArrowDown",run:e=>Xy(e,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=ic.create([n.main]):n.main.empty||(r=ic.create([ic.cursor(n.main.head)])),!!r&&(t(gy(e,r)),!0)}},{key:"Mod-Enter",run:sv},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let n=nv(e).map(({from:t,to:n})=>ic.range(t,Math.min(n+1,e.doc.length)));return t(e.update({selection:ic.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let n=py(e.selection,t=>{let n=Yg(e),r=n.resolveStack(t.from,1);if(t.empty){let e=n.resolveStack(t.from,-1);e.node.from>=r.node.from&&e.node.to<=r.node.to&&(r=e)}for(let e=r;e;e=e.next){let{node:n}=e;if((n.from<t.from&&n.to>=t.to||n.to>t.to&&n.from<=t.from)&&e.next)return ic.range(n.to,n.from)}return t});return!n.eq(e.selection)&&(t(gy(e,n)),!0)},preventDefault:!0},{key:"Mod-[",run:({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(lv(e,(t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let o=cu(r,e.tabSize),i=0,s=lm(e,Math.max(0,o-am(e)));for(;i<r.length&&i<s.length&&r.charCodeAt(i)==s.charCodeAt(i);)i++;n.push({from:t.from+i,to:t.from+r.length,insert:s.slice(i)})}),{userEvent:"delete.dedent"})),!0)},{key:"Mod-]",run:({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(lv(e,(t,n)=>{n.push({from:t.from,insert:e.facet(sm)})}),{userEvent:"input.indent"})),!0)},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new um(e,{overrideIndentation:e=>{let t=n[e];return null==t?-1:t}}),o=lv(e,(t,o,i)=>{let s=cm(r,t.from);if(null==s)return;/\S/.test(t.text)||(s=0);let a=/^\s*/.exec(t.text)[0],l=lm(e,s);(a!=l||i.from<t.from+a.length)&&(n[t.from]=s,o.push({from:t.from,to:t.from+a.length,insert:l}))});return o.changes.empty||t(e.update(o,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(nv(t).map(({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n}))),r=py(t.selection,t=>{let n;if(e.lineWrapping){let r=e.lineBlockAt(t.head),o=e.coordsAtPos(t.head,t.assoc||1);o&&(n=r.bottom+e.documentTop-o.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,n)}).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>function(e,t,n){let r=!1,o=py(e.selection,t=>{let o=_m(e,t.head,-1)||_m(e,t.head,1)||t.head>0&&_m(e,t.head-1,1)||t.head<e.doc.length&&_m(e,t.head+1,-1);if(!o||!o.end)return t;r=!0;let i=o.start.from==t.head?o.end.to:o.end.from;return n?ic.range(t.anchor,i):ic.cursor(i)});return!!r&&(t(gy(e,o)),!0)}(e,t,!1)},{key:"Mod-/",run:e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),r=Jm(e.state,n.from);return r.line?Gm(e):!!r.block&&Qm(e)}},{key:"Alt-A",run:Zm},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat(uv);var hv={};function fv(e,t){for(var n=0;n<t.length;n++)hv[t[n]]=e}var pv=["true","false"],gv=["if","then","do","else","elif","while","until","for","in","esac","fi","fin","fil","done","exit","set","unset","export","function"],mv=["ab","awk","bash","beep","cat","cc","cd","chown","chmod","chroot","clear","cp","curl","cut","diff","echo","find","gawk","gcc","get","git","grep","hg","kill","killall","ln","ls","make","mkdir","openssl","mv","nc","nl","node","npm","ping","ps","restart","rm","rmdir","sed","service","sh","shopt","shred","source","sort","sleep","ssh","start","stop","su","sudo","svn","tee","telnet","top","touch","vi","vim","wall","wc","wget","who","write","yes","zsh"];function yv(e,t){if(e.eatSpace())return null;var n,r=e.sol(),o=e.next();if("\\"===o)return e.next(),null;if("'"===o||'"'===o||"`"===o)return t.tokens.unshift(vv(o,"`"===o?"quote":"string")),xv(e,t);if("#"===o)return r&&e.eat("!")?(e.skipToEnd(),"meta"):(e.skipToEnd(),"comment");if("$"===o)return t.tokens.unshift(wv),xv(e,t);if("+"===o||"="===o)return"operator";if("-"===o)return e.eat("-"),e.eatWhile(/\w/),"attribute";if("<"==o){if(e.match("<<"))return"operator";var i=e.match(/^<-?\s*(?:['"]([^'"]*)['"]|([^'"\s]*))/);if(i)return t.tokens.unshift((n=i[1]||i[2],function(e,t){return e.sol()&&e.string==n&&t.tokens.shift(),e.skipToEnd(),"string.special"})),"string.special"}if(/\d/.test(o)&&(e.eatWhile(/\d/),e.eol()||!/\w/.test(e.peek())))return"number";e.eatWhile(/[\w-]/);var s=e.current();return"="===e.peek()&&/\w+/.test(s)?"def":hv.hasOwnProperty(s)?hv[s]:null}function vv(e,t){var n="("==e?")":"{"==e?"}":e;return function(r,o){for(var i,s=!1;null!=(i=r.next());){if(i===n&&!s){o.tokens.shift();break}if("$"===i&&!s&&"'"!==e&&r.peek()!=n){s=!0,r.backUp(1),o.tokens.unshift(wv);break}if(!s&&e!==n&&i===e)return o.tokens.unshift(vv(e,t)),xv(r,o);if(!s&&/['"]/.test(i)&&!/['"]/.test(e)){o.tokens.unshift(bv(i,"string")),r.backUp(1);break}s=!s&&"\\"===i}return t}}function bv(e,t){return function(n,r){return r.tokens[0]=vv(e,t),n.next(),xv(n,r)}}fv("atom",pv),fv("keyword",gv),fv("builtin",mv);var wv=function(e,t){t.tokens.length>1&&e.eat("$");var n=e.next();return/['"({]/.test(n)?(t.tokens[0]=vv(n,"("==n?"quote":"{"==n?"def":"string"),xv(e,t)):(/\d/.test(n)||e.eatWhile(/\w/),t.tokens.shift(),"def")};function xv(e,t){return(t.tokens[0]||yv)(e,t)}const kv={name:"shell",startState:function(){return{tokens:[]}},token:function(e,t){return xv(e,t)},languageData:{autocomplete:pv.concat(gv,mv),closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"#"}}},Sv="#e06c75",Ev="#abb2bf",Cv="#7d8799",Nv="#d19a66",Av="#2c313a",_v="#282c34",Mv="#353a42",Tv="#528bff",Ov=[Np.theme({"&":{color:Ev,backgroundColor:_v},".cm-content":{caretColor:Tv},".cm-cursor, .cm-dropCursor":{borderLeftColor:Tv},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"#3E4451"},".cm-panels":{backgroundColor:"#21252b",color:Ev},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:_v,color:Cv,border:"none"},".cm-activeLineGutter":{backgroundColor:Av},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Mv},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Mv,borderBottomColor:Mv},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Av,color:Ev}}},{dark:!0}),xm(ym.define([{tag:Fg.keyword,color:"#c678dd"},{tag:[Fg.name,Fg.deleted,Fg.character,Fg.propertyName,Fg.macroName],color:Sv},{tag:[Fg.function(Fg.variableName),Fg.labelName],color:"#61afef"},{tag:[Fg.color,Fg.constant(Fg.name),Fg.standard(Fg.name)],color:Nv},{tag:[Fg.definition(Fg.name),Fg.separator],color:Ev},{tag:[Fg.typeName,Fg.className,Fg.number,Fg.changed,Fg.annotation,Fg.modifier,Fg.self,Fg.namespace],color:"#e5c07b"},{tag:[Fg.operator,Fg.operatorKeyword,Fg.url,Fg.escape,Fg.regexp,Fg.link,Fg.special(Fg.string)],color:"#56b6c2"},{tag:[Fg.meta,Fg.comment],color:Cv},{tag:Fg.strong,fontWeight:"bold"},{tag:Fg.emphasis,fontStyle:"italic"},{tag:Fg.strikethrough,textDecoration:"line-through"},{tag:Fg.link,color:Cv,textDecoration:"underline"},{tag:Fg.heading,fontWeight:"bold",color:Sv},{tag:[Fg.atom,Fg.bool,Fg.special(Fg.variableName)],color:Nv},{tag:[Fg.processingInstruction,Fg.string,Fg.inserted],color:"#98c379"},{tag:Fg.invalid,color:"#ffffff"}]))],jv=Im.define(kv);function Pv({initialValue:e,stepLabel:t,onSave:n,onClose:i}){const s=(0,o.useRef)(null),a=(0,o.useRef)(null);return(0,o.useEffect)(()=>{const t=s.current;if(!t)return;const n=Np.theme({"&":{backgroundColor:"transparent",height:"100%",minHeight:0,display:"flex",flexDirection:"column"},"&.cm-focused":{outline:"none"},".cm-scroller":{overflow:"auto",flex:1,minHeight:0},".cm-content":{fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",fontSize:"0.875rem",padding:"1rem"}}),r=Wc.create({doc:e,extensions:[jv,...document.documentElement.classList.contains("dark")?[Ov]:[xm(Em)],Ip.of(dv),n]}),o=new Np({state:r,parent:t});return a.current=o,o.focus(),()=>{o.destroy(),a.current=null}},[]),(0,o.useEffect)(()=>{const e=e=>{if("Escape"!==e.key){if((e.metaKey||e.ctrlKey)&&"s"===e.key){e.preventDefault();const t=a.current?.state.doc.toString()??"";n(t),i()}}else i()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[i,n]),(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 dark:bg-black/70 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"run-script-dialog-title",onClick:e=>{e.target===e.currentTarget&&i()},children:(0,r.jsxs)("div",{className:"flex h-[85vh] w-full max-w-4xl flex-col rounded-lg bg-white dark:bg-slate-800 shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-200 dark:border-slate-700 px-4 py-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{id:"run-script-dialog-title",className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Edit run script"}),t&&(0,r.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:t})]}),(0,r.jsx)("button",{type:"button",onClick:i,className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"Close",children:(0,r.jsx)("span",{className:"text-xl leading-none",children:""})})]}),(0,r.jsx)("div",{className:"border-b border-slate-100 dark:border-slate-700 px-4 py-2",children:(0,r.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Script runs as sh on the GitHub runner (bash on Ubuntu)."})}),(0,r.jsx)("div",{ref:s,className:"flex-1 min-h-0 flex flex-col rounded-none border-0 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 overflow-hidden","aria-label":"Run script content"}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 border-t border-slate-200 dark:border-slate-700 px-4 py-3",children:[(0,r.jsx)("button",{type:"button",onClick:i,className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-3 py-1.5 text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"Cancel"}),(0,r.jsx)("button",{type:"button",onClick:()=>{const e=a.current?.state.doc.toString()??"";n(e),i()},className:"rounded bg-slate-800 dark:bg-slate-700 px-3 py-1.5 text-sm text-white dark:text-slate-200 hover:bg-slate-700 dark:hover:bg-slate-600",children:"Save changes"})]})]})})}function Iv(){return(0,r.jsx)(xl,{className:"text-[#E95420]",size:16})}function Dv(){return(0,r.jsx)(wl,{className:"text-gray-700",size:16})}function Lv(){return(0,r.jsx)(kl,{className:"text-blue-500",size:16})}function Rv({workflow:e,jobId:t,onWorkflowChange:n,onClose:i,onDeleteJob:s}){const a=e.jobs[t],l=(0,o.useCallback)(r=>{const o={...e,jobs:{...e.jobs}};o.jobs[t]&&(o.jobs[t]=r(o.jobs[t]),n(o))},[e,t,n]),c=(0,o.useCallback)((e,t)=>{l(n=>({...n,[e]:t}))},[l]),u=(0,o.useCallback)(()=>{l(e=>({...e,steps:[...e.steps??[],{run:""}]}))},[l]),d=(0,o.useCallback)((e,t)=>{l(n=>{const r=[...n.steps??[]];return r[e]=t(r[e]??{run:""}),{...n,steps:r}})},[l]),h=(0,o.useCallback)(e=>{l(t=>{const n=(t.steps??[]).filter((t,n)=>n!==e);return{...t,steps:n}})},[l]),[f,p]=(0,o.useState)(null),g=a?Array.isArray(a["runs-on"])?a["runs-on"].join(", "):String(a["runs-on"]??""):"",m=(0,o.useMemo)(()=>a?.needs?Array.isArray(a.needs)?a.needs:[a.needs]:[],[a?.needs]),y=Object.keys(e.jobs).filter(e=>e!==t),v=[{value:"ubuntu-latest",label:"Ubuntu Latest",icon:Iv()},{value:"ubuntu-22.04",label:"Ubuntu 22.04",icon:Iv()},{value:"ubuntu-20.04",label:"Ubuntu 20.04",icon:Iv()},{value:"macos-latest",label:"macOS Latest",icon:Dv()},{value:"macos-14",label:"macOS 14",icon:Dv()},{value:"macos-13",label:"macOS 13",icon:Dv()},{value:"macos-12",label:"macOS 12",icon:Dv()},{value:"windows-latest",label:"Windows Latest",icon:Lv()},{value:"windows-2022",label:"Windows 2022",icon:Lv()},{value:"windows-2019",label:"Windows 2019",icon:Lv()},{value:"self-hosted",label:"Self-hosted",icon:(0,r.jsx)(hl,{className:"text-slate-600",size:16})}],b=v.find(e=>e.value===g)||{value:g,label:g||"ubuntu-latest",icon:Iv()},[w,x]=(0,o.useState)(!1),[k,S]=(0,o.useState)({}),[E,C]=(0,o.useState)({}),N=(0,o.useRef)(null);(0,o.useEffect)(()=>{const e=e=>{N.current&&!N.current.contains(e.target)&&x(!1);const t=e.target;t instanceof Element&&(t.closest("[data-matrix-dropdown]")||(S({}),C({})))};return(w||Object.keys(k).length>0||Object.keys(E).length>0)&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[w,k,E]);const A=(0,o.useCallback)(e=>{c("runs-on",e||"ubuntu-latest"),x(!1)},[c]),_=(0,o.useCallback)((e,t,n)=>{n.stopPropagation();const r=m,o=t?[...r,e]:r.filter(t=>t!==e);c("needs",0===o.length?void 0:1===o.length?o[0]:o)},[m,c]);return a?(0,r.jsxs)("aside",{className:"flex w-96 shrink-0 flex-col border-l border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm pr-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-200 dark:border-slate-700 px-3 py-1.5",children:[(0,r.jsxs)("h2",{className:"text-xs font-semibold text-slate-800 dark:text-slate-200",children:["Job: ",t]}),(0,r.jsx)("button",{type:"button",onClick:i,className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"Close panel",children:(0,r.jsx)("span",{className:"text-sm leading-none",children:""})})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Display name"}),(0,r.jsx)("input",{type:"text",value:a.name??"",onChange:e=>c("name",e.target.value||void 0),className:"mt-1 w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:t})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Runs on"}),(0,r.jsxs)("div",{ref:N,className:"relative mt-1",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>x(!w),className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-1.5 py-1 text-xs text-left flex items-center gap-2 hover:bg-slate-50 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-slate-900 dark:text-slate-200",children:[(0,r.jsx)("span",{className:"flex-shrink-0",children:b.icon}),(0,r.jsx)("span",{className:"flex-1",children:b.label}),(0,r.jsx)("span",{className:"text-slate-400 dark:text-slate-500 transition-transform "+(w?"rotate-180":""),children:""})]}),w&&(0,r.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded shadow-lg max-h-60 overflow-auto",children:[v.map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>A(e.value),className:"w-full px-1.5 py-1 text-xs text-left flex items-center gap-2 hover:bg-slate-50 dark:hover:bg-slate-700 "+(e.value===g?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-slate-900 dark:text-slate-200"),children:[(0,r.jsx)("span",{className:"flex-shrink-0",children:e.icon}),(0,r.jsx)("span",{children:e.label})]},e.value)),!v.some(e=>e.value===g)&&(0,r.jsxs)("button",{type:"button",onClick:()=>A(g),className:"w-full px-1.5 py-1 text-xs text-left flex items-center gap-2 hover:bg-slate-50 dark:hover:bg-slate-700 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:[(0,r.jsx)("span",{className:"flex-shrink-0",children:b.icon}),(0,r.jsx)("span",{children:g||"ubuntu-latest"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Needs"}),0===y.length?(0,r.jsx)("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"No other jobs in this workflow."}):(0,r.jsx)("ul",{className:"mt-1 space-y-1.5 rounded border border-slate-300 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 p-2",children:y.map(e=>(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:`needs-${e}`,checked:m.includes(e),onChange:t=>_(e,t.target.checked,t),onClick:e=>e.stopPropagation(),className:"h-4 w-4 rounded border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-400 focus:ring-slate-500 dark:focus:ring-slate-400"}),(0,r.jsx)("label",{htmlFor:`needs-${e}`,className:"cursor-pointer text-xs text-slate-700 dark:text-slate-300",children:e})]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Environment Variables"}),(0,r.jsx)("button",{type:"button",onClick:()=>{const e={...a.env??{},"":""};c("env",e)},className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-1.5 py-0.5 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"+ Add variable"})]}),a.env&&0!==Object.keys(a.env).length?(0,r.jsx)("div",{className:"space-y-1.5",children:Object.entries(a.env).map(([e,t],n)=>(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:n=>{const r={...a.env??{}};delete r[e],r[n.target.value]=t,c("env",Object.keys(r).length>0?r:void 0)},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Variable name"}),(0,r.jsx)("input",{type:"text",value:t,onChange:t=>{const n={...a.env??{}};""===t.target.value?delete n[e]:n[e]=t.target.value,c("env",Object.keys(n).length>0?n:void 0)},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Value"}),(0,r.jsx)("button",{type:"button",onClick:()=>{const t={...a.env??{}};delete t[e],c("env",Object.keys(t).length>0?t:void 0)},className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300 shrink-0",children:""})]},n))}):(0,r.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:"No environment variables configured"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Matrix Strategy"}),(0,r.jsx)("button",{type:"button",onClick:()=>{a.strategy?.matrix?c("strategy",void 0):c("strategy",{matrix:{}})},className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-1.5 py-0.5 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:a.strategy?.matrix?"Remove matrix":"Add matrix"})]}),a.strategy?.matrix&&(0,r.jsxs)("div",{className:"mb-3 rounded border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700/50 p-2 space-y-2","data-matrix-dropdown":!0,children:[(0,r.jsxs)("div",{className:"space-y-2",children:[Object.entries(a.strategy.matrix).map(([e,t],n)=>{const o=(i=e,Cl.some(e=>e.name===i));var i;const s=function(e){const t=Cl.find(t=>t.name===e);return t?t.values:null}(e),l=k[e]??!1;return(0,r.jsxs)("div",{className:"rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,r.jsx)("div",{className:"relative flex-1",children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{type:"button",onClick:()=>S(t=>({...t,[e]:!t[e]})),className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-1.5 py-1 text-xs text-left flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-600 text-slate-900 dark:text-slate-200",children:[(0,r.jsx)("span",{className:"font-medium",children:Cl.find(t=>t.name===e)?.label||e}),(0,r.jsx)("span",{className:"text-slate-400 dark:text-slate-500",children:""})]}),l&&(0,r.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded shadow-lg max-h-60 overflow-auto",children:[Cl.map(n=>(0,r.jsx)("button",{type:"button",onClick:()=>{const r={...a.strategy.matrix};delete r[e];const o=Array.isArray(t)?t:[];r[n.name]=o.length>0?o:[n.values[0]],c("strategy",{...a.strategy,matrix:r}),S(t=>({...t,[e]:!1}))},className:"w-full px-1.5 py-1 text-xs text-left hover:bg-slate-50 dark:hover:bg-slate-700 "+(n.name===e?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-slate-900 dark:text-slate-200"),children:n.label},n.name)),(0,r.jsx)("div",{className:"border-t border-slate-200 px-1.5 py-1",children:(0,r.jsx)("input",{type:"text",value:e,onChange:n=>{const r={...a.strategy.matrix};delete r[e],r[n.target.value]=t,c("strategy",{...a.strategy,matrix:r})},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Custom variable name",onClick:e=>e.stopPropagation()})})]})]}):(0,r.jsx)("input",{type:"text",value:e,onChange:n=>{const r={...a.strategy.matrix};delete r[e],r[n.target.value]=t,c("strategy",{...a.strategy,matrix:r})},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs font-medium",placeholder:"Variable name"})}),(0,r.jsx)("button",{type:"button",onClick:()=>{const t={...a.strategy.matrix};delete t[e],c("strategy",{...a.strategy,matrix:Object.keys(t).length>0?t:void 0})},className:"ml-2 rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300 shrink-0",children:""})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[Array.isArray(t)&&t.map((t,n)=>{const o=String(t),i=E[`${e}-${n}`]??!1,l=null!==s;return(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[l?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>C(t=>({...t,[`${e}-${n}`]:!t[`${e}-${n}`]})),className:"w-24 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-1.5 py-1 text-xs text-left flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-600 text-slate-900 dark:text-slate-200",children:[(0,r.jsx)("span",{className:"truncate",children:o}),(0,r.jsx)("span",{className:"text-slate-400 dark:text-slate-500 text-xs shrink-0 ml-1",children:""})]}),i&&(0,r.jsxs)("div",{className:"absolute z-10 w-32 mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded shadow-lg max-h-60 overflow-auto",children:[s.map(t=>(0,r.jsx)("button",{type:"button",onClick:()=>{const r={...a.strategy.matrix},o=[...r[e]??[]];o[n]=t,r[e]=o,c("strategy",{...a.strategy,matrix:r}),C(t=>({...t,[`${e}-${n}`]:!1}))},className:"w-full px-1.5 py-1 text-xs text-left hover:bg-slate-50 dark:hover:bg-slate-700 "+(t===o?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-slate-900 dark:text-slate-200"),children:t},t)),(0,r.jsx)("div",{className:"border-t border-slate-200 px-2 py-1",children:(0,r.jsx)("input",{type:"text",value:o,onChange:t=>{const r={...a.strategy.matrix},o=r[e]??[],i=[...o],s=Number(t.target.value);o.length>0&&"number"==typeof o[0]&&!Number.isNaN(s)&&""!==t.target.value.trim()?i[n]=s:i[n]=t.target.value,r[e]=i,c("strategy",{...a.strategy,matrix:r})},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Custom value",onClick:e=>e.stopPropagation()})})]})]}):(0,r.jsx)("input",{type:"text",value:o,onChange:t=>{const r={...a.strategy.matrix},o=r[e]??[],i=[...o],s=Number(t.target.value);o.length>0&&"number"==typeof o[0]&&!Number.isNaN(s)&&""!==t.target.value.trim()?i[n]=s:i[n]=t.target.value,r[e]=i,c("strategy",{...a.strategy,matrix:r})},className:"w-24 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Value"}),(0,r.jsx)("button",{type:"button",onClick:()=>{const t={...a.strategy.matrix},r=(t[e]??[]).filter((e,t)=>t!==n);r.length>0?t[e]=r:delete t[e],c("strategy",{...a.strategy,matrix:Object.keys(t).length>0?t:void 0})},className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300 shrink-0",children:""})]},n)}),(0,r.jsx)("button",{type:"button",onClick:()=>{const t={...a.strategy.matrix},n=[...t[e]??[],s&&s.length>0?s[0]:""];t[e]=n,c("strategy",{...a.strategy,matrix:t})},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-1.5 py-0.5 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"+ Add value"})]})]},n)}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>S(e=>({...e,__new__:!e.__new__})),className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-1.5 py-0.5 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600 flex items-center justify-between",children:[(0,r.jsx)("span",{children:"+ Add matrix variable"}),(0,r.jsx)("span",{className:"text-slate-400 dark:text-slate-500",children:""})]}),k.__new__&&(0,r.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded shadow-lg max-h-60 overflow-auto",children:[Cl.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{const t={...a.strategy.matrix};t[e.name]=[e.values[0]],c("strategy",{...a.strategy,matrix:t}),S(e=>({...e,__new__:!1}))},className:"w-full px-1.5 py-1 text-xs text-left hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-900 dark:text-slate-200",children:e.label},e.name)),(0,r.jsx)("div",{className:"border-t border-slate-200 dark:border-slate-700 px-1.5 py-1",children:(0,r.jsx)("input",{type:"text",onKeyDown:e=>{if("Enter"===e.key){const t=e.currentTarget,n={...a.strategy.matrix,[t.value]:[""]};c("strategy",{...a.strategy,matrix:n}),S(e=>({...e,__new__:!1})),t.value=""}},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Custom variable name (Enter)",onClick:e=>e.stopPropagation()})})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 border-t border-slate-200 dark:border-slate-700 pt-1.5",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-xs text-slate-900 dark:text-slate-200",children:[(0,r.jsx)("input",{type:"checkbox",checked:!1!==a.strategy["fail-fast"],onChange:e=>{c("strategy",{...a.strategy,"fail-fast":!!e.target.checked&&void 0})},className:"h-4 w-4 rounded border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-400"}),(0,r.jsx)("span",{children:"Fail fast (default: true)"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("label",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Max parallel:"}),(0,r.jsx)("input",{type:"number",value:a.strategy["max-parallel"]??"",onChange:e=>{const t=""===e.target.value?void 0:Number(e.target.value);c("strategy",{...a.strategy,"max-parallel":t})},className:"w-20 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"",min:"1"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Steps"}),(0,r.jsx)("button",{type:"button",onClick:u,className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-1.5 py-0.5 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"Add step"})]}),(0,r.jsx)("ul",{className:"mt-2 space-y-3",children:(a.steps??[]).map((e,t)=>(0,r.jsxs)("li",{className:"rounded border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700/50 p-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:["Step ",t+1]}),(0,r.jsx)("button",{type:"button",onClick:()=>h(t),className:"rounded p-0.5 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300","aria-label":`Remove step ${t+1}`,children:""})]}),(0,r.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,r.jsx)("input",{type:"text",value:e.name??"",onChange:e=>d(t,t=>({...t,name:e.target.value||void 0})),className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Step name"}),(0,r.jsx)("input",{type:"text",value:e.uses??"",onChange:e=>d(t,t=>({...t,uses:e.target.value||void 0})),className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"uses: actions/checkout@v4"}),e.uses&&(0,r.jsxs)("div",{className:"rounded border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:"With (action inputs)"}),(0,r.jsx)("button",{type:"button",onClick:()=>{e.with&&Object.keys(e.with).length>0?d(t,e=>({...e,with:void 0})):d(t,e=>({...e,with:{"":""}}))},className:"text-xs text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300",children:e.with&&Object.keys(e.with).length>0?"Remove":"Add"})]}),e.with&&Object.keys(e.with).length>0&&(0,r.jsxs)("div",{className:"space-y-1.5 mt-2",children:[Object.entries(e.with).map(([n,o],i)=>(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)("input",{type:"text",value:n,onChange:r=>{const i={...e.with};delete i[n],i[r.target.value]=o,d(t,e=>({...e,with:Object.keys(i).length>0?i:void 0}))},className:"w-1/3 flex-shrink-0 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Input name"}),(0,r.jsx)("input",{type:"text",value:String(o),onChange:r=>{const i={...e.with},s=Number(r.target.value);"number"!=typeof o||Number.isNaN(s)||""===r.target.value.trim()?i[n]=r.target.value:i[n]=s,d(t,e=>({...e,with:i}))},className:"flex-1 font-mono rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Value"}),(0,r.jsx)("button",{type:"button",onClick:()=>{const r={...e.with};delete r[n],d(t,e=>({...e,with:Object.keys(r).length>0?r:void 0}))},className:"rounded p-0.5 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300 shrink-0",children:""})]},i)),(0,r.jsx)("button",{type:"button",onClick:()=>{const n={...e.with,"":""};d(t,e=>({...e,with:n}))},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-1.5 py-0.5 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"+ Add input"})]})]}),(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)("div",{className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 px-1.5 py-1.5 text-xs font-mono text-slate-700 dark:text-slate-300 min-h-[2.5rem] overflow-hidden text-ellipsis whitespace-nowrap",children:(e.run??"").trim().split("\n")[0]||"run: ..."}),(0,r.jsx)("button",{type:"button",onClick:()=>p(t),className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 p-1.5 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600","aria-label":"Edit script",children:(0,r.jsx)(dl,{size:14})})]})]})]},t))})]})]}),s&&(0,r.jsx)("div",{className:"flex justify-center border-t border-slate-200 dark:border-slate-700 p-4",onClick:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation(),children:(0,r.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),e.stopPropagation(),s&&s(t)},onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},className:"rounded border border-red-200 dark:border-red-800 bg-white dark:bg-slate-800 px-3 py-1.5 text-xs font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 cursor-pointer","aria-label":`Delete job ${t}`,children:"Delete job"})}),null!==f&&a?.steps?.[f]&&(0,r.jsx)(Pv,{initialValue:a.steps[f]?.run??"",stepLabel:`Step ${f+1}${a.steps[f]?.name?`: ${a.steps[f].name}`:""}`,onSave:e=>{d(f,t=>({...t,run:e||void 0})),p(null)},onClose:()=>p(null)})]}):null}const Bv=new Set(["branch_protection_rule","check_run","check_suite","discussion","discussion_comment","issue_comment","issues","label","merge_group","milestone","pull_request","pull_request_review","pull_request_review_comment","pull_request_target","registry_package","release","repository_dispatch","watch","workflow_run"]);function $v(e){if(!e)return[];if("string"==typeof e)return[{event:e,config:{}}];if(Array.isArray(e))return e.flatMap(e=>"string"==typeof e?[{event:e,config:{}}]:"object"==typeof e&&null!==e?Object.entries(e).map(([e,t])=>({event:e,config:t??{}})):[]);if("object"==typeof e&&null!==e){const t=[];for(const[n,r]of Object.entries(e))if("schedule"===n&&Array.isArray(r))for(const e of r)"object"==typeof e&&null!==e&&"cron"in e?t.push({event:n,config:{cron:e.cron}}):t.push({event:n,config:{}});else t.push({event:n,config:r??{}});return t}return[]}const zv="shrink-0 text-purple-700 dark:text-purple-300";function qv({trigger:e,className:t=""}){const n=function(e){const{event:t,config:n}=e,o=function(e){const t=e.toLowerCase();return"push"===t?(0,r.jsx)(vl,{className:zv,size:14}):"pull_request"===t||"pull_request_target"===t?(0,r.jsx)(yl,{className:zv,size:14}):"schedule"===t?(0,r.jsx)(gl,{className:zv,size:14}):(0,r.jsx)(ml,{className:zv,size:14})}(t),i=[];return n.branches&&n.branches.length>0&&i.push({icon:o,label:1===n.branches.length?n.branches[0]:n.branches.join(", ")}),n.tags&&n.tags.length>0&&i.push({icon:o,label:1===n.tags.length?n.tags[0]:n.tags.join(", ")}),n.cron&&i.push({icon:o,label:n.cron}),n.types&&n.types.length>0&&i.push({icon:o,label:1===n.types.length?n.types[0]:n.types.join(", ")}),0===i.length&&i.push({icon:o,label:t}),i}(e),o=function(e){const{event:t,config:n}=e,r=[t];return n.branches&&n.branches.length>0&&r.push(`branches: ${n.branches.join(", ")}`),n.tags&&n.tags.length>0&&r.push(`tags: ${n.tags.join(", ")}`),n.paths&&n.paths.length>0&&r.push(`paths: ${n.paths.join(", ")}`),n.types&&n.types.length>0&&r.push(`types: ${n.types.join(", ")}`),r.join("  ")}(e);return(0,r.jsx)(r.Fragment,{children:n.map(({icon:e,label:n},i)=>(0,r.jsxs)("span",{className:`inline-flex items-center gap-1 rounded bg-purple-100 dark:bg-purple-900/30 px-1.5 py-0.5 text-xs font-medium text-purple-800 dark:text-purple-200 ${t}`,title:o,children:[e,(0,r.jsx)("span",{children:n})]},i))})}const Vv=(0,o.memo)(function(e){const{data:t,selected:n}=e,o=t;return(0,r.jsxs)("div",{className:`\n        min-w-[180px] rounded-lg border-2 bg-gradient-to-br from-purple-50 to-indigo-50 dark:from-purple-900/30 dark:to-indigo-900/30 px-3 py-2 shadow-sm\n        ${n?"border-purple-500 dark:border-purple-400 ring-2 ring-purple-200 dark:ring-purple-900":"border-purple-300 dark:border-purple-700 hover:border-purple-400 dark:hover:border-purple-600"}\n      `,children:[(0,r.jsx)("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:"Trigger"}),(0,r.jsx)("div",{className:"mt-1 flex flex-wrap items-center gap-1",children:0===o.triggers.length?(0,r.jsx)("span",{className:"rounded bg-slate-100 dark:bg-slate-700 px-1.5 py-0.5 text-xs italic text-slate-500 dark:text-slate-400",children:"No triggers"}):o.triggers.map((e,t)=>(0,r.jsx)(qv,{trigger:e},t))}),(0,r.jsx)(ps,{type:"source",position:lr.Right,className:"!h-2 !w-2 !border-2 !border-purple-400 dark:!border-purple-600 !bg-white dark:!bg-slate-800"})]})}),Fv=[{value:"push",label:"Push"},{value:"pull_request",label:"Pull Request"},{value:"pull_request_target",label:"Pull Request Target"},{value:"pull_request_review",label:"Pull Request Review"},{value:"pull_request_review_comment",label:"Pull Request Review Comment"},{value:"workflow_dispatch",label:"Workflow Dispatch"},{value:"repository_dispatch",label:"Repository Dispatch"},{value:"schedule",label:"Schedule (Cron)"},{value:"workflow_call",label:"Workflow Call"},{value:"workflow_run",label:"Workflow Run"},{value:"issues",label:"Issues"},{value:"issue_comment",label:"Issue Comment"},{value:"label",label:"Label"},{value:"milestone",label:"Milestone"},{value:"project",label:"Project"},{value:"project_card",label:"Project Card"},{value:"project_column",label:"Project Column"},{value:"release",label:"Release"},{value:"watch",label:"Watch"},{value:"create",label:"Create"},{value:"delete",label:"Delete"},{value:"fork",label:"Fork"},{value:"gollum",label:"Gollum (Wiki)"},{value:"page_build",label:"Page Build"},{value:"public",label:"Public"},{value:"status",label:"Status"},{value:"branch_protection_rule",label:"Branch Protection Rule"},{value:"check_run",label:"Check Run"},{value:"check_suite",label:"Check Suite"},{value:"discussion",label:"Discussion"},{value:"discussion_comment",label:"Discussion Comment"},{value:"merge_group",label:"Merge Group"},{value:"registry_package",label:"Registry Package"}];function Hv({workflow:e,onWorkflowChange:t,onClose:n}){const[i,s]=(0,o.useState)(()=>$v(e.on)),a=(0,o.useRef)(e);a.current=e,(0,o.useEffect)(()=>{s($v(e.on))},[e.on]);const l=(0,o.useCallback)(e=>{s(e);const n=function(e){if(0===e.length)return{};const t=e.filter(e=>"schedule"===e.event),n=e.filter(e=>"schedule"!==e.event),r={};if(t.length>0&&(r.schedule=t.map(e=>({cron:e.config.cron||"0 0 * * *"}))),1===n.length){const e=n[0];0===Object.keys(e.config).length?r[e.event]={}:r[e.event]=e.config}else if(n.length>1){const e=n.map(e=>0===Object.keys(e.config).length?e.event:{[e.event]:e.config});return t.length>0?[...e,{schedule:t.map(e=>({cron:e.config.cron||"0 0 * * *"}))}]:e}if(t.length>0&&0===n.length)return r;if(1===n.length&&0===t.length){const e=n[0];return 0===Object.keys(e.config).length?e.event:{[e.event]:e.config}}return r}(e);t({...a.current,on:n})},[t]),c=(0,o.useCallback)(()=>{l([...i,{event:"push",config:{}}])},[i,l]),u=(0,o.useCallback)(e=>{l(i.filter((t,n)=>n!==e))},[i,l]),d=(0,o.useCallback)((e,t)=>{const n=[...i];n[e]=t(n[e]),l(n)},[i,l]),h=(0,o.useCallback)((e,t,n)=>{d(e,e=>({...e,config:{...e.config,[t]:n}}))},[d]),f=(0,o.useCallback)((e,t,n)=>{const r=i[e].config[t]??[];n&&!r.includes(n)&&h(e,t,[...r,n])},[i,h]),p=(0,o.useCallback)((e,t,n)=>{const r=i[e].config[t]??[];h(e,t,r.filter((e,t)=>t!==n))},[i,h]);return(0,r.jsxs)("aside",{className:"flex w-96 shrink-0 flex-col border-l border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm pr-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-200 dark:border-slate-700 px-3 py-1.5",children:[(0,r.jsx)("h2",{className:"text-xs font-semibold text-slate-800 dark:text-slate-200",children:"Workflow Triggers"}),(0,r.jsx)("button",{type:"button",onClick:n,className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"Close panel",children:(0,r.jsx)("span",{className:"text-sm leading-none",children:""})})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Triggers"}),(0,r.jsx)("button",{type:"button",onClick:c,className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-1.5 py-0.5 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"+ Add Trigger"})]}),0===i.length?(0,r.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:"No triggers configured"}):(0,r.jsx)("div",{className:"space-y-2",children:i.map((e,t)=>{return(0,r.jsxs)("div",{className:"rounded border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700/50 p-2 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:["Trigger ",t+1]}),(0,r.jsx)("button",{type:"button",onClick:()=>u(t),className:"rounded p-0.5 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300","aria-label":`Remove trigger ${t+1}`,children:""})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Event Type"}),(0,r.jsx)("select",{value:e.event,onChange:e=>d(t,t=>({...t,event:e.target.value,config:{}})),className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",children:Fv.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),("push"===e.event||"pull_request"===e.event)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Branches"}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(e.config.branches??[]).map((n,o)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",value:n,onChange:n=>{const r=[...e.config.branches??[]];r[o]=n.target.value,h(t,"branches",r)},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"main"}),(0,r.jsx)("button",{type:"button",onClick:()=>p(t,"branches",o),className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300",children:""})]},o)),(0,r.jsx)("input",{type:"text",onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const n=e.currentTarget;f(t,"branches",n.value),n.value=""}},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Press Enter to add branch"})]})]}),"push"===e.event&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Tags"}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(e.config.tags??[]).map((n,o)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",value:n,onChange:n=>{const r=[...e.config.tags??[]];r[o]=n.target.value,h(t,"tags",r)},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"v*"}),(0,r.jsx)("button",{type:"button",onClick:()=>p(t,"tags",o),className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300",children:""})]},o)),(0,r.jsx)("input",{type:"text",onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const n=e.currentTarget;f(t,"tags",n.value),n.value=""}},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Press Enter to add tag"})]})]}),(n=e.event,Bv.has(n)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Types (optional)"}),"repository_dispatch"===e.event&&(0,r.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Filter by custom event type sent via API"}),"release"===e.event&&(0,r.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"e.g. published, unpublished, created, prereleased, released"}),"pull_request"===e.event&&(0,r.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"e.g. opened, synchronize, closed, labeled, etc."}),"workflow_run"===e.event&&(0,r.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"e.g. completed, requested, in_progress"}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(e.config.types??[]).map((n,o)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",value:n,onChange:n=>{const r=[...e.config.types??[]];r[o]=n.target.value,h(t,"types",r)},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"release"===e.event?"published":"repository_dispatch"===e.event?"deploy":"pull_request"===e.event?"opened":"workflow_run"===e.event?"completed":"activity_type"}),(0,r.jsx)("button",{type:"button",onClick:()=>p(t,"types",o),className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300",children:""})]},o)),(0,r.jsx)("input",{type:"text",onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const n=e.currentTarget;f(t,"types",n.value),n.value=""}},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Press Enter to add type"})]})]})),("push"===e.event||"pull_request"===e.event)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Paths"}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(e.config.paths??[]).map((n,o)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",value:n,onChange:n=>{const r=[...e.config.paths??[]];r[o]=n.target.value,h(t,"paths",r)},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"src/**"}),(0,r.jsx)("button",{type:"button",onClick:()=>p(t,"paths",o),className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300",children:""})]},o)),(0,r.jsx)("input",{type:"text",onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const n=e.currentTarget;f(t,"paths",n.value),n.value=""}},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Press Enter to add path"})]})]}),("push"===e.event||"pull_request"===e.event)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Paths Ignore"}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(e.config.pathsIgnore??[]).map((n,o)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",value:n,onChange:n=>{const r=[...e.config.pathsIgnore??[]];r[o]=n.target.value,h(t,"pathsIgnore",r)},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"docs/**"}),(0,r.jsx)("button",{type:"button",onClick:()=>p(t,"pathsIgnore",o),className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300",children:""})]},o)),(0,r.jsx)("input",{type:"text",onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const n=e.currentTarget;f(t,"pathsIgnore",n.value),n.value=""}},className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Press Enter to add path"})]})]}),"schedule"===e.event&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Cron Expression"}),(0,r.jsx)("input",{type:"text",value:e.config.cron??"",onChange:e=>h(t,"cron",e.target.value),className:"w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs font-mono",placeholder:"0 0 * * *"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-slate-500",children:'Format: minute hour day month weekday (e.g., "0 0 * * *" for daily at midnight)'})]})]},t);var n})})]})})]})}function Wv({workflow:e,onWorkflowChange:t,onClose:n}){const i=(0,o.useCallback)(n=>{t(n(e))},[e,t]),s=(0,o.useCallback)((e,t)=>{i(n=>({...n,[e]:t}))},[i]),a=(0,o.useMemo)(()=>e.env??{},[e.env]),l=(0,o.useCallback)((e,t)=>{const n={...a};""===t?delete n[e]:n[e]=t,s("env",Object.keys(n).length>0?n:void 0)},[a,s]),c=(0,o.useCallback)(e=>{const t={...a};delete t[e],s("env",Object.keys(t).length>0?t:void 0)},[a,s]);return(0,r.jsxs)("aside",{className:"flex w-96 shrink-0 flex-col border-l border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-sm pr-3",children:[(0,r.jsxs)("div",{className:"flex flex-col border-b border-slate-200 dark:border-slate-700 px-3 py-1.5",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xs font-semibold text-slate-800 dark:text-slate-200",children:"Workflow config"}),(0,r.jsx)("button",{type:"button",onClick:n,className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"Close panel",children:(0,r.jsx)("span",{className:"text-sm leading-none",children:""})})]}),(0,r.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:"Name, run name, and environment variables"})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Workflow name"}),(0,r.jsx)("input",{type:"text",value:e.name??"",onChange:e=>s("name",e.target.value||void 0),className:"mt-1 w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Untitled Workflow"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Run name"}),(0,r.jsx)("input",{type:"text",value:e["run-name"]??"",onChange:e=>s("run-name",e.target.value||void 0),className:"mt-1 w-full rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Run name expression"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-slate-500 dark:text-slate-400",children:"Environment Variables"}),(0,r.jsx)("button",{type:"button",onClick:()=>{const e={...a,"":""};s("env",e)},className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-1.5 py-0.5 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"+ Add variable"})]}),0===Object.keys(a).length?(0,r.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:"No environment variables configured"}):(0,r.jsx)("div",{className:"space-y-1.5",children:Object.entries(a).map(([e,t],n)=>(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:n=>{const r={...a};delete r[e],r[n.target.value]=t,s("env",Object.keys(r).length>0?r:void 0)},className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Variable name"}),(0,r.jsx)("input",{type:"text",value:t,onChange:t=>l(e,t.target.value),className:"flex-1 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-200 px-1.5 py-1 text-xs",placeholder:"Value"}),(0,r.jsx)("button",{type:"button",onClick:()=>c(e),className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-600 hover:text-slate-600 dark:hover:text-slate-300 shrink-0",children:""})]},n))})]})]})]})}var Uv=new RegExp("\\b(("+["true","false","on","off","yes","no"].join(")|(")+"))$","i");const Kv={name:"yaml",token:function(e,t){var n=e.peek(),r=t.escaped;if(t.escaped=!1,"#"==n&&(0==e.pos||/\s/.test(e.string.charAt(e.pos-1))))return e.skipToEnd(),"comment";if(e.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(t.literal&&e.indentation()>t.keyCol)return e.skipToEnd(),"string";if(t.literal&&(t.literal=!1),e.sol()){if(t.keyCol=0,t.pair=!1,t.pairStart=!1,e.match("---"))return"def";if(e.match("..."))return"def";if(e.match(/^\s*-\s+/))return"meta"}if(e.match(/^(\{|\}|\[|\])/))return"{"==n?t.inlinePairs++:"}"==n?t.inlinePairs--:"["==n?t.inlineList++:t.inlineList--,"meta";if(t.inlineList>0&&!r&&","==n)return e.next(),"meta";if(t.inlinePairs>0&&!r&&","==n)return t.keyCol=0,t.pair=!1,t.pairStart=!1,e.next(),"meta";if(t.pairStart){if(e.match(/^\s*(\||\>)\s*/))return t.literal=!0,"meta";if(e.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable";if(0==t.inlinePairs&&e.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(t.inlinePairs>0&&e.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(e.match(Uv))return"keyword"}return!t.pair&&e.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(t.pair=!0,t.keyCol=e.indentation(),"atom"):t.pair&&e.match(/^:\s*/)?(t.pairStart=!0,"meta"):(t.pairStart=!1,t.escaped="\\"==n,e.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},languageData:{commentTokens:{line:"#"}}},Xv=Symbol.for("yaml.alias"),Yv=Symbol.for("yaml.document"),Gv=Symbol.for("yaml.map"),Zv=Symbol.for("yaml.pair"),Qv=Symbol.for("yaml.scalar"),Jv=Symbol.for("yaml.seq"),eb=Symbol.for("yaml.node.type"),tb=e=>!!e&&"object"==typeof e&&e[eb]===Xv,nb=e=>!!e&&"object"==typeof e&&e[eb]===Yv,rb=e=>!!e&&"object"==typeof e&&e[eb]===Gv,ob=e=>!!e&&"object"==typeof e&&e[eb]===Zv,ib=e=>!!e&&"object"==typeof e&&e[eb]===Qv,sb=e=>!!e&&"object"==typeof e&&e[eb]===Jv;function ab(e){if(e&&"object"==typeof e)switch(e[eb]){case Gv:case Jv:return!0}return!1}function lb(e){if(e&&"object"==typeof e)switch(e[eb]){case Xv:case Gv:case Qv:case Jv:return!0}return!1}const cb=e=>(ib(e)||ab(e))&&!!e.anchor,ub=Symbol("break visit"),db=Symbol("skip children"),hb=Symbol("remove node");function fb(e,t){const n=yb(t);nb(e)?pb(null,e.contents,n,Object.freeze([e]))===hb&&(e.contents=null):pb(null,e,n,Object.freeze([]))}function pb(e,t,n,r){const o=vb(e,t,n,r);if(lb(o)||ob(o))return bb(e,r,o),pb(e,o,n,r);if("symbol"!=typeof o)if(ab(t)){r=Object.freeze(r.concat(t));for(let e=0;e<t.items.length;++e){const o=pb(e,t.items[e],n,r);if("number"==typeof o)e=o-1;else{if(o===ub)return ub;o===hb&&(t.items.splice(e,1),e-=1)}}}else if(ob(t)){r=Object.freeze(r.concat(t));const e=pb("key",t.key,n,r);if(e===ub)return ub;e===hb&&(t.key=null);const o=pb("value",t.value,n,r);if(o===ub)return ub;o===hb&&(t.value=null)}return o}async function gb(e,t){const n=yb(t);nb(e)?await mb(null,e.contents,n,Object.freeze([e]))===hb&&(e.contents=null):await mb(null,e,n,Object.freeze([]))}async function mb(e,t,n,r){const o=await vb(e,t,n,r);if(lb(o)||ob(o))return bb(e,r,o),mb(e,o,n,r);if("symbol"!=typeof o)if(ab(t)){r=Object.freeze(r.concat(t));for(let e=0;e<t.items.length;++e){const o=await mb(e,t.items[e],n,r);if("number"==typeof o)e=o-1;else{if(o===ub)return ub;o===hb&&(t.items.splice(e,1),e-=1)}}}else if(ob(t)){r=Object.freeze(r.concat(t));const e=await mb("key",t.key,n,r);if(e===ub)return ub;e===hb&&(t.key=null);const o=await mb("value",t.value,n,r);if(o===ub)return ub;o===hb&&(t.value=null)}return o}function yb(e){return"object"==typeof e&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function vb(e,t,n,r){return"function"==typeof n?n(e,t,r):rb(t)?n.Map?.(e,t,r):sb(t)?n.Seq?.(e,t,r):ob(t)?n.Pair?.(e,t,r):ib(t)?n.Scalar?.(e,t,r):tb(t)?n.Alias?.(e,t,r):void 0}function bb(e,t,n){const r=t[t.length-1];if(ab(r))r.items[e]=n;else if(ob(r))"key"===e?r.key=n:r.value=n;else{if(!nb(r)){const e=tb(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${e} parent`)}r.contents=n}}fb.BREAK=ub,fb.SKIP=db,fb.REMOVE=hb,gb.BREAK=ub,gb.SKIP=db,gb.REMOVE=hb;const wb={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},xb=e=>e.replace(/[!,[\]{}]/g,e=>wb[e]);class kb{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},kb.defaultYaml,e),this.tags=Object.assign({},kb.defaultTags,t)}clone(){const e=new kb(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new kb(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:kb.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},kb.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:kb.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},kb.defaultTags),this.atNextDocument=!1);const n=e.trim().split(/[ \t]+/),r=n.shift();switch(r){case"%TAG":{if(2!==n.length&&(t(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[e,r]=n;return this.tags[e]=r,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==n.length)return t(0,"%YAML directive should contain exactly one part"),!1;const[e]=n;return"1.1"===e||"1.2"===e?(this.yaml.version=e,!0):(t(6,`Unsupported YAML version ${e}`,/^\d+\.\d+$/.test(e)),!1)}default:return t(0,`Unknown directive ${r}`,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])return t(`Not a valid tag: ${e}`),null;if("<"===e[1]){const n=e.slice(2,-1);return"!"===n||"!!"===n?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),n)}const[,n,r]=e.match(/^(.*!)([^!]*)$/s);r||t(`The ${e} tag has no suffix`);const o=this.tags[n];if(o)try{return o+decodeURIComponent(r)}catch(e){return t(String(e)),null}return"!"===n?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+xb(e.substring(n.length));return"!"===e[0]?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let r;if(e&&n.length>0&&lb(e.contents)){const t={};fb(e.contents,(e,n)=>{lb(n)&&n.tag&&(t[n.tag]=!0)}),r=Object.keys(t)}else r=[];for(const[o,i]of n)"!!"===o&&"tag:yaml.org,2002:"===i||e&&!r.some(e=>e.startsWith(i))||t.push(`%TAG ${o} ${i}`);return t.join("\n")}}function Sb(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const t=JSON.stringify(e);throw new Error(`Anchor must not contain whitespace or control characters: ${t}`)}return!0}function Eb(e){const t=new Set;return fb(e,{Value(e,n){n.anchor&&t.add(n.anchor)}}),t}function Cb(e,t){for(let n=1;;++n){const r=`${e}${n}`;if(!t.has(r))return r}}function Nb(e,t,n,r){if(r&&"object"==typeof r)if(Array.isArray(r))for(let t=0,n=r.length;t<n;++t){const n=r[t],o=Nb(e,r,String(t),n);void 0===o?delete r[t]:o!==n&&(r[t]=o)}else if(r instanceof Map)for(const t of Array.from(r.keys())){const n=r.get(t),o=Nb(e,r,t,n);void 0===o?r.delete(t):o!==n&&r.set(t,o)}else if(r instanceof Set)for(const t of Array.from(r)){const n=Nb(e,r,t,t);void 0===n?r.delete(t):n!==t&&(r.delete(t),r.add(n))}else for(const[t,n]of Object.entries(r)){const o=Nb(e,r,t,n);void 0===o?delete r[t]:o!==n&&(r[t]=o)}return e.call(t,n,r)}function Ab(e,t,n){if(Array.isArray(e))return e.map((e,t)=>Ab(e,String(t),n));if(e&&"function"==typeof e.toJSON){if(!n||!cb(e))return e.toJSON(t,n);const r={aliasCount:0,count:1,res:void 0};n.anchors.set(e,r),n.onCreate=e=>{r.res=e,delete n.onCreate};const o=e.toJSON(t,n);return n.onCreate&&n.onCreate(o),o}return"bigint"!=typeof e||n?.keep?e:Number(e)}kb.defaultYaml={explicit:!1,version:"1.2"},kb.defaultTags={"!!":"tag:yaml.org,2002:"};class _b{constructor(e){Object.defineProperty(this,eb,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:n,onAnchor:r,reviver:o}={}){if(!nb(e))throw new TypeError("A document argument is required");const i={anchors:new Map,doc:e,keep:!0,mapAsMap:!0===t,mapKeyWarned:!1,maxAliasCount:"number"==typeof n?n:100},s=Ab(this,"",i);if("function"==typeof r)for(const{count:e,res:t}of i.anchors.values())r(t,e);return"function"==typeof o?Nb(o,{"":s},"",s):s}}class Mb extends _b{constructor(e){super(Xv),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,t){let n,r;t?.aliasResolveCache?n=t.aliasResolveCache:(n=[],fb(e,{Node:(e,t)=>{(tb(t)||cb(t))&&n.push(t)}}),t&&(t.aliasResolveCache=n));for(const e of n){if(e===this)break;e.anchor===this.source&&(r=e)}return r}toJSON(e,t){if(!t)return{source:this.source};const{anchors:n,doc:r,maxAliasCount:o}=t,i=this.resolve(r,t);if(!i){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(e)}let s=n.get(i);if(s||(Ab(i,null,t),s=n.get(i)),void 0===s?.res)throw new ReferenceError("This should not happen: Alias anchor was not resolved?");if(o>=0&&(s.count+=1,0===s.aliasCount&&(s.aliasCount=Tb(r,i,n)),s.count*s.aliasCount>o))throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack");return s.res}toString(e,t,n){const r=`*${this.source}`;if(e){if(Sb(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(e)}if(e.implicitKey)return`${r} `}return r}}function Tb(e,t,n){if(tb(t)){const r=t.resolve(e),o=n&&r&&n.get(r);return o?o.count*o.aliasCount:0}if(ab(t)){let r=0;for(const o of t.items){const t=Tb(e,o,n);t>r&&(r=t)}return r}if(ob(t)){const r=Tb(e,t.key,n),o=Tb(e,t.value,n);return Math.max(r,o)}return 1}const Ob=e=>!e||"function"!=typeof e&&"object"!=typeof e;class jb extends _b{constructor(e){super(Qv),this.value=e}toJSON(e,t){return t?.keep?this.value:Ab(this.value,e,t)}toString(){return String(this.value)}}function Pb(e,t,n){if(nb(e)&&(e=e.contents),lb(e))return e;if(ob(e)){const t=n.schema[Gv].createNode?.(n.schema,null,n);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||"undefined"!=typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:r,onAnchor:o,onTagObj:i,schema:s,sourceObjects:a}=n;let l;if(r&&e&&"object"==typeof e){if(l=a.get(e),l)return l.anchor??(l.anchor=o(e)),new Mb(l.anchor);l={anchor:null,node:null},a.set(e,l)}t?.startsWith("!!")&&(t="tag:yaml.org,2002:"+t.slice(2));let c=function(e,t,n){if(t){const e=n.filter(e=>e.tag===t),r=e.find(e=>!e.format)??e[0];if(!r)throw new Error(`Tag ${t} not found`);return r}return n.find(t=>t.identify?.(e)&&!t.format)}(e,t,s.tags);if(!c){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e){const t=new jb(e);return l&&(l.node=t),t}c=e instanceof Map?s[Gv]:Symbol.iterator in Object(e)?s[Jv]:s[Gv]}i&&(i(c),delete n.onTagObj);const u=c?.createNode?c.createNode(n.schema,e,n):"function"==typeof c?.nodeClass?.from?c.nodeClass.from(n.schema,e,n):new jb(e);return t?u.tag=t:c.default||(u.tag=c.tag),l&&(l.node=u),u}function Ib(e,t,n){let r=n;for(let e=t.length-1;e>=0;--e){const n=t[e];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const e=[];e[n]=r,r=e}else r=new Map([[n,r]])}return Pb(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}jb.BLOCK_FOLDED="BLOCK_FOLDED",jb.BLOCK_LITERAL="BLOCK_LITERAL",jb.PLAIN="PLAIN",jb.QUOTE_DOUBLE="QUOTE_DOUBLE",jb.QUOTE_SINGLE="QUOTE_SINGLE";const Db=e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done;class Lb extends _b{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(t=>lb(t)||ob(t)?t.clone(e):t),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(Db(e))this.add(t);else{const[n,...r]=e,o=this.get(n,!0);if(ab(o))o.addIn(r,t);else{if(void 0!==o||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`);this.set(n,Ib(this.schema,r,t))}}}deleteIn(e){const[t,...n]=e;if(0===n.length)return this.delete(t);const r=this.get(t,!0);if(ab(r))return r.deleteIn(n);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${n}`)}getIn(e,t){const[n,...r]=e,o=this.get(n,!0);return 0===r.length?!t&&ib(o)?o.value:o:ab(o)?o.getIn(r,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!ob(t))return!1;const n=t.value;return null==n||e&&ib(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(e){const[t,...n]=e;if(0===n.length)return this.has(t);const r=this.get(t,!0);return!!ab(r)&&r.hasIn(n)}setIn(e,t){const[n,...r]=e;if(0===r.length)this.set(n,t);else{const e=this.get(n,!0);if(ab(e))e.setIn(r,t);else{if(void 0!==e||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`);this.set(n,Ib(this.schema,r,t))}}}}const Rb=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function Bb(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}const $b=(e,t,n)=>e.endsWith("\n")?Bb(n,t):n.includes("\n")?"\n"+Bb(n,t):(e.endsWith(" ")?"":" ")+n,zb="flow",qb="block",Vb="quoted";function Fb(e,t,n="flow",{indentAtStart:r,lineWidth:o=80,minContentWidth:i=20,onFold:s,onOverflow:a}={}){if(!o||o<0)return e;o<i&&(i=0);const l=Math.max(1+i,1+o-t.length);if(e.length<=l)return e;const c=[],u={};let d,h,f=o-t.length;"number"==typeof r&&(r>o-Math.max(2,i)?c.push(0):f=o-r);let p=!1,g=-1,m=-1,y=-1;n===qb&&(g=Hb(e,g,t.length),-1!==g&&(f=g+l));for(let r;r=e[g+=1];){if(n===Vb&&"\\"===r){switch(m=g,e[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}y=g}if("\n"===r)n===qb&&(g=Hb(e,g,t.length)),f=g+t.length+l,d=void 0;else{if(" "===r&&h&&" "!==h&&"\n"!==h&&"\t"!==h){const t=e[g+1];t&&" "!==t&&"\n"!==t&&"\t"!==t&&(d=g)}if(g>=f)if(d)c.push(d),f=d+l,d=void 0;else if(n===Vb){for(;" "===h||"\t"===h;)h=r,r=e[g+=1],p=!0;const t=g>y+1?g-2:m-1;if(u[t])return e;c.push(t),u[t]=!0,f=t+l,d=void 0}else p=!0}h=r}if(p&&a&&a(),0===c.length)return e;s&&s();let v=e.slice(0,c[0]);for(let r=0;r<c.length;++r){const o=c[r],i=c[r+1]||e.length;0===o?v=`\n${t}${e.slice(0,i)}`:(n===Vb&&u[o]&&(v+=`${e[o]}\\`),v+=`\n${t}${e.slice(o+1,i)}`)}return v}function Hb(e,t,n){let r=t,o=t+1,i=e[o];for(;" "===i||"\t"===i;)if(t<o+n)i=e[++t];else{do{i=e[++t]}while(i&&"\n"!==i);r=t,o=t+1,i=e[o]}return r}const Wb=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),Ub=e=>/^(%|---|\.\.\.)/m.test(e);function Kb(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=t,o=t.options.doubleQuotedMinMultiLineLength,i=t.indent||(Ub(e)?"  ":"");let s="",a=0;for(let e=0,t=n[e];t;t=n[++e])if(" "===t&&"\\"===n[e+1]&&"n"===n[e+2]&&(s+=n.slice(a,e)+"\\ ",e+=1,a=e,t="\\"),"\\"===t)switch(n[e+1]){case"u":{s+=n.slice(a,e);const t=n.substr(e+2,4);switch(t){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:"00"===t.substr(0,2)?s+="\\x"+t.substr(2):s+=n.substr(e,6)}e+=5,a=e+1}break;case"n":if(r||'"'===n[e+2]||n.length<o)e+=1;else{for(s+=n.slice(a,e)+"\n\n";"\\"===n[e+2]&&"n"===n[e+3]&&'"'!==n[e+4];)s+="\n",e+=2;s+=i," "===n[e+2]&&(s+="\\"),e+=1,a=e+1}break;default:e+=1}return s=a?s+n.slice(a):n,r?s:Fb(s,i,Vb,Wb(t,!1))}function Xb(e,t){if(!1===t.options.singleQuote||t.implicitKey&&e.includes("\n")||/[ \t]\n|\n[ \t]/.test(e))return Kb(e,t);const n=t.indent||(Ub(e)?"  ":""),r="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return t.implicitKey?r:Fb(r,n,zb,Wb(t,!1))}function Yb(e,t){const{singleQuote:n}=t.options;let r;if(!1===n)r=Kb;else{const t=e.includes('"'),o=e.includes("'");r=t&&!o?Xb:o&&!t?Kb:n?Xb:Kb}return r(e,t)}let Gb;try{Gb=new RegExp("(^|(?<!\n))\n+(?!\n|$)","g")}catch{Gb=/\n+(?!\n|$)/g}function Zb({comment:e,type:t,value:n},r,o,i){const{blockQuote:s,commentString:a,lineWidth:l}=r.options;if(!s||/\n[\t ]+$/.test(n))return Yb(n,r);const c=r.indent||(r.forceBlockIndent||Ub(n)?"  ":""),u="literal"===s||"folded"!==s&&t!==jb.BLOCK_FOLDED&&(t===jb.BLOCK_LITERAL||!function(e,t,n){if(!t||t<0)return!1;const r=t-n,o=e.length;if(o<=r)return!1;for(let t=0,n=0;t<o;++t)if("\n"===e[t]){if(t-n>r)return!0;if(n=t+1,o-n<=r)return!1}return!0}(n,l,c.length));if(!n)return u?"|\n":">\n";let d,h;for(h=n.length;h>0;--h){const e=n[h-1];if("\n"!==e&&"\t"!==e&&" "!==e)break}let f=n.substring(h);const p=f.indexOf("\n");-1===p?d="-":n===f||p!==f.length-1?(d="+",i&&i()):d="",f&&(n=n.slice(0,-f.length),"\n"===f[f.length-1]&&(f=f.slice(0,-1)),f=f.replace(Gb,`$&${c}`));let g,m=!1,y=-1;for(g=0;g<n.length;++g){const e=n[g];if(" "===e)m=!0;else{if("\n"!==e)break;y=g}}let v=n.substring(0,y<g?y+1:g);v&&(n=n.substring(v.length),v=v.replace(/\n+/g,`$&${c}`));let b=(m?c?"2":"1":"")+d;if(e&&(b+=" "+a(e.replace(/ ?[\r\n]+/g," ")),o&&o()),!u){const e=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);let o=!1;const i=Wb(r,!0);"folded"!==s&&t!==jb.BLOCK_FOLDED&&(i.onOverflow=()=>{o=!0});const a=Fb(`${v}${e}${f}`,c,qb,i);if(!o)return`>${b}\n${c}${a}`}return`|${b}\n${c}${v}${n=n.replace(/\n+/g,`$&${c}`)}${f}`}function Qb(e,t,n,r){const{implicitKey:o,inFlow:i}=t,s="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)});let{type:a}=e;a!==jb.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(a=jb.QUOTE_DOUBLE);const l=e=>{switch(e){case jb.BLOCK_FOLDED:case jb.BLOCK_LITERAL:return o||i?Yb(s.value,t):Zb(s,t,n,r);case jb.QUOTE_DOUBLE:return Kb(s.value,t);case jb.QUOTE_SINGLE:return Xb(s.value,t);case jb.PLAIN:return function(e,t,n,r){const{type:o,value:i}=e,{actualString:s,implicitKey:a,indent:l,indentStep:c,inFlow:u}=t;if(a&&i.includes("\n")||u&&/[[\]{},]/.test(i))return Yb(i,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return a||u||!i.includes("\n")?Yb(i,t):Zb(e,t,n,r);if(!a&&!u&&o!==jb.PLAIN&&i.includes("\n"))return Zb(e,t,n,r);if(Ub(i)){if(""===l)return t.forceBlockIndent=!0,Zb(e,t,n,r);if(a&&l===c)return Yb(i,t)}const d=i.replace(/\n+/g,`$&\n${l}`);if(s){const e=e=>e.default&&"tag:yaml.org,2002:str"!==e.tag&&e.test?.test(d),{compat:n,tags:r}=t.doc.schema;if(r.some(e)||n?.some(e))return Yb(i,t)}return a?d:Fb(d,l,zb,Wb(t,!1))}(s,t,n,r);default:return null}};let c=l(a);if(null===c){const{defaultKeyType:e,defaultStringType:n}=t.options,r=o&&e||n;if(c=l(r),null===c)throw new Error(`Unsupported default string type ${r}`)}return c}function Jb(e,t){const n=Object.assign({blockQuote:!0,commentString:Rb,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);let r;switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:e,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:"number"==typeof n.indent?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function ew(e,t,n,r){if(ob(e))return e.toString(t,n,r);if(tb(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let o;const i=lb(e)?e:t.doc.createNode(e,{onTagObj:e=>o=e});o??(o=function(e,t){if(t.tag){const n=e.filter(e=>e.tag===t.tag);if(n.length>0)return n.find(e=>e.format===t.format)??n[0]}let n,r;if(ib(t)){r=t.value;let o=e.filter(e=>e.identify?.(r));if(o.length>1){const e=o.filter(e=>e.test);e.length>0&&(o=e)}n=o.find(e=>e.format===t.format)??o.find(e=>!e.format)}else r=t,n=e.find(e=>e.nodeClass&&r instanceof e.nodeClass);if(!n)throw new Error(`Tag not resolved for ${r?.constructor?.name??(null===r?"null":typeof r)} value`);return n}(t.doc.schema.tags,i));const s=function(e,t,{anchors:n,doc:r}){if(!r.directives)return"";const o=[],i=(ib(e)||ab(e))&&e.anchor;i&&Sb(i)&&(n.add(i),o.push(`&${i}`));const s=e.tag??(t.default?null:t.tag);return s&&o.push(r.directives.tagString(s)),o.join(" ")}(i,o,t);s.length>0&&(t.indentAtStart=(t.indentAtStart??0)+s.length+1);const a="function"==typeof o.stringify?o.stringify(i,t,n,r):ib(i)?Qb(i,t,n,r):i.toString(t,n,r);return s?ib(i)||"{"===a[0]||"["===a[0]?`${s} ${a}`:`${s}\n${t.indent}${a}`:a}function tw(e,t){"debug"!==e&&"warn"!==e||console.warn(t)}const nw="<<",rw={identify:e=>e===nw||"symbol"==typeof e&&e.description===nw,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new jb(Symbol(nw)),{addToJSMap:ow}),stringify:()=>nw};function ow(e,t,n){if(n=e&&tb(n)?n.resolve(e.doc):n,sb(n))for(const r of n.items)iw(e,t,r);else if(Array.isArray(n))for(const r of n)iw(e,t,r);else iw(e,t,n)}function iw(e,t,n){const r=e&&tb(n)?n.resolve(e.doc):n;if(!rb(r))throw new Error("Merge sources must be maps or map aliases");const o=r.toJSON(null,e,Map);for(const[e,n]of o)t instanceof Map?t.has(e)||t.set(e,n):t instanceof Set?t.add(e):Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0});return t}function sw(e,t,{key:n,value:r}){if(lb(n)&&n.addToJSMap)n.addToJSMap(e,t,r);else if(((e,t)=>(rw.identify(t)||ib(t)&&(!t.type||t.type===jb.PLAIN)&&rw.identify(t.value))&&e?.doc.schema.tags.some(e=>e.tag===rw.tag&&e.default))(e,n))ow(e,t,r);else{const o=Ab(n,"",e);if(t instanceof Map)t.set(o,Ab(r,o,e));else if(t instanceof Set)t.add(o);else{const i=function(e,t,n){if(null===t)return"";if("object"!=typeof t)return String(t);if(lb(e)&&n?.doc){const t=Jb(n.doc,{});t.anchors=new Set;for(const e of n.anchors.keys())t.anchors.add(e.anchor);t.inFlow=!0,t.inStringifyKey=!0;const r=e.toString(t);if(!n.mapKeyWarned){let e=JSON.stringify(r);e.length>40&&(e=e.substring(0,36)+'..."'),tw(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(t)}(n,o,e),s=Ab(r,i,e);i in t?Object.defineProperty(t,i,{value:s,writable:!0,enumerable:!0,configurable:!0}):t[i]=s}}return t}function aw(e,t,n){const r=Pb(e,void 0,n),o=Pb(t,void 0,n);return new lw(r,o)}class lw{constructor(e,t=null){Object.defineProperty(this,eb,{value:Zv}),this.key=e,this.value=t}clone(e){let{key:t,value:n}=this;return lb(t)&&(t=t.clone(e)),lb(n)&&(n=n.clone(e)),new lw(t,n)}toJSON(e,t){return sw(t,t?.mapAsMap?new Map:{},this)}toString(e,t,n){return e?.doc?function({key:e,value:t},n,r,o){const{allNullValues:i,doc:s,indent:a,indentStep:l,options:{commentString:c,indentSeq:u,simpleKeys:d}}=n;let h=lb(e)&&e.comment||null;if(d){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(ab(e)||!lb(e)&&"object"==typeof e)throw new Error("With simple keys, collection cannot be used as a key value")}let f=!d&&(!e||h&&null==t&&!n.inFlow||ab(e)||(ib(e)?e.type===jb.BLOCK_FOLDED||e.type===jb.BLOCK_LITERAL:"object"==typeof e));n=Object.assign({},n,{allNullValues:!1,implicitKey:!f&&(d||!i),indent:a+l});let p,g,m,y=!1,v=!1,b=ew(e,n,()=>y=!0,()=>v=!0);if(!f&&!n.inFlow&&b.length>1024){if(d)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");f=!0}if(n.inFlow){if(i||null==t)return y&&r&&r(),""===b?"?":f?`? ${b}`:b}else if(i&&!d||null==t&&f)return b=`? ${b}`,h&&!y?b+=$b(b,n.indent,c(h)):v&&o&&o(),b;y&&(h=null),f?(h&&(b+=$b(b,n.indent,c(h))),b=`? ${b}\n${a}:`):(b=`${b}:`,h&&(b+=$b(b,n.indent,c(h)))),lb(t)?(p=!!t.spaceBefore,g=t.commentBefore,m=t.comment):(p=!1,g=null,m=null,t&&"object"==typeof t&&(t=s.createNode(t))),n.implicitKey=!1,f||h||!ib(t)||(n.indentAtStart=b.length+1),v=!1,u||!(l.length>=2)||n.inFlow||f||!sb(t)||t.flow||t.tag||t.anchor||(n.indent=n.indent.substring(2));let w=!1;const x=ew(t,n,()=>w=!0,()=>v=!0);let k=" ";if(h||p||g)k=p?"\n":"",g&&(k+=`\n${Bb(c(g),n.indent)}`),""!==x||n.inFlow?k+=`\n${n.indent}`:"\n"===k&&m&&(k="\n\n");else if(!f&&ab(t)){const e=x[0],r=x.indexOf("\n"),o=-1!==r,i=n.inFlow??t.flow??0===t.items.length;if(o||!i){let t=!1;if(o&&("&"===e||"!"===e)){let n=x.indexOf(" ");"&"===e&&-1!==n&&n<r&&"!"===x[n+1]&&(n=x.indexOf(" ",n+1)),(-1===n||r<n)&&(t=!0)}t||(k=`\n${n.indent}`)}}else""!==x&&"\n"!==x[0]||(k="");return b+=k+x,n.inFlow?w&&r&&r():m&&!w?b+=$b(b,n.indent,c(m)):v&&o&&o(),b}(this,e,t,n):JSON.stringify(this)}}function cw(e,t,n){return(t.inFlow??e.flow?dw:uw)(e,t,n)}function uw({comment:e,items:t},n,{blockItemPrefix:r,flowChars:o,itemIndent:i,onChompKeep:s,onComment:a}){const{indent:l,options:{commentString:c}}=n,u=Object.assign({},n,{indent:i,type:null});let d=!1;const h=[];for(let e=0;e<t.length;++e){const o=t[e];let s=null;if(lb(o))!d&&o.spaceBefore&&h.push(""),hw(n,h,o.commentBefore,d),o.comment&&(s=o.comment);else if(ob(o)){const e=lb(o.key)?o.key:null;e&&(!d&&e.spaceBefore&&h.push(""),hw(n,h,e.commentBefore,d))}d=!1;let a=ew(o,u,()=>s=null,()=>d=!0);s&&(a+=$b(a,i,c(s))),d&&s&&(d=!1),h.push(r+a)}let f;if(0===h.length)f=o.start+o.end;else{f=h[0];for(let e=1;e<h.length;++e){const t=h[e];f+=t?`\n${l}${t}`:"\n"}}return e?(f+="\n"+Bb(c(e),l),a&&a()):d&&s&&s(),f}function dw({items:e},t,{flowChars:n,itemIndent:r}){const{indent:o,indentStep:i,flowCollectionPadding:s,options:{commentString:a}}=t;r+=i;const l=Object.assign({},t,{indent:r,inFlow:!0,type:null});let c=!1,u=0;const d=[];for(let n=0;n<e.length;++n){const o=e[n];let i=null;if(lb(o))o.spaceBefore&&d.push(""),hw(t,d,o.commentBefore,!1),o.comment&&(i=o.comment);else if(ob(o)){const e=lb(o.key)?o.key:null;e&&(e.spaceBefore&&d.push(""),hw(t,d,e.commentBefore,!1),e.comment&&(c=!0));const n=lb(o.value)?o.value:null;n?(n.comment&&(i=n.comment),n.commentBefore&&(c=!0)):null==o.value&&e?.comment&&(i=e.comment)}i&&(c=!0);let s=ew(o,l,()=>i=null);n<e.length-1&&(s+=","),i&&(s+=$b(s,r,a(i))),!c&&(d.length>u||s.includes("\n"))&&(c=!0),d.push(s),u=d.length}const{start:h,end:f}=n;if(0===d.length)return h+f;if(!c){const e=d.reduce((e,t)=>e+t.length+2,2);c=t.options.lineWidth>0&&e>t.options.lineWidth}if(c){let e=h;for(const t of d)e+=t?`\n${i}${o}${t}`:"\n";return`${e}\n${o}${f}`}return`${h}${s}${d.join(" ")}${s}${f}`}function hw({indent:e,options:{commentString:t}},n,r,o){if(r&&o&&(r=r.replace(/^\n+/,"")),r){const o=Bb(t(r),e);n.push(o.trimStart())}}function fw(e,t){const n=ib(t)?t.value:t;for(const r of e)if(ob(r)){if(r.key===t||r.key===n)return r;if(ib(r.key)&&r.key.value===n)return r}}class pw extends Lb{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(Gv,e),this.items=[]}static from(e,t,n){const{keepUndefined:r,replacer:o}=n,i=new this(e),s=(e,s)=>{if("function"==typeof o)s=o.call(t,e,s);else if(Array.isArray(o)&&!o.includes(e))return;(void 0!==s||r)&&i.items.push(aw(e,s,n))};if(t instanceof Map)for(const[e,n]of t)s(e,n);else if(t&&"object"==typeof t)for(const e of Object.keys(t))s(e,t[e]);return"function"==typeof e.sortMapEntries&&i.items.sort(e.sortMapEntries),i}add(e,t){let n;n=ob(e)?e:e&&"object"==typeof e&&"key"in e?new lw(e.key,e.value):new lw(e,e?.value);const r=fw(this.items,n.key),o=this.schema?.sortMapEntries;if(r){if(!t)throw new Error(`Key ${n.key} already set`);ib(r.value)&&Ob(n.value)?r.value.value=n.value:r.value=n.value}else if(o){const e=this.items.findIndex(e=>o(n,e)<0);-1===e?this.items.push(n):this.items.splice(e,0,n)}else this.items.push(n)}delete(e){const t=fw(this.items,e);return!!t&&this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){const n=fw(this.items,e),r=n?.value;return(!t&&ib(r)?r.value:r)??void 0}has(e){return!!fw(this.items,e)}set(e,t){this.add(new lw(e,t),!0)}toJSON(e,t,n){const r=n?new n:t?.mapAsMap?new Map:{};t?.onCreate&&t.onCreate(r);for(const e of this.items)sw(t,r,e);return r}toString(e,t,n){if(!e)return JSON.stringify(this);for(const e of this.items)if(!ob(e))throw new Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),cw(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:t})}}const gw={collection:"map",default:!0,nodeClass:pw,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>(rb(e)||t("Expected a mapping for this tag"),e),createNode:(e,t,n)=>pw.from(e,t,n)};class mw extends Lb{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Jv,e),this.items=[]}add(e){this.items.push(e)}delete(e){const t=yw(e);return"number"==typeof t&&this.items.splice(t,1).length>0}get(e,t){const n=yw(e);if("number"!=typeof n)return;const r=this.items[n];return!t&&ib(r)?r.value:r}has(e){const t=yw(e);return"number"==typeof t&&t<this.items.length}set(e,t){const n=yw(e);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[n];ib(r)&&Ob(t)?r.value=t:this.items[n]=t}toJSON(e,t){const n=[];t?.onCreate&&t.onCreate(n);let r=0;for(const e of this.items)n.push(Ab(e,String(r++),t));return n}toString(e,t,n){return e?cw(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:t}):JSON.stringify(this)}static from(e,t,n){const{replacer:r}=n,o=new this(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let i of t){if("function"==typeof r){const n=t instanceof Set?i:String(e++);i=r.call(t,n,i)}o.items.push(Pb(i,void 0,n))}}return o}}function yw(e){let t=ib(e)?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),"number"==typeof t&&Number.isInteger(t)&&t>=0?t:null}const vw={collection:"seq",default:!0,nodeClass:mw,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(sb(e)||t("Expected a sequence for this tag"),e),createNode:(e,t,n)=>mw.from(e,t,n)},bw={identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,t,n,r)=>Qb(e,t=Object.assign({actualString:!0},t),n,r)},ww={identify:e=>null==e,createNode:()=>new jb(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new jb(null),stringify:({source:e},t)=>"string"==typeof e&&ww.test.test(e)?e:t.options.nullStr},xw={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new jb("t"===e[0]||"T"===e[0]),stringify:({source:e,value:t},n)=>e&&xw.test.test(e)&&t===("t"===e[0]||"T"===e[0])?e:t?n.options.trueStr:n.options.falseStr};function kw({format:e,minFractionDigits:t,tag:n,value:r}){if("bigint"==typeof r)return String(r);const o="number"==typeof r?r:Number(r);if(!isFinite(o))return isNaN(o)?".nan":o<0?"-.inf":".inf";let i=Object.is(r,-0)?"-0":JSON.stringify(r);if(!e&&t&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(i)){let e=i.indexOf(".");e<0&&(e=i.length,i+=".");let n=t-(i.length-e-1);for(;n-- >0;)i+="0"}return i}const Sw={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:kw},Ew={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():kw(e)}},Cw={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new jb(parseFloat(e)),n=e.indexOf(".");return-1!==n&&"0"===e[e.length-1]&&(t.minFractionDigits=e.length-n-1),t},stringify:kw},Nw=e=>"bigint"==typeof e||Number.isInteger(e),Aw=(e,t,n,{intAsBigInt:r})=>r?BigInt(e):parseInt(e.substring(t),n);function _w(e,t,n){const{value:r}=e;return Nw(r)&&r>=0?n+r.toString(t):kw(e)}const Mw={identify:e=>Nw(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>Aw(e,2,8,n),stringify:e=>_w(e,8,"0o")},Tw={identify:Nw,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>Aw(e,0,10,n),stringify:kw},Ow={identify:e=>Nw(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>Aw(e,2,16,n),stringify:e=>_w(e,16,"0x")},jw=[gw,vw,bw,ww,xw,Mw,Tw,Ow,Sw,Ew,Cw];function Pw(e){return"bigint"==typeof e||Number.isInteger(e)}const Iw=({value:e})=>JSON.stringify(e),Dw=[{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:Iw},{identify:e=>null==e,createNode:()=>new jb(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Iw},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>"true"===e,stringify:Iw},{identify:Pw,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>Pw(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:Iw}],Lw=[gw,vw].concat(Dw,{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)}),Rw={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if("function"==typeof atob){const t=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:n},r,o,i){if(!n)return"";const s=n;let a;if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let e="";for(let t=0;t<s.length;++t)e+=String.fromCharCode(s[t]);a=btoa(e)}if(t??(t=jb.BLOCK_LITERAL),t!==jb.QUOTE_DOUBLE){const e=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),n=Math.ceil(a.length/e),o=new Array(n);for(let t=0,r=0;t<n;++t,r+=e)o[t]=a.substr(r,e);a=o.join(t===jb.BLOCK_LITERAL?"\n":" ")}return Qb({comment:e,type:t,value:a},r,o,i)}};function Bw(e,t){if(sb(e))for(let n=0;n<e.items.length;++n){let r=e.items[n];if(!ob(r)){if(rb(r)){r.items.length>1&&t("Each pair must have its own sequence indicator");const e=r.items[0]||new lw(new jb(null));if(r.commentBefore&&(e.key.commentBefore=e.key.commentBefore?`${r.commentBefore}\n${e.key.commentBefore}`:r.commentBefore),r.comment){const t=e.value??e.key;t.comment=t.comment?`${r.comment}\n${t.comment}`:r.comment}r=e}e.items[n]=ob(r)?r:new lw(r)}}else t("Expected a sequence for this tag");return e}function $w(e,t,n){const{replacer:r}=n,o=new mw(e);o.tag="tag:yaml.org,2002:pairs";let i=0;if(t&&Symbol.iterator in Object(t))for(let e of t){let s,a;if("function"==typeof r&&(e=r.call(t,String(i++),e)),Array.isArray(e)){if(2!==e.length)throw new TypeError(`Expected [key, value] tuple: ${e}`);s=e[0],a=e[1]}else if(e&&e instanceof Object){const t=Object.keys(e);if(1!==t.length)throw new TypeError(`Expected tuple with one key, not ${t.length} keys`);s=t[0],a=e[s]}else s=e;o.items.push(aw(s,a,n))}return o}const zw={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Bw,createNode:$w};class qw extends mw{constructor(){super(),this.add=pw.prototype.add.bind(this),this.delete=pw.prototype.delete.bind(this),this.get=pw.prototype.get.bind(this),this.has=pw.prototype.has.bind(this),this.set=pw.prototype.set.bind(this),this.tag=qw.tag}toJSON(e,t){if(!t)return super.toJSON(e);const n=new Map;t?.onCreate&&t.onCreate(n);for(const e of this.items){let r,o;if(ob(e)?(r=Ab(e.key,"",t),o=Ab(e.value,r,t)):r=Ab(e,"",t),n.has(r))throw new Error("Ordered maps must not include duplicate keys");n.set(r,o)}return n}static from(e,t,n){const r=$w(e,t,n),o=new this;return o.items=r.items,o}}qw.tag="tag:yaml.org,2002:omap";const Vw={collection:"seq",identify:e=>e instanceof Map,nodeClass:qw,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const n=Bw(e,t),r=[];for(const{key:e}of n.items)ib(e)&&(r.includes(e.value)?t(`Ordered maps must not include duplicate keys: ${e.value}`):r.push(e.value));return Object.assign(new qw,n)},createNode:(e,t,n)=>qw.from(e,t,n)};function Fw({value:e,source:t},n){return t&&(e?Hw:Ww).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}const Hw={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new jb(!0),stringify:Fw},Ww={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new jb(!1),stringify:Fw},Uw={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:kw},Kw={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():kw(e)}},Xw={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new jb(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(-1!==n){const r=e.substring(n+1).replace(/_/g,"");"0"===r[r.length-1]&&(t.minFractionDigits=r.length)}return t},stringify:kw},Yw=e=>"bigint"==typeof e||Number.isInteger(e);function Gw(e,t,n,{intAsBigInt:r}){const o=e[0];if("-"!==o&&"+"!==o||(t+=1),e=e.substring(t).replace(/_/g,""),r){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}const t=BigInt(e);return"-"===o?BigInt(-1)*t:t}const i=parseInt(e,n);return"-"===o?-1*i:i}function Zw(e,t,n){const{value:r}=e;if(Yw(r)){const e=r.toString(t);return r<0?"-"+n+e.substr(1):n+e}return kw(e)}const Qw={identify:Yw,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>Gw(e,2,2,n),stringify:e=>Zw(e,2,"0b")},Jw={identify:Yw,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>Gw(e,1,8,n),stringify:e=>Zw(e,8,"0")},ex={identify:Yw,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>Gw(e,0,10,n),stringify:kw},tx={identify:Yw,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>Gw(e,2,16,n),stringify:e=>Zw(e,16,"0x")};class nx extends pw{constructor(e){super(e),this.tag=nx.tag}add(e){let t;t=ob(e)?e:e&&"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new lw(e.key,null):new lw(e,null),fw(this.items,t.key)||this.items.push(t)}get(e,t){const n=fw(this.items,e);return!t&&ob(n)?ib(n.key)?n.key.value:n.key:n}set(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof t);const n=fw(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new lw(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw new Error("Set items must all have null values")}static from(e,t,n){const{replacer:r}=n,o=new this(e);if(t&&Symbol.iterator in Object(t))for(let e of t)"function"==typeof r&&(e=r.call(t,e,e)),o.items.push(aw(e,null,n));return o}}nx.tag="tag:yaml.org,2002:set";const rx={collection:"map",identify:e=>e instanceof Set,nodeClass:nx,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,n)=>nx.from(e,t,n),resolve(e,t){if(rb(e)){if(e.hasAllNullValues(!0))return Object.assign(new nx,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e}};function ox(e,t){const n=e[0],r="-"===n||"+"===n?e.substring(1):e,o=e=>t?BigInt(e):Number(e),i=r.replace(/_/g,"").split(":").reduce((e,t)=>e*o(60)+o(t),o(0));return"-"===n?o(-1)*i:i}function ix(e){let{value:t}=e,n=e=>e;if("bigint"==typeof t)n=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return kw(e);let r="";t<0&&(r="-",t*=n(-1));const o=n(60),i=[t%o];return t<60?i.unshift(0):(t=(t-i[0])/o,i.unshift(t%o),t>=60&&(t=(t-i[0])/o,i.unshift(t))),r+i.map(e=>String(e).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const sx={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>ox(e,n),stringify:ix},ax={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>ox(e,!1),stringify:ix},lx={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(lx.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,o,i,s,a]=t.map(Number),l=t[7]?Number((t[7]+"00").substr(1,3)):0;let c=Date.UTC(n,r-1,o,i||0,s||0,a||0,l);const u=t[8];if(u&&"Z"!==u){let e=ox(u,!1);Math.abs(e)<30&&(e*=60),c-=6e4*e}return new Date(c)},stringify:({value:e})=>e?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},cx=[gw,vw,bw,ww,Hw,Ww,Qw,Jw,ex,tx,Uw,Kw,Xw,Rw,rw,Vw,zw,rx,sx,ax,lx],ux=new Map([["core",jw],["failsafe",[gw,vw,bw]],["json",Lw],["yaml11",cx],["yaml-1.1",cx]]),dx={binary:Rw,bool:xw,float:Cw,floatExp:Ew,floatNaN:Sw,floatTime:ax,int:Tw,intHex:Ow,intOct:Mw,intTime:sx,map:gw,merge:rw,null:ww,omap:Vw,pairs:zw,seq:vw,set:rx,timestamp:lx},hx={"tag:yaml.org,2002:binary":Rw,"tag:yaml.org,2002:merge":rw,"tag:yaml.org,2002:omap":Vw,"tag:yaml.org,2002:pairs":zw,"tag:yaml.org,2002:set":rx,"tag:yaml.org,2002:timestamp":lx};function fx(e,t,n){const r=ux.get(t);if(r&&!e)return n&&!r.includes(rw)?r.concat(rw):r.slice();let o=r;if(!o){if(!Array.isArray(e)){const e=Array.from(ux.keys()).filter(e=>"yaml11"!==e).map(e=>JSON.stringify(e)).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${e} or define customTags array`)}o=[]}if(Array.isArray(e))for(const t of e)o=o.concat(t);else"function"==typeof e&&(o=e(o.slice()));return n&&(o=o.concat(rw)),o.reduce((e,t)=>{const n="string"==typeof t?dx[t]:t;if(!n){const e=JSON.stringify(t),n=Object.keys(dx).map(e=>JSON.stringify(e)).join(", ");throw new Error(`Unknown custom tag ${e}; use one of ${n}`)}return e.includes(n)||e.push(n),e},[])}const px=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class gx{constructor({compat:e,customTags:t,merge:n,resolveKnownTags:r,schema:o,sortMapEntries:i,toStringDefaults:s}){this.compat=Array.isArray(e)?fx(e,"compat"):e?fx(null,e):null,this.name="string"==typeof o&&o||"core",this.knownTags=r?hx:{},this.tags=fx(t,this.name,n),this.toStringOptions=s??null,Object.defineProperty(this,Gv,{value:gw}),Object.defineProperty(this,Qv,{value:bw}),Object.defineProperty(this,Jv,{value:vw}),this.sortMapEntries="function"==typeof i?i:!0===i?px:null}clone(){const e=Object.create(gx.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}class mx{constructor(e,t,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,eb,{value:Yv});let r=null;"function"==typeof t||Array.isArray(t)?r=t:void 0===n&&t&&(n=t,t=void 0);const o=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},n);this.options=o;let{version:i}=o;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(i=this.directives.yaml.version)):this.directives=new kb({version:i}),this.setSchema(i,n),this.contents=void 0===e?null:this.createNode(e,r,n)}clone(){const e=Object.create(mx.prototype,{[eb]:{value:Yv}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=lb(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){yx(this.contents)&&this.contents.add(e)}addIn(e,t){yx(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const n=Eb(this);e.anchor=!t||n.has(t)?Cb(t||"a",n):t}return new Mb(e.anchor)}createNode(e,t,n){let r;if("function"==typeof t)e=t.call({"":e},"",e),r=t;else if(Array.isArray(t)){const e=e=>"number"==typeof e||e instanceof String||e instanceof Number,n=t.filter(e).map(String);n.length>0&&(t=t.concat(n)),r=t}else void 0===n&&t&&(n=t,t=void 0);const{aliasDuplicateObjects:o,anchorPrefix:i,flow:s,keepUndefined:a,onTagObj:l,tag:c}=n??{},{onAnchor:u,setAnchors:d,sourceObjects:h}=function(e,t){const n=[],r=new Map;let o=null;return{onAnchor:r=>{n.push(r),o??(o=Eb(e));const i=Cb(t,o);return o.add(i),i},setAnchors:()=>{for(const e of n){const t=r.get(e);if("object"!=typeof t||!t.anchor||!ib(t.node)&&!ab(t.node)){const t=new Error("Failed to resolve repeated object (this should not happen)");throw t.source=e,t}t.node.anchor=t.anchor}},sourceObjects:r}}(this,i||"a"),f=Pb(e,c,{aliasDuplicateObjects:o??!0,keepUndefined:a??!1,onAnchor:u,onTagObj:l,replacer:r,schema:this.schema,sourceObjects:h});return s&&ab(f)&&(f.flow=!0),d(),f}createPair(e,t,n={}){const r=this.createNode(e,null,n),o=this.createNode(t,null,n);return new lw(r,o)}delete(e){return!!yx(this.contents)&&this.contents.delete(e)}deleteIn(e){return Db(e)?null!=this.contents&&(this.contents=null,!0):!!yx(this.contents)&&this.contents.deleteIn(e)}get(e,t){return ab(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return Db(e)?!t&&ib(this.contents)?this.contents.value:this.contents:ab(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!ab(this.contents)&&this.contents.has(e)}hasIn(e){return Db(e)?void 0!==this.contents:!!ab(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=Ib(this.schema,[e],t):yx(this.contents)&&this.contents.set(e,t)}setIn(e,t){Db(e)?this.contents=t:null==this.contents?this.contents=Ib(this.schema,Array.from(e),t):yx(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){let n;switch("number"==typeof e&&(e=String(e)),e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new kb({version:"1.1"}),n={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new kb({version:e}),n={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{const t=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${t}`)}}if(t.schema instanceof Object)this.schema=t.schema;else{if(!n)throw new Error("With a null YAML version, the { schema: Schema } option is required");this.schema=new gx(Object.assign(n,t))}}toJS({json:e,jsonArg:t,mapAsMap:n,maxAliasCount:r,onAnchor:o,reviver:i}={}){const s={anchors:new Map,doc:this,keep:!e,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof r?r:100},a=Ab(this.contents,t??"",s);if("function"==typeof o)for(const{count:e,res:t}of s.anchors.values())o(t,e);return"function"==typeof i?Nb(i,{"":a},"",a):a}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return function(e,t){const n=[];let r=!0===t.directives;if(!1!==t.directives&&e.directives){const t=e.directives.toString(e);t?(n.push(t),r=!0):e.directives.docStart&&(r=!0)}r&&n.push("---");const o=Jb(e,t),{commentString:i}=o.options;if(e.commentBefore){1!==n.length&&n.unshift("");const t=i(e.commentBefore);n.unshift(Bb(t,""))}let s=!1,a=null;if(e.contents){if(lb(e.contents)){if(e.contents.spaceBefore&&r&&n.push(""),e.contents.commentBefore){const t=i(e.contents.commentBefore);n.push(Bb(t,""))}o.forceBlockIndent=!!e.comment,a=e.contents.comment}const t=a?void 0:()=>s=!0;let l=ew(e.contents,o,()=>a=null,t);a&&(l+=$b(l,"",i(a))),"|"!==l[0]&&">"!==l[0]||"---"!==n[n.length-1]?n.push(l):n[n.length-1]=`--- ${l}`}else n.push(ew(e.contents,o));if(e.directives?.docEnd)if(e.comment){const t=i(e.comment);t.includes("\n")?(n.push("..."),n.push(Bb(t,""))):n.push(`... ${t}`)}else n.push("...");else{let t=e.comment;t&&s&&(t=t.replace(/^\n+/,"")),t&&(s&&!a||""===n[n.length-1]||n.push(""),n.push(Bb(i(t),"")))}return n.join("\n")+"\n"}(this,e)}}function yx(e){if(ab(e))return!0;throw new Error("Expected a YAML collection as document contents")}class vx extends Error{constructor(e,t,n,r){super(),this.name=e,this.code=n,this.message=r,this.pos=t}}class bx extends vx{constructor(e,t,n){super("YAMLParseError",e,t,n)}}class wx extends vx{constructor(e,t,n){super("YAMLWarning",e,t,n)}}const xx=(e,t)=>n=>{if(-1===n.pos[0])return;n.linePos=n.pos.map(e=>t.linePos(e));const{line:r,col:o}=n.linePos[0];n.message+=` at line ${r}, column ${o}`;let i=o-1,s=e.substring(t.lineStarts[r-1],t.lineStarts[r]).replace(/[\n\r]+$/,"");if(i>=60&&s.length>80){const e=Math.min(i-39,s.length-79);s=""+s.substring(e),i-=e-1}if(s.length>80&&(s=s.substring(0,79)+""),r>1&&/^ *$/.test(s.substring(0,i))){let n=e.substring(t.lineStarts[r-2],t.lineStarts[r-1]);n.length>80&&(n=n.substring(0,79)+"\n"),s=n+s}if(/[^ ]/.test(s)){let e=1;const t=n.linePos[1];t?.line===r&&t.col>o&&(e=Math.max(1,Math.min(t.col-o,80-i)));const a=" ".repeat(i)+"^".repeat(e);n.message+=`:\n\n${s}\n${a}\n`}};function kx(e,{flow:t,indicator:n,next:r,offset:o,onError:i,parentIndent:s,startOnNewline:a}){let l=!1,c=a,u=a,d="",h="",f=!1,p=!1,g=null,m=null,y=null,v=null,b=null,w=null,x=null;for(const o of e)switch(p&&("space"!==o.type&&"newline"!==o.type&&"comma"!==o.type&&i(o.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),g&&(c&&"comment"!==o.type&&"newline"!==o.type&&i(g,"TAB_AS_INDENT","Tabs are not allowed as indentation"),g=null),o.type){case"space":t||"doc-start"===n&&"flow-collection"===r?.type||!o.source.includes("\t")||(g=o),u=!0;break;case"comment":{u||i(o,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const e=o.source.substring(1)||" ";d?d+=h+e:d=e,h="",c=!1;break}case"newline":c?d?d+=o.source:w&&"seq-item-ind"===n||(l=!0):h+=o.source,c=!0,f=!0,(m||y)&&(v=o),u=!0;break;case"anchor":m&&i(o,"MULTIPLE_ANCHORS","A node can have at most one anchor"),o.source.endsWith(":")&&i(o.offset+o.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),m=o,x??(x=o.offset),c=!1,u=!1,p=!0;break;case"tag":y&&i(o,"MULTIPLE_TAGS","A node can have at most one tag"),y=o,x??(x=o.offset),c=!1,u=!1,p=!0;break;case n:(m||y)&&i(o,"BAD_PROP_ORDER",`Anchors and tags must be after the ${o.source} indicator`),w&&i(o,"UNEXPECTED_TOKEN",`Unexpected ${o.source} in ${t??"collection"}`),w=o,c="seq-item-ind"===n||"explicit-key-ind"===n,u=!1;break;case"comma":if(t){b&&i(o,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),b=o,c=!1,u=!1;break}default:i(o,"UNEXPECTED_TOKEN",`Unexpected ${o.type} token`),c=!1,u=!1}const k=e[e.length-1],S=k?k.offset+k.source.length:o;return p&&r&&"space"!==r.type&&"newline"!==r.type&&"comma"!==r.type&&("scalar"!==r.type||""!==r.source)&&i(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),g&&(c&&g.indent<=s||"block-map"===r?.type||"block-seq"===r?.type)&&i(g,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:b,found:w,spaceBefore:l,comment:d,hasNewline:f,anchor:m,tag:y,newlineAfterProp:v,end:S,start:x??S}}function Sx(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes("\n"))return!0;if(e.end)for(const t of e.end)if("newline"===t.type)return!0;return!1;case"flow-collection":for(const t of e.items){for(const e of t.start)if("newline"===e.type)return!0;if(t.sep)for(const e of t.sep)if("newline"===e.type)return!0;if(Sx(t.key)||Sx(t.value))return!0}return!1;default:return!0}}function Ex(e,t,n){if("flow-collection"===t?.type){const r=t.end[0];r.indent!==e||"]"!==r.source&&"}"!==r.source||!Sx(t)||n(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function Cx(e,t,n){const{uniqueKeys:r}=e.options;if(!1===r)return!1;const o="function"==typeof r?r:(e,t)=>e===t||ib(e)&&ib(t)&&e.value===t.value;return t.some(e=>o(e.key,n))}const Nx="All mapping items must start at the same column";function Ax(e,t,n,r){let o="";if(e){let i=!1,s="";for(const a of e){const{source:e,type:l}=a;switch(l){case"space":i=!0;break;case"comment":{n&&!i&&r(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const t=e.substring(1)||" ";o?o+=s+t:o=t,s="";break}case"newline":o&&(s+=e),i=!0;break;default:r(a,"UNEXPECTED_TOKEN",`Unexpected ${l} at node end`)}t+=e.length}}return{comment:o,offset:t}}const _x="Block collections are not allowed within flow collections",Mx=e=>e&&("block-map"===e.type||"block-seq"===e.type);function Tx(e,t,n,r,o,i){const s="block-map"===n.type?function({composeNode:e,composeEmptyNode:t},n,r,o,i){const s=new(i?.nodeClass??pw)(n.schema);n.atRoot&&(n.atRoot=!1);let a=r.offset,l=null;for(const i of r.items){const{start:c,key:u,sep:d,value:h}=i,f=kx(c,{indicator:"explicit-key-ind",next:u??d?.[0],offset:a,onError:o,parentIndent:r.indent,startOnNewline:!0}),p=!f.found;if(p){if(u&&("block-seq"===u.type?o(a,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in u&&u.indent!==r.indent&&o(a,"BAD_INDENT",Nx)),!f.anchor&&!f.tag&&!d){l=f.end,f.comment&&(s.comment?s.comment+="\n"+f.comment:s.comment=f.comment);continue}(f.newlineAfterProp||Sx(u))&&o(u??c[c.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else f.found?.indent!==r.indent&&o(a,"BAD_INDENT",Nx);n.atKey=!0;const g=f.end,m=u?e(n,u,f,o):t(n,g,c,null,f,o);n.schema.compat&&Ex(r.indent,u,o),n.atKey=!1,Cx(n,s.items,m)&&o(g,"DUPLICATE_KEY","Map keys must be unique");const y=kx(d??[],{indicator:"map-value-ind",next:h,offset:m.range[2],onError:o,parentIndent:r.indent,startOnNewline:!u||"block-scalar"===u.type});if(a=y.end,y.found){p&&("block-map"!==h?.type||y.hasNewline||o(a,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&f.start<y.found.offset-1024&&o(m.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const l=h?e(n,h,y,o):t(n,a,d,null,y,o);n.schema.compat&&Ex(r.indent,h,o),a=l.range[2];const c=new lw(m,l);n.options.keepSourceTokens&&(c.srcToken=i),s.items.push(c)}else{p&&o(m.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),y.comment&&(m.comment?m.comment+="\n"+y.comment:m.comment=y.comment);const e=new lw(m);n.options.keepSourceTokens&&(e.srcToken=i),s.items.push(e)}}return l&&l<a&&o(l,"IMPOSSIBLE","Map comment with trailing content"),s.range=[r.offset,a,l??a],s}(e,t,n,r,i):"block-seq"===n.type?function({composeNode:e,composeEmptyNode:t},n,r,o,i){const s=new(i?.nodeClass??mw)(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let a=r.offset,l=null;for(const{start:i,value:c}of r.items){const u=kx(i,{indicator:"seq-item-ind",next:c,offset:a,onError:o,parentIndent:r.indent,startOnNewline:!0});if(!u.found){if(!(u.anchor||u.tag||c)){l=u.end,u.comment&&(s.comment=u.comment);continue}"block-seq"===c?.type?o(u.end,"BAD_INDENT","All sequence items must start at the same column"):o(a,"MISSING_CHAR","Sequence item without - indicator")}const d=c?e(n,c,u,o):t(n,u.end,i,null,u,o);n.schema.compat&&Ex(r.indent,c,o),a=d.range[2],s.items.push(d)}return s.range=[r.offset,a,l??a],s}(e,t,n,r,i):function({composeNode:e,composeEmptyNode:t},n,r,o,i){const s="{"===r.start.source,a=s?"flow map":"flow sequence",l=new(i?.nodeClass??(s?pw:mw))(n.schema);l.flow=!0;const c=n.atRoot;c&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let u=r.offset+r.start.source.length;for(let i=0;i<r.items.length;++i){const c=r.items[i],{start:d,key:h,sep:f,value:p}=c,g=kx(d,{flow:a,indicator:"explicit-key-ind",next:h??f?.[0],offset:u,onError:o,parentIndent:r.indent,startOnNewline:!1});if(!g.found){if(!(g.anchor||g.tag||f||p)){0===i&&g.comma?o(g.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):i<r.items.length-1&&o(g.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),g.comment&&(l.comment?l.comment+="\n"+g.comment:l.comment=g.comment),u=g.end;continue}!s&&n.options.strict&&Sx(h)&&o(h,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===i)g.comma&&o(g.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(g.comma||o(g.start,"MISSING_CHAR",`Missing , between ${a} items`),g.comment){let e="";e:for(const t of d)switch(t.type){case"comma":case"space":break;case"comment":e=t.source.substring(1);break e;default:break e}if(e){let t=l.items[l.items.length-1];ob(t)&&(t=t.value??t.key),t.comment?t.comment+="\n"+e:t.comment=e,g.comment=g.comment.substring(e.length+1)}}if(s||f||g.found){n.atKey=!0;const i=g.end,m=h?e(n,h,g,o):t(n,i,d,null,g,o);Mx(h)&&o(m.range,"BLOCK_IN_FLOW",_x),n.atKey=!1;const y=kx(f??[],{flow:a,indicator:"map-value-ind",next:p,offset:m.range[2],onError:o,parentIndent:r.indent,startOnNewline:!1});if(y.found){if(!s&&!g.found&&n.options.strict){if(f)for(const e of f){if(e===y.found)break;if("newline"===e.type){o(e,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}g.start<y.found.offset-1024&&o(y.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else p&&("source"in p&&":"===p.source?.[0]?o(p,"MISSING_CHAR",`Missing space after : in ${a}`):o(y.start,"MISSING_CHAR",`Missing , or : between ${a} items`));const v=p?e(n,p,y,o):y.found?t(n,y.end,f,null,y,o):null;v?Mx(p)&&o(v.range,"BLOCK_IN_FLOW",_x):y.comment&&(m.comment?m.comment+="\n"+y.comment:m.comment=y.comment);const b=new lw(m,v);if(n.options.keepSourceTokens&&(b.srcToken=c),s){const e=l;Cx(n,e.items,m)&&o(i,"DUPLICATE_KEY","Map keys must be unique"),e.items.push(b)}else{const e=new pw(n.schema);e.flow=!0,e.items.push(b);const t=(v??m).range;e.range=[m.range[0],t[1],t[2]],l.items.push(e)}u=v?v.range[2]:y.end}else{const r=p?e(n,p,g,o):t(n,g.end,f,null,g,o);l.items.push(r),u=r.range[2],Mx(p)&&o(r.range,"BLOCK_IN_FLOW",_x)}}const d=s?"}":"]",[h,...f]=r.end;let p=u;if(h?.source===d)p=h.offset+h.source.length;else{const e=a[0].toUpperCase()+a.substring(1);o(u,c?"MISSING_CHAR":"BAD_INDENT",c?`${e} must end with a ${d}`:`${e} in block collection must be sufficiently indented and end with a ${d}`),h&&1!==h.source.length&&f.unshift(h)}if(f.length>0){const e=Ax(f,p,n.options.strict,o);e.comment&&(l.comment?l.comment+="\n"+e.comment:l.comment=e.comment),l.range=[r.offset,p,e.offset]}else l.range=[r.offset,p,p];return l}(e,t,n,r,i),a=s.constructor;return"!"===o||o===a.tagName?(s.tag=a.tagName,s):(o&&(s.tag=o),s)}function Ox(e,t,n){const r=t.offset,o=function({offset:e,props:t},n,r){if("block-scalar-header"!==t[0].type)return r(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:o}=t[0],i=o[0];let s=0,a="",l=-1;for(let t=1;t<o.length;++t){const n=o[t];if(a||"-"!==n&&"+"!==n){const r=Number(n);!s&&r?s=r:-1===l&&(l=e+t)}else a=n}-1!==l&&r(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${o}`);let c=!1,u="",d=o.length;for(let e=1;e<t.length;++e){const o=t[e];switch(o.type){case"space":c=!0;case"newline":d+=o.source.length;break;case"comment":n&&!c&&r(o,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),d+=o.source.length,u=o.source.substring(1);break;case"error":r(o,"UNEXPECTED_TOKEN",o.message),d+=o.source.length;break;default:{r(o,"UNEXPECTED_TOKEN",`Unexpected token in block scalar header: ${o.type}`);const e=o.source;e&&"string"==typeof e&&(d+=e.length)}}}return{mode:i,indent:s,chomp:a,comment:u,length:d}}(t,e.options.strict,n);if(!o)return{value:"",type:null,comment:"",range:[r,r,r]};const i=">"===o.mode?jb.BLOCK_FOLDED:jb.BLOCK_LITERAL,s=t.source?function(e){const t=e.split(/\n( *)/),n=t[0],r=n.match(/^( *)/),o=[r?.[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let e=1;e<t.length;e+=2)o.push([t[e],t[e+1]]);return o}(t.source):[];let a=s.length;for(let e=s.length-1;e>=0;--e){const t=s[e][1];if(""!==t&&"\r"!==t)break;a=e}if(0===a){const e="+"===o.chomp&&s.length>0?"\n".repeat(Math.max(1,s.length-1)):"";let n=r+o.length;return t.source&&(n+=t.source.length),{value:e,type:i,comment:o.comment,range:[r,n,n]}}let l=t.indent+o.indent,c=t.offset+o.length,u=0;for(let t=0;t<a;++t){const[r,i]=s[t];if(""!==i&&"\r"!==i){if(r.length<l){const e="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(c+r.length,"MISSING_CHAR",e)}0===o.indent&&(l=r.length),u=t,0!==l||e.atRoot||n(c,"BAD_INDENT","Block scalar values in collections must be indented");break}0===o.indent&&r.length>l&&(l=r.length),c+=r.length+i.length+1}for(let e=s.length-1;e>=a;--e)s[e][0].length>l&&(a=e+1);let d="",h="",f=!1;for(let e=0;e<u;++e)d+=s[e][0].slice(l)+"\n";for(let e=u;e<a;++e){let[t,r]=s[e];c+=t.length+r.length+1;const a="\r"===r[r.length-1];if(a&&(r=r.slice(0,-1)),r&&t.length<l){const e="Block scalar lines must not be less indented than their "+(o.indent?"explicit indentation indicator":"first line");n(c-r.length-(a?2:1),"BAD_INDENT",e),t=""}i===jb.BLOCK_LITERAL?(d+=h+t.slice(l)+r,h="\n"):t.length>l||"\t"===r[0]?(" "===h?h="\n":f||"\n"!==h||(h="\n\n"),d+=h+t.slice(l)+r,h="\n",f=!0):""===r?"\n"===h?d+="\n":h="\n":(d+=h+r,h=" ",f=!1)}switch(o.chomp){case"-":break;case"+":for(let e=a;e<s.length;++e)d+="\n"+s[e][0].slice(l);"\n"!==d[d.length-1]&&(d+="\n");break;default:d+="\n"}const p=r+o.length+t.source.length;return{value:d,type:i,comment:o.comment,range:[r,p,p]}}function jx(e,t,n){const{offset:r,type:o,source:i,end:s}=e;let a,l;const c=(e,t,o)=>n(r+e,t,o);switch(o){case"scalar":a=jb.PLAIN,l=function(e,t){let n="";switch(e[0]){case"\t":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":n=`block scalar indicator ${e[0]}`;break;case"@":case"`":n=`reserved character ${e[0]}`}return n&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),Px(e)}(i,c);break;case"single-quoted-scalar":a=jb.QUOTE_SINGLE,l=function(e,t){return"'"===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR","Missing closing 'quote"),Px(e.slice(1,-1)).replace(/''/g,"'")}(i,c);break;case"double-quoted-scalar":a=jb.QUOTE_DOUBLE,l=function(e,t){let n="";for(let r=1;r<e.length-1;++r){const o=e[r];if("\r"!==o||"\n"!==e[r+1])if("\n"===o){const{fold:t,offset:o}=Ix(e,r);n+=t,r=o}else if("\\"===o){let o=e[++r];const i=Dx[o];if(i)n+=i;else if("\n"===o)for(o=e[r+1];" "===o||"\t"===o;)o=e[1+ ++r];else if("\r"===o&&"\n"===e[r+1])for(o=e[1+ ++r];" "===o||"\t"===o;)o=e[1+ ++r];else if("x"===o||"u"===o||"U"===o){const i={x:2,u:4,U:8}[o];n+=Lx(e,r+1,i,t),r+=i}else{const o=e.substr(r-1,2);t(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),n+=o}}else if(" "===o||"\t"===o){const t=r;let i=e[r+1];for(;" "===i||"\t"===i;)i=e[1+ ++r];"\n"===i||"\r"===i&&"\n"===e[r+2]||(n+=r>t?e.slice(t,r+1):o)}else n+=o}return'"'===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR",'Missing closing "quote'),n}(i,c);break;default:return n(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${o}`),{value:"",type:null,comment:"",range:[r,r+i.length,r+i.length]}}const u=r+i.length,d=Ax(s,u,t,n);return{value:l,type:a,comment:d.comment,range:[r,u,d.offset]}}function Px(e){let t,n;try{t=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),n=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch{t=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=t.exec(e);if(!r)return e;let o=r[1],i=" ",s=t.lastIndex;for(n.lastIndex=s;r=n.exec(e);)""===r[1]?"\n"===i?o+=i:i="\n":(o+=i+r[1],i=" "),s=n.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=s,r=a.exec(e),o+i+(r?.[1]??"")}function Ix(e,t){let n="",r=e[t+1];for(;!(" "!==r&&"\t"!==r&&"\n"!==r&&"\r"!==r||"\r"===r&&"\n"!==e[t+2]);)"\n"===r&&(n+="\n"),r=e[(t+=1)+1];return n||(n=" "),{fold:n,offset:t}}const Dx={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function Lx(e,t,n,r){const o=e.substr(t,n),i=o.length===n&&/^[0-9a-fA-F]+$/.test(o)?parseInt(o,16):NaN;if(isNaN(i)){const o=e.substr(t-2,n+2);return r(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${o}`),o}return String.fromCodePoint(i)}function Rx(e,t,n,r){const{value:o,type:i,comment:s,range:a}="block-scalar"===t.type?Ox(e,t,r):jx(t,e.options.strict,r),l=n?e.directives.tagName(n.source,e=>r(n,"TAG_RESOLVE_FAILED",e)):null;let c,u;c=e.options.stringKeys&&e.atKey?e.schema[Qv]:l?function(e,t,n,r,o){if("!"===n)return e[Qv];const i=[];for(const t of e.tags)if(!t.collection&&t.tag===n){if(!t.default||!t.test)return t;i.push(t)}for(const e of i)if(e.test?.test(t))return e;const s=e.knownTags[n];return s&&!s.collection?(e.tags.push(Object.assign({},s,{default:!1,test:void 0})),s):(o(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,"tag:yaml.org,2002:str"!==n),e[Qv])}(e.schema,o,l,n,r):"scalar"===t.type?function({atKey:e,directives:t,schema:n},r,o,i){const s=n.tags.find(t=>(!0===t.default||e&&"key"===t.default)&&t.test?.test(r))||n[Qv];if(n.compat){const e=n.compat.find(e=>e.default&&e.test?.test(r))??n[Qv];s.tag!==e.tag&&i(o,"TAG_RESOLVE_FAILED",`Value may be parsed as either ${t.tagString(s.tag)} or ${t.tagString(e.tag)}`,!0)}return s}(e,o,t,r):e.schema[Qv];try{const i=c.resolve(o,e=>r(n??t,"TAG_RESOLVE_FAILED",e),e.options);u=ib(i)?i:new jb(i)}catch(e){const i=e instanceof Error?e.message:String(e);r(n??t,"TAG_RESOLVE_FAILED",i),u=new jb(o)}return u.range=a,u.source=o,i&&(u.type=i),l&&(u.tag=l),c.format&&(u.format=c.format),s&&(u.comment=s),u}function Bx(e,t,n){if(t){n??(n=t.length);for(let r=n-1;r>=0;--r){let n=t[r];switch(n.type){case"space":case"comment":case"newline":e-=n.source.length;continue}for(n=t[++r];"space"===n?.type;)e+=n.source.length,n=t[++r];break}}return e}const $x={composeNode:zx,composeEmptyNode:qx};function zx(e,t,n,r){const o=e.atKey,{spaceBefore:i,comment:s,anchor:a,tag:l}=n;let c,u=!0;switch(t.type){case"alias":c=function({options:e},{offset:t,source:n,end:r},o){const i=new Mb(n.substring(1));""===i.source&&o(t,"BAD_ALIAS","Alias cannot be an empty string"),i.source.endsWith(":")&&o(t+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const s=t+n.length,a=Ax(r,s,e.strict,o);return i.range=[t,s,a.offset],a.comment&&(i.comment=a.comment),i}(e,t,r),(a||l)&&r(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=Rx(e,t,l,r),a&&(c.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=function(e,t,n,r,o){const i=r.tag,s=i?t.directives.tagName(i.source,e=>o(i,"TAG_RESOLVE_FAILED",e)):null;if("block-seq"===n.type){const{anchor:e,newlineAfterProp:t}=r,n=e&&i?e.offset>i.offset?e:i:e??i;n&&(!t||t.offset<n.offset)&&o(n,"MISSING_CHAR","Missing newline after block sequence props")}const a="block-map"===n.type?"map":"block-seq"===n.type?"seq":"{"===n.start.source?"map":"seq";if(!i||!s||"!"===s||s===pw.tagName&&"map"===a||s===mw.tagName&&"seq"===a)return Tx(e,t,n,o,s);let l=t.schema.tags.find(e=>e.tag===s&&e.collection===a);if(!l){const r=t.schema.knownTags[s];if(r?.collection!==a)return r?o(i,"BAD_COLLECTION_TYPE",`${r.tag} used for ${a} collection, but expects ${r.collection??"scalar"}`,!0):o(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${s}`,!0),Tx(e,t,n,o,s);t.schema.tags.push(Object.assign({},r,{default:!1})),l=r}const c=Tx(e,t,n,o,s,l),u=l.resolve?.(c,e=>o(i,"TAG_RESOLVE_FAILED",e),t.options)??c,d=lb(u)?u:new jb(u);return d.range=c.range,d.tag=s,l?.format&&(d.format=l.format),d}($x,e,t,n,r),a&&(c.anchor=a.source.substring(1));break;default:r(t,"UNEXPECTED_TOKEN","error"===t.type?t.message:`Unsupported token (type: ${t.type})`),c=qx(e,t.offset,void 0,null,n,r),u=!1}return a&&""===c.anchor&&r(a,"BAD_ALIAS","Anchor cannot be an empty string"),o&&e.options.stringKeys&&(!ib(c)||"string"!=typeof c.value||c.tag&&"tag:yaml.org,2002:str"!==c.tag)&&r(l??t,"NON_STRING_KEY","With stringKeys, all keys must be strings"),i&&(c.spaceBefore=!0),s&&("scalar"===t.type&&""===t.source?c.comment=s:c.commentBefore=s),e.options.keepSourceTokens&&u&&(c.srcToken=t),c}function qx(e,t,n,r,{spaceBefore:o,comment:i,anchor:s,tag:a,end:l},c){const u=Rx(e,{type:"scalar",offset:Bx(t,n,r),indent:-1,source:""},a,c);return s&&(u.anchor=s.source.substring(1),""===u.anchor&&c(s,"BAD_ALIAS","Anchor cannot be an empty string")),o&&(u.spaceBefore=!0),i&&(u.comment=i,u.range[2]=l),u}function Vx(e){if("number"==typeof e)return[e,e+1];if(Array.isArray(e))return 2===e.length?e:[e[0],e[1]];const{offset:t,source:n}=e;return[t,t+("string"==typeof n?n.length:1)]}function Fx(e){let t="",n=!1,r=!1;for(let o=0;o<e.length;++o){const i=e[o];switch(i[0]){case"#":t+=(""===t?"":r?"\n\n":"\n")+(i.substring(1)||" "),n=!0,r=!1;break;case"%":"#"!==e[o+1]?.[0]&&(o+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:t,afterEmptyLine:r}}class Hx{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,t,n,r)=>{const o=Vx(e);r?this.warnings.push(new wx(o,t,n)):this.errors.push(new bx(o,t,n))},this.directives=new kb({version:e.version||"1.2"}),this.options=e}decorate(e,t){const{comment:n,afterEmptyLine:r}=Fx(this.prelude);if(n){const o=e.contents;if(t)e.comment=e.comment?`${e.comment}\n${n}`:n;else if(r||e.directives.docStart||!o)e.commentBefore=n;else if(ab(o)&&!o.flow&&o.items.length>0){let e=o.items[0];ob(e)&&(e=e.key);const t=e.commentBefore;e.commentBefore=t?`${n}\n${t}`:n}else{const e=o.commentBefore;o.commentBefore=e?`${n}\n${e}`:n}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Fx(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,n=-1){for(const t of e)yield*this.next(t);yield*this.end(t,n)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(t,n,r)=>{const o=Vx(e);o[0]+=t,this.onError(o,"BAD_DIRECTIVE",n,r)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const t=function(e,t,{offset:n,start:r,value:o,end:i},s){const a=Object.assign({_directives:t},e),l=new mx(void 0,a),c={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},u=kx(r,{indicator:"doc-start",next:o??i?.[0],offset:n,onError:s,parentIndent:0,startOnNewline:!0});u.found&&(l.directives.docStart=!0,!o||"block-map"!==o.type&&"block-seq"!==o.type||u.hasNewline||s(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=o?zx(c,o,u,s):qx(c,u.end,r,null,u,s);const d=l.contents.range[2],h=Ax(i,d,!1,s);return h.comment&&(l.comment=h.comment),l.range=[n,d,h.offset],l}(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new bx(Vx(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const t="Unexpected doc-end without preceding document";this.errors.push(new bx(Vx(e),"UNEXPECTED_TOKEN",t));break}this.doc.directives.docEnd=!0;const t=Ax(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const e=this.doc.comment;this.doc.comment=e?`${e}\n${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new bx(Vx(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const e=Object.assign({_directives:this.directives},this.options),n=new mx(void 0,e);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),n.range=[0,t,t],this.decorate(n,!1),yield n}}}function Wx(e,t=!0,n){if(e){const r=(e,t,r)=>{const o="number"==typeof e?e:Array.isArray(e)?e[0]:e.offset;if(!n)throw new bx([o,o+1],t,r);n(o,t,r)};switch(e.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return jx(e,t,r);case"block-scalar":return Ox({options:{strict:t}},e,r)}}return null}function Ux(e,t){const{implicitKey:n=!1,indent:r,inFlow:o=!1,offset:i=-1,type:s="PLAIN"}=t,a=Qb({type:s,value:e},{implicitKey:n,indent:r>0?" ".repeat(r):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}}),l=t.end??[{type:"newline",offset:-1,indent:r,source:"\n"}];switch(a[0]){case"|":case">":{const e=a.indexOf("\n"),t=a.substring(0,e),n=a.substring(e+1)+"\n",o=[{type:"block-scalar-header",offset:i,indent:r,source:t}];return Xx(o,l)||o.push({type:"newline",offset:-1,indent:r,source:"\n"}),{type:"block-scalar",offset:i,indent:r,props:o,source:n}}case'"':return{type:"double-quoted-scalar",offset:i,indent:r,source:a,end:l};case"'":return{type:"single-quoted-scalar",offset:i,indent:r,source:a,end:l};default:return{type:"scalar",offset:i,indent:r,source:a,end:l}}}function Kx(e,t,n={}){let{afterKey:r=!1,implicitKey:o=!1,inFlow:i=!1,type:s}=n,a="indent"in e?e.indent:null;if(r&&"number"==typeof a&&(a+=2),!s)switch(e.type){case"single-quoted-scalar":s="QUOTE_SINGLE";break;case"double-quoted-scalar":s="QUOTE_DOUBLE";break;case"block-scalar":{const t=e.props[0];if("block-scalar-header"!==t.type)throw new Error("Invalid block scalar header");s=">"===t.source[0]?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:s="PLAIN"}const l=Qb({type:s,value:t},{implicitKey:o||null===a,indent:null!==a&&a>0?" ".repeat(a):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}});switch(l[0]){case"|":case">":!function(e,t){const n=t.indexOf("\n"),r=t.substring(0,n),o=t.substring(n+1)+"\n";if("block-scalar"===e.type){const t=e.props[0];if("block-scalar-header"!==t.type)throw new Error("Invalid block scalar header");t.source=r,e.source=o}else{const{offset:t}=e,n="indent"in e?e.indent:-1,i=[{type:"block-scalar-header",offset:t,indent:n,source:r}];Xx(i,"end"in e?e.end:void 0)||i.push({type:"newline",offset:-1,indent:n,source:"\n"});for(const t of Object.keys(e))"type"!==t&&"offset"!==t&&delete e[t];Object.assign(e,{type:"block-scalar",indent:n,props:i,source:o})}}(e,l);break;case'"':Yx(e,l,"double-quoted-scalar");break;case"'":Yx(e,l,"single-quoted-scalar");break;default:Yx(e,l,"scalar")}}function Xx(e,t){if(t)for(const n of t)switch(n.type){case"space":case"comment":e.push(n);break;case"newline":return e.push(n),!0}return!1}function Yx(e,t,n){switch(e.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":e.type=n,e.source=t;break;case"block-scalar":{const r=e.props.slice(1);let o=t.length;"block-scalar-header"===e.props[0].type&&(o-=e.props[0].source.length);for(const e of r)e.offset+=o;delete e.props,Object.assign(e,{type:n,source:t,end:r});break}case"block-map":case"block-seq":{const r={type:"newline",offset:e.offset+t.length,indent:e.indent,source:"\n"};delete e.items,Object.assign(e,{type:n,source:t,end:[r]});break}default:{const r="indent"in e?e.indent:-1,o="end"in e&&Array.isArray(e.end)?e.end.filter(e=>"space"===e.type||"comment"===e.type||"newline"===e.type):[];for(const t of Object.keys(e))"type"!==t&&"offset"!==t&&delete e[t];Object.assign(e,{type:n,indent:r,source:t,end:o})}}}const Gx=e=>"type"in e?Zx(e):Qx(e);function Zx(e){switch(e.type){case"block-scalar":{let t="";for(const n of e.props)t+=Zx(n);return t+e.source}case"block-map":case"block-seq":{let t="";for(const n of e.items)t+=Qx(n);return t}case"flow-collection":{let t=e.start.source;for(const n of e.items)t+=Qx(n);for(const n of e.end)t+=n.source;return t}case"document":{let t=Qx(e);if(e.end)for(const n of e.end)t+=n.source;return t}default:{let t=e.source;if("end"in e&&e.end)for(const n of e.end)t+=n.source;return t}}}function Qx({start:e,key:t,sep:n,value:r}){let o="";for(const t of e)o+=t.source;if(t&&(o+=Zx(t)),n)for(const e of n)o+=e.source;return r&&(o+=Zx(r)),o}const Jx=Symbol("break visit"),ek=Symbol("skip children"),tk=Symbol("remove item");function nk(e,t){"type"in e&&"document"===e.type&&(e={start:e.start,value:e.value}),rk(Object.freeze([]),e,t)}function rk(e,t,n){let r=n(t,e);if("symbol"==typeof r)return r;for(const o of["key","value"]){const i=t[o];if(i&&"items"in i){for(let t=0;t<i.items.length;++t){const r=rk(Object.freeze(e.concat([[o,t]])),i.items[t],n);if("number"==typeof r)t=r-1;else{if(r===Jx)return Jx;r===tk&&(i.items.splice(t,1),t-=1)}}"function"==typeof r&&"key"===o&&(r=r(t,e))}}return"function"==typeof r?r(t,e):r}nk.BREAK=Jx,nk.SKIP=ek,nk.REMOVE=tk,nk.itemAtPath=(e,t)=>{let n=e;for(const[e,r]of t){const t=n?.[e];if(!t||!("items"in t))return;n=t.items[r]}return n},nk.parentCollection=(e,t)=>{const n=nk.itemAtPath(e,t.slice(0,-1)),r=t[t.length-1][0],o=n?.[r];if(o&&"items"in o)return o;throw new Error("Parent collection not found")};const ok="\ufeff",ik="",sk="",ak="",lk=e=>!!e&&"items"in e,ck=e=>!!e&&("scalar"===e.type||"single-quoted-scalar"===e.type||"double-quoted-scalar"===e.type||"block-scalar"===e.type);function uk(e){switch(e){case ok:return"<BOM>";case ik:return"<DOC>";case sk:return"<FLOW_END>";case ak:return"<SCALAR>";default:return JSON.stringify(e)}}function dk(e){switch(e){case ok:return"byte-order-mark";case ik:return"doc-mode";case sk:return"flow-error-end";case ak:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function hk(e){switch(e){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const fk=new Set("0123456789ABCDEFabcdef"),pk=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),gk=new Set(",[]{}"),mk=new Set(" ,[]{}\n\r\t"),yk=e=>!e||mk.has(e);class vk{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){if(e){if("string"!=typeof e)throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!t;let n=this.next??"stream";for(;n&&(t||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;" "===t||"\t"===t;)t=this.buffer[++e];return!t||"#"===t||"\n"===t||"\r"===t&&"\n"===this.buffer[e+1]}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let n=0;for(;" "===t;)t=this.buffer[++n+e];if("\r"===t){const t=this.buffer[n+e+1];if("\n"===t||!t&&!this.atEnd)return e+n+1}return"\n"===t||n>=this.indentNext||!t&&!this.atEnd?e+n:-1}if("-"===t||"."===t){const t=this.buffer.substr(e,3);if(("---"===t||"..."===t)&&hk(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return("number"!=typeof e||-1!==e&&e<this.pos)&&(e=this.buffer.indexOf("\n",this.pos),this.lineEndPos=e),-1===e?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[e-1]&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(null===e)return this.setNext("stream");if(e[0]===ok&&(yield*this.pushCount(1),e=e.substring(1)),"%"===e[0]){let t=e.length,n=e.indexOf("#");for(;-1!==n;){const r=e[n-1];if(" "===r||"\t"===r){t=n-1;break}n=e.indexOf("#",n+1)}for(;;){const n=e[t-1];if(" "!==n&&"\t"!==n)break;t-=1}const r=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield ik,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if("-"===e||"."===e){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const e=this.peek(3);if(("---"===e||"..."===e)&&hk(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"---"===e?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!hk(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if(("-"===e||"?"===e||":"===e)&&hk(t)){const e=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=e,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(null===e)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(yk),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=(yield*this.parseBlockScalarHeader()),t+=(yield*this.pushSpaces(!0)),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,n=-1;do{e=yield*this.pushNewline(),e>0?(t=yield*this.pushSpaces(!1),this.indentValue=n=t):t=0,t+=(yield*this.pushSpaces(!0))}while(e+t>0);const r=this.getLine();if(null===r)return this.setNext("flow");if((-1!==n&&n<this.indentNext&&"#"!==r[0]||0===n&&(r.startsWith("---")||r.startsWith("..."))&&hk(r[3]))&&(n!==this.indentNext-1||1!==this.flowLevel||"]"!==r[0]&&"}"!==r[0]))return this.flowLevel=0,yield sk,yield*this.parseLineStart();let o=0;for(;","===r[o];)o+=(yield*this.pushCount(1)),o+=(yield*this.pushSpaces(!0)),this.flowKey=!1;switch(o+=(yield*this.pushIndicators()),r[o]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-o),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(yk),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const e=this.charAt(1);if(this.flowKey||hk(e)||","===e)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if("'"===e)for(;-1!==t&&"'"===this.buffer[t+1];)t=this.buffer.indexOf("'",t+2);else for(;-1!==t;){let e=0;for(;"\\"===this.buffer[t-1-e];)e+=1;if(e%2==0)break;t=this.buffer.indexOf('"',t+1)}const n=this.buffer.substring(0,t);let r=n.indexOf("\n",this.pos);if(-1!==r){for(;-1!==r;){const e=this.continueScalar(r+1);if(-1===e)break;r=n.indexOf("\n",e)}-1!==r&&(t=r-("\r"===n[r-1]?2:1))}if(-1===t){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if("+"===t)this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if("-"!==t)break}return yield*this.pushUntil(e=>hk(e)||"#"===e)}*parseBlockScalar(){let e,t=this.pos-1,n=0;e:for(let r=this.pos;e=this.buffer[r];++r)switch(e){case" ":n+=1;break;case"\n":t=r,n=0;break;case"\r":{const e=this.buffer[r+1];if(!e&&!this.atEnd)return this.setNext("block-scalar");if("\n"===e)break}default:break e}if(!e&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext=this.blockScalarIndent+(0===this.indentNext?1:this.indentNext);do{const e=this.continueScalar(t+1);if(-1===e)break;t=this.buffer.indexOf("\n",e)}while(-1!==t);if(-1===t){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}let r=t+1;for(e=this.buffer[r];" "===e;)e=this.buffer[++r];if("\t"===e){for(;"\t"===e||" "===e||"\r"===e||"\n"===e;)e=this.buffer[++r];t=r-1}else if(!this.blockScalarKeep)for(;;){let e=t-1,r=this.buffer[e];"\r"===r&&(r=this.buffer[--e]);const o=e;for(;" "===r;)r=this.buffer[--e];if(!("\n"===r&&e>=this.pos&&e+1+n>o))break;t=e}return yield ak,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let t,n=this.pos-1,r=this.pos-1;for(;t=this.buffer[++r];)if(":"===t){const t=this.buffer[r+1];if(hk(t)||e&&gk.has(t))break;n=r}else if(hk(t)){let o=this.buffer[r+1];if("\r"===t&&("\n"===o?(r+=1,t="\n",o=this.buffer[r+1]):n=r),"#"===o||e&&gk.has(o))break;if("\n"===t){const e=this.continueScalar(r+1);if(-1===e)break;r=Math.max(r,e-2)}}else{if(e&&gk.has(t))break;n=r}return t||this.atEnd?(yield ak,yield*this.pushToIndex(n+1,!0),e?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){const n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(yk))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,t=this.charAt(1);if(hk(t)||e&&gk.has(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if("<"===this.charAt(1)){let e=this.pos+2,t=this.buffer[e];for(;!hk(t)&&">"!==t;)t=this.buffer[++e];return yield*this.pushToIndex(">"===t?e+1:e,!1)}{let e=this.pos+1,t=this.buffer[e];for(;t;)if(pk.has(t))t=this.buffer[++e];else{if("%"!==t||!fk.has(this.buffer[e+1])||!fk.has(this.buffer[e+2]))break;t=this.buffer[e+=3]}return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return"\n"===e?yield*this.pushCount(1):"\r"===e&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(e){let t,n=this.pos-1;do{t=this.buffer[++n]}while(" "===t||e&&"\t"===t);const r=n-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=n),r}*pushUntil(e){let t=this.pos,n=this.buffer[t];for(;!e(n);)n=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}class bk{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,n=this.lineStarts.length;for(;t<n;){const r=t+n>>1;this.lineStarts[r]<e?t=r+1:n=r}return this.lineStarts[t]===e?{line:t+1,col:1}:0===t?{line:0,col:e}:{line:t,col:e-this.lineStarts[t-1]+1}}}}function wk(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return!0;return!1}function xk(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function kk(e){switch(e?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Sk(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep??t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function Ek(e){if(0===e.length)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;"space"===e[++t]?.type;);return e.splice(t,e.length)}function Ck(e){if("flow-seq-start"===e.start.type)for(const t of e.items)!t.sep||t.value||wk(t.start,"explicit-key-ind")||wk(t.sep,"map-value-ind")||(t.key&&(t.value=t.key),delete t.key,kk(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class Nk{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new vk,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const n of this.lexer.lex(e,t))yield*this.next(n);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=e.length);const t=dk(e);if(t)if("scalar"===t)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&" "===e[0]&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const t=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:t,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if("doc-end"!==this.type||"doc-end"===e?.type){if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(e){return this.stack[this.stack.length-e]}*pop(e){const t=e??this.stack.pop();if(t)if(0===this.stack.length)yield t;else{const e=this.peek(1);switch("block-scalar"===t.type?t.indent="indent"in e?e.indent:0:"flow-collection"===t.type&&"document"===e.type&&(t.indent=0),"flow-collection"===t.type&&Ck(t),e.type){case"document":e.value=t;break;case"block-scalar":e.props.push(t);break;case"block-map":{const n=e.items[e.items.length-1];if(n.value)return e.items.push({start:[],key:t,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:t,sep:[]}),void(this.onKeyLine=!n.explicitKey);n.value=t;break}case"block-seq":{const n=e.items[e.items.length-1];n.value?e.items.push({start:[],value:t}):n.value=t;break}case"flow-collection":{const n=e.items[e.items.length-1];return void(!n||n.value?e.items.push({start:[],key:t,sep:[]}):n.sep?n.value=t:Object.assign(n,{key:t,sep:[]}))}default:yield*this.pop(),yield*this.pop(t)}if(!("document"!==e.type&&"block-map"!==e.type&&"block-seq"!==e.type||"block-map"!==t.type&&"block-seq"!==t.type)){const n=t.items[t.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&-1===xk(n.start)&&(0===t.indent||n.start.every(e=>"comment"!==e.type||e.indent<t.indent))&&("document"===e.type?e.end=n.start:e.items.push({start:n.start}),t.items.splice(-1,1))}}else{const e="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:e}}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&e.start.push(this.sourceToken),void this.stack.push(e)}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":return void(-1!==xk(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void e.start.push(this.sourceToken)}const t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if("map-value-ind"===this.type){const t=Ek(Sk(this.peek(2)));let n;e.end?(n=e.end,n.push(this.sourceToken),delete e.end):n=[this.sourceToken];const r={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:t,key:e,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":return void e.props.push(this.sourceToken);case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const t=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,t.value){const n="end"in t.value?t.value.end:void 0,r=Array.isArray(n)?n[n.length-1]:void 0;"comment"===r?.type?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2],r=n?.value?.end;if(Array.isArray(r))return Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const n=!this.onKeyLine&&this.indent===e.indent,r=n&&(t.sep||t.explicitKey)&&"seq-item-ind"!==this.type;let o=[];if(r&&t.sep&&!t.value){const n=[];for(let r=0;r<t.sep.length;++r){const o=t.sep[r];switch(o.type){case"newline":n.push(r);break;case"space":break;case"comment":o.indent>e.indent&&(n.length=0);break;default:n.length=0}}n.length>=2&&(o=t.sep.splice(n[1]))}switch(this.type){case"anchor":case"tag":return void(r||t.value?(o.push(this.sourceToken),e.items.push({start:o}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case"explicit-key-ind":return t.sep||t.explicitKey?r||t.value?(o.push(this.sourceToken),e.items.push({start:o,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}):(t.start.push(this.sourceToken),t.explicitKey=!0),void(this.onKeyLine=!0);case"map-value-ind":if(t.explicitKey)if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(wk(t.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]});else if(kk(t.key)&&!wk(t.sep,"newline")){const e=Ek(t.start),n=t.key,r=t.sep;r.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:n,sep:r}]})}else o.length>0?t.sep=t.sep.concat(o,this.sourceToken):t.sep.push(this.sourceToken);else if(wk(t.start,"newline"))Object.assign(t,{key:null,sep:[this.sourceToken]});else{const e=Ek(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||r?e.items.push({start:o,key:null,sep:[this.sourceToken]}):wk(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const n=this.flowScalar(this.type);return void(r||t.value?(e.items.push({start:o,key:n,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(n):(Object.assign(t,{key:n,sep:[]}),this.onKeyLine=!0))}default:{const r=this.startBlockValue(e);if(r){if("block-seq"===r.type){if(!t.explicitKey&&t.sep&&!wk(t.sep,"newline"))return void(yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source}))}else n&&e.items.push({start:o});return void this.stack.push(r)}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const t=e.items[e.items.length-1];switch(this.type){case"newline":if(t.value){const n="end"in t.value?t.value.end:void 0,r=Array.isArray(n)?n[n.length-1]:void 0;"comment"===r?.type?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2],r=n?.value?.end;if(Array.isArray(r))return Array.prototype.push.apply(r,t.start),r.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;return void t.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==e.indent)break;return void(t.value||wk(t.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken))}if(this.indent>e.indent){const t=this.startBlockValue(e);if(t)return void this.stack.push(t)}yield*this.pop(),yield*this.step()}*flowCollection(e){const t=e.items[e.items.length-1];if("flow-error-end"===this.type){let e;do{yield*this.pop(),e=this.peek(1)}while("flow-collection"===e?.type)}else if(0===e.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken));case"map-value-ind":return void(!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const n=this.flowScalar(this.type);return void(!t||t.value?e.items.push({start:[],key:n,sep:[]}):t.sep?this.stack.push(n):Object.assign(t,{key:n,sep:[]}))}case"flow-map-end":case"flow-seq-end":return void e.end.push(this.sourceToken)}const n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const t=this.peek(2);if("block-map"===t.type&&("map-value-ind"===this.type&&t.indent===e.indent||"newline"===this.type&&!t.items[t.items.length-1].sep))yield*this.pop(),yield*this.step();else if("map-value-ind"===this.type&&"flow-collection"!==t.type){const n=Ek(Sk(t));Ck(e);const r=e.end.splice(1,e.end.length);r.push(this.sourceToken);const o={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=o}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const t=Ek(Sk(e));return t.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const t=Ek(Sk(e));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return"comment"===this.type&&!(this.indent<=t)&&e.every(e=>"newline"===e.type||"space"===e.type)}*documentEnd(e){"doc-mode"!==this.type&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}function Ak(e){const t=!1!==e.prettyErrors;return{lineCounter:e.lineCounter||t&&new bk||null,prettyErrors:t}}function _k(e,t={}){const{lineCounter:n,prettyErrors:r}=Ak(t),o=new Nk(n?.addNewLine),i=new Hx(t),s=Array.from(i.compose(o.parse(e)));if(r&&n)for(const t of s)t.errors.forEach(xx(e,n)),t.warnings.forEach(xx(e,n));return s.length>0?s:Object.assign([],{empty:!0},i.streamInfo())}function Mk(e,t={}){const{lineCounter:n,prettyErrors:r}=Ak(t),o=new Nk(n?.addNewLine),i=new Hx(t);let s=null;for(const t of i.compose(o.parse(e),!0,e.length))if(s){if("silent"!==s.options.logLevel){s.errors.push(new bx(t.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else s=t;return r&&n&&(s.errors.forEach(xx(e,n)),s.warnings.forEach(xx(e,n))),s}function Tk(e,t,n){let r;"function"==typeof t?r=t:void 0===n&&t&&"object"==typeof t&&(n=t);const o=Mk(e,n);if(!o)return null;if(o.warnings.forEach(e=>tw(o.options.logLevel,e)),o.errors.length>0){if("silent"!==o.options.logLevel)throw o.errors[0];o.errors=[]}return o.toJS(Object.assign({reviver:r},n))}function Ok(e,t,n){let r=null;if("function"==typeof t||Array.isArray(t)?r=t:void 0===n&&t&&(n=t),"string"==typeof n&&(n=n.length),"number"==typeof n){const e=Math.round(n);n=e<1?void 0:e>8?{indent:8}:{indent:e}}if(void 0===e){const{keepUndefined:e}=n??t??{};if(!e)return}return nb(e)&&!r?e.toString(n):new mx(e,r,n).toString(n)}const jk=t;function Pk(e){const t=[];if(""===e.trim())return{workflow:{name:"",on:{},jobs:{}},errors:[]};let n;try{n=jk.parse(e,{strict:!1})}catch(e){return{workflow:{name:"",on:{},jobs:{}},errors:[`YAML parse error: ${e instanceof Error?e.message:String(e)}`]}}if(null==n||"object"!=typeof n)return{workflow:{name:"",on:{},jobs:{}},errors:["Invalid workflow: root must be an object"]};const r=n;"jobs"in r&&null!=r.jobs&&"object"==typeof r.jobs||t.push('Workflow must have a "jobs" object');const o=r.jobs??{},i={...r,name:"string"==typeof r.name?r.name:void 0,"run-name":"string"==typeof r["run-name"]?r["run-name"]:void 0,on:r.on??{},env:"object"!=typeof r.env||null===r.env||Array.isArray(r.env)?void 0:r.env,jobs:{}};for(const[e,n]of Object.entries(o)){if(null==n||"object"!=typeof n||Array.isArray(n)){t.push(`Job "${e}" must be an object`);continue}const r=n,o=Array.isArray(r.steps)?r.steps:[];let s;if(r.strategy&&"object"==typeof r.strategy&&null!==r.strategy&&!Array.isArray(r.strategy)){const e=r.strategy,t="object"!=typeof e.matrix||null===e.matrix||Array.isArray(e.matrix)?void 0:e.matrix,n="boolean"==typeof e["fail-fast"]?e["fail-fast"]:void 0,o="number"==typeof e["max-parallel"]?e["max-parallel"]:void 0;(t||void 0!==n||void 0!==o)&&(s={matrix:t,"fail-fast":n,"max-parallel":o})}i.jobs[e]={...r,name:"string"==typeof r.name?r.name:void 0,"runs-on":"string"==typeof r["runs-on"]||Array.isArray(r["runs-on"])?r["runs-on"]:"ubuntu-latest",needs:r.needs,permissions:"object"!=typeof r.permissions||null===r.permissions||Array.isArray(r.permissions)?void 0:r.permissions,env:"object"!=typeof r.env||null===r.env||Array.isArray(r.env)?void 0:r.env,strategy:s,steps:o.map((e,t)=>Ik(e,0,t))}}return{workflow:i,errors:t}}function Ik(e,t,n){if(null==e||"object"!=typeof e||Array.isArray(e))return{name:`Step ${n+1}`,run:""};const r=e;return{id:"string"==typeof r.id?r.id:void 0,name:"string"==typeof r.name?r.name:void 0,uses:"string"==typeof r.uses?r.uses:void 0,run:"string"==typeof r.run?r.run:void 0,with:"object"!=typeof r.with||null===r.with||Array.isArray(r.with)?void 0:r.with,env:"object"!=typeof r.env||null===r.env||Array.isArray(r.env)?void 0:r.env,shell:"string"==typeof r.shell?r.shell:void 0,...r}}var Dk,Lk;function Rk(e){switch(e){case Dk.String:return"StringToken";case Dk.Sequence:return"SequenceToken";case Dk.Mapping:return"MappingToken";case Dk.BasicExpression:return"BasicExpressionToken";case Dk.InsertExpression:return"InsertExpressionToken";case Dk.Boolean:return"BooleanToken";case Dk.Number:return"NumberToken";case Dk.Null:return"NullToken";default:throw new Error(`Unhandled token type: ${e} ${e}}`)}}!function(e){e[e.String=0]="String",e[e.Sequence=1]="Sequence",e[e.Mapping=2]="Mapping",e[e.BasicExpression=3]="BasicExpression",e[e.InsertExpression=4]="InsertExpression",e[e.Boolean=5]="Boolean",e[e.Number=6]="Number",e[e.Null=7]="Null"}(Dk=Dk||(Dk={}));class Bk{constructor(e,t){this.index=-1,this.isKey=!1,this.parent=e,this._token=t,this.current=t}moveNext(e){switch(this._token.templateTokenType){case Dk.Sequence:{const e=this._token;return++this.index<e.count?(this.current=e.get(this.index),!0):(this.current=void 0,!1)}case Dk.Mapping:{const t=this._token;return this.isKey?(this.isKey=!1,this.currentKey=this.current,this.current=t.get(this.index).value,!0):++this.index<t.count?e?(this.isKey=!1,this.currentKey=t.get(this.index).key,this.current=t.get(this.index).value,!0):(this.isKey=!0,this.currentKey=void 0,this.current=t.get(this.index).key,!0):(this.currentKey=void 0,this.current=void 0,!1)}default:throw new Error(`Unexpected token type '${this._token.templateTokenType}' when traversing state`)}}getAncestors(){const e=[];let t=this.parent;for(;t;)t.current&&e.unshift(t.current),t=t.parent;return e}}class $k extends Error{constructor(e,t){super(e),this.token=t}}class zk{constructor(e,t,n,r){this.type=e,this.file=t,this.range=n,this.definitionInfo=r}get templateTokenType(){return this.type}get line(){return this.range?.start.line}get col(){return this.range?.start.column}get definition(){return this.definitionInfo?.definition}get description(){return this._description||this.propertyDefinition?.description||this.definition?.description}set description(e){this._description=e}typeName(){return Rk(this.type)}assertNull(e){if(this.type===Dk.Null)return this;throw new $k(`Unexpected type '${this.typeName()}' encountered while reading '${e}'. The type '${Rk(Dk.Null)}' was expected.`,this)}assertBoolean(e){if(this.type===Dk.Boolean)return this;throw new $k(`Unexpected type '${this.typeName()}' encountered while reading '${e}'. The type '${Rk(Dk.Boolean)}' was expected.`,this)}assertNumber(e){if(this.type===Dk.Number)return this;throw new $k(`Unexpected type '${this.typeName()}' encountered while reading '${e}'. The type '${Rk(Dk.Number)}' was expected.`,this)}assertString(e){if(this.type===Dk.String)return this;throw new $k(`Unexpected type '${this.typeName()}' encountered while reading '${e}'. The type '${Rk(Dk.String)}' was expected.`,this)}assertScalar(e){if(!0===this?.isScalar)return this;throw new $k(`Unexpected type '${this.typeName()}' encountered while reading '${e}'. The type 'ScalarToken' was expected.`,this)}assertSequence(e){if(this.type===Dk.Sequence)return this;throw new $k(`Unexpected type '${this.typeName()}' encountered while reading '${e}'. The type '${Rk(Dk.Sequence)}' was expected.`,this)}assertMapping(e){if(this.type===Dk.Mapping)return this;throw new $k(`Unexpected type '${this.typeName()}' encountered while reading '${e}'. The type '${Rk(Dk.Mapping)}' was expected.`,this)}static*traverse(e,t){switch(yield[void 0,e,void 0,[]],e.templateTokenType){case Dk.Sequence:case Dk.Mapping:{let n=new Bk(void 0,e);for(n=new Bk(n,e);n.parent;)if(n.moveNext(t??!1))switch(e=n.current,yield[n.parent?.current,e,n.currentKey,n.getAncestors()],e.type){case Dk.Sequence:case Dk.Mapping:n=new Bk(n,e)}else n=n.parent;break}}}toJSON(){}}class qk{constructor(e,t,n,r){this.rawMessage=e,this.prefix=t,this.code=n,this.range=r}get message(){return this.prefix?`${this.prefix}: ${this.rawMessage}`:this.rawMessage}toString(){return this.message}}class Vk{constructor(e,t,n){this._fileIds={},this._fileNames=[],this.expressionFunctions=[],this.expressionNamedContexts=[],this.state={},this.errors=e,this.schema=t,this.trace=n}error(e,t,n){const r=e,o=n||r?.range,i=this.getErrorPrefix(r?.file??e,r?.line,r?.col),s=t?.message??String(t),a=new qk(s,i,void 0,o);this.errors.add(a),this.trace.error(a.message)}getFileId(e){const t=e.toUpperCase();let n=this._fileIds[t];return void 0===n&&(n=this._fileNames.length+1,this._fileIds[t]=n,this._fileNames.push(e)),n}getFileName(e){return this._fileNames.length>=e?this._fileNames[e-1]:void 0}getFileTable(){return this._fileNames.slice()}getErrorPrefix(e,t,n){const r=void 0!==e?this.getFileName(e):void 0;return r?void 0!==t&&void 0!==n?`${r} (Line: ${t}, Col: ${n})`:r:void 0!==t&&void 0!==n?`(Line: ${t}, Col: ${n})`:""}}class Fk{constructor(e,t){this._errors=[],this._maxErrors=e??0,this._maxMessageLength=t??0}get count(){return this._errors.length}add(e){for(let t of Array.isArray(e)?e:[e])(this._maxErrors<=0||this._errors.length<this._maxErrors)&&(this._maxMessageLength>0&&t.message.length>this._maxMessageLength&&(t=new qk(t.message.substring(0,this._maxMessageLength)+"[...]",t.prefix,t.code,t.range)),this._errors.push(t))}check(e){if(!(this._errors.length<=0))throw e||(e="The template is not valid."),new Error(`${e} ${this._errors.map(e=>e.message).join(",")}`)}clear(){this._errors=[]}getErrors(){return this._errors.slice()}}class Hk{constructor(e,t){this.isDefinitionInfo=!0;const n=!0===e?.isDefinitionInfo?e:void 0;if(this._schema=void 0===n?e:n._schema,this.definition="string"==typeof t?this._schema.getDefinition(t):t,this.definition.readerContext.length>0){this.allowedContext=[];const e={};for(const t of n?.allowedContext??[])this.allowedContext.push(t),e[t.toUpperCase()]=!0;for(const t of this.definition.readerContext){const n=t.toUpperCase();e[n]||(this.allowedContext.push(t),e[n]=!0)}}else this.allowedContext=n?.allowedContext??[]}getScalarDefinitions(){return this._schema.getScalarDefinitions(this.definition)}getDefinitionsOfType(e){return this._schema.getDefinitionsOfType(this.definition,e)}}!function(e){e[e.Null=0]="Null",e[e.Boolean=1]="Boolean",e[e.Number=2]="Number",e[e.String=3]="String",e[e.Sequence=4]="Sequence",e[e.Mapping=5]="Mapping",e[e.OneOf=6]="OneOf",e[e.AllowedValues=7]="AllowedValues"}(Lk=Lk||(Lk={}));const Wk="allowed-values",Uk="any",Kk="boolean",Xk="boolean-definition",Yk="boolean-definition-properties",Gk="constant",Zk="context",Qk="definition",Jk="definitions",eS="description",tS="ignore-case",nS="insert",rS="is-expression",oS="item-type",iS="loose-key-type",sS="loose-value-type",aS="mapping",lS="mapping-definition",cS="mapping-definition-properties",uS="mapping-property-value",dS="non-empty-string",hS="null",fS="null-definition",pS="null-definition-properties",gS="number",mS="number-definition",yS="number-definition-properties",vS="one-of",bS="one-of-definition",wS="${{",xS="property-value",kS="properties",SS="required",ES="require-non-empty",CS="sequence",NS="sequence-definition",AS="sequence-definition-properties",_S="type",MS="sequence-of-non-empty-string",TS="string",OS="string-definition",jS="string-definition-properties",PS="template-schema",IS="version";class DS extends zk{constructor(e,t,n,r){super(e,t,n,r)}get isScalar(){return!0}static trimDisplayString(e){let t=e.trimStart();const n=t.indexOf("\n"),r=t.indexOf("\r");return(n>=0||r>=0)&&(t=t.substr(0,Math.min(n>=0?n:Number.MAX_VALUE,r>=0?r:Number.MAX_VALUE))),t}}class LS extends DS{constructor(e,t,n,r){super(e,t,n,r)}get isLiteral(){return!0}get isExpression(){return!1}toDisplayString(){return DS.trimDisplayString(this.toString())}assertUnexpectedValue(e){throw new Error(`Error while reading '${e}'. Unexpected value '${this.toString()}'`)}}class RS extends LS{constructor(e,t,n,r,o,i){super(Dk.String,e,t,r),this.value=n,this.source=o,this.blockScalarHeader=i}clone(e){return e?new RS(void 0,void 0,this.value,this.definitionInfo,this.source,this.blockScalarHeader):new RS(this.file,this.range,this.value,this.definitionInfo,this.source,this.blockScalarHeader)}toString(){return this.value}toJSON(){return this.value}}class BS extends LS{constructor(e,t,n,r){super(Dk.Number,e,t,r),this.num=n}get value(){return this.num}clone(e){return e?new BS(void 0,void 0,this.num,this.definitionInfo):new BS(this.file,this.range,this.num,this.definitionInfo)}toString(){return`${this.num}`}toJSON(){return this.num}}class $S extends LS{constructor(e,t,n,r){super(Dk.Boolean,e,t,r),this.bool=n}get value(){return this.bool}clone(e){return e?new $S(void 0,void 0,this.bool,this.definitionInfo):new $S(this.file,this.range,this.bool,this.definitionInfo)}toString(){return this.bool?"true":"false"}toJSON(){return this.bool}}class zS extends LS{constructor(e,t,n){super(Dk.Null,e,t,n)}clone(e){return e?new zS(void 0,void 0,this.definitionInfo):new zS(this.file,this.range,this.definitionInfo)}toString(){return""}toJSON(){return null}}class qS{constructor(e,t){this.key=e,this.value=t}}class VS extends zk{constructor(e,t,n){super(Dk.Sequence,e,t,n),this.seq=[]}get count(){return this.seq.length}get isScalar(){return!1}get isLiteral(){return!1}get isExpression(){return!1}add(e){this.seq.push(e)}get(e){return this.seq[e]}clone(e){const t=e?new VS(void 0,void 0,this.definitionInfo):new VS(this.file,this.range,this.definitionInfo);for(const n of this.seq)t.add(n.clone(e));return t}toJSON(){return{type:Dk.Sequence,seq:this.seq}}*[Symbol.iterator](){for(const e of this.seq)yield e}}class FS extends zk{constructor(e,t,n){super(Dk.Mapping,e,t,n),this.map=[]}get count(){return this.map.length}get isScalar(){return!1}get isLiteral(){return!1}get isExpression(){return!1}add(e,t){this.map.push(new qS(e,t))}get(e){return this.map[e]}find(e){const t=this.map.find(t=>t.key.toString()===e);return t?.value}remove(e){this.map.splice(e,1)}clone(e){const t=e?new FS(void 0,void 0,this.definitionInfo):new FS(this.file,this.range,this.definitionInfo);for(const n of this.map)t.add(n.key.clone(e),n.value.clone(e));return t}toJSON(){const e=[];for(const t of this.map)e.push({Key:t.key,Value:t.value});return{type:Dk.Mapping,map:e}}*[Symbol.iterator](){for(const e of this.map)yield e}}class HS{}class WS extends HS{constructor(e,t){super(),this.literal=e,this.token=t}accept(e){return e.visitLiteral(this)}}class US extends HS{constructor(e,t){super(),this.operator=e,this.expr=t}accept(e){return e.visitUnary(this)}}class KS extends HS{constructor(e,t){super(),this.functionName=e,this.args=t}accept(e){return e.visitFunctionCall(this)}}class XS extends HS{constructor(e,t,n){super(),this.left=e,this.operator=t,this.right=n}accept(e){return e.visitBinary(this)}}class YS extends HS{constructor(e,t){super(),this.operator=e,this.args=t}accept(e){return e.visitLogical(this)}}class GS extends HS{constructor(e){super(),this.group=e}accept(e){return e.visitGrouping(this)}}class ZS extends HS{constructor(e){super(),this.name=e}accept(e){return e.visitContextAccess(this)}}class QS extends HS{constructor(e,t){super(),this.expr=e,this.index=t}accept(e){return e.visitIndexAccess(this)}}class JS extends HS{accept(){throw new Error("Method not implemented.")}}var eE,tE;function nE(e){switch(e){case eE.Array:return"Array";case eE.Boolean:return"Boolean";case eE.Null:return"Null";case eE.Number:return"Number";case eE.Dictionary:return"Object";case eE.String:return"String"}return"unknown"}!function(e){e[e.String=0]="String",e[e.Array=1]="Array",e[e.Dictionary=2]="Dictionary",e[e.Boolean=3]="Boolean",e[e.Number=4]="Number",e[e.CaseSensitiveDictionary=5]="CaseSensitiveDictionary",e[e.Null=6]="Null"}(eE||(eE={}));class rE{constructor(...e){this.keys=[],this.v=[],this.indexMap={},this.kind=eE.Dictionary,this.primitive=!1;for(const t of e)this.add(t.key,t.value)}coerceString(){return nE(this.kind)}number(){return NaN}add(e,t){e.toLowerCase()in this.indexMap||(this.keys.push(e),this.v.push(t),this.indexMap[e.toLowerCase()]=this.v.length-1)}get(e){const t=this.indexMap[e.toLowerCase()];if(void 0!==t)return this.v[t]}values(){return this.v}pairs(){const e=[];for(const t of this.keys)e.push({key:t,value:this.v[this.indexMap[t.toLowerCase()]]});return e}}class oE{constructor(...e){this.v=[],this.kind=eE.Array,this.primitive=!1;for(const t of e)this.add(t)}coerceString(){return nE(this.kind)}number(){return NaN}add(e){this.v.push(e)}get(e){return this.v[e]}values(){return this.v}}class iE{constructor(e){this.value=e,this.kind=eE.Boolean,this.primitive=!0}coerceString(){return this.value?"true":"false"}number(){return this.value?1:0}}class sE{constructor(){this.kind=eE.Null,this.primitive=!0}coerceString(){return""}number(){return 0}}class aE{constructor(e){this.value=e,this.kind=eE.Number,this.primitive=!0}coerceString(){return 0===this.value?"0":(+this.value.toFixed(15)).toString()}number(){return this.value}}class lE{constructor(e){this.value=e,this.kind=eE.String,this.primitive=!0}coerceString(){return this.value}number(){return Number(this.value)}}function cE(e,t){if(t instanceof sE)return null;if(t instanceof iE)return t.value;if(t instanceof aE)return t.number();if(t instanceof lE)return t.coerceString();if(t instanceof oE)return t.values();if(t instanceof rE){const e=t.pairs(),n={};for(const t of e)n[t.key]=t.value;return n}return t}function uE(e,t){return null===t?new sE:"string"==typeof t?new lE(t):"number"==typeof t?new aE(t):"boolean"==typeof t?new iE(t):Array.isArray(t)?new oE(...t):"object"==typeof t?new rE(...Object.keys(t).map(e=>({key:e,value:t[e]}))):t}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LEFT_PAREN=1]="LEFT_PAREN",e[e.RIGHT_PAREN=2]="RIGHT_PAREN",e[e.LEFT_BRACKET=3]="LEFT_BRACKET",e[e.RIGHT_BRACKET=4]="RIGHT_BRACKET",e[e.COMMA=5]="COMMA",e[e.DOT=6]="DOT",e[e.BANG=7]="BANG",e[e.BANG_EQUAL=8]="BANG_EQUAL",e[e.EQUAL_EQUAL=9]="EQUAL_EQUAL",e[e.GREATER=10]="GREATER",e[e.GREATER_EQUAL=11]="GREATER_EQUAL",e[e.LESS=12]="LESS",e[e.LESS_EQUAL=13]="LESS_EQUAL",e[e.AND=14]="AND",e[e.OR=15]="OR",e[e.STAR=16]="STAR",e[e.NUMBER=17]="NUMBER",e[e.STRING=18]="STRING",e[e.IDENTIFIER=19]="IDENTIFIER",e[e.TRUE=20]="TRUE",e[e.FALSE=21]="FALSE",e[e.NULL=22]="NULL",e[e.EOF=23]="EOF"}(tE||(tE={}));class dE{constructor(e){this.input=e,this.start=0,this.offset=0,this.line=0,this.lastLineOffset=0,this.tokens=[]}lex(){if(this.input.length>pE)throw new Error("ErrorExceededMaxLength");for(;!this.atEnd();){this.start=this.offset;const e=this.next();switch(e){case"(":this.addToken(tE.LEFT_PAREN);break;case")":this.addToken(tE.RIGHT_PAREN);break;case"[":this.addToken(tE.LEFT_BRACKET);break;case"]":this.addToken(tE.RIGHT_BRACKET);break;case",":this.addToken(tE.COMMA);break;case".":this.previous()!=tE.IDENTIFIER&&this.previous()!=tE.RIGHT_BRACKET&&this.previous()!=tE.RIGHT_PAREN&&this.previous()!=tE.STAR?this.consumeNumber():this.addToken(tE.DOT);break;case"-":case"+":this.consumeNumber();break;case"!":this.addToken(this.match("=")?tE.BANG_EQUAL:tE.BANG);break;case"=":if(!this.match("=")){this.consumeIdentifier();break}this.addToken(tE.EQUAL_EQUAL);break;case"<":this.addToken(this.match("=")?tE.LESS_EQUAL:tE.LESS);break;case">":this.addToken(this.match("=")?tE.GREATER_EQUAL:tE.GREATER);break;case"&":if(!this.match("&")){this.consumeIdentifier();break}this.addToken(tE.AND);break;case"|":if(!this.match("|")){this.consumeIdentifier();break}this.addToken(tE.OR);break;case"*":this.addToken(tE.STAR);break;case" ":case"\r":case"\t":break;case"\n":++this.line,this.lastLineOffset=this.offset;break;case"'":this.consumeString();break;default:!0===hE(e)?this.consumeNumber():this.consumeIdentifier()}}return this.tokens.push({type:tE.EOF,lexeme:"",range:this.range()}),{tokens:this.tokens}}pos(){return{line:this.line,column:this.start-this.lastLineOffset}}endPos(){return{line:this.line,column:this.offset-this.lastLineOffset}}range(){return{start:this.pos(),end:this.endPos()}}atEnd(){return this.offset>=this.input.length}peek(){return this.atEnd()?"\0":this.input[this.offset]}peekNext(){return this.offset+1>=this.input.length?"\0":this.input[this.offset+1]}previous(){const e=this.tokens.length;return 0==e?tE.EOF:this.tokens[e-1].type}next(){return this.input[this.offset++]}match(e){return!this.atEnd()&&this.input[this.offset]===e&&(this.offset++,!0)}addToken(e,t){this.tokens.push({type:e,lexeme:this.input.substring(this.start,this.offset),range:this.range(),value:t})}consumeNumber(){for(;!(this.atEnd()||fE(this.peek())&&"."!=this.peek());)this.next();const e=this.input.substring(this.start,this.offset),t=new lE(e).number();if(isNaN(t))throw new Error(`Unexpected symbol: '${e}'. Located at position ${this.start+1} within expression: ${this.input}`);this.addToken(tE.NUMBER,t)}consumeString(){for(;("'"!==this.peek()||"'"===this.peekNext())&&!this.atEnd();)"\n"===this.peek()&&this.line++,"'"===this.peek()&&"'"===this.peekNext()&&this.next(),this.next();if(this.atEnd())throw new Error(`Unexpected symbol: '${this.input.substring(this.start)}'. Located at position ${this.start+1} within expression: ${this.input}`);this.next();let e=this.input.substring(this.start+1,this.offset-1);e=e.replace("''","'"),this.addToken(tE.STRING,e)}consumeIdentifier(){for(;!this.atEnd()&&!fE(this.peek());)this.next();let e,t=tE.IDENTIFIER;const n=this.input.substring(this.start,this.offset);if(this.previous()!=tE.DOT)switch(n){case"true":t=tE.TRUE;break;case"false":t=tE.FALSE;break;case"null":t=tE.NULL;break;case"NaN":t=tE.NUMBER,e=NaN;break;case"Infinity":t=tE.NUMBER,e=1/0}if(!function(e){if(""==e)return!1;const t=e[0];if(t>="a"&&t<="z"||t>="A"&&t<="Z"||"_"==t){for(const t of e.substring(1).split(""))if(!(t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||"_"==t||"-"==t))return!1;return!0}return!1}(n))throw new Error(`Unexpected symbol: '${n}'. Located at position ${this.start+1} within expression: ${this.input}`);this.addToken(t,e)}}function hE(e){return e>="0"&&e<="9"}function fE(e){switch(e){case"(":case"[":case")":case"]":case",":case".":case"!":case">":case"<":case"=":case"&":case"|":return!0}return/\s/.test(e)}const pE=21e3;var gE;!function(e){e[e.ErrorUnexpectedSymbol=0]="ErrorUnexpectedSymbol",e[e.ErrorUnrecognizedNamedValue=1]="ErrorUnrecognizedNamedValue",e[e.ErrorUnexpectedEndOfExpression=2]="ErrorUnexpectedEndOfExpression",e[e.ErrorExceededMaxDepth=3]="ErrorExceededMaxDepth",e[e.ErrorExceededMaxLength=4]="ErrorExceededMaxLength",e[e.ErrorTooFewParameters=5]="ErrorTooFewParameters",e[e.ErrorTooManyParameters=6]="ErrorTooManyParameters",e[e.ErrorEvenParameters=7]="ErrorEvenParameters",e[e.ErrorUnrecognizedContext=8]="ErrorUnrecognizedContext",e[e.ErrorUnrecognizedFunction=9]="ErrorUnrecognizedFunction"}(gE||(gE={}));class mE extends Error{constructor(e,t){super(`${function(e){switch(e){case gE.ErrorUnexpectedEndOfExpression:return"Unexpected end of expression";case gE.ErrorUnexpectedSymbol:return"Unexpected symbol";case gE.ErrorUnrecognizedNamedValue:return"Unrecognized named-value";case gE.ErrorExceededMaxDepth:return"Exceeded max expression depth 50";case gE.ErrorExceededMaxLength:return`Exceeded max expression length ${pE}`;case gE.ErrorTooFewParameters:return"Too few parameters supplied";case gE.ErrorTooManyParameters:return"Too many parameters supplied";case gE.ErrorEvenParameters:return"Even number of parameters supplied, requires an odd number of parameters";case gE.ErrorUnrecognizedContext:return"Unrecognized named-value";case gE.ErrorUnrecognizedFunction:return"Unrecognized function";default:return"Unknown error"}}(e)}: '${function(e){switch(e.type){case tE.EOF:return"EOF";case tE.NUMBER:return e.lexeme;case tE.STRING:return e.value.toString();default:return e.lexeme}}(t)}'`),this.typ=e,this.tok=t,this.pos=this.tok.range.start}}class yE extends Error{}const vE={name:"case",description:"`case( pred1, val1, pred2, val2, ..., default )`\n\nEvaluates predicates in order and returns the value corresponding to the first predicate that evaluates to `true`. If no predicate matches, it returns the last argument as the default value.",minArgs:3,maxArgs:Number.MAX_SAFE_INTEGER,call:(...e)=>{for(let t=0;t<e.length-1;t+=2){const n=e[t];if(n.kind!==eE.Boolean)throw new Error("case predicate must evaluate to a boolean value");if(n.value)return e[t+1]}return e[e.length-1]}};function bE(e,t){let n=e,r=t;if(e.kind===t.kind)return[n,r];switch(e.kind){case eE.Number:if(t.kind===eE.String)return r=new aE(t.number()),[n,r];break;case eE.String:if(t.kind===eE.Number)return n=new aE(e.number()),[n,r];break;case eE.Null:case eE.Boolean:return n=new aE(e.number()),bE(n,r)}switch(t.kind){case eE.Null:case eE.Boolean:return r=new aE(t.number()),bE(n,r)}return[n,r]}function wE(e,t){const[n,r]=bE(e,t);if(n.kind!=r.kind)return!1;switch(n.kind){case eE.Null:return!0;case eE.Number:{const e=n.value,t=r.value;return!isNaN(e)&&!isNaN(t)&&e==t}case eE.String:{const e=n.value,t=r.value;return xE(e)===xE(t)}case eE.Boolean:return n.value==r.value;case eE.Dictionary:case eE.Array:return n===r}return!1}function xE(e){const t=[];let n=0;const r=e.length;let o=e.indexOf("");for(;n<r;)if(n<o)t.push(e.substring(n,o).toUpperCase()),n=o;else{if(n!=o){t.push(e.substring(n).toUpperCase());break}t.push(e.substring(n,n+1)),n+=1,o=e.indexOf("",n)}return t.join("")}const kE={name:"format",description:"`format( string, replaceValue0, replaceValue1, ..., replaceValueN)`\n\nReplaces values in the `string`, with the variable `replaceValueN`. Variables in the `string` are specified using the `{N}` syntax, where `N` is an integer. You must specify at least one `replaceValue` and `string`. There is no maximum for the number of variables (`replaceValueN`) you can use. Escape curly braces using double braces.",minArgs:1,maxArgs:255,call:(...e)=>{const t=e[0].coerceString(),n=[];let r=0;for(;r<t.length;){const o=t.indexOf("{",r),i=t.indexOf("}",r);if(o>=0&&(i<0||i>o)){if("{"===SE(t,o+1)){n.push(t.substr(r,o-r+1)),r=o+2;continue}if(i>o+1){const s=EE(t,o+1);if(s.success){if(1+s.result>e.length-1)throw new Error(`The following format string references more arguments than were supplied: ${t}`);o>r&&n.push(t.substr(r,o-r)),n.push(`${e[1+s.result].coerceString()}`),r=i+1;continue}}throw new Error(`The following format string is invalid: ${t}`)}if(!(i>=0)){n.push(t.substr(r));break}if("}"!==SE(t,i+1))throw new Error(`The following format string is invalid: ${t}`);n.push(t.substr(r,i-r+1)),r=i+2}return new lE(n.join(""))}};function SE(e,t){return e.length>t?e[t]:"\0"}function EE(e,t){let n=0;for(;;){const r=SE(e,t+n);if(!(r>="0"&&r<="9"))break;n++}if(n<1)return{success:!1};const r=t+n-1,o=parseInt(e.substr(t,n));return{success:!isNaN(o),result:o,endIndex:r}}const CE={case:vE,contains:{name:"contains",description:"`contains( search, item )`\n\nReturns `true` if `search` contains `item`. If `search` is an array, this function returns `true` if the `item` is an element in the array. If `search` is a string, this function returns `true` if the `item` is a substring of `search`. This function is not case sensitive. Casts values to a string.",minArgs:2,maxArgs:2,call:(...e)=>{const t=e[0],n=e[1];if(t.primitive){const e=t.coerceString();if(n.primitive){const t=n.coerceString();return new iE(e.toLowerCase().includes(t.toLowerCase()))}}else if(t.kind===eE.Array){const e=t;if(0===e.values().length)return new iE(!1);for(const t of e.values())if(wE(n,t))return new iE(!0)}return new iE(!1)}},endswith:{name:"endsWith",description:"`endsWith( searchString, searchValue )`\n\nReturns `true` if `searchString` ends with `searchValue`. This function is not case sensitive. Casts values to a string.",minArgs:2,maxArgs:2,call:(...e)=>{const t=e[0];if(!t.primitive)return new iE(!1);const n=e[1];if(!n.primitive)return new iE(!1);const r=xE(t.coerceString()),o=xE(n.coerceString());return new iE(r.endsWith(o))}},format:kE,fromjson:{name:"fromJson",description:"`fromJSON(value)`\n\nReturns a JSON object or JSON data type for `value`. You can use this function to provide a JSON object as an evaluated expression or to convert environment variables from a string.",minArgs:1,maxArgs:1,call:(...e)=>{const t=e[0].coerceString();if(""===t.trim())throw new Error("empty input");try{return JSON.parse(t,uE)}catch(e){throw new yE("Error parsing JSON when evaluating fromJson",{cause:e})}}},join:{name:"join",description:"`join( array, optionalSeparator )`\n\nThe value for `array` can be an array or a string. All values in `array` are concatenated into a string. If you provide `optionalSeparator`, it is inserted between the concatenated values. Otherwise, the default separator `,` is used. Casts values to a string.",minArgs:1,maxArgs:2,call:(...e)=>{if(e[0].primitive)return new lE(e[0].coerceString());if(e[0].kind===eE.Array){let t=",";return e.length>1&&e[1].primitive&&(t=e[1].coerceString()),new lE(e[0].values().map(e=>e.coerceString()).join(t))}return new lE("")}},startswith:{name:"startsWith",description:"`startsWith( searchString, searchValue )`\n\nReturns `true` when `searchString` starts with `searchValue`. This function is not case sensitive. Casts values to a string.",minArgs:2,maxArgs:2,call:(...e)=>{const t=e[0];if(!t.primitive)return new iE(!1);const n=e[1];if(!n.primitive)return new iE(!1);const r=xE(t.coerceString()),o=xE(n.coerceString());return new iE(r.startsWith(o))}},tojson:{name:"toJson",description:"`toJSON(value)`\n\nReturns a pretty-print JSON representation of `value`. You can use this function to debug the information provided in contexts.",minArgs:1,maxArgs:1,call:(...e)=>new lE(JSON.stringify(e[0],cE,"  "))}};class NE{constructor(e,t,n){this.tokens=e,this.offset=0,this.depth=0,this.extContexts=new Map,this.extFuncs=new Map;for(const e of t)this.extContexts.set(e.toLowerCase(),!0);for(const{name:e,func:t}of n.map(e=>({name:e.name,func:e})))this.extFuncs.set(e.toLowerCase(),t);this.context={allowUnknownKeywords:!1,extensionContexts:this.extContexts,extensionFunctions:this.extFuncs}}parse(){let e;if(this.atEnd())return e;if(e=this.expression(),!this.atEnd())throw this.buildError(gE.ErrorUnexpectedSymbol,this.peek());return e}expression(){this.incrDepth();try{return this.logicalOr()}finally{this.decrDepth()}}logicalOr(){let e=this.logicalAnd();if(this.check(tE.OR)){this.incrDepth();try{const t=new YS(this.peek(),[e]);for(e=t;this.match(tE.OR);){const e=this.logicalAnd();t.args.push(e)}}finally{this.decrDepth()}}return e}logicalAnd(){let e=this.equality();if(this.check(tE.AND)){this.incrDepth();try{const t=new YS(this.peek(),[e]);for(e=t;this.match(tE.AND);){const e=this.equality();t.args.push(e)}}finally{this.decrDepth()}}return e}equality(){let e=this.comparison();for(;this.match(tE.BANG_EQUAL,tE.EQUAL_EQUAL);){const t=this.previous(),n=this.comparison();e=new XS(e,t,n)}return e}comparison(){let e=this.unary();for(;this.match(tE.GREATER,tE.GREATER_EQUAL,tE.LESS,tE.LESS_EQUAL);){const t=this.previous(),n=this.unary();e=new XS(e,t,n)}return e}unary(){if(this.match(tE.BANG)){this.incrDepth();const e=this.previous(),t=this.unary();try{return new US(e,t)}finally{this.decrDepth()}}return this.index()}index(){let e=this.call(),t=0;if(e instanceof GS||e instanceof KS||e instanceof ZS){let n=!0;for(;n;)switch(!0){case this.match(tE.LEFT_BRACKET):{let n;n=this.match(tE.STAR)?new JS:this.expression(),this.consume(tE.RIGHT_BRACKET,gE.ErrorUnexpectedSymbol),this.incrDepth(),t++,e=new QS(e,n);break}case this.match(tE.DOT):if(this.incrDepth(),t++,this.match(tE.IDENTIFIER)){const t=this.previous();e=new QS(e,new WS(new lE(t.lexeme),t))}else{if(!this.match(tE.STAR))throw this.buildError(gE.ErrorUnexpectedSymbol,this.peek());e=new QS(e,new JS)}break;default:n=!1}}for(let e=0;e<t;e++)this.decrDepth();return e}call(){if(!this.check(tE.IDENTIFIER))return this.primary();const e=this.next();if(!this.match(tE.LEFT_PAREN)){if(!this.extContexts.has(e.lexeme.toLowerCase()))throw this.buildError(gE.ErrorUnrecognizedContext,e);return new ZS(e)}const t=[];for(;!this.match(tE.RIGHT_PAREN);){const e=this.expression();t.push(e),this.check(tE.RIGHT_PAREN)||this.consume(tE.COMMA,gE.ErrorUnexpectedSymbol)}return function(e,t,n){const r=t.lexeme.toLowerCase();let o;if(o=CE[r],o||(o=e.extensionFunctions.get(r),o)){if(n<o.minArgs)throw new mE(gE.ErrorTooFewParameters,t);if(n>o.maxArgs)throw new mE(gE.ErrorTooManyParameters,t);if("case"===r&&n%2==0)throw new mE(gE.ErrorEvenParameters,t)}else if(!e.allowUnknownKeywords)throw new mE(gE.ErrorUnrecognizedFunction,t)}(this.context,e,t.length),new KS(e,t)}primary(){switch(!0){case this.match(tE.FALSE):return new WS(new iE(!1),this.previous());case this.match(tE.TRUE):return new WS(new iE(!0),this.previous());case this.match(tE.NULL):return new WS(new sE,this.previous());case this.match(tE.NUMBER):return new WS(new aE(this.previous().value),this.previous());case this.match(tE.STRING):return new WS(new lE(this.previous().value),this.previous());case this.match(tE.LEFT_PAREN):{const e=this.expression();if(this.atEnd())throw this.buildError(gE.ErrorUnexpectedEndOfExpression,this.previous());return this.consume(tE.RIGHT_PAREN,gE.ErrorUnexpectedSymbol),new GS(e)}case this.atEnd():throw this.buildError(gE.ErrorUnexpectedEndOfExpression,this.previous())}throw this.buildError(gE.ErrorUnexpectedSymbol,this.peek())}match(...e){for(const t of e)if(this.check(t))return this.next(),!0;return!1}check(e){return!this.atEnd()&&this.peek().type==e}atEnd(){return this.peek().type==tE.EOF}next(){return this.atEnd()||this.offset++,this.previous()}peek(){return this.tokens[this.offset]}previous(){return this.tokens[this.offset-1]}consume(e,t){if(!this.check(e))throw this.buildError(t,this.peek());this.next()}incrDepth(){if(this.depth++,this.depth>50)throw this.buildError(gE.ErrorExceededMaxDepth,this.peek())}decrDepth(){this.depth--}buildError(e,t){return new mE(e,t)}}class AE extends DS{constructor(e,t,n,r,o){super(e,t,n,o),this.directive=r}get isLiteral(){return!1}get isExpression(){return!0}static validateExpression(e,t){const{namedContexts:n,functions:r}=function(e){const t=/^([a-zA-Z0-9_]+)\(([0-9]+),([0-9]+|MAX)\)$/,n=[],r=[];if(e.length>0)for(const o of e){const e=o.match(t);if(e){const t=e[1],n=Number.parseInt(e[2]),o=e[3],i="MAX"===o?Number.MAX_SAFE_INTEGER:Number.parseInt(o);r.push({name:t,minArgs:n,maxArgs:i})}else n.push(o)}return{namedContexts:n,functions:r}}(t),o=new dE(e).lex();new NE(o.tokens,n,r).parse()}}class _E extends AE{constructor(e,t,n,r,o,i,s,a){super(Dk.BasicExpression,e,t,void 0,r),this.expr=n,this.source=i,this.originalExpressions=o,this.expressionRange=s,this.blockScalarHeader=a}get expression(){return this.expr}clone(e){return e?new _E(void 0,void 0,this.expr,this.definitionInfo,this.originalExpressions,this.source,this.expressionRange,this.blockScalarHeader):new _E(this.file,this.range,this.expr,this.definitionInfo,this.originalExpressions,this.source,this.expressionRange,this.blockScalarHeader)}toString(){return`${wS} ${this.expr} }}`}toDisplayString(){return DS.trimDisplayString(this.toString())}toJSON(){return{type:Dk.BasicExpression,expr:this.expr}}}class ME extends AE{constructor(e,t,n){super(Dk.InsertExpression,e,t,nS,n)}clone(e){return e?new ME(void 0,void 0,this.definitionInfo):new ME(this.file,this.range,this.definitionInfo)}toString(){return`${wS} ${nS} }}`}toDisplayString(){return DS.trimDisplayString(this.toString())}toJSON(){return{type:Dk.InsertExpression,expr:"insert"}}}function TE(e){return function(e){return e.isLiteral}(e)&&e.templateTokenType===Dk.String}const OE=/\s/;function jE(e,t,n,r){const o=new PE(e,n,r);let i;try{n.validateStart();const r=new Hk(e.schema,t);i=o.readValue(r),n.validateEnd()}catch(t){e.error(r,t)}return i}class PE{constructor(e,t,n){this._context=e,this._schema=e.schema,this._objectReader=t,this._fileId=n}readValue(e){const t=this._objectReader.allowLiteral();if(t){let n=this.parseScalar(t,e);return n=this.validate(n,e),n}const n=this._objectReader.allowSequenceStart();if(n){const t=e.getDefinitionsOfType(Lk.Sequence)[0];if(t){const r=new Hk(e,t.itemType);for(;!this._objectReader.allowSequenceEnd();){const e=this.readValue(r);n.add(e)}}else for(this._context.error(n,"A sequence was not expected");!this._objectReader.allowSequenceEnd();)this.skipValue();return n.definitionInfo=e,n}const r=this._objectReader.allowMappingStart();if(r){const t=e.getDefinitionsOfType(Lk.Mapping);if(t.length>0)if(t.length>1||Object.keys(t[0].properties).length>0||!t[0].looseKeyType)this.handleMappingWithWellKnownProperties(e,t,r);else{const n=new Hk(e,t[0].looseKeyType),o=new Hk(e,t[0].looseValueType);this.handleMappingWithAllLooseProperties(e,n,o,t[0],r)}else for(this._context.error(r,"A mapping was not expected");!this._objectReader.allowMappingEnd();)this.skipValue(),this.skipValue();return r.definitionInfo||(r.definitionInfo=e),r}throw new Error("Expected a scalar value, a sequence, or a mapping")}handleMappingWithWellKnownProperties(e,t,n){let r,o,i,s;t[0].looseKeyType&&(r=t[0].looseKeyType,o=t[0].looseValueType);const a={};let l,c=!1;for(;l=this._objectReader.allowLiteral();){const u=this.parseScalar(l,e);if(u.isExpression){if(c=!0,e.allowedContext.length>0){const t=new Hk(e,Uk);n.add(u,this.readValue(t))}else this._context.error(u,"A template expression is not allowed in this context"),this.skipValue();continue}const d=u.templateTokenType===Dk.String?u:new RS(u.file,u.range,u.toString(),u.definitionInfo);if(d.value){const e=d.value.toUpperCase();if(a[e]){this._context.error(d,`'${d.value}' is already defined`),this.skipValue();continue}a[e]=!0}const h=this._schema.matchPropertyAndFilter(t,d.value);if(h){const t=new Hk(e,h.type);d.definitionInfo=t,h.description&&(d.description=h.description);const r=this.readValue(t);n.add(d,r);continue}if(r){i||(i=new Hk(e,r),s=new Hk(e,o)),this.validate(d,i);const a=new Hk(e,t[0].looseValueType);d.definitionInfo=a;const l=this.readValue(s);n.add(d,l);continue}this._context.error(d,`Unexpected value '${d.value}'`),this.skipValue()}if(1===t.length&&(n.definitionInfo=new Hk(e,t[0])),t.length>1){const e={};for(const n of t)for(const t of Object.keys(n.properties))e[t]=(e[t]??0)+1;const r=[];for(const t of Object.keys(e))1===e[t]&&r.push(t);this._context.error(n,`There's not enough info to determine what you meant. Add one of these properties: ${r.sort().join(", ")}`)}else if(1===t.length&&!c)for(const e of Object.keys(t[0].properties))t[0].properties[e].required&&!a[e.toUpperCase()]&&this._context.error(n,`Required property is missing: ${e}`);this.expectMappingEnd()}handleMappingWithAllLooseProperties(e,t,n,r,o){let i;const s={};let a;for(;a=this._objectReader.allowLiteral();){const l=this.parseScalar(a,e);if(l.definitionInfo=t,l.isExpression){e.allowedContext.length>0?(i=this.readValue(n),o.add(l,i)):(this._context.error(l,"A template expression is not allowed in this context"),this.skipValue());continue}const c=l.templateTokenType===Dk.String?l:new RS(l.file,l.range,l.toString(),l.definitionInfo);if(c.value){const e=c.value.toUpperCase();if(s[e]){this._context.error(c,`'${c.value}' is already defined`),this.skipValue();continue}s[e]=!0}this.validate(c,t);const u=new Hk(e,r.looseValueType);c.definitionInfo=u,i=this.readValue(n),o.add(c,i)}this.expectMappingEnd()}expectMappingEnd(){if(!this._objectReader.allowMappingEnd())throw new Error("Expected mapping end")}skipValue(){if(this._objectReader.allowLiteral());else if(this._objectReader.allowSequenceStart())for(;!this._objectReader.allowSequenceEnd();)this.skipValue();else{if(!this._objectReader.allowMappingStart())throw new Error("Expected a scalar value, a sequence, or a mapping");for(;!this._objectReader.allowMappingEnd();)this.skipValue(),this.skipValue()}}validate(e,t){switch(e.templateTokenType){case Dk.Null:case Dk.Boolean:case Dk.Number:case Dk.String:{const n=e,r=t.getScalarDefinitions();let o;if(o=r.find(e=>e.isMatch(n)))return e.definitionInfo=new Hk(t,o),e;if(n.templateTokenType!==Dk.String){const e=new RS(n.file,n.range,n.toString(),n.definitionInfo);if(o=r.find(t=>t.isMatch(e)))return e.definitionInfo=new Hk(t,o),e}return this._context.error(n,`Unexpected value '${n.toString()}'`),e}case Dk.BasicExpression:return 0===t.allowedContext.length&&this._context.error(e,"A template expression is not allowed in this context"),e;default:return this._context.error(e,`Unexpected value '${e.toString()}'`),e}}parseScalar(e,t){if(!TE(e)||!e.value)return e;const n=t.allowedContext,r=void 0===e.range||e.range.start.line===e.range.end.line,o=r?e.value:e.source??e.value;let i=o.indexOf(wS);if(i<0)return e;let s=!1;const a=[];let l=0;for(;l<o.length;)if(l===i){i=l;let c=-1,u=!1;for(l+=3;l<o.length;l++)if("'"===o[l])u=!u;else if(!u&&"}"===o[l]&&"}"===o[l-1]){c=l,l++;break}if(c<i)return this._context.error(e,"The expression is not closed. An unescaped ${{ sequence was found, but the closing }} sequence was not found."),e;const d=o.substr(i+3,c-i+1-3-2);let h=e.range;if(r){const t=(e.source??o).indexOf(wS)-o.indexOf(wS);h={start:{line:h.start.line,column:h.start.column+i+t},end:{line:h.end.line,column:h.start.column+c+1+t}}}else{const e=o.substring(0,i),t=e.split("\n").length,n=e.lastIndexOf("\n"),r=i-n,s=c-n+1;h={start:{line:h.start.line+t,column:r},end:{line:h.start.line+t,column:s}}}const f=this.parseIntoExpressionToken(h,d,n,e,t);if(f){if(f.directive&&(0!==i||l<o.length))return this._context.error(e,`The directive '${f.directive}' is not allowed in this context. Directives are not supported for expressions that are embedded within a string. Directives are only supported when the entire value is an expression.`),e;a.push(f)}else s=!0;i=o.indexOf(wS,l)}else{if(!(l<i)){this.addString(a,e.range,o.substr(l),e.definitionInfo);break}this.addString(a,e.range,o.substr(l,i-l),e.definitionInfo),l=i}if(s)return e;if(1===a.length&&a[0].templateTokenType===Dk.BasicExpression){const t=a[0],n=this.getExpressionString(t.expression);if(void 0!==n)return new RS(this._fileId,e.range,n,e.definitionInfo)}if(1===a.length)return a[0];const c=[],u=[],d=[];let h=0;for(const e of a)if(TE(e)){const t=e.value.replace(/'/g,"''").replace(/\{/g,"{{").replace(/\}/g,"}}");c.push(t)}else{c.push(`{${h}}`),h++;const t=e;u.push(", "),u.push(t.expression),d.push(t)}return new _E(this._fileId,e.range,`format('${c.join("")}'${u.join("")})`,t,d,o,void 0,e.blockScalarHeader)}parseIntoExpressionToken(e,t,n,r,o){const i=this.parseExpression(e,r,t,n,o);if(!i.error)return i.expression;this._context.error(r,i.error,e)}parseExpression(e,t,n,r,o){const i=n.trim();if(!i)return{error:new Error("An expression was expected")};const s=this.matchDirective(i,nS,0);if(s.isMatch)return{expression:new ME(this._fileId,e,o)};if(s.error)return{error:s.error};try{AE.validateExpression(i,r)}catch(e){return{error:e}}const a=n.length-n.trimStart().length,l=n.length-n.trimEnd().length,c={start:{...e.start,column:e.start.column+3+a},end:{...e.end,column:e.end.column-2-l}};return{expression:new _E(this._fileId,e,i,o,void 0,t.source,c,t.blockScalarHeader),error:void 0}}addString(e,t,n,r){if(e.length>0&&e[e.length-1].templateTokenType===Dk.String){const o=e[e.length-1];e[e.length-1]=new RS(this._fileId,t,`${o.value}${n}`,r)}else e.push(new RS(this._fileId,t,n,r))}matchDirective(e,t,n){const r=[];if(e.startsWith(t)&&(e.length===t.length||OE.test(e[t.length]))){let o=t.length,i=!1,s=0;for(let t=o;t<e.length;t++){const n=e[t];OE.test(n)&&!i&&0==s?(o<1&&r.push(e.substr(o,t-o)),o=t+1):"'"===n?i=!i:"("!==n||i?")"!==n||i||s--:s++}return o<e.length&&r.push(e.substr(o)),n!=r.length?{isMatch:!1,parameters:[],error:new Error(`Exactly ${n} parameter(s) were expected following the directive '${t}'. Actual parameter count: ${r.length}`)}:{isMatch:!0,parameters:r}}return{isMatch:!1,parameters:r}}getExpressionString(e){const t=[];let n=!1;for(let r=0;r<e.length;r++){const o=e[r];if("'"===o)n=!n,n&&0!==r&&t.push(o);else{if(!n)return;t.push(o)}}return t.join("")}}class IE{constructor(e,t){this.type=e,this.token=t}}var DE;!function(e){e[e.Literal=0]="Literal",e[e.SequenceStart=1]="SequenceStart",e[e.SequenceEnd=2]="SequenceEnd",e[e.MappingStart=3]="MappingStart",e[e.MappingEnd=4]="MappingEnd",e[e.DocumentStart=5]="DocumentStart",e[e.DocumentEnd=6]="DocumentEnd"}(DE=DE||(DE={}));class LE{constructor(e,t){this._fileId=e;const n=JSON.parse(t);this._generator=this.getParseEvents(n,!0),this._current=this._generator.next()}allowLiteral(){if(!this._current.done){const e=this._current.value;if(e.type===DE.Literal)return this._current=this._generator.next(),e.token}}allowSequenceStart(){if(!this._current.done){const e=this._current.value;if(e.type===DE.SequenceStart)return this._current=this._generator.next(),e.token}}allowSequenceEnd(){return!this._current.done&&this._current.value.type===DE.SequenceEnd&&(this._current=this._generator.next(),!0)}allowMappingStart(){if(!this._current.done){const e=this._current.value;if(e.type===DE.MappingStart)return this._current=this._generator.next(),e.token}}allowMappingEnd(){return!this._current.done&&this._current.value.type===DE.MappingEnd&&(this._current=this._generator.next(),!0)}validateEnd(){if(this._current.done||this._current.value.type!==DE.DocumentEnd)throw new Error("Expected end of reader");this._current=this._generator.next()}validateStart(){if(this._current.done||this._current.value.type!==DE.DocumentStart)throw new Error("Expected start of reader");this._current=this._generator.next()}*getParseEvents(e,t){switch(t&&(yield new IE(DE.DocumentStart,void 0)),typeof e){case"undefined":yield new IE(DE.Literal,new zS(this._fileId,void 0,void 0));break;case"boolean":yield new IE(DE.Literal,new $S(this._fileId,void 0,e,void 0));break;case"number":yield new IE(DE.Literal,new BS(this._fileId,void 0,e,void 0));break;case"string":yield new IE(DE.Literal,new RS(this._fileId,void 0,e,void 0));break;case"object":if(null===e)yield new IE(DE.Literal,new zS(this._fileId,void 0,void 0));else if(Array.isArray(e)){yield new IE(DE.SequenceStart,new VS(this._fileId,void 0,void 0));for(const t of e)for(const e of this.getParseEvents(t))yield e;yield new IE(DE.SequenceEnd,void 0)}else{yield new IE(DE.MappingStart,new FS(this._fileId,void 0,void 0));for(const t of Object.keys(e)){yield new IE(DE.Literal,new RS(this._fileId,void 0,t,void 0));for(const n of this.getParseEvents(e[t]))yield n}yield new IE(DE.MappingEnd,void 0)}break;default:throw new Error(`Unexpected value type '${typeof e}' when reading object`)}t&&(yield new IE(DE.DocumentEnd,void 0))}}class RE{error(){}info(){}verbose(){}}class BE{constructor(e,t){if(this.readerContext=[],this.evaluatorContext=[],this.key=e,t)for(let e=0;e<t.count;)switch(t.get(e).key.assertString(`${Qk} key`).value){case Zk:{const n=t.get(e).value.assertSequence(`${Qk} ${Zk}`);t.remove(e);const r={},o={};for(const e of n){const t=e.assertString(`${Zk} item`).value,n=t.toUpperCase();if(r[n])throw new Error(`Duplicate context item '${t}'`);r[n]=!0,this.readerContext.push(t);const i=t.indexOf("("),s=i>0?t.substr(0,i+1)+")":t,a=s.toUpperCase();if(o[a])throw new Error(`Duplicate context item '${s}'`);o[a]=!0,this.evaluatorContext.push(s)}break}case eS:{const n=t.get(e).value;this.description=n.assertString(eS).value,t.remove(e);break}default:e++}}}class $E extends BE{constructor(e,t){super(e,t)}}class zE extends $E{constructor(e,t){if(super(e,t),t)for(const e of t){const t=e.key.assertString(`${Qk} key`);switch(t.value){case Kk:{const t=e.value.assertMapping(`${Qk} ${Kk}`);for(const e of t){const t=e.key.assertString(`${Qk} ${Kk} key`);t.value,t.assertUnexpectedValue(`${Qk} ${Kk} key`)}break}default:t.assertUnexpectedValue(`${Qk} key`)}}}get definitionType(){return Lk.Boolean}isMatch(e){return e.templateTokenType===Dk.Boolean}validate(){}}class qE{constructor(e){if(this.type="",this.required=!1,e.templateTokenType===Dk.String)this.type=e.value;else{const t=e.assertMapping(uS);for(const e of t){const t=e.key.assertString(`${uS} key`);switch(t.value){case _S:this.type=e.value.assertString(`${uS} ${_S}`).value;break;case SS:this.required=e.value.assertBoolean(`${uS} ${SS}`).value;break;case eS:this.description=e.value.assertString(`${uS} ${eS}`).value;break;default:t.assertUnexpectedValue(`${uS} key`)}}}}}class VE extends BE{constructor(e,t){if(super(e,t),this.properties={},this.looseKeyType="",this.looseValueType="",t)for(const e of t){const t=e.key.assertString(`${Qk} key`);switch(t.value){case aS:{const t=e.value.assertMapping(`${Qk} ${aS}`);for(const e of t){const t=e.key.assertString(`${Qk} ${aS} key`);switch(t.value){case kS:{const t=e.value.assertMapping(`${Qk} ${aS} ${kS}`);for(const e of t){const t=e.key.assertString(`${Qk} ${aS} ${kS} key`);this.properties[t.value]=new qE(e.value)}break}case iS:{const t=e.value.assertString(`${Qk} ${aS} ${iS}`);this.looseKeyType=t.value;break}case sS:{const t=e.value.assertString(`${Qk} ${aS} ${sS}`);this.looseValueType=t.value;break}default:t.assertUnexpectedValue(`${Qk} ${aS} key`)}}break}default:t.assertUnexpectedValue(`${Qk} key`)}}}get definitionType(){return Lk.Mapping}validate(e,t){if(this.looseKeyType){if(e.getDefinition(this.looseKeyType),!this.looseValueType)throw new Error(`Property '${iS}' is defined but '${sS}' is not defined on '${t}'`);e.getDefinition(this.looseValueType)}else if(this.looseValueType)throw new Error(`Property '${sS}' is defined but '${iS}' is not defined on '${t}'`);for(const n of Object.keys(this.properties)){const r=this.properties[n];if(!r.type)throw new Error(`Type not specified for the property '${n}' on '${t}'`);e.getDefinition(r.type)}}}class FE extends $E{constructor(e,t){if(super(e,t),t)for(const e of t){const t=e.key.assertString(`${Qk} key`);switch(t.value){case hS:{const t=e.value.assertMapping(`${Qk} ${hS}`);for(const e of t){const t=e.key.assertString(`${Qk} ${hS} key`);t.value,t.assertUnexpectedValue(`${Qk} ${hS} key`)}break}default:t.assertUnexpectedValue(`${Qk} key`)}}}get definitionType(){return Lk.Null}isMatch(e){return e.templateTokenType===Dk.Null}validate(){}}class HE extends $E{constructor(e,t){if(super(e,t),t)for(const e of t){const t=e.key.assertString(`${Qk} key`);switch(t.value){case gS:{const t=e.value.assertMapping(`${Qk} ${gS}`);for(const e of t){const t=e.key.assertString(`${Qk} ${gS} key`);t.value,t.assertUnexpectedValue(`${Qk} ${gS} key`)}break}default:t.assertUnexpectedValue(`${Qk} key`)}}}get definitionType(){return Lk.Number}isMatch(e){return e.templateTokenType===Dk.Number}validate(){}}class WE extends BE{constructor(e,t){if(super(e,t),this.oneOf=[],this.oneOfPrefix=[],t)for(const e of t){const t=e.key.assertString(`${Qk} key`);switch(t.value){case vS:{const t=e.value.assertSequence(`${Qk} ${vS}`);for(const e of t){const t=e.assertString(`${Qk} ${vS} item`);this.oneOf.push(t.value)}break}case Wk:{const t=e.value.assertSequence(`${Qk} ${Wk}`);for(const e of t){const t=e.assertString(`${Qk} ${vS} item`);this.oneOf.push(this.key+"-"+t.value)}break}default:t.assertUnexpectedValue(`${Qk} key`)}}}get definitionType(){return Lk.OneOf}validate(e,t){if(0===this.oneOf.length)throw new Error(`'${t}' does not contain any references`);let n=!1;const r=[];let o,i,s,a,l;const c=[],u={};for(const d of this.oneOf){if(u[d])throw new Error(`'${t}' contains duplicate nested type '${d}'`);u[d]=!0;const h=e.getDefinition(d);if(h.readerContext.length>0)throw new Error(`'${t}' is a one-of definition and references another definition that defines context. This is currently not supported.`);switch(h.definitionType){case Lk.Mapping:{const e=h;r.push(e),e.looseKeyType&&(n=!0);break}case Lk.Sequence:if(i)throw new Error(`'${t}' refers to more than one definition of type '${CS}'`);i=h;break;case Lk.Null:if(s)throw new Error(`'${t}' refers to more than one definition of type '${hS}'`);s=h;break;case Lk.Boolean:if(a)throw new Error(`'${t}' refers to more than one definition of type '${Kk}'`);a=h;break;case Lk.Number:if(l)throw new Error(`'${t}' refers to more than one definition of type '${gS}'`);l=h;break;case Lk.String:{const e=h;if(c.length>0&&(!c[0].constant||!e.constant))throw new Error(`'${t}' refers to more than one 'scalar', but some do not set '${Gk}'`);c.push(e);break}case Lk.OneOf:if(o)throw new Error(`'${t}' contains multiple allowed-values definitions`);o=h;break;default:throw new Error(`'${t}' refers to a definition with type '${h.definitionType}'`)}}if(r.length>1){if(n)throw new Error(`'${t}' refers to two mappings and at least one sets '${iS}'. This is not currently supported.`);const e={};for(const n of r)for(const r of Object.keys(n.properties)){const o=n.properties[r],i=e[r];if(i){if(i.type===o.type)continue;throw new Error(`'${t}' contains two mappings with the same property, but each refers to a different type. All matching properties must refer to the same type.`)}e[r]=o}}}}class UE extends BE{constructor(e,t){if(super(e,t),this.itemType="",t)for(const e of t){const t=e.key.assertString(`${Qk} key`);switch(t.value){case CS:{const t=e.value.assertMapping(`${Qk} ${CS}`);for(const e of t){const t=e.key.assertString(`${Qk} ${CS} key`);switch(t.value){case oS:{const t=e.value.assertString(`${Qk} ${CS} ${oS}`);this.itemType=t.value;break}default:t.assertUnexpectedValue(`${Qk} ${CS} key`)}}break}default:t.assertUnexpectedValue(`${Qk} key`)}}}get definitionType(){return Lk.Sequence}validate(e,t){if(!this.itemType)throw new Error(`'${t}' does not defined '${oS}'`);e.getDefinition(this.itemType)}}class KE extends $E{constructor(e,t){if(super(e,t),this.constant="",this.ignoreCase=!1,this.requireNonEmpty=!1,this.isExpression=!1,t)for(const e of t){const t=e.key.assertString(`${Qk} key`);switch(t.value){case TS:{const t=e.value.assertMapping(`${Qk} ${TS}`);for(const e of t){const t=e.key.assertString(`${Qk} ${TS} key`);switch(t.value){case Gk:{const t=e.value.assertString(`${Qk} ${TS} ${Gk}`);this.constant=t.value;break}case tS:{const t=e.value.assertBoolean(`${Qk} ${TS} ${tS}`);this.ignoreCase=t.value;break}case ES:{const t=e.value.assertBoolean(`${Qk} ${TS} ${ES}`);this.requireNonEmpty=t.value;break}case rS:{const t=e.value.assertBoolean(`${Qk} ${TS} ${rS}`);this.isExpression=t.value;break}default:t.assertUnexpectedValue(`${Qk} ${TS} key`)}}break}default:t.assertUnexpectedValue(`${Qk} key`)}}}get definitionType(){return Lk.String}isMatch(e){if(e.templateTokenType===Dk.String){const t=e.value;return this.constant?this.ignoreCase?this.constant.toUpperCase()===t.toUpperCase():this.constant===t:!this.requireNonEmpty||!!t}return!1}validate(){if(this.constant&&this.requireNonEmpty)throw new Error(`Properties '${Gk}' and '${ES}' cannot both be set`)}}class XE{constructor(e){this.definitions={},this.version="",this.definitions[hS]=new FE(hS),this.definitions[Kk]=new zE(Kk),this.definitions[gS]=new HE(gS),this.definitions[TS]=new KE(TS);const t=new UE(CS);t.itemType=Uk,this.definitions[t.key]=t;const n=new VE(aS);n.looseKeyType=TS,n.looseValueType=Uk,this.definitions[n.key]=n;const r=new WE(Uk);if(r.oneOf.push(hS),r.oneOf.push(Kk),r.oneOf.push(gS),r.oneOf.push(TS),r.oneOf.push(CS),r.oneOf.push(aS),this.definitions[r.key]=r,e)for(const t of e){const e=t.key.assertString(`${PS} key`);switch(e.value){case IS:this.version=t.value.assertString(`${PS} ${IS}`).value;break;case Jk:{const e=t.value.assertMapping(`${PS} ${Jk}`);for(const t of e){const e=t.key.assertString(`${PS} ${Jk} key`),n=t.value.assertMapping(`${PS} ${Jk} value`);let r;for(const o of n){const i=o.key.assertString(`${Qk} key`),s=t.value;switch(i.value){case hS:r=new FE(e.value,n);break;case Kk:r=new zE(e.value,n);break;case gS:r=new HE(e.value,n);break;case TS:r=new KE(e.value,n);break;case CS:r=new UE(e.value,n);break;case aS:r=new VE(e.value,n);break;case vS:r=new WE(e.value,n);break;case Wk:for(const t of s)if(t.value.templateTokenType===Dk.Sequence){const n=t.value;for(const t of n)if(t.templateTokenType===Dk.String){const n=t,r=e.value+"-"+n.value,o=new KE(r);o.constant=n.toDisplayString(),this.definitions[r]=o}}r=new WE(e.value,n);break;case Zk:case eS:continue;default:i.assertUnexpectedValue(`${Qk} mapping key`)}break}if(!r)throw new Error(`Not enough information to construct definition '${e.value}'`);this.definitions[e.value]=r}break}default:e.assertUnexpectedValue(`${PS} key`)}}}getDefinition(e){const t=this.definitions[e];if(t)return t;throw new Error(`Schema definition '${e}' not found`)}getScalarDefinitions(e){const t=[];switch(e.definitionType){case Lk.Null:case Lk.Boolean:case Lk.Number:case Lk.String:t.push(e);break;case Lk.OneOf:{const n=e;for(const e of n.oneOf){const n=this.getDefinition(e);t.push(...this.getScalarDefinitions(n))}break}}return t}getDefinitionsOfType(e,t){const n=[];if(e.definitionType===t)n.push(e);else if(e.definitionType===Lk.OneOf){const r=e;for(const e of r.oneOf){const r=this.getDefinition(e);r.definitionType===t&&n.push(r)}}return n}matchPropertyAndFilter(e,t){let n,r=!1;for(const o of e){const e=o.properties[t];e?n=e:r=!0}if(n&&r)for(let n=0;n<e.length;)e[n].properties[t]?n++:e.splice(n,1);return n}validate(){const e={};for(const t of Object.keys(this.definitions)){if(!t.match(XE._definitionNamePattern))throw new Error(`Invalid definition name '${t}'`);const n=this.definitions[t];n.definitionType===Lk.OneOf?e[t]=n:n.validate(this,t)}for(const t of Object.keys(e))e[t].validate(this,t)}static load(e){const t=new Vk(new Fk(10,500),XE.getInternalSchema(),new RE),n=jE(t,PS,e,void 0);t.errors.check();const r=n.assertMapping(PS),o=new XE(r);return o.validate(),o}static getInternalSchema(){if(void 0===XE._internalSchema){const e=new XE;let t=new VE(PS);t.properties[IS]=new qE(new RS(void 0,void 0,dS,void 0)),t.properties[Jk]=new qE(new RS(void 0,void 0,Jk,void 0)),e.definitions[t.key]=t,t=new VE(Jk),t.looseKeyType=dS,t.looseValueType=Qk,e.definitions[t.key]=t;let n=new WE(Qk);n.oneOf.push(fS),n.oneOf.push(Xk),n.oneOf.push(mS),n.oneOf.push(OS),n.oneOf.push(NS),n.oneOf.push(lS),n.oneOf.push(bS),e.definitions[n.key]=n,t=new VE(fS),t.properties[eS]=new qE(new RS(void 0,void 0,TS,void 0)),t.properties[Zk]=new qE(new RS(void 0,void 0,MS,void 0)),t.properties[hS]=new qE(new RS(void 0,void 0,pS,void 0)),e.definitions[t.key]=t,t=new VE(pS),e.definitions[t.key]=t,t=new VE(Xk),t.properties[eS]=new qE(new RS(void 0,void 0,TS,void 0)),t.properties[Zk]=new qE(new RS(void 0,void 0,MS,void 0)),t.properties[Kk]=new qE(new RS(void 0,void 0,Yk,void 0)),e.definitions[t.key]=t,t=new VE(Yk),e.definitions[t.key]=t,t=new VE(mS),t.properties[eS]=new qE(new RS(void 0,void 0,TS,void 0)),t.properties[Zk]=new qE(new RS(void 0,void 0,MS,void 0)),t.properties[gS]=new qE(new RS(void 0,void 0,yS,void 0)),e.definitions[t.key]=t,t=new VE(yS),e.definitions[t.key]=t,t=new VE(OS),t.properties[eS]=new qE(new RS(void 0,void 0,TS,void 0)),t.properties[Zk]=new qE(new RS(void 0,void 0,MS,void 0)),t.properties[TS]=new qE(new RS(void 0,void 0,jS,void 0)),e.definitions[t.key]=t,t=new VE(jS),t.properties[Gk]=new qE(new RS(void 0,void 0,dS,void 0)),t.properties[tS]=new qE(new RS(void 0,void 0,Kk,void 0)),t.properties[ES]=new qE(new RS(void 0,void 0,Kk,void 0)),t.properties[rS]=new qE(new RS(void 0,void 0,Kk,void 0)),e.definitions[t.key]=t,t=new VE(NS),t.properties[eS]=new qE(new RS(void 0,void 0,TS,void 0)),t.properties[Zk]=new qE(new RS(void 0,void 0,MS,void 0)),t.properties[CS]=new qE(new RS(void 0,void 0,AS,void 0)),e.definitions[t.key]=t,t=new VE(AS),t.properties[oS]=new qE(new RS(void 0,void 0,dS,void 0)),e.definitions[t.key]=t,t=new VE(lS),t.properties[eS]=new qE(new RS(void 0,void 0,TS,void 0)),t.properties[Zk]=new qE(new RS(void 0,void 0,MS,void 0)),t.properties[aS]=new qE(new RS(void 0,void 0,cS,void 0)),e.definitions[t.key]=t,t=new VE(cS),t.properties[kS]=new qE(new RS(void 0,void 0,kS,void 0)),t.properties[iS]=new qE(new RS(void 0,void 0,dS,void 0)),t.properties[sS]=new qE(new RS(void 0,void 0,dS,void 0)),e.definitions[t.key]=t,t=new VE(kS),t.looseKeyType=dS,t.looseValueType=xS,e.definitions[t.key]=t,n=new WE(xS),n.oneOf.push(dS),n.oneOf.push(uS),e.definitions[n.key]=n,t=new VE(uS),t.properties[_S]=new qE(new RS(void 0,void 0,dS,void 0)),t.properties[SS]=new qE(new RS(void 0,void 0,Kk,void 0)),t.properties[eS]=new qE(new RS(void 0,void 0,TS,void 0)),e.definitions[t.key]=t,t=new VE(bS),t.properties[eS]=new qE(new RS(void 0,void 0,TS,void 0)),t.properties[Zk]=new qE(new RS(void 0,void 0,MS,void 0)),t.properties[vS]=new qE(new RS(void 0,void 0,MS,void 0)),t.properties[Wk]=new qE(new RS(void 0,void 0,MS,void 0)),e.definitions[t.key]=t;const r=new KE(dS);r.requireNonEmpty=!0,e.definitions[r.key]=r;const o=new UE(MS);o.itemType=dS,e.definitions[o.key]=o,e.validate(),XE._internalSchema=e}return XE._internalSchema}}XE._definitionNamePattern=/^[a-zA-Z_][a-zA-Z0-9_-]*$/;const YE=JSON.parse('{"version":"workflow-v1.0","definitions":{"workflow-root":{"description":"A workflow file.","mapping":{"properties":{"on":"on","name":"workflow-name","description":"workflow-description","run-name":"run-name","defaults":"workflow-defaults","env":"workflow-env","permissions":"permissions","concurrency":"workflow-concurrency","jobs":{"type":"jobs","required":true}}}},"workflow-root-strict":{"description":"Workflow file with strict validation","mapping":{"properties":{"on":{"type":"on-strict","required":true},"name":"workflow-name","description":"workflow-description","run-name":"run-name","defaults":"workflow-defaults","env":"workflow-env","permissions":"permissions","concurrency":"workflow-concurrency","jobs":{"type":"jobs","required":true}}}},"workflow-name":{"description":"The name of the workflow that GitHub displays on your repository\'s \'Actions\' tab.\\n\\n[Documentation](https://docs.github.com/actions/using-workflows/workflow-syntax-for-github-actions#name)","string":{}},"workflow-description":{"description":"A description for your workflow or reusable workflow","string":{}},"run-name":{"context":["github","inputs","vars"],"string":{},"description":"The name for workflow runs generated from the workflow. GitHub displays the workflow run name in the list of workflow runs on your repository\'s \'Actions\' tab.\\n\\n[Documentation](https://docs.github.com/actions/using-workflows/workflow-syntax-for-github-actions#run-name)"},"on":{"description":"The GitHub event that triggers the workflow. Events can be a single string, array of events, array of event types, or an event configuration map that schedules a workflow or restricts the execution of a workflow to specific files, tags, or branch changes. View a full list of [events that trigger workflows](https://docs.github.com/actions/using-workflows/events-that-trigger-workflows).\\n\\n[Documentation](https://docs.github.com/actions/using-workflows/workflow-syntax-for-github-actions#on)","one-of":["string","sequence","on-mapping"]},"on-mapping":{"mapping":{"properties":{"workflow_call":"workflow-call"},"loose-key-type":"non-empty-string","loose-value-type":"any"}},"on-strict":{"description":"The GitHub event that triggers the workflow.  Events can be a single string, array of events, array of event types, or an event configuration map that schedules a workflow or restricts the execution of a workflow to specific files, tags, or branch changes. View a full list of [events that trigger workflows](https://docs.github.com/actions/using-workflows/events-that-trigger-workflows).\\n\\n[Documentation](https://docs.github.com/actions/using-workflows/workflow-syntax-for-github-actions#on)","one-of":["on-string-strict","on-sequence-strict","on-mapping-strict"]},"on-mapping-strict":{"description":"The GitHub event that triggers the workflow.  Events can be a single string, array of events, array of event types, or an event configuration map that schedules a workflow or restricts the execution of a workflow to specific files, tags, or branch changes. View a full list of [events that trigger workflows](https://docs.github.com/actions/using-workflows/events-that-trigger-workflows).\\n\\n[Documentation](https://docs.github.com/actions/using-workflows/workflow-syntax-for-github-actions#on)","mapping":{"properties":{"branch_protection_rule":"branch-protection-rule","check_run":"check-run","check_suite":"check-suite","create":"create","delete":"delete","deployment":"deployment","deployment_status":"deployment-status","discussion":"discussion","discussion_comment":"discussion-comment","fork":"fork","gollum":"gollum","image_version":"image-version","issue_comment":"issue-comment","issues":"issues","label":"label","merge_group":"merge-group","milestone":"milestone","page_build":"page-build","project":"project","project_card":"project-card","project_column":"project-column","public":"public","pull_request":"pull-request","pull_request_comment":"pull-request-comment","pull_request_review":"pull-request-review","pull_request_review_comment":"pull-request-review-comment","pull_request_target":"pull-request-target","push":"push","registry_package":"registry-package","release":"release","repository_dispatch":"repository-dispatch","schedule":"schedule","status":"status","watch":"watch","workflow_call":"workflow-call","workflow_dispatch":"workflow-dispatch","workflow_run":"workflow-run"}}},"on-string-strict":{"one-of":["branch-protection-rule-string","check-run-string","check-suite-string","create-string","delete-string","deployment-string","deployment-status-string","discussion-string","discussion-comment-string","fork-string","gollum-string","image-version-string","issue-comment-string","issues-string","label-string","merge-group-string","milestone-string","page-build-string","project-string","project-card-string","project-column-string","public-string","pull-request-string","pull-request-comment-string","pull-request-review-string","pull-request-review-comment-string","pull-request-target-string","push-string","registry-package-string","release-string","repository-dispatch-string","schedule-string","status-string","watch-string","workflow-call-string","workflow-dispatch-string","workflow-run-string"]},"on-sequence-strict":{"sequence":{"item-type":"on-string-strict"}},"branch-protection-rule-string":{"description":"Runs your workflow when branch protection rules in the workflow repository are changed.","string":{"constant":"branch_protection_rule"}},"branch-protection-rule":{"description":"Runs your workflow when branch protection rules in the workflow repository are changed.","one-of":["null","branch-protection-rule-mapping"]},"branch-protection-rule-mapping":{"mapping":{"properties":{"types":"branch-protection-rule-activity"}}},"branch-protection-rule-activity":{"description":"The types of branch protection rule activity that trigger the workflow. Supported activity types: `created`, `edited`, `deleted`.","one-of":["branch-protection-rule-activity-type","branch-protection-rule-activity-types"]},"branch-protection-rule-activity-types":{"sequence":{"item-type":"branch-protection-rule-activity-type"}},"branch-protection-rule-activity-type":{"allowed-values":["created","edited","deleted"]},"check-run-string":{"description":"Runs your workflow when activity related to a check run occurs. A check run is an individual test that is part of a check suite.","string":{"constant":"check_run"}},"check-run":{"description":"Runs your workflow when activity related to a check run occurs. A check run is an individual test that is part of a check suite.","one-of":["null","check-run-mapping"]},"check-run-mapping":{"mapping":{"properties":{"types":"check-run-activity"}}},"check-run-activity":{"description":"The types of check run activity that trigger the workflow. Supported activity types: `created`, `rerequested`, `completed`, `requested_action`.","one-of":["check-run-activity-type","check-run-activity-types"]},"check-run-activity-types":{"sequence":{"item-type":"check-run-activity-type"}},"check-run-activity-type":{"allowed-values":["completed","created","rerequested","requested_action"]},"check-suite-string":{"description":"Runs your workflow when check suite activity occurs. A check suite is a collection of the check runs created for a specific commit. Check suites summarize the status and conclusion of the check runs that are in the suite.","string":{"constant":"check_suite"}},"check-suite":{"description":"Runs your workflow when check suite activity occurs. A check suite is a collection of the check runs created for a specific commit. Check suites summarize the status and conclusion of the check runs that are in the suite.","one-of":["null","check-suite-mapping"]},"check-suite-mapping":{"mapping":{"properties":{"types":"check-suite-activity"}}},"check-suite-activity":{"description":"The types of check suite activity that trigger the workflow. Supported activity types: `completed`.","one-of":["check-suite-activity-type","check-suite-activity-types"]},"check-suite-activity-types":{"sequence":{"item-type":"check-suite-activity-type"}},"check-suite-activity-type":{"allowed-values":["completed"]},"create-string":{"description":"Runs your workflow when someone creates a Git reference (Git branch or tag) in the workflow\'s repository.","string":{"constant":"create"}},"create":{"description":"Runs your workflow when someone creates a Git reference (Git branch or tag) in the workflow\'s repository.","null":{}},"delete-string":{"description":"Runs your workflow when someone deletes a Git reference (Git branch or tag) in the workflow\'s repository.","string":{"constant":"delete"}},"delete":{"description":"Runs your workflow when someone deletes a Git reference (Git branch or tag) in the workflow\'s repository.","null":{}},"deployment-string":{"description":"Runs your workflow when someone creates a deployment in the workflow\'s repository. Deployments created with a commit SHA may not have a Git ref.","string":{"constant":"deployment"}},"deployment":{"description":"Runs your workflow when someone creates a deployment in the workflow\'s repository. Deployments created with a commit SHA may not have a Git ref.","null":{}},"deployment-status-string":{"description":"Runs your workflow when a third party provides a deployment status. Deployments created with a commit SHA may not have a Git ref.","string":{"constant":"deployment_status"}},"deployment-status":{"description":"Runs your workflow when a third party provides a deployment status. Deployments created with a commit SHA may not have a Git ref.","null":{}},"discussion-string":{"description":"Runs your workflow when a discussion in the workflow\'s repository is created or modified. For activity related to comments on a discussion, use the `discussion_comment` event.","string":{"constant":"discussion"}},"discussion":{"description":"Runs your workflow when a discussion in the workflow\'s repository is created or modified. For activity related to comments on a discussion, use the `discussion_comment` event.","one-of":["null","discussion-mapping"]},"discussion-mapping":{"mapping":{"properties":{"types":"discussion-activity"}}},"discussion-activity":{"description":"The types of discussion activity that trigger the workflow. Supported activity types: `created`, `edited`, `deleted`, `transferred`, `pinned`, `unpinned`, `labeled`, `unlabeled`, `locked`, `unlocked`, `category_changed`, `answered`, `unanswered`.","one-of":["discussion-activity-type","discussion-activity-types"]},"discussion-activity-types":{"sequence":{"item-type":"discussion-activity-type"}},"discussion-activity-type":{"allowed-values":["created","edited","deleted","transferred","pinned","unpinned","labeled","unlabeled","locked","unlocked","category_changed","answered","unanswered"]},"discussion-comment-string":{"description":"Runs your workflow when a comment on a discussion in the workflow\'s repository is created or modified. For activity related to a discussion as opposed to comments on the discussion, use the `discussion` event.","string":{"constant":"discussion_comment"}},"discussion-comment":{"description":"Runs your workflow when a comment on a discussion in the workflow\'s repository is created or modified. For activity related to a discussion as opposed to comments on the discussion, use the `discussion` event.","one-of":["null","discussion-comment-mapping"]},"discussion-comment-mapping":{"mapping":{"properties":{"types":"discussion-comment-activity"}}},"discussion-comment-activity":{"description":"The types of discussion comment activity that trigger the workflow. Supported activity types: `created`, `edited`, `deleted`.","one-of":["discussion-comment-activity-type","discussion-comment-activity-types"]},"discussion-comment-activity-types":{"sequence":{"item-type":"discussion-comment-activity-type"}},"discussion-comment-activity-type":{"allowed-values":["created","edited","deleted"]},"fork-string":{"description":"Runs your workflow when someone forks a repository.","string":{"constant":"fork"}},"fork":{"description":"Runs your workflow when someone forks a repository.","null":{}},"gollum-string":{"description":"Runs your workflow when someone creates or updates a Wiki page.","string":{"constant":"gollum"}},"gollum":{"description":"Runs your workflow when someone creates or updates a Wiki page.","null":{}},"image-version-string":{"description":"Runs your workflow when an image version is created or changes state.","string":{"constant":"image_version"}},"image-version":{"description":"Runs your workflow when an image version is created or changes state.","one-of":["null","image-version-mapping"]},"image-version-mapping":{"mapping":{"properties":{"types":"image-version-activity","names":"event-names","versions":"event-versions"}}},"image-version-activity":{"description":"The types of image version activity that trigger the workflow. Supported activity types: `created`, `ready`, `deleted`.","one-of":["image-version-activity-type","image-version-activity-types"]},"image-version-activity-types":{"sequence":{"item-type":"image-version-activity-type"}},"image-version-activity-type":{"allowed-values":["created","ready","deleted"]},"issue-comment-string":{"description":"Runs your workflow when an issue or pull request comment is created, edited, or deleted.","string":{"constant":"issue_comment"}},"issue-comment":{"description":"Runs your workflow when an issue or pull request comment is created, edited, or deleted.","one-of":["null","issue-comment-mapping"]},"issue-comment-mapping":{"mapping":{"properties":{"types":"issue-comment-activity"}}},"issue-comment-activity":{"description":"The types of issue comment activity that trigger the workflow. Supported activity types: `created`, `edited`, `deleted`.","one-of":["issue-comment-activity-type","issue-comment-activity-types"]},"issue-comment-activity-types":{"sequence":{"item-type":"issue-comment-activity-type"}},"issue-comment-activity-type":{"allowed-values":["created","edited","deleted"]},"issues-string":{"description":"Runs your workflow when an issue in the workflow\'s repository is created or modified. For activity related to comments in an issue, use the `issue_comment` event.","string":{"constant":"issues"}},"issues":{"description":"Runs your workflow when an issue in the workflow\'s repository is created or modified. For activity related to comments in an issue, use the `issue_comment` event.","one-of":["null","issues-mapping"]},"issues-mapping":{"mapping":{"properties":{"types":"issues-activity"}}},"issues-activity":{"description":"The types of issue activity that trigger the workflow. Supported activity types: `opened`, `edited`, `deleted`, `transferred`, `pinned`, `unpinned`, `closed`, `reopened`, `assigned`, `unassigned`, `labeled`, `unlabeled`, `locked`, `unlocked`, `milestoned`, `demilestoned`.","one-of":["issues-activity-type","issues-activity-types"]},"issues-activity-types":{"sequence":{"item-type":"issues-activity-type"}},"issues-activity-type":{"allowed-values":["opened","edited","deleted","transferred","pinned","unpinned","closed","reopened","assigned","unassigned","labeled","unlabeled","locked","unlocked","milestoned","demilestoned"]},"label-string":{"description":"Runs your workflow when a label in your workflow\'s repository is created or modified.","string":{"constant":"label"}},"label":{"description":"Runs your workflow when a label in your workflow\'s repository is created or modified.","one-of":["null","label-mapping"]},"label-mapping":{"mapping":{"properties":{"types":"label-activity"}}},"label-activity":{"description":"The types of label activity that trigger the workflow. Supported activity types: `created`, `edited`, `deleted`.","one-of":["label-activity-type","label-activity-types"]},"label-activity-types":{"sequence":{"item-type":"label-activity-type"}},"label-activity-type":{"allowed-values":["created","edited","deleted"]},"merge-group-string":{"description":"Runs your workflow when a pull request is added to a merge queue, which adds the pull request to a merge group.","string":{"constant":"merge_group"}},"merge-group":{"description":"Runs your workflow when a pull request is added to a merge queue, which adds the pull request to a merge group.","one-of":["null","merge-group-mapping"]},"merge-group-mapping":{"mapping":{"properties":{"types":"merge-group-activity","branches":"event-branches","branches-ignore":"event-branches-ignore"}}},"merge-group-activity":{"description":"The types of merge group activity that trigger the workflow. Supported activity types: `checks_requested`.","one-of":["merge-group-activity-type","merge-group-activity-types"]},"merge-group-activity-types":{"sequence":{"item-type":"merge-group-activity-type"}},"merge-group-activity-type":{"allowed-values":["checks_requested"]},"milestone-string":{"description":"Runs your workflow when a milestone in the workflow\'s repository is created or modified.","string":{"constant":"milestone"}},"milestone":{"description":"Runs your workflow when a milestone in the workflow\'s repository is created or modified.","one-of":["null","milestone-mapping"]},"milestone-mapping":{"mapping":{"properties":{"types":"milestone-activity"}}},"milestone-activity":{"description":"The types of milestone activity that trigger the workflow. Supported activity types: `created`, `closed`, `opened`, `edited`, `deleted`.","one-of":["milestone-activity-type","milestone-activity-types"]},"milestone-activity-types":{"sequence":{"item-type":"milestone-activity-type"}},"milestone-activity-type":{"allowed-values":["created","closed","opened","edited","deleted"]},"page-build-string":{"description":"Runs your workflow when someone pushes to a branch that is the publishing source for GitHub Pages, if GitHub Pages is enabled for the repository.","string":{"constant":"page_build"}},"page-build":{"description":"Runs your workflow when someone pushes to a branch that is the publishing source for GitHub Pages, if GitHub Pages is enabled for the repository.","null":{}},"project-string":{"description":"Runs your workflow when a project board is created or modified. For activity related to cards or columns in a project board, use the `project_card` or `project_column` events instead.","string":{"constant":"project"}},"project":{"description":"Runs your workflow when a project board is created or modified. For activity related to cards or columns in a project board, use the `project_card` or `project_column` events instead.","one-of":["null","project-mapping"]},"project-mapping":{"mapping":{"properties":{"types":"project-activity"}}},"project-activity":{"description":"The types of project activity that trigger the workflow. Supported activity types: `created`, `closed`, `reopened`, `edited`, `deleted`.","one-of":["project-activity-type","project-activity-types"]},"project-activity-types":{"sequence":{"item-type":"project-activity-type"}},"project-activity-type":{"allowed-values":["created","closed","reopened","edited","deleted"]},"project-card-string":{"description":"Runs your workflow when a card on a project board is created or modified. For activity related to project boards or columns in a project board, use the `project` or `project_column` event instead.","string":{"constant":"project_card"}},"project-card":{"description":"Runs your workflow when a card on a project board is created or modified. For activity related to project boards or columns in a project board, use the `project` or `project_column` event instead.","one-of":["null","project-card-mapping"]},"project-card-mapping":{"mapping":{"properties":{"types":"project-card-activity"}}},"project-card-activity":{"description":"The types of project card activity that trigger the workflow. Supported activity types: `created`, `moved`, `converted`, `edited`, `deleted`.","one-of":["project-card-activity-type","project-card-activity-types"]},"project-card-activity-types":{"sequence":{"item-type":"project-card-activity-type"}},"project-card-activity-type":{"allowed-values":["created","moved","converted","edited","deleted"]},"project-column-string":{"description":"Runs your workflow when a column on a project board is created or modified. For activity related to project boards or cards in a project board, use the `project` or `project_card` event instead.","string":{"constant":"project_column"}},"project-column":{"description":"Runs your workflow when a column on a project board is created or modified. For activity related to project boards or cards in a project board, use the `project` or `project_card` event instead.","one-of":["null","project-column-mapping"]},"project-column-mapping":{"mapping":{"properties":{"types":"project-column-activity"}}},"project-column-activity":{"description":"The types of project column activity that trigger the workflow. Supported activity types: `created`, `updated`, `moved`, `deleted`.","one-of":["project-column-activity-type","project-column-activity-types"]},"project-column-activity-types":{"sequence":{"item-type":"project-column-activity-type"}},"project-column-activity-type":{"allowed-values":["created","updated","moved","deleted"]},"public-string":{"description":"Runs your workflow when your workflow\'s repository changes from private to public.","string":{"constant":"public"}},"public":{"description":"Runs your workflow when your workflow\'s repository changes from private to public.","null":{}},"pull-request-string":{"description":"Runs your workflow when activity on a pull request in the workflow\'s repository occurs. If no activity types are specified, the workflow runs when a pull request is opened, reopened, or when the head branch of the pull request is updated.","string":{"constant":"pull_request"}},"pull-request":{"description":"Runs your workflow when activity on a pull request in the workflow\'s repository occurs. If no activity types are specified, the workflow runs when a pull request is opened, reopened, or when the head branch of the pull request is updated.","one-of":["null","pull-request-mapping"]},"pull-request-mapping":{"mapping":{"properties":{"types":"pull-request-activity","branches":"event-branches","branches-ignore":"event-branches-ignore","paths":"event-paths","paths-ignore":"event-paths-ignore"}}},"pull-request-activity":{"description":"The types of pull request activity that trigger the workflow. Supported activity types: `assigned`, `unassigned`, `labeled`, `unlabeled`, `opened`, `edited`, `closed`, `reopened`, `synchronize`, `converted_to_draft`, `locked`, `unlocked`, `enqueued`, `dequeued`, `milestoned`, `demilestoned`, `ready_for_review`, `review_requested`, `review_request_removed`, `auto_merge_enabled`, `auto_merge_disabled`.","one-of":["pull-request-activity-type","pull-request-activity-types"]},"pull-request-activity-types":{"sequence":{"item-type":"pull-request-activity-type"}},"pull-request-activity-type":{"allowed-values":["assigned","unassigned","labeled","unlabeled","opened","edited","closed","reopened","synchronize","converted_to_draft","locked","unlocked","enqueued","dequeued","milestoned","demilestoned","ready_for_review","review_requested","review_request_removed","auto_merge_enabled","auto_merge_disabled"]},"pull-request-comment-string":{"description":"Please use the `issue_comment` event instead.","string":{"constant":"pull_request_comment"}},"pull-request-comment":{"description":"Please use the `issue_comment` event instead.","one-of":["null","issue-comment-mapping"]},"pull-request-review-string":{"description":"Runs your workflow when a pull request review is submitted, edited, or dismissed. A pull request review is a group of pull request review comments in addition to a body comment and a state. For activity related to pull request review comments or pull request comments, use the `pull_request_review_comment` or `issue_comment` events instead.","string":{"constant":"pull_request_review"}},"pull-request-review":{"description":"Runs your workflow when a pull request review is submitted, edited, or dismissed. A pull request review is a group of pull request review comments in addition to a body comment and a state. For activity related to pull request review comments or pull request comments, use the `pull_request_review_comment` or `issue_comment` events instead.","one-of":["null","pull-request-review-mapping"]},"pull-request-review-mapping":{"mapping":{"properties":{"types":"pull-request-review-activity"}}},"pull-request-review-activity":{"description":"The types of pull request review activity that trigger the workflow. Supported activity types: `submitted`, `edited`, `dismissed`.","one-of":["pull-request-review-activity-type","pull-request-review-activity-types"]},"pull-request-review-activity-types":{"sequence":{"item-type":"pull-request-review-activity-type"}},"pull-request-review-activity-type":{"allowed-values":["submitted","edited","dismissed"]},"pull-request-review-comment-string":{"description":"","string":{"constant":"pull_request_review_comment"}},"pull-request-review-comment":{"description":"","one-of":["null","pull-request-review-comment-mapping"]},"pull-request-review-comment-mapping":{"mapping":{"properties":{"types":"pull-request-review-comment-activity"}}},"pull-request-review-comment-activity":{"description":"The types of pull request review comment activity that trigger the workflow. Supported activity types: `created`, `edited`, `deleted`.","one-of":["pull-request-review-comment-activity-type","pull-request-review-comment-activity-types"]},"pull-request-review-comment-activity-types":{"sequence":{"item-type":"pull-request-review-comment-activity-type"}},"pull-request-review-comment-activity-type":{"allowed-values":["created","edited","deleted"]},"pull-request-target-string":{"description":"Runs your workflow when activity on a pull request in the workflow\'s repository occurs. If no activity types are specified, the workflow runs when a pull request is opened, reopened, or when the head branch of the pull request is updated.\\n\\nThis event runs in the context of the base of the pull request, rather than in the context of the merge commit, as the `pull_request` event does. This prevents execution of unsafe code from the head of the pull request that could alter your repository or steal any secrets you use in your workflow. This event allows your workflow to do things like label or comment on pull requests from forks. Avoid using this event if you need to build or run code from the pull request.","string":{"constant":"pull_request_target"}},"pull-request-target":{"description":"Runs your workflow when activity on a pull request in the workflow\'s repository occurs. If no activity types are specified, the workflow runs when a pull request is opened, reopened, or when the head branch of the pull request is updated.\\n\\nThis event runs in the context of the base of the pull request, rather than in the context of the merge commit, as the `pull_request` event does. This prevents execution of unsafe code from the head of the pull request that could alter your repository or steal any secrets you use in your workflow. This event allows your workflow to do things like label or comment on pull requests from forks. Avoid using this event if you need to build or run code from the pull request.","one-of":["null","pull-request-target-mapping"]},"pull-request-target-mapping":{"mapping":{"properties":{"types":"pull-request-target-activity","branches":"event-branches","branches-ignore":"event-branches-ignore","paths":"event-paths","paths-ignore":"event-paths-ignore"}}},"pull-request-target-activity":{"description":"The types of pull request activity that trigger the workflow. Supported activity types: `assigned`, `unassigned`, `labeled`, `unlabeled`, `opened`, `edited`, `closed`, `reopened`, `synchronize`, `converted_to_draft`, `locked`, `unlocked`, `enqueued`, `dequeued`, `milestoned`, `demilestoned`, `ready_for_review`, `review_requested`, `review_request_removed`, `auto_merge_enabled`, `auto_merge_disabled`.","one-of":["pull-request-target-activity-type","pull-request-target-activity-types"]},"pull-request-target-activity-types":{"sequence":{"item-type":"pull-request-target-activity-type"}},"pull-request-target-activity-type":{"allowed-values":["assigned","unassigned","labeled","unlabeled","opened","edited","closed","reopened","synchronize","converted_to_draft","locked","unlocked","enqueued","dequeued","milestoned","demilestoned","ready_for_review","review_requested","review_request_removed","auto_merge_enabled","auto_merge_disabled"]},"push-string":{"description":"Runs your workflow when you push a commit or tag.","string":{"constant":"push"}},"push":{"description":"Runs your workflow when you push a commit or tag.","one-of":["null","push-mapping"]},"push-mapping":{"mapping":{"properties":{"branches":"event-branches","branches-ignore":"event-branches-ignore","tags":"event-tags","tags-ignore":"event-tags-ignore","paths":"event-paths","paths-ignore":"event-paths-ignore"}}},"registry-package-string":{"description":"Runs your workflow when activity related to GitHub Packages occurs in your repository.","string":{"constant":"registry_package"}},"registry-package":{"description":"Runs your workflow when activity related to GitHub Packages occurs in your repository.","one-of":["null","registry-package-mapping"]},"registry-package-mapping":{"mapping":{"properties":{"types":"registry-package-activity"}}},"registry-package-activity":{"description":"The types of registry package activity that trigger the workflow. Supported activity types: `published`, `updated`.","one-of":["registry-package-activity-type","registry-package-activity-types"]},"registry-package-activity-types":{"sequence":{"item-type":"registry-package-activity-type"}},"registry-package-activity-type":{"allowed-values":["published","updated"]},"release-string":{"description":"Runs your workflow when release activity in your repository occurs.","string":{"constant":"release"}},"release":{"description":"Runs your workflow when release activity in your repository occurs.","one-of":["null","release-mapping"]},"release-mapping":{"mapping":{"properties":{"types":"release-activity"}}},"release-activity":{"description":"The types of release activity that trigger the workflow. Supported activity types: `published`, `unpublished`, `created`, `edited`, `deleted`, `prereleased`, `released`.","one-of":["release-activity-type","release-activity-types"]},"release-activity-types":{"sequence":{"item-type":"release-activity-type"}},"release-activity-type":{"allowed-values":["published","unpublished","created","edited","deleted","prereleased","released"]},"schedule-string":{"description":"The `schedule` event allows you to trigger a workflow at a scheduled time.\\n\\nYou can schedule a workflow to run at specific UTC times using POSIX cron syntax. Scheduled workflows run on the latest commit on the default or base branch. The shortest interval you can run scheduled workflows is once every 5 minutes. GitHub Actions does not support the non-standard syntax `@yearly`, `@monthly`, `@weekly`, `@daily`, `@hourly`, and `@reboot`.","string":{"constant":"schedule"}},"schedule":{"description":"The `schedule` event allows you to trigger a workflow at a scheduled time.\\n\\nYou can schedule a workflow to run at specific UTC times using POSIX cron syntax. Scheduled workflows run on the latest commit on the default or base branch. The shortest interval you can run scheduled workflows is once every 5 minutes. GitHub Actions does not support the non-standard syntax `@yearly`, `@monthly`, `@weekly`, `@daily`, `@hourly`, and `@reboot`.","sequence":{"item-type":"cron-mapping"}},"status-string":{"description":"Runs your workflow when the status of a Git commit changes. For example, commits can be marked as `error`, `failure`, `pending`, or `success`. If you want to provide more details about the status change, you may want to use the `check_run` event.","string":{"constant":"status"}},"status":{"description":"Runs your workflow when the status of a Git commit changes. For example, commits can be marked as `error`, `failure`, `pending`, or `success`. If you want to provide more details about the status change, you may want to use the `check_run` event.","null":{}},"watch-string":{"description":"Runs your workflow when the workflow\'s repository is starred.","string":{"constant":"watch"}},"watch":{"description":"Runs your workflow when the workflow\'s repository is starred.","one-of":["null","watch-mapping"]},"watch-mapping":{"mapping":{"properties":{"types":"watch-activity"}}},"watch-activity":{"description":"The types of watch activity that trigger the workflow. Supported activity types: `started`.","one-of":["watch-activity-type","watch-activity-types"]},"watch-activity-types":{"sequence":{"item-type":"watch-activity-type"}},"watch-activity-type":{"allowed-values":["started"]},"workflow-run-string":{"description":"This event occurs when a workflow run is requested or completed. It allows you to execute a workflow based on execution or completion of another workflow. The workflow started by the `workflow_run` event is able to access secrets and write tokens, even if the previous workflow was not. This is useful in cases where the previous workflow is intentionally not privileged, but you need to take a privileged action in a later workflow.","string":{"constant":"workflow_run"}},"workflow-run":{"description":"This event occurs when a workflow run is requested or completed. It allows you to execute a workflow based on execution or completion of another workflow. The workflow started by the `workflow_run` event is able to access secrets and write tokens, even if the previous workflow was not. This is useful in cases where the previous workflow is intentionally not privileged, but you need to take a privileged action in a later workflow.","one-of":["null","workflow-run-mapping"]},"workflow-run-mapping":{"mapping":{"properties":{"types":"workflow-run-activity","workflows":"workflow-run-workflows","branches":"event-branches","branches-ignore":"event-branches-ignore"}}},"workflow-run-workflows":{"description":"The name of the workflow that triggers the `workflow_run` event. The workflow must be in the same repository as the workflow that uses the `workflow_run` event.","one-of":["non-empty-string","sequence-of-non-empty-string"]},"workflow-run-activity":{"description":"The types of workflow run activity that trigger the workflow. Supported activity types: `completed`, `requested`, `in_progress`.","one-of":["workflow-run-activity-type","workflow-run-activity-types"]},"workflow-run-activity-types":{"sequence":{"item-type":"workflow-run-activity-type"}},"workflow-run-activity-type":{"allowed-values":["requested","completed","in_progress"]},"event-branches":{"description":"Use the `branches` filter when you want to include branch name patterns or when you want to both include and exclude branch name patterns. You cannot use both the `branches` and `branches-ignore` filters for the same event in a workflow.","one-of":["non-empty-string","sequence-of-non-empty-string"]},"event-branches-ignore":{"description":"Use the `branches-ignore` filter when you only want to exclude branch name patterns. You cannot use both the `branches` and `branches-ignore` filters for the same event in a workflow.","one-of":["non-empty-string","sequence-of-non-empty-string"]},"event-names":{"description":"Use the `names` filter when you want to include names via patterns or when you want to both include and exclude names using patterns. ","one-of":["non-empty-string","sequence-of-non-empty-string"]},"event-tags":{"description":"Use the `tags` filter when you want to include tag name patterns or when you want to both include and exclude tag names patterns. You cannot use both the `tags` and `tags-ignore` filters for the same event in a workflow.","one-of":["non-empty-string","sequence-of-non-empty-string"]},"event-tags-ignore":{"description":"Use the `tags-ignore` filter when you only want to exclude tag name patterns. You cannot use both the `tags` and `tags-ignore` filters for the same event in a workflow.","one-of":["non-empty-string","sequence-of-non-empty-string"]},"event-paths":{"description":"Use the `paths` filter when you want to include file path patterns or when you want to both include and exclude file path patterns. You cannot use both the `paths` and `paths-ignore` filters for the same event in a workflow.","one-of":["non-empty-string","sequence-of-non-empty-string"]},"event-paths-ignore":{"description":"Use the `paths-ignore` filter when you only want to exclude file path patterns. You cannot use both the `paths` and `paths-ignore` filters for the same event in a workflow.","one-of":["non-empty-string","sequence-of-non-empty-string"]},"event-versions":{"description":"Use the `versions` filter when you want to include versions via patterns or when you want to both include and exclude versions using patterns. ","one-of":["non-empty-string","sequence-of-non-empty-string"]},"repository-dispatch-string":{"description":"You can use the GitHub API to trigger a webhook event called `repository_dispatch` when you want to trigger a workflow for activity that happens outside of GitHub.","string":{"constant":"branch_protection_rule"}},"repository-dispatch":{"description":"You can use the GitHub API to trigger a webhook event called `repository_dispatch` when you want to trigger a workflow for activity that happens outside of GitHub.","one-of":["null","repository-dispatch-mapping"]},"repository-dispatch-mapping":{"mapping":{"properties":{"types":"sequence-of-non-empty-string"}}},"workflow-call-string":{"description":"The `workflow_call` event is used to indicate that a workflow can be called by another workflow. When a workflow is triggered with the `workflow_call` event, the event payload in the called workflow is the same event payload from the calling workflow.","string":{"constant":"workflow_call"}},"workflow-call":{"description":"The `workflow_call` event is used to indicate that a workflow can be called by another workflow. When a workflow is triggered with the `workflow_call` event, the event payload in the called workflow is the same event payload from the calling workflow.","one-of":["null","workflow-call-mapping"]},"workflow-call-mapping":{"mapping":{"properties":{"inputs":"workflow-call-inputs","secrets":"workflow-call-secrets","outputs":"workflow-call-outputs"}}},"workflow-call-inputs":{"description":"Inputs that are passed to the called workflow from the caller workflow.","mapping":{"loose-key-type":"non-empty-string","loose-value-type":"workflow-call-input-definition"}},"workflow-call-input-definition":{"mapping":{"properties":{"description":{"type":"string","description":"A string description of the input parameter."},"type":{"type":"workflow-call-input-type","required":true},"required":{"type":"boolean","description":"A boolean to indicate whether the action requires the input parameter. Set to `true` when the parameter is required."},"default":"workflow-call-input-default"}}},"workflow-call-input-type":{"description":"Required if input is defined for the `on.workflow_call` keyword. The value of this parameter is a string specifying the data type of the input. This must be one of: `boolean`, `number`, or `string`.","one-of":["input-type-string","input-type-boolean","input-type-number"]},"input-type-string":{"string":{"constant":"string"}},"input-type-boolean":{"string":{"constant":"boolean"}},"input-type-number":{"string":{"constant":"number"}},"input-type-choice":{"string":{"constant":"choice"}},"input-type-environment":{"string":{"constant":"environment"}},"workflow-call-input-default":{"description":"If a `default` parameter is not set, the default value of the input is `false` for boolean, `0` for a number, and `\\"\\"` for a string.","context":["github","inputs","vars"],"one-of":["string","boolean","number"]},"workflow-call-secrets":{"description":"A map of the secrets that can be used in the called workflow. Within the called workflow, you can use the `secrets` context to refer to a secret.","mapping":{"loose-key-type":"workflow-call-secret-name","loose-value-type":"workflow-call-secret-definition"}},"workflow-call-secret-name":{"string":{"require-non-empty":true},"description":"A string identifier to associate with the secret."},"workflow-call-secret-definition":{"one-of":["null","workflow-call-secret-mapping-definition"]},"workflow-call-secret-mapping-definition":{"mapping":{"properties":{"description":{"type":"string","description":"A string description of the secret parameter."},"required":{"type":"boolean","description":"A boolean specifying whether the secret must be supplied."}}}},"workflow-call-outputs":{"description":"A reusable workflow may generate data that you want to use in the caller workflow. To use these outputs, you must specify them as the outputs of the reusable workflow.","mapping":{"loose-key-type":"workflow-call-output-name","loose-value-type":"workflow-call-output-definition"}},"workflow-call-output-name":{"string":{"require-non-empty":true},"description":"A string identifier to associate with the output. The value of `<output_id>` is a map of the input\'s metadata. The `<output_id>` must be a unique identifier within the outputs object and must start with a letter or _ and contain only alphanumeric characters, -, or _."},"workflow-call-output-definition":{"mapping":{"properties":{"description":{"type":"string","description":"A string description of the output parameter."},"value":{"type":"workflow-output-context","required":true}}}},"workflow-output-context":{"description":"The value to assign to the output parameter.","context":["github","inputs","vars","jobs"],"string":{}},"workflow-dispatch-string":{"description":"The `workflow_dispatch` event allows you to manually trigger a workflow run. A workflow can be manually triggered using the GitHub API, GitHub CLI, or GitHub browser interface.","string":{"constant":"workflow_dispatch"}},"workflow-dispatch":{"description":"The `workflow_dispatch` event allows you to manually trigger a workflow run. A workflow can be manually triggered using the GitHub API, GitHub CLI, or GitHub browser interface.","one-of":["null","workflow-dispatch-mapping"]},"workflow-dispatch-mapping":{"mapping":{"properties":{"inputs":"workflow-dispatch-inputs"}}},"workflow-dispatch-inputs":{"description":"You can configure custom-defined input properties, default input values, and required inputs for the event directly in your workflow. When you trigger the event, you can provide the `ref` and any `inputs`. When the workflow runs, you can access the input values in the `inputs` context.","mapping":{"loose-key-type":"workflow-dispatch-input-name","loose-value-type":"workflow-dispatch-input"}},"workflow-dispatch-input-name":{"string":{"require-non-empty":true},"description":"A string identifier to associate with the input. The value of <input_id> is a map of the input\'s metadata. The <input_id> must be a unique identifier within the inputs object. The <input_id> must start with a letter or _ and contain only alphanumeric characters, -, or _."},"workflow-dispatch-input":{"mapping":{"properties":{"description":{"type":"string","description":"A string description of the input parameter."},"type":{"type":"workflow-dispatch-input-type"},"required":{"type":"boolean","description":"A boolean to indicate whether the workflow requires the input parameter. Set to true when the parameter is required."},"default":"workflow-dispatch-input-default","options":{"type":"sequence-of-string","description":"The options of the dropdown list, if the type is a choice."}}}},"workflow-dispatch-input-type":{"description":"A string representing the type of the input. This must be one of: `boolean`, `number`, `string`, `choice`, or `environment`.","one-of":["input-type-string","input-type-boolean","input-type-number","input-type-environment","input-type-choice"]},"workflow-dispatch-input-default":{"description":"The default value is used when an input parameter isn\'t specified in a workflow file.","one-of":["string","boolean","number"]},"permissions":{"description":"You can use `permissions` to modify the default permissions granted to the `GITHUB_TOKEN`, adding or removing access as required, so that you only allow the minimum required access.\\n\\n[Documentation](https://docs.github.com/actions/using-workflows/workflow-syntax-for-github-actions#permissions)","one-of":["permissions-mapping","permission-level-shorthand-read-all","permission-level-shorthand-write-all"]},"permissions-mapping":{"mapping":{"properties":{"actions":{"type":"permission-level-any","description":"Actions workflows, workflow runs, and artifacts."},"artifact-metadata":{"type":"permission-level-any","description":"Storage and deployment records for build artifacts."},"attestations":{"type":"permission-level-any","description":"Artifact attestations."},"checks":{"type":"permission-level-any","description":"Check runs and check suites."},"contents":{"type":"permission-level-any","description":"Repository contents, commits, branches, downloads, releases, and merges."},"deployments":{"type":"permission-level-any","description":"Deployments and deployment statuses."},"discussions":{"type":"permission-level-any","description":"Discussions and related comments and labels."},"id-token":{"type":"permission-level-write-or-no-access","description":"Token to request an OpenID Connect token."},"issues":{"type":"permission-level-any","description":"Issues and related comments, assignees, labels, and milestones."},"models":{"type":"permission-level-read-or-no-access","description":"Call AI models with GitHub Models."},"packages":{"type":"permission-level-any","description":"Packages published to the GitHub Package Platform."},"pages":{"type":"permission-level-any","description":"Retrieve Pages statuses, configuration, and builds, as well as create new builds."},"pull-requests":{"type":"permission-level-any","description":"Pull requests and related comments, assignees, labels, milestones, and merges."},"repository-projects":{"type":"permission-level-any","description":"Classic projects within a repository."},"security-events":{"type":"permission-level-any","description":"Code scanning and Dependabot alerts."},"statuses":{"type":"permission-level-any","description":"Commit statuses."}}}},"permission-level-any":{"description":"The permission level for the `GITHUB_TOKEN`.","one-of":["permission-level-read","permission-level-write","permission-level-no-access"]},"permission-level-read-or-no-access":{"one-of":["permission-level-read","permission-level-no-access"]},"permission-level-write-or-no-access":{"one-of":["permission-level-write","permission-level-no-access"]},"permission-level-read":{"description":"The permission level for the `GITHUB_TOKEN`. Grants `read` permission for the specified scope.","string":{"constant":"read"}},"permission-level-write":{"description":"The permission level for the `GITHUB_TOKEN`. Grants `write` permission for the specified scope.","string":{"constant":"write"}},"permission-level-no-access":{"description":"The permission level for the `GITHUB_TOKEN`. Restricts all access for the specified scope.","string":{"constant":"none"}},"permission-level-shorthand-read-all":{"description":"The permission level for the `GITHUB_TOKEN`. Grants `read` access for all scopes.","string":{"constant":"read-all"}},"permission-level-shorthand-write-all":{"description":"The permission level for the `GITHUB_TOKEN`. Grants `write` access for all scopes.","string":{"constant":"write-all"}},"workflow-defaults":{"description":"Use `defaults` to create a map of default settings that will apply to all jobs in the workflow. You can also set default settings that are only available to a job.\\n\\n[Documentation](https://docs.github.com/actions/using-workflows/workflow-syntax-for-github-actions#defaults)","mapping":{"properties":{"run":"workflow-defaults-run"}}},"workflow-defaults-run":{"mapping":{"properties":{"shell":"shell","working-directory":"working-directory"}}},"workflow-env":{"description":"A map of environment variables that are available to the steps of all jobs in the workflow. You can also set environment variables that are only available to the steps of a single job or to a single step.\\n\\n[Documentation](https://docs.github.com/actions/using-workflows/workflow-syntax-for-github-actions#env)","context":["github","inputs","vars","secrets"],"mapping":{"loose-key-type":"non-empty-string","loose-value-type":"string"}},"jobs":{"description":"A workflow run is made up of one or more `jobs`, which run in parallel by default. To run jobs sequentially, you can define dependencies on other jobs using the `jobs.<job_id>.needs` keyword. Each job runs in a runner environment specified by `runs-on`.\\n\\n[Documentation](https://docs.github.com/actions/using-workflows/workflow-syntax-for-github-actions#jobs)","mapping":{"loose-key-type":"job-id","loose-value-type":"job"}},"job-id":{"string":{"require-non-empty":true},"description":"A unique identifier for the job. The identifier must start with a letter or _ and contain only alphanumeric characters, -, or _."},"job":{"description":"Each job must have an id to associate with the job. The key `job_id` is a string and its value is a map of the job\'s configuration data. You must replace `<job_id>` with a string that is unique to the jobs object. The `<job_id>` must start with a letter or _ and contain only alphanumeric characters, -, or _.","one-of":["job-factory","workflow-job"]},"job-factory":{"mapping":{"properties":{"needs":"needs","if":"job-if","strategy":"strategy","name":{"type":"string-strategy-context","description":"The name of the job displayed on GitHub."},"runs-on":{"type":"runs-on","required":true},"timeout-minutes":{"type":"number-strategy-context","description":"The maximum number of minutes to let a workflow run before GitHub automatically cancels it. Default: 360"},"cancel-timeout-minutes":"number-strategy-context","continue-on-error":{"type":"boolean-strategy-context","description":"Prevents a workflow run from failing when a job fails. Set to true to allow a workflow run to pass when this job fails."},"container":"container","services":"services","env":"job-env","environment":"job-environment","permissions":"permissions","concurrency":"job-concurrency","outputs":"job-outputs","defaults":"job-defaults","steps":"steps","snapshot":"snapshot"}}},"workflow-job":{"mapping":{"properties":{"name":{"type":"string-strategy-context","description":"The name of the job displayed on GitHub."},"uses":{"description":"The location and version of a reusable workflow file to run as a job. Use one of the following formats:\\n\\n* `{owner}/{repo}/.github/workflows/{filename}@{ref}` for reusable workflows in public and private repositories.\\n* `./.github/workflows/{filename}` for reusable workflows in the same repository.\\n\\n{ref} can be a SHA, a release tag, or a branch name. Using the commit SHA is the safest for stability and security.","type":"non-empty-string","required":true},"with":"workflow-job-with","secrets":"workflow-job-secrets","needs":"needs","if":"job-if","permissions":"permissions","concurrency":"job-concurrency","strategy":"strategy"}}},"workflow-job-with":{"description":"When a job is used to call a reusable workflow, you can use `with` to provide a map of inputs that are passed to the called workflow.\\n\\nAny inputs that you pass must match the input specifications defined in the called workflow.","mapping":{"loose-key-type":"non-empty-string","loose-value-type":"scalar-needs-context"}},"workflow-job-secrets":{"description":"When a job is used to call a reusable workflow, you can use `secrets` to provide a map of secrets that are passed to the called workflow.\\n\\nAny secrets that you pass must match the names defined in the called workflow.","one-of":["workflow-job-secrets-mapping","workflow-job-secrets-inherit"]},"workflow-job-secrets-mapping":{"mapping":{"loose-key-type":"non-empty-string","loose-value-type":"scalar-needs-context-with-secrets"}},"workflow-job-secrets-inherit":{"string":{"constant":"inherit"}},"needs":{"description":"Use `needs` to identify any jobs that must complete successfully before this job will run. It can be a string or array of strings. If a job fails, all jobs that need it are skipped unless the jobs use a conditional expression that causes the job to continue. If a run contains a series of jobs that need each other, a failure applies to all jobs in the dependency chain from the point of failure onwards.","one-of":["sequence-of-non-empty-string","non-empty-string"]},"job-if":{"description":"You can use the `if` conditional to prevent a job from running unless a condition is met. You can use any supported context and expression to create a conditional.","context":["github","inputs","vars","needs","always(0,0)","failure(0,MAX)","cancelled(0,0)","success(0,MAX)"],"string":{}},"job-if-result":{"context":["github","inputs","vars","needs","always(0,0)","failure(0,MAX)","cancelled(0,0)","success(0,MAX)"],"one-of":["null","boolean","number","string","sequence","mapping"]},"strategy":{"description":"Use `strategy` to use a matrix strategy for your jobs. A matrix strategy lets you use variables in a single job definition to automatically create multiple job runs that are based on the combinations of the variables. ","context":["github","inputs","vars","needs"],"mapping":{"properties":{"fail-fast":{"type":"boolean","description":"Setting `fail-fast` to `false` prevents GitHub from canceling all in-progress jobs if any matrix job fails. Default: `true`"},"max-parallel":{"type":"number","description":"The maximum number of jobs that can run simultaneously when using a matrix job strategy. By default, GitHub will maximize the number of jobs run in parallel depending on runner availability."},"matrix":"matrix"}}},"matrix":{"description":"Use `matrix` to define a matrix of different job configurations. Within your matrix, define one or more variables followed by an array of values.","mapping":{"properties":{"include":{"type":"matrix-filter","description":"Use `include` to expand existing matrix configurations or to add new configurations. The value of `include` is a list of objects.\\n\\nFor each object in the `include` list, the key:value pairs in the object will be added to each of the matrix combinations if none of the key:value pairs overwrite any of the original matrix values. If the object cannot be added to any of the matrix combinations, a new matrix combination will be created instead. Note that the original matrix values will not be overwritten, but added matrix values can be overwritten."},"exclude":{"type":"matrix-filter","description":"To remove specific configurations defined in the matrix, use `exclude`. An excluded configuration only has to be a partial match for it to be excluded."}},"loose-key-type":"non-empty-string","loose-value-type":"sequence"}},"matrix-filter":{"sequence":{"item-type":"matrix-filter-item"}},"matrix-filter-item":{"mapping":{"loose-key-type":"non-empty-string","loose-value-type":"any"}},"snapshot":{"description":"Use `snapshot` to define a custom image you want to create or update after your job succeeds by taking a snapshot of your runner.","one-of":["non-empty-string","snapshot-mapping"]},"snapshot-mapping":{"mapping":{"properties":{"image-name":{"description":"The desired name of the custom image you want to create or update.","type":"non-empty-string","required":true},"if":"snapshot-if","version":{"description":"The desired major version updates upon a new custom image version creation.","type":"non-empty-string"}}}},"snapshot-if":{"context":["github","inputs","vars","needs","strategy","matrix"],"description":"Use the if conditional to prevent a snapshot from being taken unless a condition is met. Any supported context and expression can be used to create a conditional. Expressions in an `if` conditional do not require the bracketed expression syntax. When you use expressions in an `if` conditional, you may omit the expression syntax because GitHub automatically evaluates the `if` conditional as an expression.","string":{}},"runs-on":{"description":"Use `runs-on` to define the type of machine to run the job on.\\n* The destination machine can be either a GitHub-hosted runner, larger runner, or a self-hosted runner.\\n* You can target runners based on the labels assigned to them, or their group membership, or a combination of these.\\n* You can provide `runs-on` as a single string or as an array of strings.\\n* If you specify an array of strings, your workflow will execute on any runner that matches all of the specified `runs-on` values.\\n* If you would like to run your workflow on multiple machines, use `jobs.<job_id>.strategy`.","context":["github","inputs","vars","needs","strategy","matrix"],"one-of":["non-empty-string","sequence-of-non-empty-string","runs-on-mapping"]},"runs-on-mapping":{"mapping":{"properties":{"group":{"description":"The group from which to select a runner.","type":"non-empty-string"},"labels":"runs-on-labels"}}},"runs-on-labels":{"description":"The label by which to filter for available runners.","one-of":["non-empty-string","sequence-of-non-empty-string"]},"job-env":{"description":"A map of variables that are available to all steps in the job.","context":["github","inputs","vars","needs","strategy","matrix","secrets"],"mapping":{"loose-key-type":"non-empty-string","loose-value-type":"string"}},"workflow-concurrency":{"description":"Concurrency ensures that only a single job or workflow using the same concurrency group will run at a time. A concurrency group can be any string or expression.\\n\\nYou can also specify `concurrency` at the job level.\\n\\n[Documentation](https://docs.github.com/actions/using-workflows/workflow-syntax-for-github-actions#concurrency)","context":["github","inputs","vars"],"one-of":["string","concurrency-mapping"]},"job-concurrency":{"description":"Concurrency ensures that only a single job using the same concurrency group will run at a time. A concurrency group can be any string or expression. The expression can use any context except for the `secrets` context.\\n\\nYou can also specify `concurrency` at the workflow level.","context":["github","inputs","vars","needs","strategy","matrix"],"one-of":["non-empty-string","concurrency-mapping"]},"concurrency-mapping":{"description":"Concurrency ensures that only a single job or workflow using the same concurrency group will run at a time. A concurrency group can be any string or expression.\\n\\nYou can also specify `concurrency` at the job level.\\n\\n[Documentation](https://docs.github.com/actions/using-workflows/workflow-syntax-for-github-actions#concurrency)","mapping":{"properties":{"group":{"type":"non-empty-string","required":true,"description":"When a concurrent job or workflow is queued, if another job or workflow using the same concurrency group in the repository is in progress, the queued job or workflow will be `pending`. Any previously pending job or workflow in the concurrency group will be canceled. To also cancel any currently running job or workflow in the same concurrency group, specify `cancel-in-progress: true`."},"cancel-in-progress":{"type":"boolean","description":"To cancel any currently running job or workflow in the same concurrency group, specify cancel-in-progress: true."}}}},"job-environment":{"description":"The environment that the job references. All environment protection rules must pass before a job referencing the environment is sent to a runner.","context":["github","inputs","vars","needs","strategy","matrix"],"one-of":["string","job-environment-mapping"]},"job-environment-mapping":{"mapping":{"properties":{"name":{"type":"job-environment-name","required":true},"url":{"type":"string-runner-context-no-secrets","description":"The environment URL, which maps to `environment_url` in the deployments API."}}}},"job-environment-name":{"description":"The name of the environment used by the job.","context":["github","inputs","vars","needs","strategy","matrix"],"string":{}},"job-defaults":{"description":"A map of default settings that will apply to all steps in the job. You can also set default settings for the entire workflow.","mapping":{"properties":{"run":"job-defaults-run"}}},"job-defaults-run":{"context":["github","inputs","vars","strategy","matrix","needs","env"],"mapping":{"properties":{"shell":"shell","working-directory":"working-directory"}}},"job-outputs":{"description":"A map of outputs for a called workflow. Called workflow outputs are available to all downstream jobs in the caller workflow. Each output has an identifier, an optional `description,` and a `value`. The `value` must be set to the value of an output from a job within the called workflow.","mapping":{"loose-key-type":"non-empty-string","loose-value-type":"string-runner-context"}},"steps":{"description":"A job contains a sequence of tasks called `steps`. Steps can run commands, run setup tasks, or run an action in your repository, a public repository, or an action published in a Docker registry. Not all steps run actions, but all actions run as a step. Each step runs in its own process in the runner environment and has access to the workspace and filesystem. Because steps run in their own process, changes to environment variables are not preserved between steps. GitHub provides built-in steps to set up and complete a job. Must contain either `uses` or `run`.","sequence":{"item-type":"steps-item"}},"steps-item":{"one-of":["run-step","regular-step"]},"run-step":{"mapping":{"properties":{"name":"step-name","id":"step-id","if":"step-if","timeout-minutes":"step-timeout-minutes","run":{"type":"string-steps-context","description":"Runs command-line programs using the operating system\'s shell. If you do not provide a `name`, the step name will default to the text specified in the `run` command. Commands run using non-login shells by default. You can choose a different shell and customize the shell used to run commands. Each `run` keyword represents a new process and shell in the virtual environment. When you provide multi-line commands, each line runs in the same shell.","required":true},"continue-on-error":"step-continue-on-error","env":"step-env","working-directory":"string-steps-context","shell":"shell"}}},"regular-step":{"mapping":{"properties":{"name":"step-name","id":"step-id","if":"step-if","continue-on-error":"step-continue-on-error","timeout-minutes":"step-timeout-minutes","uses":{"type":"step-uses","required":true},"with":"step-with","env":"step-env"}}},"step-uses":{"description":"Selects an action to run as part of a step in your job. An action is a reusable unit of code. You can use an action defined in the same repository as the workflow, a public repository, or in a published Docker container image.","string":{"require-non-empty":true}},"step-continue-on-error":{"context":["github","inputs","vars","needs","strategy","matrix","secrets","steps","job","runner","env","hashFiles(1,255)"],"boolean":{},"description":"Prevents a job from failing when a step fails. Set to `true` to allow a job to pass when this step fails."},"step-id":{"string":{"require-non-empty":true},"description":"A unique identifier for the step. You can use the `id` to reference the step in contexts."},"step-if":{"context":["github","inputs","vars","needs","strategy","matrix","steps","job","runner","env","always(0,0)","failure(0,0)","cancelled(0,0)","success(0,0)","hashFiles(1,255)"],"description":"Use the `if` conditional to prevent a step from running unless a condition is met. Any supported context and expression can be used to create a conditional. Expressions in an `if` conditional do not require the bracketed expression syntax. When you use expressions in an `if` conditional, you may omit the expression syntax because GitHub automatically evaluates the `if` conditional as an expression.","string":{}},"step-if-result":{"context":["github","inputs","vars","strategy","matrix","steps","job","runner","env","always(0,0)","failure(0,0)","cancelled(0,0)","success(0,0)","hashFiles(1,255)"],"one-of":["null","boolean","number","string","sequence","mapping"]},"step-env":{"description":"Sets variables for steps to use in the runner environment. You can also set variables for the entire workflow or a job.","context":["github","inputs","vars","needs","strategy","matrix","secrets","steps","job","runner","env","hashFiles(1,255)"],"mapping":{"loose-key-type":"non-empty-string","loose-value-type":"string"}},"step-name":{"context":["github","inputs","vars","needs","strategy","matrix","secrets","steps","job","runner","env","hashFiles(1,255)"],"string":{},"description":"A name for your step to display on GitHub."},"step-timeout-minutes":{"context":["github","inputs","vars","needs","strategy","matrix","secrets","steps","job","runner","env","hashFiles(1,255)"],"number":{},"description":"The maximum number of minutes to run the step before killing the process."},"step-with":{"description":"A map of the input parameters defined by the action. Each input parameter is a key/value pair. Input parameters are set as variables. When you specify an input in a workflow file or use a default input value, GitHub creates a variable for the input with the name `INPUT_<VARIABLE_NAME>`. The variable created converts input names to uppercase letters and replaces spaces with `_`.","context":["github","inputs","vars","needs","strategy","matrix","secrets","steps","job","runner","env","hashFiles(1,255)"],"mapping":{"loose-key-type":"non-empty-string","loose-value-type":"string"}},"container":{"description":"A container to run any steps in a job that don\'t already specify a container. If you have steps that use both script and container actions, the container actions will run as sibling containers on the same network with the same volume mounts.\\n\\nIf you do not set a container, all steps will run directly on the host specified by runs-on unless a step refers to an action configured to run in a container.","context":["github","inputs","vars","needs","strategy","matrix"],"one-of":["string","container-mapping"]},"container-mapping":{"mapping":{"properties":{"image":{"type":"non-empty-string","description":"Use `jobs.<job_id>.container.image` to define the Docker image to use as the container to run the action. The value can be the Docker Hub image or a registry name."},"options":{"type":"string","description":"Use `jobs.<job_id>.container.options` to configure additional Docker container resource options."},"env":"container-env","ports":{"type":"sequence-of-non-empty-string","description":"Use `jobs.<job_id>.container.ports` to set an array of ports to expose on the container."},"volumes":{"type":"sequence-of-non-empty-string","description":"Use `jobs.<job_id>.container.volumes` to set an array of volumes for the container to use. You can use volumes to share data between services or other steps in a job. You can specify named Docker volumes, anonymous Docker volumes, or bind mounts on the host."},"credentials":"container-registry-credentials"}}},"services":{"description":"Additional containers to host services for a job in a workflow. These are useful for creating databases or cache services like redis. The runner on the virtual machine will automatically create a network and manage the life cycle of the service containers. When you use a service container for a job or your step uses container actions, you don\'t need to set port information to access the service. Docker automatically exposes all ports between containers on the same network. When both the job and the action run in a container, you can directly reference the container by its hostname. The hostname is automatically mapped to the service name. When a step does not use a container action, you must access the service using localhost and bind the ports.","context":["github","inputs","vars","needs","strategy","matrix"],"mapping":{"loose-key-type":"non-empty-string","loose-value-type":"services-container"}},"services-container":{"context":["github","inputs","vars","needs","strategy","matrix"],"one-of":["non-empty-string","container-mapping"]},"container-registry-credentials":{"description":"If the image\'s container registry requires authentication to pull the image, you can use `jobs.<job_id>.container.credentials` to set a map of the username and password. The credentials are the same values that you would provide to the `docker login` command.","context":["github","inputs","vars","secrets","env"],"mapping":{"properties":{"username":"non-empty-string","password":"non-empty-string"}}},"container-env":{"description":"Use `jobs.<job_id>.container.env` to set a map of variables in the container.","mapping":{"loose-key-type":"non-empty-string","loose-value-type":"string-runner-context"}},"non-empty-string":{"string":{"require-non-empty":true}},"sequence-of-non-empty-string":{"sequence":{"item-type":"non-empty-string"}},"sequence-of-string":{"sequence":{"item-type":"string"}},"boolean-needs-context":{"context":["github","inputs","vars","needs"],"boolean":{}},"number-needs-context":{"context":["github","inputs","vars","needs"],"number":{}},"string-needs-context":{"context":["github","inputs","vars","needs"],"string":{}},"scalar-needs-context":{"context":["github","inputs","vars","needs","strategy","matrix"],"one-of":["string","boolean","number"]},"scalar-needs-context-with-secrets":{"context":["github","inputs","vars","needs","secrets","strategy","matrix"],"one-of":["string","boolean","number"]},"boolean-strategy-context":{"context":["github","inputs","vars","needs","strategy","matrix"],"boolean":{}},"number-strategy-context":{"context":["github","inputs","vars","needs","strategy","matrix"],"number":{}},"string-strategy-context":{"context":["github","inputs","vars","needs","strategy","matrix"],"string":{}},"boolean-steps-context":{"context":["github","inputs","vars","needs","strategy","matrix","secrets","steps","job","runner","env","hashFiles(1,255)"],"boolean":{}},"number-steps-context":{"context":["github","inputs","vars","needs","strategy","matrix","secrets","steps","job","runner","env","hashFiles(1,255)"],"number":{}},"string-runner-context":{"context":["github","inputs","vars","needs","strategy","matrix","secrets","steps","job","runner","env"],"string":{}},"string-runner-context-no-secrets":{"context":["github","inputs","vars","needs","strategy","matrix","steps","job","runner","env"],"string":{}},"string-steps-context":{"context":["github","inputs","vars","needs","strategy","matrix","secrets","steps","job","runner","env","hashFiles(1,255)"],"string":{}},"shell":{"string":{"require-non-empty":true},"description":"Use `shell` to override the default shell settings in the runner\'s operating system. You can use built-in shell keywords, or you can define a custom set of shell options. The shell command that is run internally executes a temporary file that contains the commands specified in `run`."},"working-directory":{"string":{"require-non-empty":true},"description":"The `working-directory` keyword specifies the working directory where the command is run."},"cron-mapping":{"mapping":{"properties":{"cron":"cron-pattern"}}},"cron-pattern":{"string":{"require-non-empty":true}}}}');let GE;class ZE{constructor(e,t){this.lineCounter=new bk,this.errors=[],this.doc=Mk(t,{lineCounter:this.lineCounter,keepSourceTokens:!0,uniqueKeys:!1});for(const e of this.doc.errors)this.errors.push({message:e.message,range:QE(e.linePos)});this._generator=this.getNodes(this.doc,new Set),this.fileId=e}*getNodes(e,t){let n=this.getRange(e);if(nb(e)){yield new IE(DE.DocumentStart);for(const t of this.getNodes(e.contents,new Set))yield t;yield new IE(DE.DocumentEnd)}if(ab(e)){sb(e)?yield new IE(DE.SequenceStart,new VS(this.fileId,n,void 0)):rb(e)&&(yield new IE(DE.MappingStart,new FS(this.fileId,n,void 0)));for(const n of e.items)for(const e of this.getNodes(n,t))yield e;sb(e)?yield new IE(DE.SequenceEnd):rb(e)&&(yield new IE(DE.MappingEnd))}if(ib(e)&&(yield new IE(DE.Literal,ZE.getLiteralToken(this.fileId,n,e))),tb(e)){const n=e.resolve(this.doc);if(n){if(t.has(n))return;const e=new Set(t);e.add(n),yield*this.getNodes(n,e)}return}if(ob(e)){const r=e.key;n=this.getRange(r);const o=r.value;yield new IE(DE.Literal,new RS(this.fileId,n,o,void 0));for(const n of this.getNodes(e.value,t))yield n}}getRange(e){const t=e?.range??[],n=t[0],r=t[1];if(void 0!==n&&void 0!==r){const e=this.lineCounter.linePos(n),t=this.lineCounter.linePos(r);return{start:{line:e.line,column:e.col},end:{line:t.line,column:t.col}}}}static getLiteralToken(e,t,n){const r=n.value;if(null==r)return new zS(e,t,void 0);switch(typeof r){case"number":return new BS(e,t,r,void 0);case"boolean":return new $S(e,t,r,void 0);case"string":{let o,i;if(n.srcToken&&"source"in n.srcToken&&(o=n.srcToken.source,"block-scalar"===n.srcToken.type&&"props"in n.srcToken)){const e=n.srcToken.props.find(e=>"block-scalar-header"===e.type);e?.source&&(i=e.source)}return new RS(e,t,r,void 0,o,i)}default:throw new Error(`Unexpected value type '${typeof r}' when reading object`)}}allowLiteral(){if(!this._current.done){const e=this._current.value;if(e.type===DE.Literal)return this._current=this._generator.next(),e.token}}allowSequenceStart(){if(!this._current.done){const e=this._current.value;if(e.type===DE.SequenceStart)return this._current=this._generator.next(),e.token}}allowSequenceEnd(){return!this._current.done&&this._current.value.type===DE.SequenceEnd&&(this._current=this._generator.next(),!0)}allowMappingStart(){if(!this._current.done){const e=this._current.value;if(e.type===DE.MappingStart)return this._current=this._generator.next(),e.token}}allowMappingEnd(){return!this._current.done&&this._current.value.type===DE.MappingEnd&&(this._current=this._generator.next(),!0)}validateEnd(){if(this._current.done||this._current.value.type!==DE.DocumentEnd)throw new Error("Expected end of reader");this._current=this._generator.next()}validateStart(){if(this._current||(this._current=this._generator.next()),this._current.done||this._current.value.type!==DE.DocumentStart)throw new Error("Expected start of reader");this._current=this._generator.next()}}function QE(e){if(void 0===e)return;const t={line:e[0].line,column:e[0].col};return{start:t,end:2==e.length?{line:e[1].line,column:e[1].col}:t}}var JE,eC;n(997),function(e){e.string="string",e.choice="choice",e.boolean="boolean",e.environment="environment"}(JE=JE||(JE={})),function(e){e[e.ReturnErrorsOnly=0]="ReturnErrorsOnly",e[e.TryConversion=1]="TryConversion"}(eC=eC||(eC={})),eC.ReturnErrorsOnly;const tC=new RE;function nC(e,t="workflow.yml"){try{return function(e,t){const n=t instanceof Vk?t:new Vk(new Fk,function(){if(void 0===GE){const e=JSON.stringify(YE);GE=XE.load(new LE(void 0,e))}return GE}(),t),r=n.getFileId(e.name),o=new ZE(r,e.content);if(o.errors.length>0){for(const e of o.errors)n.error(r,e.message,e.range);return{context:n,value:void 0}}return{context:n,value:jE(n,"workflow-root-strict",o,r)}}({name:t,content:e},tC).context.errors.getErrors().map(e=>({message:e.message,path:e.prefix||void 0,severity:"error"}))}catch(e){return[{message:`Validation failed: ${e instanceof Error?e.message:String(e)}`,severity:"error"}]}}const rC=Im.define(Kv);function oC({initialYaml:e,onClose:t,onSave:n}){const i=(0,o.useRef)(null),s=(0,o.useRef)(null),a=(0,o.useRef)(null);a.current=()=>f(null);const[l,c]=(0,o.useState)(null),[u,d]=(0,o.useState)([]),[h,f]=(0,o.useState)(null);(0,o.useEffect)(()=>{const t=i.current;if(!t)return;const n=Np.theme({"&":{backgroundColor:"transparent",height:"100%",minHeight:0,display:"flex",flexDirection:"column"},"&.cm-focused":{outline:"none"},".cm-scroller":{overflow:"auto",flex:1,minHeight:0},".cm-content":{fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace",fontSize:"0.875rem",padding:"1rem"}}),r=Wc.create({doc:e,extensions:[rC,...document.documentElement.classList.contains("dark")?[Ov]:[xm(Em)],Ip.of(dv),n,Np.updateListener.of(e=>{e.docChanged&&a.current?.()})]}),o=new Np({state:r,parent:t});return s.current=o,o.focus(),()=>{o.destroy(),s.current=null}},[]),(0,o.useEffect)(()=>{c(null),d([]),f(null)},[e]),(0,o.useEffect)(()=>{const e=e=>{"Escape"!==e.key||t()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t]);const p=()=>s.current?.state.doc.toString()??"";return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 dark:bg-black/70 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"source-dialog-title",onClick:e=>{e.target===e.currentTarget&&t()},children:(0,r.jsxs)("div",{className:"flex h-[85vh] w-full max-w-4xl flex-col rounded-lg bg-white dark:bg-slate-800 shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-200 dark:border-slate-700 px-4 py-3",children:[(0,r.jsx)("h2",{id:"source-dialog-title",className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Workflow source (YAML)"}),(0,r.jsx)("button",{type:"button",onClick:t,className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"Close",children:(0,r.jsx)("span",{className:"text-xl leading-none",children:""})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-100 dark:border-slate-700 px-4 py-2",children:[(0,r.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Edit the YAML below. The flow diagram updates only when you click Save."}),(0,r.jsxs)("button",{type:"button",onClick:()=>{c(null);const e=p(),{errors:t}=Pk(e);if(t.length>0&&(t[0].includes("YAML parse error")||t[0].includes("Invalid workflow")))return c(t[0]),d([]),void f(!1);const n=nC(e);d(n),f(0===n.length)},className:"inline-flex items-center gap-1.5 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-2 py-1 text-xs text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:[!0===h&&(0,r.jsx)(al,{className:"shrink-0 text-green-600 dark:text-green-400",size:14,"aria-hidden":!0}),!1===h&&(0,r.jsx)(pl,{className:"shrink-0 text-red-600 dark:text-red-400",size:14,"aria-hidden":!0}),"Check syntax"]})]}),(0,r.jsx)("div",{ref:i,className:"flex-1 min-h-0 flex flex-col rounded-none border-0 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 overflow-hidden","aria-label":"Workflow YAML content"}),(l||u.length>0)&&(0,r.jsxs)("div",{role:"alert",className:"border-t border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/30 px-4 py-2 text-sm text-amber-800 dark:text-amber-200 max-h-40 overflow-y-auto",children:[l&&(0,r.jsx)("div",{className:"mb-2 font-medium",children:l}),u.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-1 font-medium",children:[u.length," lint error",1!==u.length?"s":"",":"]}),(0,r.jsx)("ul",{className:"ml-4 list-disc space-y-0.5 text-xs",children:u.map((e,t)=>(0,r.jsx)("li",{children:(0,r.jsxs)("span",{className:"error"===e.severity?"font-medium":"",children:[e.path&&(0,r.jsxs)("code",{className:"text-xs",children:[e.path,":"]})," ",e.message]})},t))})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 border-t border-slate-200 dark:border-slate-700 px-4 py-3",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-3 py-1.5 text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"Cancel"}),(0,r.jsx)("button",{type:"button",onClick:()=>{c(null);const e=p(),{workflow:r,errors:o}=Pk(e);if(o.length>0&&(o[0].includes("YAML parse error")||o[0].includes("Invalid workflow")))return c(o[0]),void f(!1);const i=nC(e);d(i),n(r,o),t()},className:"rounded bg-slate-800 dark:bg-slate-700 px-3 py-1.5 text-sm text-white dark:text-slate-200 hover:bg-slate-700 dark:hover:bg-slate-600",children:"Save changes"})]})]})})}function iC({message:e,onConfirm:t,onCancel:n}){return(0,o.useEffect)(()=>{const e=e=>{"Escape"!==e.key?"Enter"===e.key&&(e.preventDefault(),t()):n()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,n]),(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 dark:bg-black/70 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"confirm-dialog-title",onClick:e=>{e.target===e.currentTarget&&n()},children:(0,r.jsxs)("div",{className:"flex w-full max-w-md flex-col rounded-lg bg-white dark:bg-slate-800 shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-200 dark:border-slate-700 px-4 py-3",children:[(0,r.jsx)("h2",{id:"confirm-dialog-title",className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Confirm"}),(0,r.jsx)("button",{type:"button",onClick:n,className:"rounded p-1 text-slate-400 dark:text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"Close",children:(0,r.jsx)("span",{className:"text-xl leading-none",children:""})})]}),(0,r.jsx)("div",{className:"px-4 py-4",children:(0,r.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:e})}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 border-t border-slate-200 dark:border-slate-700 px-4 py-3",children:[(0,r.jsx)("button",{type:"button",onClick:n,className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 px-3 py-1.5 text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"Cancel"}),(0,r.jsx)("button",{type:"button",onClick:t,className:"rounded bg-red-600 dark:bg-red-700 px-3 py-1.5 text-sm text-white hover:bg-red-700 dark:hover:bg-red-600",children:"Delete"})]})]})})}function sC(e,t,n){if(null==e||"object"!=typeof e||Array.isArray(e))return{name:`Step ${n+1}`,run:""};const r=e;return{id:"string"==typeof r.id?r.id:void 0,name:"string"==typeof r.name?r.name:void 0,uses:"string"==typeof r.uses?r.uses:void 0,run:"string"==typeof r.run?r.run:void 0,with:"object"!=typeof r.with||null===r.with||Array.isArray(r.with)?void 0:r.with,env:"object"!=typeof r.env||null===r.env||Array.isArray(r.env)?void 0:r.env,shell:"string"==typeof r.shell?r.shell:void 0,...r}}function aC(e){const t={...e};void 0!==e.name&&(t.name=e.name),void 0!==e["run-name"]&&(t["run-name"]=e["run-name"]),t.on=e.on,e.env&&Object.keys(e.env).length>0&&(t.env=e.env);const n={};for(const[t,r]of Object.entries(e.jobs)){const{steps:e,strategy:o,...i}=r,s={...i,"runs-on":r["runs-on"],steps:e.map(e=>lC(e))};if(o){const e={};o.matrix&&Object.keys(o.matrix).length>0&&(e.matrix=o.matrix),void 0!==o["fail-fast"]&&(e["fail-fast"]=o["fail-fast"]),void 0!==o["max-parallel"]&&(e["max-parallel"]=o["max-parallel"]),Object.keys(e).length>0&&(s.strategy=e)}n[t]=s}return t.jobs=n,jk.stringify(t,{indent:2,lineWidth:0,collectionStyle:"block",defaultStringType:"PLAIN"})}function lC(e){const{id:t,name:n,uses:r,run:o,with:i,env:s,shell:a,...l}=e,c={...l};return void 0!==t&&(c.id=t),void 0!==n&&(c.name=n),void 0!==r&&(c.uses=r),void 0!==o&&(c.run=o),i&&Object.keys(i).length>0&&(c.with=i),s&&Object.keys(s).length>0&&(c.env=s),void 0!==a&&(c.shell=a),c}function cC(){return window.vscode}function uC(e){if(!e)return[];if("string"==typeof e)return[{event:e,config:{}}];if(Array.isArray(e))return e.flatMap(e=>"string"==typeof e?[{event:e,config:{}}]:"object"==typeof e&&null!==e?Object.entries(e).map(([e,t])=>({event:e,config:t??{}})):[]);if("object"==typeof e&&null!==e){const t=[];for(const[n,r]of Object.entries(e))if("schedule"===n&&Array.isArray(r))for(const e of r)"object"==typeof e&&null!==e&&"cron"in e?t.push({event:n,config:{cron:e.cron}}):t.push({event:n,config:{}});else t.push({event:n,config:r??{}});return t}return[]}new Set(["branch_protection_rule","check_run","check_suite","discussion","discussion_comment","issue_comment","issues","label","merge_group","milestone","pull_request","pull_request_review","pull_request_review_comment","pull_request_target","registry_package","release","repository_dispatch","watch","workflow_run"]);const dC={job:El,trigger:Vv,addJob:bl},hC={name:"Sample",on:{push:{branches:["main"]}},jobs:{build:{"runs-on":"ubuntu-latest",steps:[{run:"echo build"}]},test:{needs:"build","runs-on":"ubuntu-latest",steps:[{run:"echo test"}]}}};function fC(){const[,e]=(0,o.useState)("dark"),[t,n]=(0,o.useState)(null),[i,s]=(0,o.useState)(null),a=(0,o.useRef)([]);(0,o.useEffect)(()=>{const t=t=>{const n=t.detail.theme;e(n);const r=document.documentElement;"dark"===n?r.classList.add("dark"):r.classList.remove("dark")};window.addEventListener("vscode-themeChanged",t);const n=cC();return n&&n.postMessage?n.postMessage({command:"getTheme"}):console.error("VSCode API not available"),()=>{window.removeEventListener("vscode-themeChanged",t)}},[]),(0,o.useEffect)(()=>{const e=e=>{const{content:t}=e.detail,{workflow:r,errors:o}=function(e){const{workflow:t,errors:n}=function(e){const t=[];if(""===e.trim())return{workflow:{name:"",on:{},jobs:{}},errors:[]};let n;try{n=jk.parse(e,{strict:!1})}catch(e){return{workflow:{name:"",on:{},jobs:{}},errors:[`YAML parse error: ${e instanceof Error?e.message:String(e)}`]}}if(null==n||"object"!=typeof n)return{workflow:{name:"",on:{},jobs:{}},errors:["Invalid workflow: root must be an object"]};const r=n;"jobs"in r&&null!=r.jobs&&"object"==typeof r.jobs||t.push('Workflow must have a "jobs" object');const o=r.jobs??{},i={...r,name:"string"==typeof r.name?r.name:void 0,"run-name":"string"==typeof r["run-name"]?r["run-name"]:void 0,on:r.on??{},env:"object"!=typeof r.env||null===r.env||Array.isArray(r.env)?void 0:r.env,jobs:{}};for(const[e,n]of Object.entries(o)){if(null==n||"object"!=typeof n||Array.isArray(n)){t.push(`Job "${e}" must be an object`);continue}const r=n,o=Array.isArray(r.steps)?r.steps:[];let s;if(r.strategy&&"object"==typeof r.strategy&&null!==r.strategy&&!Array.isArray(r.strategy)){const e=r.strategy,t="object"!=typeof e.matrix||null===e.matrix||Array.isArray(e.matrix)?void 0:e.matrix,n="boolean"==typeof e["fail-fast"]?e["fail-fast"]:void 0,o="number"==typeof e["max-parallel"]?e["max-parallel"]:void 0;(t||void 0!==n||void 0!==o)&&(s={matrix:t,"fail-fast":n,"max-parallel":o})}i.jobs[e]={...r,name:"string"==typeof r.name?r.name:void 0,"runs-on":"string"==typeof r["runs-on"]||Array.isArray(r["runs-on"])?r["runs-on"]:"ubuntu-latest",needs:r.needs,permissions:"object"!=typeof r.permissions||null===r.permissions||Array.isArray(r.permissions)?void 0:r.permissions,env:"object"!=typeof r.env||null===r.env||Array.isArray(r.env)?void 0:r.env,strategy:s,steps:o.map((e,t)=>sC(e,0,t))}}return{workflow:i,errors:t}}(e);return{workflow:t,errors:n}}(t);a.current=[],x(!1),A.current=!0,n(r),g(o),i&&r.jobs[i]||s(null),setTimeout(()=>{A.current=!1},100)};return window.addEventListener("vscode-loadFile",e),()=>{window.removeEventListener("vscode-loadFile",e)}},[i]);const l=(0,o.useCallback)(e=>{if(!e)return;const t=a.current;t.push(JSON.parse(JSON.stringify(e))),t.length>50&&t.shift()},[]),c=(0,o.useCallback)(()=>{const e=a.current;if(0===e.length)return;const t=e.pop();t&&(A.current=!0,n(t),s(null),d(!1),setTimeout(()=>{A.current=!1},100))},[]),[u,d]=(0,o.useState)(!1),[h,f]=(0,o.useState)(!1),[p,g]=(0,o.useState)([]),[m,y]=(0,o.useState)([]),[v,b]=(0,o.useState)(!1),[w,x]=(0,o.useState)(!1),[k,S]=(0,o.useState)(null),[E,C]=(0,o.useState)(""),N=(0,o.useRef)(null),A=(0,o.useRef)(!1),_=t??{name:"",on:{},jobs:{}},{nodes:M,edges:T}=function(e){const t=Object.keys(e.jobs),n=uC(e.on),r=[],o=[];if(0===n.length){const e={id:"__trigger__0",type:"trigger",position:{x:0,y:0},data:{triggers:[]}};r.push(e)}else n.forEach((e,t)=>{const n={id:`__trigger__${t}`,type:"trigger",position:{x:0,y:160*t},data:{triggers:[e]}};r.push(n)});if(0===t.length)return{nodes:r,edges:o};const i=new Map;for(const n of t){const t=e.jobs[n],r=t.needs?Array.isArray(t.needs)?t.needs:[t.needs]:[];i.set(n,r);for(const e of r)o.push({id:`${e}-${n}`,source:e,target:n})}const s=[],a=new Set;let l=[...t];for(;l.length>0;){const e=[];for(const t of l)(i.get(t)??[]).every(e=>a.has(e))&&e.push(t);0===e.length&&e.push(l[0]);for(const t of e)a.add(t);s.push(e),l=l.filter(e=>!a.has(e))}const c=s[0]?.length??0,u=160*r.filter(e=>e.id.startsWith("__trigger__")).length-60,d=c>0?Math.max(0,140*(c-1)/2-u/2):0;r.forEach(e=>{if(e.id.startsWith("__trigger__")){const t=parseInt(e.id.replace("__trigger__",""),10);Number.isNaN(t)||(e.position.y=d+160*t)}});for(let t=0;t<s.length;t++){const n=s[t],o=320+280*t;for(let t=0;t<n.length;t++){const i=n[t],s=e.jobs[i],a=140*t,l=Array.isArray(s["runs-on"])?s["runs-on"].join(", "):String(s["runs-on"]??""),c=s.steps?.length??0,u=!!s.strategy?.matrix&&Object.keys(s.strategy.matrix).length>0;let d;u&&s.strategy?.matrix&&(d=Object.values(s.strategy.matrix).reduce((e,t)=>e*(Array.isArray(t)?t.length:1),1)),r.push({id:i,type:"job",position:{x:o,y:a},data:{jobId:i,label:s.name??i,runsOn:l,stepCount:c,hasMatrix:u,matrixCombinations:d}})}}if(s.length>0){const e=r.filter(e=>e.id.startsWith("__trigger__")).map(e=>e.id);for(const t of e)for(const e of s[0])o.push({id:`${t}-${e}`,source:t,target:e})}const h=s[s.length-1];if(h&&h.length>0){const e=320+280*(s.length-1)+200+80,t=h.length,n={id:"__add_job__",type:"addJob",position:{x:e,y:(t>0?140*(t-1)/2+40:40)-20},data:{needs:h}};r.push(n);for(const e of h)o.push({id:`${e}-__add_job__`,source:e,target:"__add_job__"})}return{nodes:r,edges:o}}(_);(0,o.useEffect)(()=>{if(t){const e=t.jobs&&Object.keys(t.jobs).length>0,n=t.on&&("string"==typeof t.on||Array.isArray(t.on)&&t.on.length>0||"object"==typeof t.on&&Object.keys(t.on).length>0);if(!e&&!n)return void y([]);const r=nC(aC(t));y(r)}else y([])},[t]);const O=(0,o.useCallback)(e=>{if(!t?.jobs[e])return;const n=t.jobs[e].name||e;C(`Are you sure you want to delete the job "${n}"? This cannot be undone.`),S(e)},[t]),j=(0,o.useCallback)(()=>{if(!k||!t?.jobs[k])return void S(null);l(t);const e={...t.jobs};delete e[k];for(const t of Object.keys(e)){const n=e[t];if(n.needs){const r=Array.isArray(n.needs)?n.needs:[n.needs],o=r.filter(e=>e!==k);o.length!==r.length&&(e[t]={...n,needs:0===o.length?void 0:1===o.length?o[0]:o})}}A.current=!0,n({...t,jobs:e}),s(null),S(null),setTimeout(()=>{A.current=!1},100)},[k,t,l]),P=(0,o.useCallback)(()=>{S(null),C("")},[]),I=(0,o.useMemo)(()=>M.map(e=>{const t="__add_job__"!==e.id&&(e.id.startsWith("__trigger__")?u:i===e.id);return"job"===e.type&&e.data&&e.data,{...e,selected:t}}),[M,i,u]);(0,o.useEffect)(()=>{i&&t&&!t.jobs[i]&&s(null)},[t,i]);const D=(0,o.useCallback)(({nodes:e})=>{if(A.current)return;if(e.find(e=>"__add_job__"===e.id))return s(null),void d(!1);const t=e.find(e=>"trigger"===e.type),n=e.find(e=>"job"===e.type);if(t)d(!0),s(null);else if(n){const e=n.data.jobId;s(e),d(!1)}else 0===e.length&&(s(null),d(!1))},[]),L=(0,o.useCallback)(()=>{if(!t)return;const e=t.name?.replace(/\s+/g,"-").toLowerCase()||"workflow";!function(e,t="workflow.yml"){const n=aC(e),r=cC();r&&r.postMessage?r.postMessage({command:"saveFile",content:n,filename:t}):console.error("VSCode API not available for saving file")}(t,`${e}.yml`)},[t]),R=(0,o.useCallback)(e=>{let t=1,n=`job-${t}`;for(;e.includes(n);)t++,n=`job-${t}`;return n},[]),B=(0,o.useCallback)(()=>{if(!t){const e={name:"Untitled Workflow",on:{push:{branches:["main"]}},jobs:{}};return A.current=!0,n(e),d(!0),s(null),void setTimeout(()=>{A.current=!1},100)}l(t);const e=function(e){if(0===e.length)return{};const t=e.filter(e=>"schedule"===e.event),n=e.filter(e=>"schedule"!==e.event),r={};if(t.length>0&&(r.schedule=t.map(e=>({cron:e.config.cron||"0 0 * * *"}))),1===n.length){const e=n[0];0===Object.keys(e.config).length?r[e.event]={}:r[e.event]=e.config}else if(n.length>1){const e=n.map(e=>0===Object.keys(e.config).length?e.event:{[e.event]:e.config});return t.length>0?[...e,{schedule:t.map(e=>({cron:e.config.cron||"0 0 * * *"}))}]:e}if(t.length>0&&0===n.length)return r;if(1===n.length&&0===t.length){const e=n[0];return 0===Object.keys(e.config).length?e.event:{[e.event]:e.config}}return r}([...uC(t.on),{event:"push",config:{}}]);A.current=!0,n({...t,on:e}),d(!0),s(null),setTimeout(()=>{A.current=!1},100)},[t,l]),$=(0,o.useCallback)(e=>{if(!t){const e={name:"Untitled Workflow",on:{push:{branches:["main"]}},jobs:{}},t=R([]);return e.jobs[t]={"runs-on":"ubuntu-latest",steps:[{run:'echo "Hello, World!"'}]},n(e),void s(t)}l(t);const r=0===uC(t.on).length?{push:{branches:["main"]}}:t.on,o=Object.keys(t.jobs),i=R(o),a={"runs-on":"ubuntu-latest",steps:[{run:'echo "Hello, World!"'}]};e&&e.length>0&&(a.needs=1===e.length?e[0]:e),A.current=!0,n({...t,on:r,jobs:{...t.jobs,[i]:a}}),s(i),setTimeout(()=>{A.current=!1},100)},[t,R,l]),z=(0,o.useCallback)((e,t)=>{if("__add_job__"===t.id){const e=t.data;e?.needs?.length&&$(e.needs)}},[$]),q=I.some(e=>"job"===e.type),V=t&&t.on&&("string"==typeof t.on||Array.isArray(t.on)&&t.on.length>0||"object"==typeof t.on&&Object.keys(t.on).length>0),F=q||V,H=(0,o.useCallback)(e=>{if(!v)return"Escape"===e.key?(d(!1),void s(null)):(e.metaKey||e.ctrlKey)&&"z"===e.key?(e.preventDefault(),void c()):void((e.metaKey||e.ctrlKey)&&"s"===e.key&&(e.preventDefault(),t&&q&&L()));"Escape"===e.key&&b(!1)},[v,t,q,L,c]);(0,o.useEffect)(()=>(window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)),[H]),(0,o.useEffect)(()=>{w&&N.current&&(N.current.focus(),N.current.select())},[w]);const W=(0,o.useCallback)(e=>{t&&(l(t),A.current=!0,n({...t,name:e||void 0}),setTimeout(()=>{A.current=!1},100))},[t,l]),U=(0,o.useCallback)(e=>{"Enter"===e.key?(e.currentTarget.blur(),x(!1)):"Escape"===e.key&&x(!1)},[]);return(0,o.useEffect)(()=>{const e=()=>{t&&q&&L()};return window.addEventListener("vscode-saveRequest",e),()=>window.removeEventListener("vscode-saveRequest",e)},[t,q,L]),(0,o.useEffect)(()=>(window.addEventListener("vscode-undoRequest",c),()=>window.removeEventListener("vscode-undoRequest",c)),[c]),(0,r.jsxs)("div",{className:"h-full w-full flex flex-col bg-slate-100 dark:bg-slate-900 pr-4 box-border max-w-full overflow-x-hidden",children:[v&&t&&(0,r.jsx)(oC,{initialYaml:aC(t),onClose:()=>b(!1),onSave:(e,r)=>{l(t),x(!1),A.current=!0,n(e),g(r),setTimeout(()=>{A.current=!1},100)}}),k&&(0,r.jsx)(iC,{message:E,onConfirm:j,onCancel:P}),(0,r.jsxs)("header",{className:"flex flex-wrap items-center gap-2 border-b border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-2 py-1 shadow-sm text-xs",children:[(0,r.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:t?w?(0,r.jsx)("input",{ref:N,type:"text",value:t.name||"",onChange:e=>W(e.target.value),onBlur:()=>x(!1),onKeyDown:U,className:"text-xs font-semibold text-slate-800 dark:text-slate-200 bg-transparent border-b-2 border-slate-400 dark:border-slate-600 focus:border-slate-600 dark:focus:border-slate-400 focus:outline-none px-1 -mx-1 min-w-0 flex-1 max-w-md",placeholder:"Untitled Workflow"}):(0,r.jsx)("h1",{className:"text-xs font-semibold text-slate-800 dark:text-slate-200 cursor-text hover:text-slate-600 dark:hover:text-slate-300 transition-colors min-w-0 flex-1",onClick:()=>x(!0),title:"Click to edit workflow name",children:t.name||"Untitled Workflow"}):(0,r.jsx)("h1",{className:"text-xs font-semibold text-slate-400 dark:text-slate-500",children:"No workflow loaded"})}),(0,r.jsx)("div",{className:"text-[11px] text-slate-400 dark:text-slate-500 font-medium",children:"Workflow Editor"}),(0,r.jsx)("div",{className:"h-5 w-px bg-slate-200 dark:bg-slate-700","aria-hidden":!0}),(0,r.jsxs)("div",{className:"flex items-center gap-2",role:"group","aria-label":"File",children:[(0,r.jsx)("button",{type:"button",onClick:()=>b(!0),disabled:!t,className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 p-1.5 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600 disabled:opacity-50",title:"View source","aria-label":"View source",children:(0,r.jsx)(ll,{className:"w-4 h-4"})}),(0,r.jsx)("button",{type:"button",onClick:()=>{t&&l(t),x(!1),n(t?null:hC)},className:"rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 p-1.5 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",title:t?"Clear":"Load sample","aria-label":t?"Clear":"Load sample",children:t?(0,r.jsx)(fl,{className:"w-4 h-4"}):(0,r.jsx)(ul,{className:"w-4 h-4"})})]}),(0,r.jsx)("div",{className:"h-5 w-px bg-slate-200","aria-hidden":!0}),(0,r.jsxs)("div",{className:"flex items-center gap-2",role:"group","aria-label":"Editor",children:[(0,r.jsx)("button",{type:"button",onClick:B,className:"rounded border border-purple-300 dark:border-purple-600 bg-purple-50 dark:bg-purple-900/30 px-1.5 py-0.5 text-xs font-medium text-purple-700 dark:text-purple-300 hover:bg-purple-100 dark:hover:bg-purple-900/50",children:"+ Add Trigger"}),(0,r.jsx)("button",{type:"button",onClick:()=>$(),className:"rounded border border-blue-300 dark:border-blue-600 bg-blue-50 dark:bg-blue-900/30 px-1.5 py-0.5 text-xs font-medium text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50",children:"+ Add Job"})]}),(0,r.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,r.jsx)("button",{type:"button",onClick:()=>f(!0),disabled:!t,className:"rounded p-1.5 disabled:opacity-50 "+(h?"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"),title:"Edit workflow name, run name, and environment variables","aria-label":"Workflow config",children:(0,r.jsx)(cl,{className:"w-4 h-4"})})})]}),(p.length>0||m.length>0)&&(0,r.jsxs)("div",{role:"alert",className:"flex flex-col gap-2 border-b border-amber-200 dark:border-amber-800 bg-amber-50 dark:bg-amber-900/30 px-3 py-1.5 text-xs text-amber-800 dark:text-amber-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{children:[(0,r.jsx)("strong",{children:"Validation:"})," ",p.length>0&&`${p.length} parse error${1!==p.length?"s":""}`,p.length>0&&m.length>0&&"  ",m.length>0&&`${m.length} lint error${1!==m.length?"s":""}`]}),(0,r.jsx)("button",{type:"button",onClick:()=>{g([]),y([])},className:"shrink-0 rounded p-1 hover:bg-amber-100 dark:hover:bg-amber-800/50","aria-label":"Dismiss errors",children:""})]}),p.length>0&&(0,r.jsxs)("div",{className:"text-xs",children:[(0,r.jsx)("strong",{children:"Parse errors:"})," ",p.join("  ")]}),m.length>0&&(0,r.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,r.jsx)("strong",{children:"Lint errors:"}),(0,r.jsx)("ul",{className:"ml-4 list-disc space-y-0.5",children:m.map((e,t)=>(0,r.jsx)("li",{children:(0,r.jsxs)("span",{className:"error"===e.severity?"font-medium":"",children:[e.path&&(0,r.jsxs)("code",{className:"text-xs",children:[e.path,":"]})," ",e.message]})},t))})]})]}),(0,r.jsxs)("main",{className:"flex-1 overflow-hidden flex",role:"main","aria-label":"Workflow diagram",children:[(0,r.jsx)("div",{className:"flex-1 relative",children:F?(0,r.jsxs)(Na,{nodes:I,edges:T,onSelectionChange:D,onNodeClick:z,nodeTypes:dC,fitView:!0,fitViewOptions:{maxZoom:.85},className:"bg-slate-50 dark:bg-slate-900",children:[(0,r.jsx)(ja,{}),(0,r.jsx)(qa,{})]},t?`flow-on-${JSON.stringify(t.on)}`:"flow"):(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-slate-50 dark:bg-slate-900 gap-4",children:[(0,r.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"No jobs in workflow."}),(0,r.jsx)("button",{type:"button",onClick:()=>$(),className:"rounded border border-blue-300 dark:border-blue-600 bg-blue-50 dark:bg-blue-900/30 px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50",children:"+ Add Your First Job"})]})}),h&&t&&(0,r.jsx)(Wv,{workflow:t,onWorkflowChange:e=>{l(t),A.current=!0,n(e),setTimeout(()=>{A.current=!1},100)},onClose:()=>f(!1)}),u&&t&&!h&&(0,r.jsx)(Hv,{workflow:t,onWorkflowChange:e=>{l(t),A.current=!0,n(e),setTimeout(()=>{A.current=!1},100)},onClose:()=>d(!1)}),i&&t&&!u&&!h&&(0,r.jsx)(Rv,{workflow:t,jobId:i,onWorkflowChange:e=>{l(t),A.current=!0,n(e),setTimeout(()=>{A.current=!1},100)},onClose:()=>s(null),onDeleteJob:O})]})]})}const pC=function(){return(0,r.jsx)(ka,{children:(0,r.jsx)(fC,{})})},gC=cC();window.addEventListener("message",e=>{const t=e.data;switch(t.command){case"loadFile":window.dispatchEvent(new CustomEvent("vscode-loadFile",{detail:{content:t.content,filename:t.filename}}));break;case"themeChanged":window.dispatchEvent(new CustomEvent("vscode-themeChanged",{detail:{theme:t.theme}}));break;case"saveRequest":window.dispatchEvent(new CustomEvent("vscode-saveRequest"));break;case"undoRequest":window.dispatchEvent(new CustomEvent("vscode-undoRequest"))}}),gC&&gC.postMessage?gC.postMessage({command:"ready"}):console.error("VSCode API not available");const mC=document.getElementById("root");if(mC)try{(0,i.H)(mC).render((0,r.jsx)(o.StrictMode,{children:(0,r.jsx)(pC,{})}))}catch(e){console.error("Failed to render React app:",e)}else console.error("Root element not found")})()})();
//# sourceMappingURL=main.js.map